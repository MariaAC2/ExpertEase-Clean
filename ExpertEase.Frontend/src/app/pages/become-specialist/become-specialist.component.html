<h2>Devino specialist!</h2>

<!-- Step Progress Indicator -->
<div class="step-progress">
  <div class="step-item" [class.active]="step === 1" [class.completed]="step > 1">
    <div class="step-number">1</div>
    <div class="step-label">Introducere detalii specialist</div>
  </div>
  <div class="step-item" [class.active]="step === 2" [class.completed]="step > 2">
    <div class="step-number">2</div>
    <div class="step-label">Alegerea categoriilor</div>
  </div>
  <div class="step-item" [class.active]="step === 3" [class.completed]="step > 3">
    <div class="step-number">3</div>
    <div class="step-label">Crearea portofoliului</div>
  </div>
  <div class="step-item" [class.active]="step === 4" [class.completed]="step > 4">
    <div class="step-number">4</div>
    <div class="step-label">Activarea contului ExpertEase</div>
  </div>
</div>

<div class="modal-overlay" *ngIf="showStep2BackAlert || showStep3BackAlert || showStep4BackAlert">
  <app-alert
    type="warning"
    title="Confirmare"
    [message]="getAlertMessage()"
    [showActions]="true"
    confirmText="Da, mÄƒ Ã®ntorc"
    cancelText="AnuleazÄƒ"
    (confirm)="handleAlertConfirm()"
    (cancel)="handleAlertCancel()">
  </app-alert>
</div>

<div class="form-wrapper">
  <div class="form-box">
    <button *ngIf="step > 1" (click)="showBackConfirmation()" class="close-button" title="Ãnapoi">
      â†
    </button>

    <ng-container [ngSwitch]="step">
      <!-- Step 1: Basic Information -->
      <app-dynamic-form *ngSwitchCase="1"
                        [fields]="step1FormFields"
                        [submitText]="'Treci la pasul urmÄƒtor'"
                        (formSubmit)="handleStep1($event)">
      </app-dynamic-form>

      <!-- Step 2: Category Selection -->
      <div *ngSwitchCase="2" class="form-layout">
        <div class="step-header">
          <h3>Alegerea categoriilor</h3>
          <p class="step-description">
            SelecteazÄƒ categoriile de servicii pe care le oferi. AceastÄƒ secÈ›iune este opÈ›ionalÄƒ - poÈ›i adÄƒuga categorii È™i mai tÃ¢rziu.
          </p>
        </div>

        <app-category-selector
          [selectedCategoryIds]="specialistData.categories || []"
          (categoryChange)="updateCategories($event)">
        </app-category-selector>

        <div class="form-group full-width">
          <div class="button-wrapper">
            <button (click)="handleStep2()" class="send-button" title="Treci la pasul urmÄƒtor">
              ContinuÄƒ cu categoriile selectate
            </button>

            <button (click)="skipCategories()" class="skip-button" title="Sari peste aceastÄƒ etapÄƒ">
              Sari peste (voi adÄƒuga categorii mai tÃ¢rziu)
            </button>
          </div>
        </div>
      </div>

      <!-- Step 3: Portfolio Upload -->
      <div *ngSwitchCase="3" class="form-layout">
        <div class="step-header">
          <h3>Crearea portofoliului</h3>
          <p class="step-description">
            AdaugÄƒ imagini cu lucrÄƒrile tale pentru a-È›i prezenta serviciile. AceastÄƒ secÈ›iune este opÈ›ionalÄƒ - poÈ›i adÄƒuga imagini È™i mai tÃ¢rziu.
          </p>
        </div>

        <div class="form-group full-width">
          <app-portfolio-upload
            [uploadedPictures]="specialistData.portfolio || []"
            (portfolioChange)="updatePortfolio($event)">
          </app-portfolio-upload>
        </div>

        <div class="form-group full-width">
          <div class="button-wrapper">
            <button (click)="handleStep3()" class="send-button" title="Treci la pasul urmÄƒtor">
              ContinuÄƒ cu portofoliul creat
            </button>

            <button (click)="skipPortfolio()" class="skip-button" title="Sari peste aceastÄƒ etapÄƒ">
              Sari peste (voi adÄƒuga imagini mai tÃ¢rziu)
            </button>
          </div>
        </div>
      </div>

      <!-- Step 4: Stripe Account Activation -->
      <div *ngSwitchCase="4" class="form-layout">
        <div class="stripe-activation-section">
          <div class="activation-header">
            <h3>ActiveazÄƒ contul pentru plÄƒÈ›i</h3>
            <p class="activation-description">
              Pentru a putea primi plÄƒÈ›i de la clienÈ›i, trebuie sÄƒ Ã®È›i configurezi contul Stripe.
              Acest proces dureazÄƒ doar cÃ¢teva minute È™i este complet securizat.
            </p>
          </div>

          <div class="activation-features">
            <div class="feature-item">
              <span class="feature-icon">ğŸ’³</span>
              <span>PrimeÈ™te plÄƒÈ›i direct Ã®n contul tÄƒu</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">ğŸ”’</span>
              <span>Securitate bancarÄƒ de nivel Ã®nalt</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon">ğŸ“Š</span>
              <span>Rapoarte detaliate despre cÃ¢È™tiguri</span>
            </div>
          </div>

          <div *ngIf="stripeActivationError" class="error-message">
            <span class="error-icon">âš ï¸</span>
            {{ stripeActivationError }}
          </div>

          <div class="button-wrapper">
            <button
              (click)="activateStripeAccount()"
              [disabled]="isActivatingStripe"
              class="send-button primary"
              title="ActiveazÄƒ contul Stripe">
              <span *ngIf="!isActivatingStripe">ğŸš€ ActiveazÄƒ contul pentru plÄƒÈ›i</span>
              <span *ngIf="isActivatingStripe">Se proceseazÄƒ...</span>
            </button>

            <!-- Optional: Make Stripe activation optional -->
            <button
              (click)="skipStripeActivation()"
              [disabled]="isActivatingStripe"
              class="skip-button"
              title="Sari peste aceastÄƒ etapÄƒ">
              Sari peste (poÈ›i activa mai tÃ¢rziu)
            </button>
          </div>

          <div class="activation-note">
            <p><strong>NotÄƒ:</strong> DacÄƒ nu activezi contul acum, poÈ›i face acest lucru oricÃ¢nd din secÈ›iunea "Profil" â†’ "Cont plÄƒÈ›i".</p>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</div>
