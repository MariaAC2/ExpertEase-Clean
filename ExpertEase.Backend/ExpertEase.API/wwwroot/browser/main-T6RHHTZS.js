import{$ as Ze,A as M,Aa as _c,B as k,Ba as ir,C as er,Ca as Se,D as we,Da as lt,E as qe,Ea as yc,F as O,Fa as rr,G as cc,Ga as W,H as lc,Ha as or,I as E,Ia as rs,J as cn,K as u,L as l,M as L,N as xe,O as Ee,P as j,Q as D,R as T,S as ze,T as d,U as he,V as G,W as uc,X as ie,Y as re,Z as oe,_ as rt,a as U,aa as Nt,b as ge,ba as di,c as Cn,ca as Ve,d as F,da as Ft,e as nc,ea as Ut,f as ic,fa as hi,g as rc,ga as dc,h as oc,ha as hc,i as sc,ia as ns,j as ac,ja as xt,k as Yi,ka as En,l as it,la as is,m as ce,ma as et,n as Zi,na as ye,o as on,oa as Z,p as K,pa as tr,q as sn,qa as nr,r as V,ra as pc,s as N,sa as mc,t as an,ta as Lt,u as J,ua as le,v as li,va as fc,w as xn,wa as B,x as Vt,xa as Bt,y as _,ya as ve,z as ui,za as gc}from"./chunk-VDIFSANO.js";var Ac=(()=>{class i{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,n){this._renderer=t,this._elementRef=n}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(n){return new(n||i)(M(ui),M(li))};static \u0275dir=we({type:i})}return i})(),vi=(()=>{class i extends Ac{static \u0275fac=(()=>{let t;return function(o){return(t||(t=an(i)))(o||i)}})();static \u0275dir=we({type:i,features:[qe]})}return i})(),un=new on(""),Du={provide:un,useExisting:it(()=>cs),multi:!0},cs=(()=>{class i extends vi{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=an(i)))(o||i)}})();static \u0275dir=we({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,o){n&1&&D("change",function(p){return o.onChange(p.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[rt([Du]),qe]})}return i})(),Pu={provide:un,useExisting:it(()=>je),multi:!0};function Ru(){let i=is()?is().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var Mu=new on(""),je=(()=>{class i extends Ac{_compositionMode;_composing=!1;constructor(t,n,o){super(t,n),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!Ru())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(n){return new(n||i)(M(ui),M(li),M(Mu,8))};static \u0275dir=we({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,o){n&1&&D("input",function(p){return o._handleInput(p.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(p){return o._compositionEnd(p.target.value)})},standalone:!1,features:[rt([Pu]),qe]})}return i})();function ls(i){return i==null||us(i)===0}function us(i){return i==null?null:Array.isArray(i)||typeof i=="string"?i.length:i instanceof Set?i.size:null}var bi=new on(""),_r=new on(""),Ou=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,qt=class{static min(e){return ku(e)}static max(e){return Vu(e)}static required(e){return Dc(e)}static requiredTrue(e){return Nu(e)}static email(e){return Fu(e)}static minLength(e){return Uu(e)}static maxLength(e){return Lu(e)}static pattern(e){return Bu(e)}static nullValidator(e){return ar()}static compose(e){return Vc(e)}static composeAsync(e){return Nc(e)}};function ku(i){return e=>{if(e.value==null||i==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function Vu(i){return e=>{if(e.value==null||i==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function Dc(i){return ls(i.value)?{required:!0}:null}function Nu(i){return i.value===!0?null:{required:!0}}function Fu(i){return ls(i.value)||Ou.test(i.value)?null:{email:!0}}function Uu(i){return e=>{let t=e.value?.length??us(e.value);return t===null||t===0?null:t<i?{minlength:{requiredLength:i,actualLength:t}}:null}}function Lu(i){return e=>{let t=e.value?.length??us(e.value);return t!==null&&t>i?{maxlength:{requiredLength:i,actualLength:t}}:null}}function Bu(i){if(!i)return ar;let e,t;return typeof i=="string"?(t="",i.charAt(0)!=="^"&&(t+="^"),t+=i,i.charAt(i.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(ls(n.value))return null;let o=n.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function ar(i){return null}function Pc(i){return i!=null}function Rc(i){return cc(i)?ic(i):i}function Mc(i){let e={};return i.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function Oc(i,e){return e.map(t=>t(i))}function qu(i){return!i.validate}function kc(i){return i.map(e=>qu(e)?e:t=>e.validate(t))}function Vc(i){if(!i)return null;let e=i.filter(Pc);return e.length==0?null:function(t){return Mc(Oc(t,e))}}function ds(i){return i!=null?Vc(kc(i)):null}function Nc(i){if(!i)return null;let e=i.filter(Pc);return e.length==0?null:function(t){let n=Oc(t,e).map(Rc);return oc(n).pipe(rc(Mc))}}function hs(i){return i!=null?Nc(kc(i)):null}function vc(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Fc(i){return i._rawValidators}function Uc(i){return i._rawAsyncValidators}function os(i){return i?Array.isArray(i)?i:[i]:[]}function cr(i,e){return Array.isArray(i)?i.includes(e):i===e}function bc(i,e){let t=os(e);return os(i).forEach(o=>{cr(t,o)||t.push(o)}),t}function wc(i,e){return os(e).filter(t=>!cr(i,t))}var lr=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ds(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hs(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Et=class extends lr{name;get formDirective(){return null}get path(){return null}},ln=class extends lr{_parent=null;name=null;valueAccessor=null},ur=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},zu={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},sf=ge(U({},zu),{"[class.ng-submitted]":"isSubmitted"}),$e=(()=>{class i extends ur{constructor(t){super(t)}static \u0275fac=function(n){return new(n||i)(M(ln,2))};static \u0275dir=we({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,o){n&2&&cn("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[qe]})}return i})(),ut=(()=>{class i extends ur{constructor(t){super(t)}static \u0275fac=function(n){return new(n||i)(M(Et,10))};static \u0275dir=we({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,o){n&2&&cn("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[qe]})}return i})();var pi="VALID",sr="INVALID",Sn="PENDING",mi="DISABLED",zt=class{},dr=class extends zt{value;source;constructor(e,t){super(),this.value=e,this.source=t}},gi=class extends zt{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},_i=class extends zt{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},In=class extends zt{status;source;constructor(e,t){super(),this.status=e,this.source=t}},hr=class extends zt{source;constructor(e){super(),this.source=e}},pr=class extends zt{source;constructor(e){super(),this.source=e}};function ps(i){return(yr(i)?i.validators:i)||null}function ju(i){return Array.isArray(i)?ds(i):i||null}function ms(i,e){return(yr(e)?e.asyncValidators:i)||null}function $u(i){return Array.isArray(i)?hs(i):i||null}function yr(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function Lc(i,e,t){let n=i.controls;if(!(e?Object.keys(n):n).length)throw new Yi(1e3,"");if(!n[t])throw new Yi(1001,"")}function Bc(i,e,t){i._forEachChild((n,o)=>{if(t[o]===void 0)throw new Yi(1002,"")})}var Tn=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xt(this.statusReactive)}set status(e){xt(()=>this.statusReactive.set(e))}_status=En(()=>this.statusReactive());statusReactive=xn(void 0);get valid(){return this.status===pi}get invalid(){return this.status===sr}get pending(){return this.status==Sn}get disabled(){return this.status===mi}get enabled(){return this.status!==mi}errors;get pristine(){return xt(this.pristineReactive)}set pristine(e){xt(()=>this.pristineReactive.set(e))}_pristine=En(()=>this.pristineReactive());pristineReactive=xn(!0);get dirty(){return!this.pristine}get touched(){return xt(this.touchedReactive)}set touched(e){xt(()=>this.touchedReactive.set(e))}_touched=En(()=>this.touchedReactive());touchedReactive=xn(!1);get untouched(){return!this.touched}_events=new nc;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(bc(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bc(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wc(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wc(e,this._rawAsyncValidators))}hasValidator(e){return cr(this._rawValidators,e)}hasAsyncValidator(e){return cr(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ge(U({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new _i(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new _i(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ge(U({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new gi(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new gi(!0,n))}markAsPending(e={}){this.status=Sn;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new In(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ge(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=mi,this.errors=null,this._forEachChild(o=>{o.disable(ge(U({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dr(this.value,n)),this._events.next(new In(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=pi,this._forEachChild(n=>{n.enable(ge(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pi||this.status===Sn)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dr(this.value,t)),this._events.next(new In(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ge(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mi:pi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Sn,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=Rc(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,o)=>n&&n._find(o),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new In(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new J,this.statusChanges=new J}_calculateStatus(){return this._allControlsDisabled()?mi:this.errors?sr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sn)?Sn:this._anyControlsHaveStatus(sr)?sr:pi}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),o=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new gi(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new _i(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yr(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ju(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=$u(this._rawAsyncValidators)}},An=class extends Tn{constructor(e,t,n){super(ps(t),ms(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Bc(this,!0,e),Object.keys(e).forEach(n=>{Lc(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let o=this.controls[n];o&&o.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,o)=>{n.reset(e?e[o]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,o)=>((n.enabled||this.disabled)&&(t[o]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((o,a)=>{n=t(n,o,a)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ss=class extends An{};var wi=new on("",{providedIn:"root",factory:()=>vr}),vr="always";function qc(i,e){return[...e.path,i]}function mr(i,e,t=vr){fs(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),Wu(i,e),Ku(i,e),Hu(i,e),Gu(i,e)}function Cc(i,e,t=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),gr(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function fr(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Gu(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function fs(i,e){let t=Fc(i);e.validator!==null?i.setValidators(vc(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=Uc(i);e.asyncValidator!==null?i.setAsyncValidators(vc(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let o=()=>i.updateValueAndValidity();fr(e._rawValidators,o),fr(e._rawAsyncValidators,o)}function gr(i,e){let t=!1;if(i!==null){if(e.validator!==null){let o=Fc(i);if(Array.isArray(o)&&o.length>0){let a=o.filter(p=>p!==e.validator);a.length!==o.length&&(t=!0,i.setValidators(a))}}if(e.asyncValidator!==null){let o=Uc(i);if(Array.isArray(o)&&o.length>0){let a=o.filter(p=>p!==e.asyncValidator);a.length!==o.length&&(t=!0,i.setAsyncValidators(a))}}}let n=()=>{};return fr(e._rawValidators,n),fr(e._rawAsyncValidators,n),t}function Wu(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&zc(i,e)})}function Hu(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&zc(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function zc(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Ku(i,e){let t=(n,o)=>{e.valueAccessor.writeValue(n),o&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function jc(i,e){i==null,fs(i,e)}function Qu(i,e){return gr(i,e)}function $c(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Ju(i){return Object.getPrototypeOf(i.constructor)===vi}function Gc(i,e){i._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function Wc(i,e){if(!e)return null;Array.isArray(e);let t,n,o;return e.forEach(a=>{a.constructor===je?t=a:Ju(a)?n=a:o=a}),o||n||t||null}function Xu(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}var Yu={provide:Et,useExisting:it(()=>St)},fi=Promise.resolve(),St=(()=>{class i extends Et{callSetDisabledState;get submitted(){return xt(this.submittedReactive)}_submitted=En(()=>this.submittedReactive());submittedReactive=xn(!1);_directives=new Set;form;ngSubmit=new J;options;constructor(t,n,o){super(),this.callSetDisabledState=o,this.form=new An({},ds(t),hs(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fi.then(()=>{let n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),mr(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fi.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fi.then(()=>{let n=this._findContainer(t.path),o=new An({});jc(o,t),n.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fi.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){fi.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Gc(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new hr(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new pr(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(n){return new(n||i)(M(bi,10),M(_r,10),M(wi,8))};static \u0275dir=we({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,o){n&1&&D("submit",function(p){return o.onSubmit(p)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[rt([Yu]),qe]})}return i})();function xc(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function Ec(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var yi=class extends Tn{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,n){super(ps(t),ms(n,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yr(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Ec(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xc(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xc(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ec(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Zu=i=>i instanceof yi;var ed={provide:ln,useExisting:it(()=>He)},Sc=Promise.resolve(),He=(()=>{class i extends ln{_changeDetectorRef;callSetDisabledState;control=new yi;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new J;constructor(t,n,o,a,p,w){super(),this._changeDetectorRef=p,this.callSetDisabledState=w,this._parent=t,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=Wc(this,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),$c(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Sc.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,o=n!==0&&ns(n);Sc.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?qc(t,this._parent):[t]}static \u0275fac=function(n){return new(n||i)(M(Et,9),M(bi,10),M(_r,10),M(un,10),M(hc,8),M(wi,8))};static \u0275dir=we({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[rt([ed]),qe,sn]})}return i})();var dt=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=we({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return i})(),td={provide:un,useExisting:it(()=>gs),multi:!0},gs=(()=>{class i extends vi{writeValue(t){let n=t??"";this.setProperty("value",n)}registerOnChange(t){this.onChange=n=>{t(n==""?null:parseFloat(n))}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=an(i)))(o||i)}})();static \u0275dir=we({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,o){n&1&&D("input",function(p){return o.onChange(p.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[rt([td]),qe]})}return i})();var Hc=new on("");var nd={provide:Et,useExisting:it(()=>_s)},_s=(()=>{class i extends Et{callSetDisabledState;get submitted(){return xt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=En(()=>this._submittedReactive());_submittedReactive=xn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new J;constructor(t,n,o){super(),this.callSetDisabledState=o,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let n=this.form.get(t.path);return mr(n,t,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){Cc(t.control||null,t,!1),Xu(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this._submittedReactive.set(!0),Gc(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new hr(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new pr(this.form))}_updateDomValue(){this.directives.forEach(t=>{let n=t.control,o=this.form.get(t.path);n!==o&&(Cc(n||null,t),Zu(o)&&(mr(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let n=this.form.get(t.path);jc(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let n=this.form.get(t.path);n&&Qu(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fs(this.form,this),this._oldForm&&gr(this._oldForm,this)}static \u0275fac=function(n){return new(n||i)(M(bi,10),M(_r,10),M(wi,8))};static \u0275dir=we({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,o){n&1&&D("submit",function(p){return o.onSubmit(p)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[rt([nd]),qe,sn]})}return i})();var id={provide:ln,useExisting:it(()=>ys)},ys=(()=>{class i extends ln{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new J;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,n,o,a,p){super(),this._ngModelWarningConfig=p,this._parent=t,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=Wc(this,a)}ngOnChanges(t){this._added||this._setUpControl(),$c(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return qc(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(n){return new(n||i)(M(Et,13),M(bi,10),M(_r,10),M(un,10),M(Hc,8))};static \u0275dir=we({type:i,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[rt([id]),qe,sn]})}return i})();var rd={provide:un,useExisting:it(()=>jt),multi:!0};function Kc(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function od(i){return i.split(":")[0]}var jt=(()=>{class i extends vi{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let n=this._getOptionId(t),o=Kc(n,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){let n=od(t);return this._optionMap.has(n)?this._optionMap.get(n):t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=an(i)))(o||i)}})();static \u0275dir=we({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,o){n&1&&D("change",function(p){return o.onChange(p.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[rt([rd]),qe]})}return i})(),Dn=(()=>{class i{_element;_renderer;_select;id;constructor(t,n,o){this._element=t,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Kc(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(M(li),M(ui),M(jt,9))};static \u0275dir=we({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})(),sd={provide:un,useExisting:it(()=>Qc),multi:!0};function Ic(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function ad(i){return i.split(":")[0]}var Qc=(()=>{class i extends vi{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let n;if(Array.isArray(t)){let o=t.map(a=>this._getOptionId(a));n=(a,p)=>{a._setSelected(o.indexOf(p.toString())>-1)}}else n=(o,a)=>{o._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{let o=[],a=n.selectedOptions;if(a!==void 0){let p=a;for(let w=0;w<p.length;w++){let A=p[w],P=this._getOptionValue(A.value);o.push(P)}}else{let p=n.options;for(let w=0;w<p.length;w++){let A=p[w];if(A.selected){let P=this._getOptionValue(A.value);o.push(P)}}}this.value=o,t(o)}}_registerOption(t){let n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){let n=ad(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=an(i)))(o||i)}})();static \u0275dir=we({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,o){n&1&&D("change",function(p){return o.onChange(p.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[rt([sd]),qe]})}return i})(),Pn=(()=>{class i{_element;_renderer;_select;id;_value;constructor(t,n,o){this._element=t,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Ic(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Ic(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(M(li),M(ui),M(Qc,9))};static \u0275dir=we({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})();var cd=(()=>{class i{_validator=ar;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):ar,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(n){return new(n||i)};static \u0275dir=we({type:i,features:[sn]})}return i})();var ld={provide:bi,useExisting:it(()=>Ci),multi:!0};var Ci=(()=>{class i extends cd{required;inputName="required";normalizeInput=ns;createValidator=t=>Dc;enabled(t){return t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=an(i)))(o||i)}})();static \u0275dir=we({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,o){n&2&&lc("required",o._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[rt([ld]),qe]})}return i})();var Jc=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=er({type:i});static \u0275inj=Zi({})}return i})(),as=class extends Tn{constructor(e,t,n){super(ps(t),ms(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Bc(this,!1,e),e.forEach((n,o)=>{Lc(this,!1,o),this.at(o).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((n,o)=>{this.at(o)&&this.at(o).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,o)=>{n.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,n)=>n._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Tc(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var Xc=(()=>{class i{useNonNullable=!1;get nonNullable(){let t=new i;return t.useNonNullable=!0,t}group(t,n=null){let o=this._reduceControls(t),a={};return Tc(n)?a=n:n!==null&&(a.validators=n.validator,a.asyncValidators=n.asyncValidator),new An(o,a)}record(t,n=null){let o=this._reduceControls(t);return new ss(o,n)}control(t,n,o){let a={};return this.useNonNullable?(Tc(n)?a=n:(a.validators=n,a.asyncValidators=o),new yi(t,ge(U({},a),{nonNullable:!0}))):new yi(t,n,o)}array(t,n,o){let a=t.map(p=>this._createControl(p));return new as(a,n,o)}_reduceControls(t){let n={};return Object.keys(t).forEach(o=>{n[o]=this._createControl(t[o])}),n}_createControl(t){if(t instanceof yi)return t;if(t instanceof Tn)return t;if(Array.isArray(t)){let n=t[0],o=t.length>1?t[1]:null,a=t.length>2?t[2]:null;return this.control(n,o,a)}else return this.control(t)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ee=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:wi,useValue:t.callSetDisabledState??vr}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=er({type:i});static \u0275inj=Zi({imports:[Jc]})}return i})(),ht=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Hc,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:wi,useValue:t.callSetDisabledState??vr}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=er({type:i});static \u0275inj=Zi({imports:[Jc]})}return i})();var tt=class i{searchTerm="";placeholder="Caut\u0103 ...";searchChanged=new J;onSearchChanged(){this.searchChanged.emit(this.searchTerm.trim())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder"},outputs:{searchChanged:"searchChanged"},decls:4,vars:2,consts:[[1,"search-box"],["type","text",3,"ngModelChange","placeholder","ngModel"],["aria-label","Search",1,"search-icon-button",3,"click"],["src","assets/icons/search.svg","alt","Search Icon"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"input",1),oe("ngModelChange",function(a){return re(n.searchTerm,a)||(n.searchTerm=a),a}),l(),u(2,"button",2),D("click",function(){return n.onSearchChanged()}),L(3,"img",3),l()()),t&2&&(_(),E("placeholder",n.placeholder||"Caut\u0103..."),ie("ngModel",n.searchTerm))},dependencies:[le,ee,je,$e,He],styles:[".search-box[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;gap:20px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px 50px 15px 20px;border:none;background:transparent;outline:none;font-family:Roboto Mono,monospace;font-size:12px}.search-icon-button[_ngcontent-%COMP%]{background:none;border:none;padding:0 16px;font-size:1.2rem;color:#444;cursor:pointer;display:flex;align-items:center;justify-content:center}.search-icon-button[_ngcontent-%COMP%]:hover{color:#000}.search-icon-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}"]})};function ud(i,e){if(i&1&&(u(0,"option",7),d(1),l()),i&2){let t=e.$implicit;E("value",t),_(),he(t)}}var pt=class i{currentPage=1;totalItems=0;pageSize=10;pageSizeOptions=[5,10,20];pageChange=new J;pageSizeChange=new J;getTotalPages(){return Math.ceil(this.totalItems/this.pageSize)}goToPreviousPage(){this.currentPage>1&&this.pageChange.emit(this.currentPage-1)}goToNextPage(){this.currentPage<this.getTotalPages()&&this.pageChange.emit(this.currentPage+1)}onPageSizeChange(e){let t=Number(e);this.pageSizeChange.emit(t)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalItems:"totalItems",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},outputs:{pageChange:"pageChange",pageSizeChange:"pageSizeChange"},decls:13,vars:6,consts:[[1,"pagination-wrapper"],[1,"page-size-selector"],["for","pageSize"],["id","pageSize",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"pagination-controls"],[3,"click","disabled"],[3,"value"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"label",2),d(3,"Afi\u0219eaz\u0103 pe pagin\u0103:"),l(),u(4,"select",3),oe("ngModelChange",function(a){return re(n.pageSize,a)||(n.pageSize=a),a}),D("change",function(){return n.onPageSizeChange(n.pageSize)}),O(5,ud,2,2,"option",4),l()(),u(6,"div",5)(7,"button",6),D("click",function(){return n.goToPreviousPage()}),d(8,"\u2190"),l(),u(9,"span"),d(10),l(),u(11,"button",6),D("click",function(){return n.goToNextPage()}),d(12,"\u2192"),l()()()),t&2&&(_(4),ie("ngModel",n.pageSize),_(),E("ngForOf",n.pageSizeOptions),_(2),E("disabled",n.currentPage===1),_(3),uc("Pagina ",n.currentPage," din ",n.getTotalPages(),""),_(),E("disabled",n.currentPage===n.getTotalPages()))},dependencies:[ye,ht,Dn,Pn,jt,$e,ee,He],styles:[".pagination-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:32px;flex-wrap:wrap;margin-top:24px;font-family:Roboto Mono,monospace}.page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:16px}.page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}.page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 6px;border:1px solid #aaa;border-radius:4px;font-size:15px;font-family:Roboto Mono,monospace}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:16px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border:2px solid #000;background-color:#d9c8ff;border-radius:4px;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:default}"]})};var Rn=class i{constructor(e){this.router=e}requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""};formSubmit=new J;close=new J;submitRequest(){this.formSubmit.emit(this.requestForm)}closeForm(){this.close.emit()}static \u0275fac=function(t){return new(t||i)(M(Se))};static \u0275cmp=k({type:i,selectors:[["app-request-form"]],inputs:{requestForm:"requestForm"},outputs:{formSubmit:"formSubmit",close:"close"},decls:23,vars:4,consts:[[1,"overlay"],[1,"request-form-wrapper"],[1,"close-button",3,"click"],[1,"request-form"],[1,"form-row"],["type","datetime-local","name","startDate","required","",3,"ngModelChange","ngModel"],["type","tel","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["type","text","name","address","required","",3,"ngModelChange","ngModel"],["name","description","rows","4","required","",3,"ngModelChange","ngModel"],[1,"center-button"],["type","submit",3,"click"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"button",2),D("click",function(){return n.closeForm()}),d(3,"\xD7"),l(),u(4,"h2"),d(5,"Trimite o solicitare"),l(),u(6,"form",3)(7,"div",4)(8,"label"),d(9," Data \u0219i ora dorite: "),u(10,"input",5),oe("ngModelChange",function(a){return re(n.requestForm.requestedStartDate,a)||(n.requestForm.requestedStartDate=a),a}),l()(),u(11,"label"),d(12," Num\u0103r de telefon: "),u(13,"input",6),oe("ngModelChange",function(a){return re(n.requestForm.phoneNumber,a)||(n.requestForm.phoneNumber=a),a}),l()()(),u(14,"label"),d(15," Adres\u0103: "),u(16,"input",7),oe("ngModelChange",function(a){return re(n.requestForm.address,a)||(n.requestForm.address=a),a}),l()(),u(17,"label"),d(18," Descrierea solicit\u0103rii: "),u(19,"textarea",8),oe("ngModelChange",function(a){return re(n.requestForm.description,a)||(n.requestForm.description=a),a}),l()(),u(20,"div",9)(21,"button",10),D("click",function(){return n.submitRequest()}),d(22,"Trimite solicitarea"),l()()()()()),t&2&&(_(10),ie("ngModel",n.requestForm.requestedStartDate),_(3),ie("ngModel",n.requestForm.phoneNumber),_(3),ie("ngModel",n.requestForm.address),_(3),ie("ngModel",n.requestForm.description))},dependencies:[le,ee,dt,je,$e,ut,Ci,He,St,ht],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.request-form-wrapper[_ngcontent-%COMP%]{position:relative;max-width:600px;margin:2rem auto;background-color:#e8d9ff;border:2px solid #000;padding:2rem;font-family:Roboto Mono,monospace}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1.5rem}.request-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;font-size:.95rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;font-family:Roboto Mono,monospace;font-size:.9rem}.request-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #999;border-radius:4px;font-family:Roboto Mono,monospace;background-color:#fff}.request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.center-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem;padding:.5rem 1rem;border:2px solid #000;border-radius:6px;background-color:#c9b7ff;font-weight:700;cursor:pointer;display:flex;justify-content:center;font-family:Roboto Mono,monospace}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#dcdcdc;color:#888;cursor:not-allowed}"]})};var dd=i=>["/specialist",i];function hd(i,e){if(i&1&&(u(0,"span",18),d(1),l()),i&2){let t=e.$implicit;_(),he(t.name)}}function pd(i,e){if(i&1){let t=j();u(0,"div",19)(1,"app-request-form",20),D("formSubmit",function(o){V(t);let a=T();return N(a.submitRequest(o))})("close",function(){V(t);let o=T();return N(o.closeRequestForm())}),l()()}if(i&2){let t=T();_(),E("requestForm",t.requestForm)}}var xi=class i{constructor(e){this.router=e}specialist={id:"",fullName:"",email:"",profilePictureUrl:"",phoneNumber:"",address:"",categories:[],yearsExperience:0,description:"",createdAt:new Date,updatedAt:new Date,rating:0};isRequestFormVisible=!1;requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""};specialistId=new J;requestFormSubmit=new J;goToSendRequest(){this.requestForm.receiverUserId=this.specialist.id,this.isRequestFormVisible=!0}closeRequestForm(){this.requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""},this.isRequestFormVisible=!1}submitRequest(e){this.requestFormSubmit.emit(e),this.closeRequestForm()}static \u0275fac=function(t){return new(t||i)(M(Se))};static \u0275cmp=k({type:i,selectors:[["app-specialist-card"]],inputs:{specialist:"specialist"},outputs:{specialistId:"specialistId",requestFormSubmit:"requestFormSubmit"},decls:28,vars:10,consts:[[1,"card"],[1,"avatar-wrapper"],[1,"avatar"],["alt","User avatar",3,"src"],[1,"rating-badge"],["src","assets/star-rating.svg","alt","User star"],[1,"rating-value"],[1,"info"],[1,"full-name",3,"routerLink"],[1,"details-block"],[1,"row"],[1,"categories"],[1,"label"],["class","tag",4,"ngFor","ngForOf"],[1,"experience"],[1,"description"],[1,"request-btn",3,"click"],["class","overlay",4,"ngIf"],[1,"tag"],[1,"overlay"],[3,"formSubmit","close","requestForm"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),L(3,"img",3),l(),u(4,"div",4),L(5,"img",5),u(6,"span",6),d(7),l()()(),u(8,"div",7)(9,"h2",8),d(10),l(),u(11,"div",9)(12,"div",10)(13,"div",11)(14,"span",12),d(15,"Categorii:"),l(),O(16,hd,2,1,"span",13),l(),u(17,"div",14)(18,"span",12),d(19,"Ani experien\u021B\u0103:"),l(),d(20),l()(),u(21,"div",15)(22,"span",12),d(23,"Descriere:"),l(),d(24),l()()(),u(25,"button",16),D("click",function(){return n.goToSendRequest()}),d(26,"F\u0103 o solicitare"),l()(),O(27,pd,2,1,"div",17)),t&2&&(_(3),E("src",n.specialist.profilePictureUrl||"assets/avatar.svg",Vt),_(4),he(n.specialist.rating),_(2),E("routerLink",Nt(8,dd,n.specialist.id)),_(),G(" ",n.specialist.fullName," "),_(6),E("ngForOf",n.specialist.categories),_(4),G(" ",n.specialist.yearsExperience," "),_(4),G(" ",n.specialist.description," "),_(3),E("ngIf",n.isRequestFormVisible))},dependencies:[le,ye,Z,Rn,lt],styles:[".card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#cfbdfe;padding:20px;width:100%;gap:20px;justify-content:space-between;box-sizing:border-box;font-family:Roboto Mono,monospace}.info[_ngcontent-%COMP%]{flex:1}.full-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:.25rem;margin-bottom:.5rem}.full-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.details-block[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:12px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.categories[_ngcontent-%COMP%], .experience[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-size:.95rem}.label[_ngcontent-%COMP%]{font-weight:700;margin-right:6px}.tag[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem}.request-btn[_ngcontent-%COMP%]{background-color:#9a83db;padding:32px 24px;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:100px;aspect-ratio:1/1}.avatar[_ngcontent-%COMP%]{position:relative;width:100px;height:100px;overflow:hidden}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background-color:#e6dfff;object-fit:cover;display:block}.rating-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;display:inline-flex;align-items:center;gap:.3em;background:#fff;padding:.2em .5em;border-radius:.6em;font-size:1em;box-shadow:0 1px 4px #0000001a}.rating-badge[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1em;height:1em}"]})};var Ht=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Request";addRequest(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.post(`${this.baseUrl}/Add`,e,{headers:n})}acceptRequest(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Accept/${e}`,{},{headers:n})}rejectRequest(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Reject/${e}`,{},{headers:n})}cancelRequest(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Cancel/${e}`,{},{headers:n})}static \u0275fac=function(t){return new(t||i)(K(ve),K(W))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var fd=()=>[5,10,20];function gd(i,e){i&1&&L(0,"div",13)}function _d(i,e){if(i&1){let t=j();xe(0),u(1,"app-specialist-card",11),D("specialistId",function(o){let a=V(t).$implicit;return N(a.id=o)})("requestFormSubmit",function(o){V(t);let a=T();return N(a.addRequest(o))}),l(),O(2,gd,1,0,"div",12),Ee()}if(i&2){let t=e.$implicit,n=e.index,o=T();_(),E("specialist",t),_(),E("ngIf",n<o.users.length-1)}}var br=class i{constructor(e,t){this.homeService=e;this.userRequestService=t}searchTerm="";currentPage=1;pageSize=10;totalItems=0;entityDetails={};isUserDetailsVisible=!1;users=[];error=null;selectedSpecialist=null;isRequestFormVisible=!1;requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""};receiverUserId="";dummySpecialists=[{id:"spec-001",fullName:"Andrei Popescu",email:"andrei.popescu@example.com",phoneNumber:"0721123456",address:"Strada Mihai Eminescu 45, Bucure\u0219ti",yearsExperience:5,description:"Traduc\u0103tor medical cu experien\u021B\u0103 \xEEn terminologie clinic\u0103 \u0219i farmaceutic\u0103.",createdAt:new Date("2022-03-10T10:00:00Z"),updatedAt:new Date,rating:5,categories:[{id:"cat-001",name:"Traduceri medicale"},{id:"cat-002",name:"Farmacie"}]},{id:"spec-002",fullName:"Ioana Marinescu",email:"ioana.marinescu@example.com",phoneNumber:"0733456789",address:"Bd. Revolu\u021Biei 17, Cluj-Napoca",yearsExperience:8,description:"Specialist \xEEn psihologie cu experien\u021B\u0103 \xEEn redactarea \u0219i corectarea articolelor \u0219tiin\u021Bifice.",createdAt:new Date("2020-11-20T08:30:00Z"),updatedAt:new Date,rating:4},{id:"spec-003",fullName:"Victor Ionescu",email:"victor.ionescu@example.com",phoneNumber:"0744123123",address:"Str. Libert\u0103\u021Bii 88, Ia\u0219i",yearsExperience:3,description:"T\xE2n\u0103r specialist \xEEn tehnologia informa\u021Biei, ofer servicii de consultan\u021B\u0103 \u0219i mentenan\u021B\u0103 software.",createdAt:new Date("2023-01-15T14:45:00Z"),updatedAt:new Date,rating:4.5}];ngOnInit(){this.getPage()}getPage(){this.homeService.getSpecialists(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{this.users=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addRequest(e){let t=e;this.userRequestService.addRequest(t).subscribe({next:n=>{alert("Cererea a fost trimis\u0103 cu succes!"),this.closeRequestForm()},error:n=>{console.error("Eroare la trimiterea cererii:",n),alert("Nu s-a putut trimite cererea.")}})}onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}onPageChange(e){this.currentPage=e,this.getPage()}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}getCategoryNames(e){return e.map(t=>t.name)}closeUserDetails(){this.isUserDetailsVisible=!1,this.entityDetails={}}closeRequestForm(){this.requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""},this.isRequestFormVisible=!1}SpecialistCardComponent=xi;static \u0275fac=function(t){return new(t||i)(M(or),M(Ht))};static \u0275cmp=k({type:i,selectors:[["app-home"]],decls:24,vars:6,consts:[[1,"top-action-button"],["routerLink","/contact-us","routerLinkActive","active",1,"contact-button"],[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"search-box-wrapper"],[3,"searchChanged"],[1,"user-list"],[4,"ngFor","ngForOf"],[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[3,"specialistId","requestFormSubmit","specialist"],["class","separator",4,"ngIf"],[1,"separator"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"a",1),d(2,"Contacteaz\u0103-ne!"),l()(),u(3,"div",2)(4,"div",3)(5,"h1",4),d(6,"Ai o \u021Beav\u0103 spart\u0103?"),l(),u(7,"h1",4),d(8,"\u021Ai s-a stricat chiuveta?"),l(),u(9,"h1"),d(10,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),u(11,"strong",5),d(12,"ExpertEase"),l(),d(13,"!"),l()(),u(14,"div",6)(15,"app-search-input",7),D("searchChanged",function(a){return n.onSearch(a)}),l()(),u(16,"p"),d(17,"Peste "),u(18,"strong"),d(19,"100 de speciali\u0219ti"),l(),d(20," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),l()(),u(21,"div",8),O(22,_d,3,2,"ng-container",9),l(),u(23,"app-pagination",10),D("pageChange",function(a){return n.onPageChange(a)})("pageSizeChange",function(a){return n.onPageSizeChange(a)}),l()),t&2&&(_(22),E("ngForOf",n.users),_(),E("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",Ze(5,fd))("totalItems",n.totalItems))},dependencies:[xi,le,ye,Z,ht,ee,tt,pt,lt,yc],styles:[".top-action-button[_ngcontent-%COMP%]{position:absolute;top:100px;right:32px;z-index:10}.contact-button[_ngcontent-%COMP%]{text-decoration:none;font-family:Roboto Mono,monospace;font-weight:700;border:1px solid transparent;transition:all .2s ease;color:#000}.contact-button[_ngcontent-%COMP%]:hover{text-decoration:underline}.user-list[_ngcontent-%COMP%]   app-specialist-card[_ngcontent-%COMP%]{border-bottom:1px solid #b7a4dd;padding-bottom:1rem;margin-bottom:1rem}.user-list[_ngcontent-%COMP%]   app-specialist-card[_ngcontent-%COMP%]:last-child{border-bottom:none}.separator[_ngcontent-%COMP%]{height:3px;background-color:#b7a4dd;width:100%}.home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:2rem}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.close-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1.2rem;font-size:1.5rem;background:none;border:none;color:#333;font-weight:700;cursor:pointer;transition:transform .2s}.close-button[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#d11a2a}",".search-box[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;gap:20px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px 50px 15px 20px;border:none;background:transparent;outline:none;font-family:Roboto Mono,monospace;font-size:12px}.search-icon-button[_ngcontent-%COMP%]{background:none;border:none;padding:0 16px;font-size:1.2rem;color:#444;cursor:pointer;display:flex;align-items:center;justify-content:center}.search-icon-button[_ngcontent-%COMP%]:hover{color:#000}.search-icon-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}"]})};var wr=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-about"]],decls:142,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"about-info"],[1,"role-sections"],[1,"client-section"],[1,"specialist-section"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"h1",2),d(3,"Ai o \u021Beav\u0103 spart\u0103?"),l(),u(4,"h1",2),d(5,"\u021Ai s-a stricat chiuveta?"),l(),u(6,"h1"),d(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),u(8,"strong",3),d(9,"ExpertEase"),l(),d(10,"!"),l()(),u(11,"p"),d(12,"Peste "),u(13,"strong"),d(14,"100 de speciali\u0219ti"),l(),d(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),l()(),u(16,"div",4)(17,"section")(18,"h2"),d(19,"Cine suntem noi?"),l(),u(20,"p"),d(21,"Compania "),u(22,"strong"),d(23,"ExpertEase"),l(),d(24," se ocup\u0103 cu problemele tale \xEEn materie de repara\u021Bii sau instala\u021Bii."),l()(),u(25,"section")(26,"h2"),d(27,"Cum facem asta?"),l(),u(28,"p"),d(29,"\xCE\u021Bi punem la dispozi\u021Bie "),u(30,"strong"),d(31,"peste 100 de speciali\u0219ti"),l(),d(32," din domeniu, cu varii nivele de experien\u021B\u0103, care sunt preocupa\u021Bi \xEEn a \xEE\u021Bi rezolva problema."),l()(),u(33,"section")(34,"h2"),d(35,"Cum func\u021Bioneaz\u0103 platforma?"),l(),u(36,"p"),d(37,"Platforma noastr\u0103 este simplu de utilizat. Po\u021Bi c\u0103uta speciali\u0219ti dup\u0103 domeniu, po\u021Bi vedea recenziile altor clien\u021Bi \u0219i po\u021Bi contacta direct specialistul pentru a discuta detaliile repara\u021Biei sau instala\u021Biei."),l()(),u(38,"section")(39,"h2"),d(40,"De ce s\u0103 ne alegi?"),l(),u(41,"p"),d(42,"ExpertEase \xEE\u021Bi ofer\u0103 acces rapid \u0219i u\u0219or la o re\u021Bea extins\u0103 de speciali\u0219ti, asigur\xE2ndu-te c\u0103 vei g\u0103si pe cineva potrivit pentru nevoile tale. \xCEn plus, platforma noastr\u0103 este gratuit\u0103 pentru utilizatori!"),l()(),u(43,"div",5)(44,"section",6)(45,"h2"),d(46,"Ce poate face un client?"),l(),u(47,"p"),d(48,"Pe platforma ExpertEase, clien\u021Bii pot:"),l(),u(49,"ol")(50,"li")(51,"strong"),d(52,"Crea un cont"),l(),L(53,"br"),d(54," \xCE\u021Bi faci un cont rapid \u0219i ai acces la panoul t\u0103u personal."),l(),u(55,"li")(56,"strong"),d(57,"C\u0103uta speciali\u0219ti"),l(),L(58,"br"),d(59," Po\u021Bi filtra speciali\u0219tii dup\u0103: "),u(60,"ul")(61,"li"),d(62,"Categorie (ex. Psihologie, Drept, IT)"),l(),u(63,"li"),d(64,"Ani de experien\u021B\u0103"),l(),u(65,"li"),d(66,"Adres\u0103 (cu op\u021Biune de c\u0103utare pe hart\u0103)"),l()()(),u(67,"li")(68,"strong"),d(69,"Trimite o cerere"),l(),L(70,"br"),d(71," Dup\u0103 ce g\u0103se\u0219ti un specialist potrivit, po\u021Bi trimite o cerere \xEEn care descrii problema sau serviciul dorit \u0219i o dat\u0103 preferat\u0103."),l(),u(72,"li")(73,"strong"),d(74,"Comunic\u0103 prin mesaje"),l(),L(75,"br"),d(76," Vei putea: "),u(77,"ul")(78,"li"),d(79,"Primi r\u0103spunsuri de la specialist"),l(),u(80,"li"),d(81,"Vizualiza propunerea de serviciu \u0219i pre\u021Bul"),l(),u(82,"li"),d(83,"Accepta sau refuza oferta"),l()()(),u(84,"li")(85,"strong"),d(86,"Las\u0103 o recenzie"),l(),L(87,"br"),d(88," Dup\u0103 \xEEncheierea colabor\u0103rii, po\u021Bi scrie o recenzie care ajut\u0103 al\u021Bi utilizatori \u0219i sus\u021Bine calitatea pe platform\u0103."),l(),u(89,"li")(90,"strong"),d(91,"Pl\u0103te\u0219te \xEEn siguran\u021B\u0103"),l(),L(92,"br"),d(93," Pl\u0103\u021Bile se realizeaz\u0103 prin Stripe, \xEEntr-un mod securizat \u0219i transparent. Vei \u0219ti exact c\xE2t pl\u0103te\u0219ti \xEEnainte de confirmare."),l()()(),u(94,"section",7)(95,"h2"),d(96,"Ce poate face un specialist?"),l(),u(97,"p"),d(98,"Speciali\u0219tii au acces la instrumente prin care \xEE\u0219i pot gestiona cererile \u0219i construi o reputa\u021Bie solid\u0103:"),l(),u(99,"ol")(100,"li")(101,"strong"),d(102,"\xCEnregistrare \u0219i verificare profil"),l(),L(103,"br"),d(104," \xCE\u021Bi creezi un cont profesional, alegi domeniul de expertiz\u0103 \u0219i adaugi informa\u021Bii relevante."),l(),u(105,"li")(106,"strong"),d(107,"Prime\u0219ti cereri de la clien\u021Bi"),l(),L(108,"br"),d(109," Vei fi notificat atunci c\xE2nd un client te contacteaz\u0103. Po\u021Bi: "),u(110,"ul")(111,"li"),d(112,"Analiza cererea"),l(),u(113,"li"),d(114,"Accepta, refuza sau propune o ofert\u0103 alternativ\u0103"),l()()(),u(115,"li")(116,"strong"),d(117,"Trimite un r\u0103spuns detaliat"),l(),L(118,"br"),d(119," Po\u021Bi r\u0103spunde cu: "),u(120,"ul")(121,"li"),d(122,"Detalii despre serviciu"),l(),u(123,"li"),d(124,"Dat\u0103 propus\u0103"),l(),u(125,"li"),d(126,"Pre\u021B"),l()()(),u(127,"li")(128,"strong"),d(129,"Gestioneaz\u0103 conversa\u021Biile"),l(),L(130,"br"),d(131," Ai acces la un sistem de mesagerie clar \u0219i sigur, unde po\u021Bi urm\u0103ri fiecare cerere \xEEn parte."),l(),u(132,"li")(133,"strong"),d(134,"Prime\u0219te pl\u0103\u021Bi direct"),l(),L(135,"br"),d(136," Prin conectarea contului t\u0103u Stripe Express, po\u021Bi primi banii direct \xEEn contul bancar."),l(),u(137,"li")(138,"strong"),d(139,"Prime\u0219te recenzii"),l(),L(140,"br"),d(141," Dup\u0103 fiecare colaborare, clien\u021Bii pot l\u0103sa o recenzie care te va ajuta s\u0103 c\xE2\u0219tigi \xEEncrederea altor utilizatori."),l()()()()())},styles:['@charset "UTF-8";.home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.about-info[_ngcontent-%COMP%]{max-width:1600px;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6}.about-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d}.about-info[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff}.role-sections[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:32px;margin-top:32px}.role-sections[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{flex:1 1 45%;border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff;font-family:Roboto Mono,monospace;font-size:16px;line-height:25.6px}.role-sections[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#3c1a7d;font-weight:700;margin-bottom:16px}.role-sections[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:16px}.role-sections[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .role-sections[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-bottom:24px}.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:12px;line-height:25.6px}.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:8px;padding-left:20px}@media (max-width: 900px){.role-sections[_ngcontent-%COMP%]{flex-direction:column}.role-sections[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{flex:1 1 100%}}']})};var bs={firstName:"Prenume",lastName:"Nume",fullName:"Nume complet",email:"Adres\u0103 e-mail",password:"Parol\u0103",role:"Rol",phoneNumber:"Num\u0103r de telefon",address:"Adres\u0103",yearsExperience:"Ani experien\u021B\u0103",description:"Descriere",id:"ID",account:"Cont",transaction:"Tranzac\u021Bie",createdAt:"Creat la",updatedAt:"Actualizat la",categories:"Categorii",name:"Denumire",specialistsCount:"Num\u0103r speciali\u0219ti",specialistIds:"Speciali\u0219tii cu aceast\u0103 categorie"};function Le(i,e={},t=bs){return Object.keys(i).map(n=>{let o=e[n]||{},a=o.type||(o.options?"select":"text"),p=t[n]||yd(n);return U({key:n,label:p,type:a,placeholder:o.placeholder||`Introdu ${p.toLowerCase()}`,required:o.required??!0,class:o.class||"half-width"},o)})}function yd(i){return i.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}function Mn(i){if(!i)return{};let e={},t=Object.keys(i);if("id"in i){let n=bs.id||"id";e[n]=i.id}for(let n of t){if(["id","firstName","lastName"].includes(n))continue;let o=i[n];if(o==null||typeof o=="string"&&o.trim()==="")continue;let a=bs[n]||n,p=o;typeof o=="string"&&vd(o)||o instanceof Date?p=Yc(o):n.toLowerCase().includes("password")&&(p="********"),e[a]=p}return e}function vd(i){return/^\d{4}-\d{2}-\d{2}T/.test(i)}function Yc(i){let e=new Date(i),t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return`${t}.${n}.${o}`}var bd=i=>({"placeholder-selected":i});function wd(i,e){if(i&1&&(u(0,"div",15),d(1),Ve(2,"lowercase"),l()),i&2){let t=T(2).$implicit;_(),G(" C\xE2mpul ",Ft(2,1,t.label)," este obligatoriu. ")}}function Cd(i,e){if(i&1){let t=j();u(0,"div")(1,"div",12)(2,"input",13,1),oe("ngModelChange",function(o){V(t);let a=T().$implicit,p=T();return re(p.formData[a.key],o)||(p.formData[a.key]=o),N(o)}),D("input",function(){V(t);let o=T().$implicit,a=T();return N(o.key==="phoneNumber"&&a.liveFormatPhoneNumber(o.key))}),l()(),O(4,wd,3,3,"div",14),l()}if(i&2){let t=ze(3),n=T().$implicit,o=T();_(2),E("id",n.key)("name",n.key),ie("ngModel",o.formData[n.key]),E("placeholder",n.placeholder)("required",!!n.required),_(2),E("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function xd(i,e){if(i&1&&(u(0,"div",15),d(1),Ve(2,"lowercase"),l()),i&2){let t=T(2).$implicit;_(),G(" C\xE2mpul ",Ft(2,1,t.label)," este obligatoriu. ")}}function Ed(i,e){if(i&1){let t=j();u(0,"div")(1,"div",12)(2,"input",16,1),oe("ngModelChange",function(o){V(t);let a=T().$implicit,p=T();return re(p.formData[a.key],o)||(p.formData[a.key]=o),N(o)}),l()(),O(4,xd,3,3,"div",14),l()}if(i&2){let t=ze(3),n=T().$implicit,o=T();_(2),E("id",n.key)("name",n.key),ie("ngModel",o.formData[n.key]),E("placeholder",n.placeholder)("required",!!n.required),_(2),E("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function Sd(i,e){if(i&1&&(u(0,"div",15),d(1),Ve(2,"lowercase"),l()),i&2){let t=T(2).$implicit;_(),G(" C\xE2mpul ",Ft(2,1,t.label)," este obligatoriu. ")}}function Id(i,e){if(i&1){let t=j();u(0,"div")(1,"div",12)(2,"input",17,1),oe("ngModelChange",function(o){V(t);let a=T().$implicit,p=T();return re(p.formData[a.key],o)||(p.formData[a.key]=o),N(o)}),l()(),O(4,Sd,3,3,"div",14),l()}if(i&2){let t=ze(3),n=T().$implicit,o=T();_(2),E("id",n.key)("name",n.key),ie("ngModel",o.formData[n.key]),E("placeholder",n.placeholder)("required",!!n.required),_(2),E("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function Td(i,e){if(i&1&&(u(0,"div",15),d(1),Ve(2,"lowercase"),l()),i&2){let t=T(2).$implicit;_(),G(" C\xE2mpul ",Ft(2,1,t.label)," este obligatoriu. ")}}function Ad(i,e){if(i&1){let t=j();u(0,"div")(1,"div",12)(2,"input",18,1),oe("ngModelChange",function(o){V(t);let a=T().$implicit,p=T();return re(p.formData[a.key],o)||(p.formData[a.key]=o),N(o)}),l()(),O(4,Td,3,3,"div",14),l()}if(i&2){let t=ze(3),n=T().$implicit,o=T();_(2),E("id",n.key)("name",n.key),ie("ngModel",o.formData[n.key]),E("placeholder",n.placeholder)("required",!!n.required),_(2),E("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function Dd(i,e){if(i&1&&(u(0,"option",23),d(1),l()),i&2){let t=e.$implicit;E("value",t),_(),he(t)}}function Pd(i,e){if(i&1&&(u(0,"div",15),d(1),Ve(2,"lowercase"),l()),i&2){let t=T(2).$implicit;_(),G(" C\xE2mpul ",Ft(2,1,t.label)," este obligatoriu. ")}}function Rd(i,e){if(i&1){let t=j();u(0,"div")(1,"div",19)(2,"select",20,1),oe("ngModelChange",function(o){V(t);let a=T().$implicit,p=T();return re(p.formData[a.key],o)||(p.formData[a.key]=o),N(o)}),u(4,"option",21),d(5),l(),O(6,Dd,2,2,"option",22),l()(),O(7,Pd,3,3,"div",14),l()}if(i&2){let t=ze(3),n=T().$implicit,o=T();_(2),E("id",n.key)("name",n.key),ie("ngModel",o.formData[n.key]),E("required",!!n.required)("ngClass",Nt(8,bd,o.formData[n.key]==="")),_(3),he(n.placeholder||"Selecteaz\u0103 o op\u021Biune"),_(),E("ngForOf",n.options),_(),E("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function Md(i,e){if(i&1&&(u(0,"div",15),d(1),Ve(2,"lowercase"),l()),i&2){let t=T(2).$implicit;_(),G(" C\xE2mpul ",Ft(2,1,t.label)," este obligatoriu. ")}}function Od(i,e){if(i&1){let t=j();u(0,"div")(1,"div",12)(2,"textarea",24,1),oe("ngModelChange",function(o){V(t);let a=T().$implicit,p=T();return re(p.formData[a.key],o)||(p.formData[a.key]=o),N(o)}),d(4,"          "),l()(),O(5,Md,3,3,"div",14),l()}if(i&2){let t=ze(3),n=T().$implicit,o=T();_(2),E("id",n.key)("name",n.key),ie("ngModel",o.formData[n.key]),E("placeholder",n.placeholder)("required",!!n.required),_(3),E("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function kd(i,e){if(i&1&&(u(0,"div",15),d(1),Ve(2,"lowercase"),l()),i&2){let t=T(2).$implicit;_(),G(" C\xE2mpul ",Ft(2,1,t.label)," este obligatoriu. ")}}function Vd(i,e){if(i&1){let t=j();u(0,"div")(1,"div",12)(2,"input",25,1),oe("ngModelChange",function(o){V(t);let a=T().$implicit,p=T();return re(p.formData[a.key],o)||(p.formData[a.key]=o),N(o)}),l()(),O(4,kd,3,3,"div",14),l()}if(i&2){let t=ze(3),n=T().$implicit,o=T();_(2),E("type",n.type)("id",n.key)("name",n.key),ie("ngModel",o.formData[n.key]),E("placeholder",n.placeholder)("required",!!n.required),_(2),E("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function Nd(i,e){if(i&1&&(u(0,"div",6)(1,"label",7),d(2),l(),u(3,"div",8),xe(4,9),O(5,Cd,5,6,"div",10)(6,Ed,5,6,"div",10)(7,Id,5,6,"div",10)(8,Ad,5,6,"div",10)(9,Rd,8,10,"div",10)(10,Od,6,6,"div",10)(11,Vd,5,7,"div",11),Ee(),l()()),i&2){let t=e.$implicit;E("ngClass",t.class),_(),E("for",t.key),_(),he(t.label),_(2),E("ngSwitch",t.type),_(),E("ngSwitchCase","text"),_(),E("ngSwitchCase","email"),_(),E("ngSwitchCase","password"),_(),E("ngSwitchCase","number"),_(),E("ngSwitchCase","select"),_(),E("ngSwitchCase","textarea")}}var Ge=class i{fields=[];initialData={};submitText="Submit";formSubmit=new J;formData={};formSubmitted=!1;ngOnChanges(e){e.initialData&&e.initialData.currentValue&&(this.formData=U({},e.initialData.currentValue),this.fields.forEach(t=>{t.key in this.formData||(this.formData[t.key]="")}))}onSubmit(e){this.formSubmitted=!0,console.log(this.formSubmitted),!e.invalid&&this.formSubmit.emit(this.formData)}liveFormatPhoneNumber(e){let t=this.formData[e]||"",n=t.startsWith("+"),o=t.replace(/\D/g,""),a=o;o.length===11&&o.startsWith("40")?a=o.replace(/(\d{2})(\d{3})(\d{3})(\d{3})/,"$1 $2 $3 $4"):o.length===10&&o.startsWith("0")?a=o.replace(/(\d{3})(\d{3})(\d{4})/,"$1 $2 $3"):o.length===9&&(a=o.replace(/(\d{3})(\d{3})(\d{3})/,"$1 $2 $3")),this.formData[e]=n?`+${a}`:a}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-dynamic-form"]],inputs:{fields:"fields",initialData:"initialData",submitText:"submitText"},outputs:{formSubmit:"formSubmit"},features:[sn],decls:6,vars:2,consts:[["formRef","ngForm"],["ctrl","ngModel"],[1,"form-layout",3,"ngSubmit"],["class","form-group",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-group","full-width"],["type","submit",1,"send-button"],[1,"form-group",3,"ngClass"],[3,"for"],[1,"field-wrapper"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"input-box"],["type","text",3,"ngModelChange","input","id","name","ngModel","placeholder","required"],["class","error",4,"ngIf"],[1,"error"],["type","email",3,"ngModelChange","id","name","ngModel","placeholder","required"],["type","password",3,"ngModelChange","id","name","ngModel","placeholder","required"],["type","number",3,"ngModelChange","id","name","ngModel","placeholder","required"],[1,"select-box"],[3,"ngModelChange","id","name","ngModel","required","ngClass"],["value","","disabled","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","4",3,"ngModelChange","id","name","ngModel","placeholder","required"],[3,"ngModelChange","type","id","name","ngModel","placeholder","required"]],template:function(t,n){if(t&1){let o=j();u(0,"form",2,0),D("ngSubmit",function(){V(o);let p=ze(1);return N(n.onSubmit(p))}),O(2,Nd,12,10,"div",3),u(3,"div",4)(4,"button",5),d(5),l()()()}t&2&&(_(2),E("ngForOf",n.fields),_(3),G(" ",n.submitText," "))},dependencies:[le,et,ye,Z,tr,nr,pc,mc,ee,dt,Dn,Pn,je,gs,jt,$e,ut,Ci,He,St],styles:[".grid-form[_ngcontent-%COMP%]{gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto;font-family:Roboto Mono,monospace;border:2px solid #c9b7ff;border-radius:6px;box-shadow:0 4px 12px #0000001a}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:12px 16px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.form-group.half-width[_ngcontent-%COMP%]{flex:1 1 48%}label[_ngcontent-%COMP%]{margin-bottom:8px}.input-box[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:16px;outline:none}.input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-family:inherit;font-size:1rem;border:none;border-radius:6px;box-sizing:border-box;resize:vertical;background:#e6dfff}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;font-size:16px;outline:none;appearance:auto;font-family:inherit;width:100%}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#a388ff;box-shadow:0 0 3px #a388ff}.placeholder-selected[_ngcontent-%COMP%]{color:#7d7d7f!important}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.field-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px}"]})};var Cr=class i{constructor(e,t){this.authService=e;this.router=t;let n={firstName:"",lastName:"",email:"",password:""};this.formFields=Le(n,{email:{type:"email"},password:{type:"password"}}),console.log(this.formFields)}formFields=[];formData={};errorMessage=null;registerUser(e){let t=e;this.authService.registerUser(t).subscribe({next:()=>{let n={email:t.email,password:t.password};this.authService.loginUser(n).subscribe({next:()=>{this.router.navigate(["/home"])},error:o=>{console.error("Login failed:",o),this.errorMessage=o.error?.errorMessage?.message||"Eroare necunoscut\u0103."}})},error:n=>{console.error("Registration failed:",n),this.errorMessage=n.error?.errorMessage?.message||"Eroare necunoscut\u0103."}})}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||i)(M(W),M(Se))};static \u0275cmp=k({type:i,selectors:[["app-register"]],decls:9,vars:2,consts:[[1,"form-wrapper"],[1,"form-box"],[3,"formSubmit","fields","submitText"],[1,"auth-switch"],[1,"auth-button",3,"click"]],template:function(t,n){t&1&&(u(0,"h2"),d(1,"\xCEnregistrare"),l(),u(2,"div",0)(3,"div",1)(4,"app-dynamic-form",2),D("formSubmit",function(a){return n.registerUser(a)}),l()()(),u(5,"p",3),d(6," Deja ai un cont? "),u(7,"button",4),D("click",function(){return n.goToLogin()}),d(8,"Autentific\u0103-te"),l()()),t&2&&(_(4),E("fields",n.formFields)("submitText","Trimite"))},dependencies:[le,ee,Ge],styles:["p[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:16px}h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.auth-button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700}.auth-button[_ngcontent-%COMP%]:hover{color:#6a5799}"]})};var xr=class i{constructor(e,t){this.authService=e;this.router=t;let n={email:"",password:""};this.formFields=Le(n,{email:{type:"email"},password:{type:"password"}})}formFields=[];formData={};errorMessage=null;loginUser(e){let t=e;this.authService.loginUser(t).subscribe({next:n=>{console.log("Login successful:",n),this.router.navigate(["/home"])},error:n=>{console.error("Login failed:",n),this.errorMessage=n.error?.errorMessage?.message||"Eroare necunoscut\u0103."}})}goToRegister(){this.router.navigate(["/register"])}static \u0275fac=function(t){return new(t||i)(M(W),M(Se))};static \u0275cmp=k({type:i,selectors:[["app-login"]],decls:9,vars:2,consts:[[1,"form-wrapper"],[1,"form-box"],[3,"formSubmit","fields","submitText"],[1,"auth-switch"],[1,"auth-button",3,"click"]],template:function(t,n){t&1&&(u(0,"h2"),d(1,"Autentificare"),l(),u(2,"div",0)(3,"div",1)(4,"app-dynamic-form",2),D("formSubmit",function(a){return n.loginUser(a)}),l()()(),u(5,"p",3),d(6," Nu ai cont? "),u(7,"button",4),D("click",function(){return n.goToRegister()}),d(8,"\xCEnregistreaz\u0103-te"),l()()),t&2&&(_(4),E("fields",n.formFields)("submitText","Trimite"))},dependencies:[le,ee,Ge],styles:["p[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:16px}h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.auth-button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700}.auth-button[_ngcontent-%COMP%]:hover{color:#6a5799}"]})};var Er=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-admin"]],decls:15,vars:0,consts:[[1,"grid-form"],[1,"button-group"],["routerLink","/admin/users","routerLinkActive","active",1,"admin-button"],["routerLink","/admin/specialists","routerLinkActive","active",1,"admin-button"],["routerLink","/admin/categories","routerLinkActive","active",1,"admin-button"],[1,"admin-button"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"button",2),d(3,"Utilizatori"),l(),u(4,"button",3),d(5,"Speciali\u0219ti"),l(),u(6,"button",4),d(7,"Categorii"),l(),u(8,"button",5),d(9,"Servicii"),l(),u(10,"button",5),d(11,"Tranzac\u021Bii"),l(),u(12,"button",5),d(13,"Recenzii"),l()()(),L(14,"router-outlet"))},dependencies:[ir,lt],styles:[".grid-form[_ngcontent-%COMP%]{position:absolute;top:calc(50vh - 250px);left:calc(50vw - 400px);width:800px;height:500px;display:flex;flex-direction:column;padding:40px 60px;border:3px solid black;border-radius:4px;box-shadow:0 4px 12px #0000001a;background-color:#cfbdfe;box-sizing:border-box}.button-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:32px;width:100%;justify-items:center;margin-top:24px}.admin-button[_ngcontent-%COMP%]{width:100%;height:5vw;background-color:#e6dfff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;border:3px solid #4b358e;border-radius:5px;cursor:pointer;box-shadow:0 2px 6px #0000001a;transition:background-color .3s ease,text-decoration .2s ease;display:flex;align-items:center;justify-content:center;text-align:center}.admin-button[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var dn=(n=>(n.Admin="Admin",n.Specialist="Specialist",n.Client="Client",n))(dn||{});function Fd(i,e){if(i&1&&(u(0,"th"),d(1),l()),i&2){let t=e.$implicit;_(),he(t.header)}}function Ud(i,e){if(i&1&&(xe(0),d(1),Ee()),i&2){let t=T(2).$implicit,n=T().$implicit;_(),G(" ",t.compute(n)," ")}}function Ld(i,e){if(i&1&&d(0),i&2){let t=T(2).$implicit,n=T().$implicit;G(" ",n[t.key]," ")}}function Bd(i,e){if(i&1&&(xe(0),O(1,Ud,2,1,"ng-container",4)(2,Ld,1,1,"ng-template",null,1,hi),Ee()),i&2){let t=ze(3),n=T().$implicit;_(),E("ngIf",n.compute)("ngIfElse",t)}}function qd(i,e){if(i&1){let t=j();u(0,"a",6),D("click",function(){let o=V(t).$implicit,a=T(3).$implicit;return N(o.callback(a))}),d(1),l()}if(i&2){let t=e.$implicit;E("ngClass",t.class),_(),G(" ",t.label," ")}}function zd(i,e){if(i&1&&O(0,qd,2,2,"a",5),i&2){let t=T().$implicit;E("ngForOf",t.actions)}}function jd(i,e){if(i&1&&(u(0,"td"),O(1,Bd,4,2,"ng-container",4)(2,zd,1,1,"ng-template",null,0,hi),l()),i&2){let t=e.$implicit,n=ze(3);_(),E("ngIf",t.type!=="action")("ngIfElse",n)}}function $d(i,e){if(i&1&&(u(0,"tr"),O(1,jd,4,2,"td",3),l()),i&2){let t=T();_(),E("ngForOf",t.columns)}}var Kt=class i{columns=[];data=[];static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-dynamic-table"]],inputs:{columns:"columns",data:"data"},decls:6,vars:2,consts:[["actionCell",""],["directValue",""],[1,"admin-table"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["class","action-link",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"action-link",3,"click","ngClass"]],template:function(t,n){t&1&&(u(0,"table",2)(1,"thead")(2,"tr"),O(3,Fd,2,1,"th",3),l()(),u(4,"tbody"),O(5,$d,2,1,"tr",3),l()()),t&2&&(_(3),E("ngForOf",n.columns),_(2),E("ngForOf",n.data))},dependencies:[le,et,ye,Z,ee],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}"]})};function Gd(i,e){if(i&1&&(xe(0),u(1,"p")(2,"strong"),d(3),l(),d(4),l(),Ee()),i&2){let t=T().$implicit,n=T();_(3),G("",n.formatKey(t),":"),_(),G(" ",n.formatValue(n.entity[t])," ")}}function Wd(i,e){if(i&1&&(xe(0),O(1,Gd,5,2,"ng-container",5),Ee()),i&2){let t=e.$implicit;_(),E("ngIf",t!=="ID")}}var Qt=class i{entity={};title="";close=new J;onClose(){this.close.emit()}objectKeys=Object.keys;formatKey(e){return e.includes(" ")||e.includes("-")?e:e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase())}formatValue(e){return typeof e=="boolean"?e?"Da":"Nu":e instanceof Date?e.toLocaleDateString():typeof e=="string"&&e.toLowerCase().includes("password")?"********":e}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-admin-details"]],inputs:{entity:"entity",title:"title"},outputs:{close:"close"},decls:10,vars:3,consts:[[1,"admin-wrapper"],[1,"page-title"],[1,"card"],[1,"divider"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"h2",1),d(2),l(),u(3,"div",2)(4,"p")(5,"strong"),d(6,"ID:"),l(),d(7),l(),L(8,"hr",3),O(9,Wd,2,1,"ng-container",4),l()()),t&2&&(_(2),he(n.title),_(5),G(" ",n.entity.ID,""),_(2),E("ngForOf",n.objectKeys(n.entity)))},dependencies:[le,ye,Z],styles:[".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var On=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/User";getUser(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}getUserProfile(){let e=this.authService.getToken(),t=new B({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/Get`,{headers:t})}getUsers(e,t,n){let o=this.authService.getToken(),a=new B({Authorization:`Bearer ${o}`}),p=new Bt().set("search",e??"").set("page",t).set("pageSize",n);return this.http.get(`${this.baseUrl}/GetPage`,{headers:a,params:p})}addUser(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.post(`${this.baseUrl}/Add`,e,{headers:n})}updateUser(e,t){let n=this.authService.getToken(),o=new B({Authorization:`Bearer ${n}`});return this.http.patch(`${this.baseUrl}/Update/${e}`,t,{headers:o})}updateUserProfile(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}`,e,{headers:n})}deleteUser(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.delete(`${this.baseUrl}/Delete/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(K(ve),K(W))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var Hd=()=>[5,10,20];function Kd(i,e){if(i&1){let t=j();u(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),D("click",function(){V(t);let o=T();return N(o.closeAddUserForm())}),d(4,"\xD7"),l()(),u(5,"app-dynamic-form",13),D("formSubmit",function(o){V(t);let a=T();return N(a.addEntity(o))}),l()()()}if(i&2){let t=T();_(5),E("fields",t.addEntityFormFields)("submitText","Trimite")}}function Qd(i,e){if(i&1){let t=j();u(0,"div",9)(1,"div",10)(2,"button",12),D("click",function(){V(t);let o=T();return N(o.closeUpdateUserForm())}),d(3,"\xD7"),l(),u(4,"app-dynamic-form",14),D("formSubmit",function(o){V(t);let a=T();return N(a.updateEntity(o))}),l()()()}if(i&2){let t=T();_(4),E("fields",t.updateEntityFormFields)("initialData",t.formData)("submitText","Actualizeaz\u0103")}}function Jd(i,e){if(i&1){let t=j();u(0,"app-admin-details",18),D("close",function(){V(t);let o=T(2);return N(o.closeUserDetails())}),l()}if(i&2){let t=T(2);E("entity",t.entityDetails)("title","Detalii utilizator")}}function Xd(i,e){if(i&1){let t=j();u(0,"div",15)(1,"div",16)(2,"button",12),D("click",function(){V(t);let o=T();return N(o.closeUserDetails())}),d(3,"\xD7"),l(),O(4,Jd,1,2,"app-admin-details",17),l()()}if(i&2){let t=T();_(4),E("ngIf",t.isUserDetailsVisible)}}var Sr=class i{constructor(e){this.adminService=e}dummy_users=[{id:"m3n4o5p6",fullName:"Ana Georgescu",email:"ana.georgescu@example.com",role:"Admin",createdAt:new Date("2024-09-01T11:30:00Z"),updatedAt:new Date("2025-01-12T13:00:00Z"),rating:4.5},{id:"q7r8s9t0",fullName:"Radu Enache",email:"radu.enache@example.com",role:"Client",createdAt:new Date("2024-08-20T15:45:00Z"),updatedAt:new Date("2025-01-08T11:15:00Z"),rating:4}];searchTerm="";users=[];selectedUser=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddUserFormVisible=!1;isUpdateUserFormVisible=!1;isUserDetailsVisible=!1;selectedUserId=null;placeholder="Caut\u0103 un utilizator...";columns=[{key:"id",header:"ID"},{key:"fullName",header:"Nume"},{key:"email",header:"Email"},{key:"role",header:"Rol"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:e=>this.getEntity(e.id)},{label:"Modific\u0103",class:"edit",callback:e=>this.editUser(e)},{label:"\u0218terge",class:"delete",callback:e=>this.deleteEntity(e)}]}];defaultUser={fullName:"",email:"",password:"",role:"Client"};formData={};error=null;addEntityFormFields=Le(this.defaultUser,{email:{type:"email"},password:{type:"password"},role:{type:"select",options:Object.values(dn)}});updateEntityFormFields=Le({fullName:this.selectedUser?.fullName||"",role:this.selectedUser?.role||""},{role:{type:"select",options:Object.values(dn)}});ngOnInit(){let e={fullName:"",email:"",password:"",role:"Client"};this.formData=U({},e),this.getPage()}onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}getEntity(e){console.log(e),this.adminService.getUser(e).subscribe({next:t=>{this.entityDetailsId=t.response?.id,this.entityDetails=Mn(t.response??{}),this.isUserDetailsVisible=!0},error:t=>{console.error("Eroare la preluarea utilizatorului:",t),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getUsers(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{console.log(e.response),this.users=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(e){let t=e;this.adminService.addUser(t).subscribe({next:()=>{this.closeAddUserForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editUser(e){this.selectedUserId=e.id,this.formData={fullName:e.fullName,role:e.role},this.isUpdateUserFormVisible=!0}updateEntity(e){if(!this.selectedUserId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let t=e.fullName??[e.firstName,e.lastName].filter(Boolean).join(" ").trim(),n={id:this.selectedUserId,fullName:t,role:e.role};this.adminService.updateUser(this.selectedUserId,n).subscribe({next:()=>{this.closeUpdateUserForm(),this.getPage()},error:o=>{console.error("Eroare la actualizare:",o)}})}showUserDetails(e){this.isUserDetailsVisible=!0}closeUserDetails(){this.isUserDetailsVisible=!1,this.selectedUser=null}closeUpdateUserForm(){this.selectedUserId=null,this.resetForm(),this.isUpdateUserFormVisible=!1}openAddUserForm(){this.selectedUserId=null,this.resetForm(),this.isAddUserFormVisible=!0}viewUser(e){this.isUserDetailsVisible=!0}deleteEntity(e){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi utilizatorul ${e.fullName}?`)&&this.adminService.deleteUser(e.id).subscribe({next:()=>{this.getPage()},error:t=>{console.error("Eroare la \u0219tergerea utilizatorului:",t)}})}closeAddUserForm(){this.isAddUserFormVisible=!1,this.resetForm()}resetForm(){this.formData={firstName:"",lastName:"",email:"",password:"",role:"Client"}}onPageChange(e){this.currentPage=e,this.getPage()}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}static \u0275fac=function(t){return new(t||i)(M(On))};static \u0275cmp=k({type:i,selectors:[["app-admin-users"]],decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[1,"admin-modal"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(t,n){t&1&&(u(0,"app-pagination",0),D("pageChange",function(a){return n.onPageChange(a)})("pageSizeChange",function(a){return n.onPageSizeChange(a)}),l(),u(1,"div",1)(2,"div",2)(3,"h2"),d(4,"Administreaz\u0103 to\u021Bi utilizatorii"),l(),u(5,"div",3)(6,"app-search-input",4),D("searchChanged",function(a){return n.onSearch(a)}),l()(),u(7,"button",5),D("click",function(){return n.openAddUserForm()}),d(8,"Adaug\u0103 utilizator"),l(),L(9,"app-dynamic-table",6),l()(),O(10,Kd,6,2,"div",7)(11,Qd,5,3,"div",7)(12,Xd,5,1,"div",8)),t&2&&(E("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",Ze(10,Hd))("totalItems",n.totalItems),_(6),E("placeholder",n.placeholder),_(3),E("columns",n.columns)("data",n.users),_(),E("ngIf",n.isAddUserFormVisible),_(),E("ngIf",n.isUpdateUserFormVisible),_(),E("ngIf",n.isUserDetailsVisible))},dependencies:[le,Z,ee,Ge,Kt,Qt,tt,pt],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}",".grid-form[_ngcontent-%COMP%]{gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto;font-family:Roboto Mono,monospace;border:2px solid #c9b7ff;border-radius:6px;box-shadow:0 4px 12px #0000001a}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:12px 16px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.form-group.half-width[_ngcontent-%COMP%]{flex:1 1 48%}label[_ngcontent-%COMP%]{margin-bottom:8px}.input-box[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:16px;outline:none}.input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-family:inherit;font-size:1rem;border:none;border-radius:6px;box-sizing:border-box;resize:vertical;background:#e6dfff}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;font-size:16px;outline:none;appearance:auto;font-family:inherit;width:100%}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#a388ff;box-shadow:0 0 3px #a388ff}.placeholder-selected[_ngcontent-%COMP%]{color:#7d7d7f!important}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.field-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var Yd=["class","users"],Zd=()=>[5,10,20];function eh(i,e){if(i&1){let t=j();u(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),D("click",function(){V(t);let o=T();return N(o.closeAddUserForm())}),d(4,"\xD7"),l()(),u(5,"app-dynamic-form",13),D("formSubmit",function(o){V(t);let a=T();return N(a.addEntity(o))}),l()()()}if(i&2){let t=T();_(5),E("fields",t.addEntityFormFields)("submitText","Adaug\u0103")}}function th(i,e){if(i&1){let t=j();u(0,"div",9)(1,"div",10)(2,"button",12),D("click",function(){V(t);let o=T();return N(o.closeUpdateUserForm())}),d(3,"\xD7"),l(),u(4,"app-dynamic-form",14),D("formSubmit",function(o){V(t);let a=T();return N(a.updateEntity(o))}),l()()()}if(i&2){let t=T();_(4),E("fields",t.updateEntityFormFields)("initialData",t.formData)("submitText","Actualizeaz\u0103")}}function nh(i,e){if(i&1){let t=j();u(0,"app-admin-details",17),D("close",function(){V(t);let o=T(2);return N(o.closeUserDetails())}),l()}if(i&2){let t=T(2);E("entity",t.entityDetails)("title","Detalii specialist")}}function ih(i,e){if(i&1){let t=j();u(0,"div",15)(1,"div",10)(2,"button",12),D("click",function(){V(t);let o=T();return N(o.closeUserDetails())}),d(3,"\xD7"),l(),O(4,nh,1,2,"app-admin-details",16),l()()}if(i&2){let t=T();_(4),E("ngIf",t.isUserDetailsVisible)}}var Ir=class i{constructor(e){this.adminService=e;let t={fullName:"",email:"",password:"",phoneNumber:"",address:"",yearsExperience:0,description:""};this.formData=U({},t),this.getPage()}searchTerm="";users=[];selectedUser=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddUserFormVisible=!1;isUpdateUserFormVisible=!1;isUserDetailsVisible=!1;selectedUserId=null;placeholder="Caut\u0103 un specialist...";columns=[{key:"id",header:"ID"},{key:"fullName",header:"Nume"},{key:"email",header:"Email"},{key:"phoneNumber",header:"Num\u0103r de telefon"},{key:"address",header:"Adres\u0103"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:e=>this.getEntity(e.id)},{label:"Modific\u0103",class:"edit",callback:e=>this.editUser(e)},{label:"\u0218terge",class:"delete",callback:e=>this.deleteUser(e)}]}];defaultUser={fullName:"",email:"",password:"",phoneNumber:"",address:"",yearsExperience:0,description:""};formData={};error=null;addEntityFormFields=Le(this.defaultUser,{email:{type:"email"},password:{type:"password"},yearsExperience:{type:"number",placeholder:"Ex: 5"},description:{type:"textarea",placeholder:"Descrie serviciile oferite",class:"full-width"}});updateEntityFormFields=Le({fullName:this.selectedUser?.fullName||"",phoneNumber:this.selectedUser?.phoneNumber||"",address:this.selectedUser?.address||"",yearsExperience:this.selectedUser?.yearsExperience||"",description:this.selectedUser?.description||""});onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}getEntity(e){this.adminService.getSpecialist(e).subscribe({next:t=>{this.entityDetailsId=t.response?.id,console.log(t.response),this.entityDetails=Mn(t.response??{}),this.isUserDetailsVisible=!0},error:t=>{console.error("Eroare la preluarea utilizatorului:",t),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getSpecialists(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{this.users=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(e){let t=e;this.adminService.addSpecialist(t).subscribe({next:()=>{this.closeAddUserForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editUser(e){this.selectedUserId=e.id,this.formData={fullName:e.fullName,phoneNumber:e.phoneNumber,address:e.address,yearsExperience:e.yearsExperience,description:e.description},this.isUpdateUserFormVisible=!0}updateEntity(e){if(console.log("Form data submitted:",e),!this.selectedUserId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let t={id:this.selectedUserId,fullName:e.fullName,phoneNumber:e.phoneNumber,address:e.address,yearsExperience:e.yearsExperience,description:e.description};console.log("Update payload:",t),this.adminService.updateSpecialist(this.selectedUserId,t).subscribe({next:()=>{console.log(),this.closeUpdateUserForm(),this.getPage()},error:n=>{console.error("Eroare la actualizare:",n)}})}closeUserDetails(){this.isUserDetailsVisible=!1,this.entityDetails={}}closeUpdateUserForm(){this.selectedUserId=null,this.resetForm(),this.isUpdateUserFormVisible=!1}openAddUserForm(){this.selectedUserId=null,this.resetForm(),this.isAddUserFormVisible=!0}viewUser(e){this.isUserDetailsVisible=!0}deleteUser(e){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi utilizatorul ${e.fullName}?`)&&this.adminService.deleteSpecialist(e.id).subscribe({next:()=>{this.getPage()},error:t=>{console.error("Eroare la \u0219tergerea utilizatorului:",t)}})}closeAddUserForm(){this.isAddUserFormVisible=!1,this.resetForm()}resetForm(){this.formData={firstName:"",lastName:"",email:"",password:"",role:"Client"}}getTotalPages(){return Math.ceil(this.totalItems/this.pageSize)}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}onPageChange(e){this.currentPage=e,this.getPage()}static \u0275fac=function(t){return new(t||i)(M(or))};static \u0275cmp=k({type:i,selectors:[["app-admin",8,"users"]],attrs:Yd,decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(t,n){t&1&&(u(0,"app-pagination",0),D("pageChange",function(a){return n.onPageChange(a)})("pageSizeChange",function(a){return n.onPageSizeChange(a)}),l(),u(1,"div",1)(2,"div",2)(3,"h2"),d(4,"Administreaz\u0103 to\u021Bi speciali\u0219tii"),l(),u(5,"div",3)(6,"app-search-input",4),D("searchChanged",function(a){return n.onSearch(a)}),l()(),u(7,"button",5),D("click",function(){return n.openAddUserForm()}),d(8,"Adaug\u0103 specialist"),l(),L(9,"app-dynamic-table",6),l()(),O(10,eh,6,2,"div",7)(11,th,5,3,"div",7)(12,ih,5,1,"div",8)),t&2&&(E("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",Ze(10,Zd))("totalItems",n.totalItems),_(6),E("placeholder",n.placeholder),_(3),E("columns",n.columns)("data",n.users),_(),E("ngIf",n.isAddUserFormVisible),_(),E("ngIf",n.isUpdateUserFormVisible),_(),E("ngIf",n.isUserDetailsVisible))},dependencies:[ee,Qt,Ge,Kt,Z,tt,pt],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var Tr=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-unauthorized"]],decls:6,vars:0,consts:[["routerLink","/home"]],template:function(t,n){t&1&&(u(0,"h2"),d(1,"Acces restric\u021Bionat"),l(),u(2,"p"),d(3,"Nu ai permisiunea necesar\u0103 pentru a accesa aceast\u0103 pagin\u0103."),l(),u(4,"a",0),d(5,"\xCEnapoi la pagina principal\u0103"),l())},encapsulation:2})};var kn=class i{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.getToken()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(t){return new(t||i)(K(W),K(Se))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};function rh(i,e){if(i&1&&L(0,"img",2),i&2){let t=T();E("src",t.icon,Vt)}}var Ar=class i{label;icon;onClick=new J;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-icon-button"]],inputs:{label:"label",icon:"icon"},outputs:{onClick:"onClick"},decls:4,vars:2,consts:[[1,"icon-button",3,"click"],["alt","icon","class","button-icon",3,"src",4,"ngIf"],["alt","icon",1,"button-icon",3,"src"]],template:function(t,n){t&1&&(u(0,"button",0),D("click",function(){return n.onClick.emit()}),O(1,rh,1,1,"img",1),u(2,"span"),d(3),l()()),t&2&&(_(),E("ngIf",n.icon),_(2),he(n.label))},dependencies:[le,Z],styles:[".icon-button[_ngcontent-%COMP%]{width:260px;height:55px;display:flex;align-items:center;gap:12px;padding:12px 24px;font-size:16px;font-weight:500;border:3px solid #4f378a;background-color:#f3e6ff;border-radius:10px;cursor:pointer;transition:background .2s ease;font-family:Roboto Mono,monospace}.icon-button[_ngcontent-%COMP%]:hover{background-color:#a197be}.icon-button[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain}"]})};var Dr=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Photo";addProfilePicture(e){let t=new FormData;t.append("file",e);let n=this.authService.getToken(),o=new B({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/AddProfilePicture`,t,{headers:o})}updateProfilePicture(e){let t=new FormData;t.append("file",e);let n=this.authService.getToken(),o=new B({Authorization:`Bearer ${n}`});return this.http.patch(`${this.baseUrl}/UpdateProfilePicture`,t,{headers:o})}addPortfolioPicture(e){let t=new FormData;t.append("file",e);let n=this.authService.getToken(),o=new B({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/AddPortfolioPicture`,t,{headers:o})}deletePortfolioPicture(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.delete(`${this.baseUrl}/DeletePortfolioPicture/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(K(ve),K(W))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};function sh(i,e){if(i&1&&(u(0,"span",21),d(1),l()),i&2){let t=e.$implicit;_(),he(t.name)}}var Pr=class i{constructor(e,t,n,o){this.profileService=e;this.authService=t;this.photoService=n;this.route=o}user;dummyUser={id:"user-001",fullName:"Elena Georgescu",email:"elena.georgescu@example.com",role:"Specialist",createdAt:new Date("2023-02-10T10:15:00Z"),updatedAt:new Date,rating:4.8,contactInfo:{phoneNumber:"0745123456",address:"Strada Florilor 12, Timi\u0219oara"},specialist:{yearsExperience:6,description:"Specialist \xEEn traduceri juridice \u0219i consultan\u021B\u0103 contractual\u0103.",categories:[{id:"cat-007",name:"Traduceri juridice"},{id:"cat-008",name:"Consultan\u021B\u0103 legal\u0103"}]}};ngOnInit(){this.profileService.getUserProfile().subscribe({next:e=>{this.user=e.response,console.log(this.user)},error:e=>{console.error(e)}})}onFileSelected(e){let t=e.target.files[0];if(!t)return;new FormData().append("file",t),this.photoService.addProfilePicture(t).subscribe({next:o=>{console.log("Upload success:",o),console.log(this.user?.profilePictureUrl)},error:o=>{console.error("Upload error:",o)}})}uploadProfilePicture(e){this.photoService.addProfilePicture(e).subscribe({next:t=>{console.log("Upload success:",t)},error:t=>{console.error("Upload error:",t)}})}onEdit(){}goToReviews(){this.route.navigate(["profile/user-reviews"])}goToHistory(){}goToExpertEase(){}goToSettings(){this.route.navigate(["profile/user-settings"])}logout(){window.confirm("Sigur vrei s\u0103 te deloghezi?")&&this.authService.logout(),this.route.navigate(["/home"])}UserRoleEnum=dn;static \u0275fac=function(t){return new(t||i)(M(On),M(W),M(Dr),M(Se))};static \u0275cmp=k({type:i,selectors:[["app-profile"]],decls:51,vars:22,consts:[[1,"account-card"],[1,"account-header"],[1,"avatar-wrapper"],[1,"avatar"],["alt","User avatar",3,"src"],[1,"upload-btn"],["type","file","accept","image/*","hidden","",3,"change"],["src","assets/icons/photo_media.svg","alt","Upload icon"],[1,"account-info"],[3,"onClick","label","icon"],[1,"card"],[1,"info"],[1,"full-name"],[1,"details-block"],[1,"row"],[1,"categories"],[1,"label"],["class","tag",4,"ngFor","ngForOf"],[1,"experience"],[1,"description"],[1,"account-actions"],[1,"tag"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),L(4,"img",4),u(5,"label",5)(6,"input",6),D("change",function(a){return n.onFileSelected(a)}),l(),L(7,"img",7),l()()(),u(8,"div",8)(9,"p")(10,"strong"),d(11,"Nume:"),l(),d(12),l(),u(13,"p")(14,"strong"),d(15,"Adresa mail:"),l(),d(16),l(),u(17,"p")(18,"strong"),d(19,"Parol\u0103:"),l(),d(20," ********"),l(),u(21,"p")(22,"strong"),d(23,"Creat la data de:"),l(),d(24),Ve(25,"date"),l()(),u(26,"app-icon-button",9),D("onClick",function(){return n.onEdit()}),l()(),u(27,"div",10)(28,"div",11)(29,"h2",12),d(30,"Anun\u021Bul t\u0103u"),l(),u(31,"div",13)(32,"div",14)(33,"div",15)(34,"span",16),d(35,"Categorii:"),l(),O(36,sh,2,1,"span",17),l(),u(37,"div",18)(38,"span",16),d(39,"Ani experien\u021B\u0103:"),l(),d(40),l()(),u(41,"div",19)(42,"span",16),d(43,"Descriere:"),l(),d(44),l()()(),u(45,"app-icon-button",9),D("onClick",function(){return n.onEdit()}),l()(),u(46,"div",20)(47,"app-icon-button",9),D("onClick",function(){return n.goToReviews()}),l(),u(48,"app-icon-button",9),D("onClick",function(){return n.goToHistory()}),l(),u(49,"app-icon-button",9),D("onClick",function(){return n.goToSettings()}),l(),u(50,"app-icon-button",9),D("onClick",function(){return n.logout()}),l()()()),t&2&&(_(4),E("src",(n.user==null?null:n.user.profilePictureUrl)||"assets/avatar.svg",Vt),_(8),G(" ",n.user==null?null:n.user.fullName," "),_(4),G(" ",n.user==null?null:n.user.email,""),_(8),G(" ",Ut(25,19,n.user==null?null:n.user.createdAt,"dd.MM.yyyy"),""),_(2),E("label","Editeaz\u0103 profilul")("icon","assets/icons/edit.svg"),_(10),E("ngForOf",n.user==null||n.user.specialist==null?null:n.user.specialist.categories),_(4),G(" ",n.user==null||n.user.specialist==null?null:n.user.specialist.yearsExperience," "),_(4),G(" ",n.user==null||n.user.specialist==null?null:n.user.specialist.description," "),_(),E("label","Editeaz\u0103 anun\u021Bul")("icon","assets/icons/edit.svg"),_(2),E("label","Recenziile tale")("icon","assets/icons/reviews.svg"),_(),E("label","Istoric servicii")("icon","assets/icons/history.svg"),_(),E("label","Set\u0103rile contului")("icon","assets/icons/settings.svg"),_(),E("label","Deconecteaz\u0103-te")("icon","assets/icons/logout.svg"))},dependencies:[Lt,Ar,ye],styles:[".account-card[_ngcontent-%COMP%]{background:#e0caff;max-width:1000px;margin:32px auto;box-shadow:0 4px 16px #0000001a;font-family:Roboto Mono,monospace;border:3px solid black}.account-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:32px;gap:32px}.account-info[_ngcontent-%COMP%]{flex:1;margin-left:32px;font-size:16px}.account-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px 78px;padding:32px}.card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#a08ad2;padding:20px 32px;width:100%;gap:20px;justify-content:space-between;box-sizing:border-box;border-top:3px solid black;border-bottom:3px solid black;font-family:Roboto Mono,monospace}.info[_ngcontent-%COMP%]{flex:1}.full-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:.25rem;margin-bottom:.5rem}.full-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.details-block[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:12px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.categories[_ngcontent-%COMP%], .experience[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-size:.95rem}.label[_ngcontent-%COMP%]{font-weight:700;margin-right:6px}.tag[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:160px;aspect-ratio:1/1}.avatar[_ngcontent-%COMP%]{position:relative;width:160px;height:160px;overflow:hidden}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;display:block}.rating-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;display:inline-flex;align-items:center;gap:.3em;background:#fff;padding:.2em .5em;border-radius:.6em;font-size:1.2em;box-shadow:0 1px 4px #0000001a}.rating-badge[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1em;height:1em}.upload-btn[_ngcontent-%COMP%]{position:absolute;bottom:4px;right:4px;background:#fff;border-radius:50%;padding:6px;cursor:pointer;font-size:18px}.upload-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.upload-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}"]})};var el=function(i){let e=[],t=0;for(let n=0;n<i.length;n++){let o=i.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ah=function(i){let e=[],t=0,n=0;for(;t<i.length;){let o=i[t++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){let a=i[t++];e[n++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){let a=i[t++],p=i[t++],w=i[t++],A=((o&7)<<18|(a&63)<<12|(p&63)<<6|w&63)-65536;e[n++]=String.fromCharCode(55296+(A>>10)),e[n++]=String.fromCharCode(56320+(A&1023))}else{let a=i[t++],p=i[t++];e[n++]=String.fromCharCode((o&15)<<12|(a&63)<<6|p&63)}}return e.join("")},ch={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<i.length;o+=3){let a=i[o],p=o+1<i.length,w=p?i[o+1]:0,A=o+2<i.length,P=A?i[o+2]:0,z=a>>2,pe=(a&3)<<4|w>>4,ue=(w&15)<<2|P>>6,Xe=P&63;A||(Xe=64,p||(ue=64)),n.push(t[z],t[pe],t[ue],t[Xe])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(el(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):ah(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<i.length;){let a=t[i.charAt(o++)],w=o<i.length?t[i.charAt(o)]:0;++o;let P=o<i.length?t[i.charAt(o)]:64;++o;let pe=o<i.length?t[i.charAt(o)]:64;if(++o,a==null||w==null||P==null||pe==null)throw new ws;let ue=a<<2|w>>4;if(n.push(ue),P!==64){let Xe=w<<4&240|P>>2;if(n.push(Xe),pe!==64){let Y=P<<6&192|pe;n.push(Y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},ws=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lh=function(i){let e=el(i);return ch.encodeByteArray(e,!0)},Cs=function(i){return lh(i).replace(/\./g,"")};function xs(){try{return typeof indexedDB=="object"}catch{return!1}}function tl(){return new Promise((i,e)=>{try{let t=!0,n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}var uh="FirebaseError",Tt=class i extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=uh,Object.setPrototypeOf(this,i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ei.prototype.create)}},Ei=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],p=a?dh(a,n):"Error",w=`${this.serviceName}: ${p} (${o}).`;return new Tt(o,w,n)}};function dh(i,e){return i.replace(hh,(t,n)=>{let o=e[n];return o!=null?String(o):`<${n}?>`})}var hh=/\{\$([^}]+)}/g;var P0=4*60*60*1e3;var Jt=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ph=[],se=function(i){return i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT",i}(se||{}),mh={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},fh=se.INFO,gh={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},_h=(i,e,...t)=>{if(e<i.logLevel)return;let n=new Date().toISOString(),o=gh[e];if(o)console[o](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Vn=class{constructor(e){this.name=e,this._logLevel=fh,this._logHandler=_h,this._userLogHandler=null,ph.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mh[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}};var yh=(i,e)=>e.some(t=>i instanceof t),nl,il;function vh(){return nl||(nl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bh(){return il||(il=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var rl=new WeakMap,Ss=new WeakMap,ol=new WeakMap,Es=new WeakMap,Ts=new WeakMap;function wh(i){let e=new Promise((t,n)=>{let o=()=>{i.removeEventListener("success",a),i.removeEventListener("error",p)},a=()=>{t(mt(i.result)),o()},p=()=>{n(i.error),o()};i.addEventListener("success",a),i.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&rl.set(t,i)}).catch(()=>{}),Ts.set(e,i),e}function Ch(i){if(Ss.has(i))return;let e=new Promise((t,n)=>{let o=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",p),i.removeEventListener("abort",p)},a=()=>{t(),o()},p=()=>{n(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",a),i.addEventListener("error",p),i.addEventListener("abort",p)});Ss.set(i,e)}var Is={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Ss.get(i);if(e==="objectStoreNames")return i.objectStoreNames||ol.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mt(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function sl(i){Is=i(Is)}function xh(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let n=i.call(Rr(this),e,...t);return ol.set(n,e.sort?e.sort():[e]),mt(n)}:bh().includes(i)?function(...e){return i.apply(Rr(this),e),mt(rl.get(this))}:function(...e){return mt(i.apply(Rr(this),e))}}function Eh(i){return typeof i=="function"?xh(i):(i instanceof IDBTransaction&&Ch(i),yh(i,vh())?new Proxy(i,Is):i)}function mt(i){if(i instanceof IDBRequest)return wh(i);if(Es.has(i))return Es.get(i);let e=Eh(i);return e!==i&&(Es.set(i,e),Ts.set(e,i)),e}var Rr=i=>Ts.get(i);function cl(i,e,{blocked:t,upgrade:n,blocking:o,terminated:a}={}){let p=indexedDB.open(i,e),w=mt(p);return n&&p.addEventListener("upgradeneeded",A=>{n(mt(p.result),A.oldVersion,A.newVersion,mt(p.transaction),A)}),t&&p.addEventListener("blocked",A=>t(A.oldVersion,A.newVersion,A)),w.then(A=>{a&&A.addEventListener("close",()=>a()),o&&A.addEventListener("versionchange",P=>o(P.oldVersion,P.newVersion,P))}).catch(()=>{}),w}var Sh=["get","getKey","getAll","getAllKeys","count"],Ih=["put","add","delete","clear"],As=new Map;function al(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(As.get(e))return As.get(e);let t=e.replace(/FromIndex$/,""),n=e!==t,o=Ih.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(o||Sh.includes(t)))return;let a=function(p,...w){return F(this,null,function*(){let A=this.transaction(p,o?"readwrite":"readonly"),P=A.store;return n&&(P=P.index(w.shift())),(yield Promise.all([P[t](...w),o&&A.done]))[0]})};return As.set(e,a),a}sl(i=>ge(U({},i),{get:(e,t,n)=>al(e,t)||i.get(e,t,n),has:(e,t)=>!!al(e,t)||i.has(e,t)}));var Ps=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ah(t)){let n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}};function Ah(i){let e=i.getComponent();return e?.type==="VERSION"}var Rs="@firebase/app",ll="0.10.15";var At=new Vn("@firebase/app"),Dh="@firebase/app-compat",Ph="@firebase/analytics-compat",Rh="@firebase/analytics",Mh="@firebase/app-check-compat",Oh="@firebase/app-check",kh="@firebase/auth",Vh="@firebase/auth-compat",Nh="@firebase/database",Fh="@firebase/data-connect",Uh="@firebase/database-compat",Lh="@firebase/functions",Bh="@firebase/functions-compat",qh="@firebase/installations",zh="@firebase/installations-compat",jh="@firebase/messaging",$h="@firebase/messaging-compat",Gh="@firebase/performance",Wh="@firebase/performance-compat",Hh="@firebase/remote-config",Kh="@firebase/remote-config-compat",Qh="@firebase/storage",Jh="@firebase/storage-compat",Xh="@firebase/firestore",Yh="@firebase/vertexai",Zh="@firebase/firestore-compat",ep="firebase",tp="11.0.1";var np={[Rs]:"fire-core",[Dh]:"fire-core-compat",[Rh]:"fire-analytics",[Ph]:"fire-analytics-compat",[Oh]:"fire-app-check",[Mh]:"fire-app-check-compat",[kh]:"fire-auth",[Vh]:"fire-auth-compat",[Nh]:"fire-rtdb",[Fh]:"fire-data-connect",[Uh]:"fire-rtdb-compat",[Lh]:"fire-fn",[Bh]:"fire-fn-compat",[qh]:"fire-iid",[zh]:"fire-iid-compat",[jh]:"fire-fcm",[$h]:"fire-fcm-compat",[Gh]:"fire-perf",[Wh]:"fire-perf-compat",[Hh]:"fire-rc",[Kh]:"fire-rc-compat",[Qh]:"fire-gcs",[Jh]:"fire-gcs-compat",[Xh]:"fire-fst",[Zh]:"fire-fst-compat",[Yh]:"fire-vertex","fire-js":"fire-js",[ep]:"fire-js-all"};var ip=new Map,rp=new Map,ul=new Map;function dl(i,e){try{i.container.addComponent(e)}catch(t){At.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Si(i){let e=i.name;if(ul.has(e))return At.debug(`There were multiple attempts to register component ${e}.`),!1;ul.set(e,i);for(let t of ip.values())dl(t,i);for(let t of rp.values())dl(t,i);return!0}var op={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ks=new Ei("app","Firebase",op);var fl=tp;function Nn(i,e,t){var n;let o=(n=np[i])!==null&&n!==void 0?n:i;t&&(o+=`-${t}`);let a=o.match(/\s|\//),p=e.match(/\s|\//);if(a||p){let w=[`Unable to register library "${o}" with version "${e}":`];a&&w.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&p&&w.push("and"),p&&w.push(`version name "${e}" contains illegal characters (whitespace or "/")`),At.warn(w.join(" "));return}Si(new Jt(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}var sp="firebase-heartbeat-database",ap=1,Ii="firebase-heartbeat-store",Ds=null;function gl(){return Ds||(Ds=cl(sp,ap,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Ii)}catch(t){console.warn(t)}}}}).catch(i=>{throw ks.create("idb-open",{originalErrorMessage:i.message})})),Ds}function cp(i){return F(this,null,function*(){try{let t=(yield gl()).transaction(Ii),n=yield t.objectStore(Ii).get(_l(i));return yield t.done,n}catch(e){if(e instanceof Tt)At.warn(e.message);else{let t=ks.create("idb-get",{originalErrorMessage:e?.message});At.warn(t.message)}}})}function hl(i,e){return F(this,null,function*(){try{let n=(yield gl()).transaction(Ii,"readwrite");yield n.objectStore(Ii).put(e,_l(i)),yield n.done}catch(t){if(t instanceof Tt)At.warn(t.message);else{let n=ks.create("idb-set",{originalErrorMessage:t?.message});At.warn(n.message)}}})}function _l(i){return`${i.name}!${i.options.appId}`}var lp=1024,up=30*24*60*60*1e3,Ms=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Os(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}triggerHeartbeat(){return F(this,null,function*(){var e,t;try{let o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=pl();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(p=>p.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(p=>{let w=new Date(p.date).valueOf();return Date.now()-w<=up}),this._storage.overwrite(this._heartbeatsCache))}catch(n){At.warn(n)}})}getHeartbeatsHeader(){return F(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=pl(),{heartbeatsToSend:n,unsentEntries:o}=dp(this._heartbeatsCache.heartbeats),a=Cs(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return At.warn(t),""}})}};function pl(){return new Date().toISOString().substring(0,10)}function dp(i,e=lp){let t=[],n=i.slice();for(let o of i){let a=t.find(p=>p.agent===o.agent);if(a){if(a.dates.push(o.date),ml(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ml(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}var Os=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return F(this,null,function*(){return xs()?tl().then(()=>!0).catch(()=>!1):!1})}read(){return F(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield cp(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return F(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let o=yield this.read();return hl(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return F(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let o=yield this.read();return hl(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return})}};function ml(i){return Cs(JSON.stringify({version:2,heartbeats:i})).length}function hp(i){Si(new Jt("platform-logger",e=>new Ps(e),"PRIVATE")),Si(new Jt("heartbeat",e=>new Ms(e),"PRIVATE")),Nn(Rs,ll,i),Nn(Rs,ll,"esm2017"),Nn("fire-js","")}hp("");var yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vl={};var Vs,bl;(function(){var i;function e(C,m){function g(){}g.prototype=m.prototype,C.D=m.prototype,C.prototype=new g,C.prototype.constructor=C,C.C=function(y,v,x){for(var f=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)f[bt-2]=arguments[bt];return m.prototype[v].apply(y,f)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,m,g){g||(g=0);var y=Array(16);if(typeof m=="string")for(var v=0;16>v;++v)y[v]=m.charCodeAt(g++)|m.charCodeAt(g++)<<8|m.charCodeAt(g++)<<16|m.charCodeAt(g++)<<24;else for(v=0;16>v;++v)y[v]=m[g++]|m[g++]<<8|m[g++]<<16|m[g++]<<24;m=C.g[0],g=C.g[1],v=C.g[2];var x=C.g[3],f=m+(x^g&(v^x))+y[0]+3614090360&4294967295;m=g+(f<<7&4294967295|f>>>25),f=x+(v^m&(g^v))+y[1]+3905402710&4294967295,x=m+(f<<12&4294967295|f>>>20),f=v+(g^x&(m^g))+y[2]+606105819&4294967295,v=x+(f<<17&4294967295|f>>>15),f=g+(m^v&(x^m))+y[3]+3250441966&4294967295,g=v+(f<<22&4294967295|f>>>10),f=m+(x^g&(v^x))+y[4]+4118548399&4294967295,m=g+(f<<7&4294967295|f>>>25),f=x+(v^m&(g^v))+y[5]+1200080426&4294967295,x=m+(f<<12&4294967295|f>>>20),f=v+(g^x&(m^g))+y[6]+2821735955&4294967295,v=x+(f<<17&4294967295|f>>>15),f=g+(m^v&(x^m))+y[7]+4249261313&4294967295,g=v+(f<<22&4294967295|f>>>10),f=m+(x^g&(v^x))+y[8]+1770035416&4294967295,m=g+(f<<7&4294967295|f>>>25),f=x+(v^m&(g^v))+y[9]+2336552879&4294967295,x=m+(f<<12&4294967295|f>>>20),f=v+(g^x&(m^g))+y[10]+4294925233&4294967295,v=x+(f<<17&4294967295|f>>>15),f=g+(m^v&(x^m))+y[11]+2304563134&4294967295,g=v+(f<<22&4294967295|f>>>10),f=m+(x^g&(v^x))+y[12]+1804603682&4294967295,m=g+(f<<7&4294967295|f>>>25),f=x+(v^m&(g^v))+y[13]+4254626195&4294967295,x=m+(f<<12&4294967295|f>>>20),f=v+(g^x&(m^g))+y[14]+2792965006&4294967295,v=x+(f<<17&4294967295|f>>>15),f=g+(m^v&(x^m))+y[15]+1236535329&4294967295,g=v+(f<<22&4294967295|f>>>10),f=m+(v^x&(g^v))+y[1]+4129170786&4294967295,m=g+(f<<5&4294967295|f>>>27),f=x+(g^v&(m^g))+y[6]+3225465664&4294967295,x=m+(f<<9&4294967295|f>>>23),f=v+(m^g&(x^m))+y[11]+643717713&4294967295,v=x+(f<<14&4294967295|f>>>18),f=g+(x^m&(v^x))+y[0]+3921069994&4294967295,g=v+(f<<20&4294967295|f>>>12),f=m+(v^x&(g^v))+y[5]+3593408605&4294967295,m=g+(f<<5&4294967295|f>>>27),f=x+(g^v&(m^g))+y[10]+38016083&4294967295,x=m+(f<<9&4294967295|f>>>23),f=v+(m^g&(x^m))+y[15]+3634488961&4294967295,v=x+(f<<14&4294967295|f>>>18),f=g+(x^m&(v^x))+y[4]+3889429448&4294967295,g=v+(f<<20&4294967295|f>>>12),f=m+(v^x&(g^v))+y[9]+568446438&4294967295,m=g+(f<<5&4294967295|f>>>27),f=x+(g^v&(m^g))+y[14]+3275163606&4294967295,x=m+(f<<9&4294967295|f>>>23),f=v+(m^g&(x^m))+y[3]+4107603335&4294967295,v=x+(f<<14&4294967295|f>>>18),f=g+(x^m&(v^x))+y[8]+1163531501&4294967295,g=v+(f<<20&4294967295|f>>>12),f=m+(v^x&(g^v))+y[13]+2850285829&4294967295,m=g+(f<<5&4294967295|f>>>27),f=x+(g^v&(m^g))+y[2]+4243563512&4294967295,x=m+(f<<9&4294967295|f>>>23),f=v+(m^g&(x^m))+y[7]+1735328473&4294967295,v=x+(f<<14&4294967295|f>>>18),f=g+(x^m&(v^x))+y[12]+2368359562&4294967295,g=v+(f<<20&4294967295|f>>>12),f=m+(g^v^x)+y[5]+4294588738&4294967295,m=g+(f<<4&4294967295|f>>>28),f=x+(m^g^v)+y[8]+2272392833&4294967295,x=m+(f<<11&4294967295|f>>>21),f=v+(x^m^g)+y[11]+1839030562&4294967295,v=x+(f<<16&4294967295|f>>>16),f=g+(v^x^m)+y[14]+4259657740&4294967295,g=v+(f<<23&4294967295|f>>>9),f=m+(g^v^x)+y[1]+2763975236&4294967295,m=g+(f<<4&4294967295|f>>>28),f=x+(m^g^v)+y[4]+1272893353&4294967295,x=m+(f<<11&4294967295|f>>>21),f=v+(x^m^g)+y[7]+4139469664&4294967295,v=x+(f<<16&4294967295|f>>>16),f=g+(v^x^m)+y[10]+3200236656&4294967295,g=v+(f<<23&4294967295|f>>>9),f=m+(g^v^x)+y[13]+681279174&4294967295,m=g+(f<<4&4294967295|f>>>28),f=x+(m^g^v)+y[0]+3936430074&4294967295,x=m+(f<<11&4294967295|f>>>21),f=v+(x^m^g)+y[3]+3572445317&4294967295,v=x+(f<<16&4294967295|f>>>16),f=g+(v^x^m)+y[6]+76029189&4294967295,g=v+(f<<23&4294967295|f>>>9),f=m+(g^v^x)+y[9]+3654602809&4294967295,m=g+(f<<4&4294967295|f>>>28),f=x+(m^g^v)+y[12]+3873151461&4294967295,x=m+(f<<11&4294967295|f>>>21),f=v+(x^m^g)+y[15]+530742520&4294967295,v=x+(f<<16&4294967295|f>>>16),f=g+(v^x^m)+y[2]+3299628645&4294967295,g=v+(f<<23&4294967295|f>>>9),f=m+(v^(g|~x))+y[0]+4096336452&4294967295,m=g+(f<<6&4294967295|f>>>26),f=x+(g^(m|~v))+y[7]+1126891415&4294967295,x=m+(f<<10&4294967295|f>>>22),f=v+(m^(x|~g))+y[14]+2878612391&4294967295,v=x+(f<<15&4294967295|f>>>17),f=g+(x^(v|~m))+y[5]+4237533241&4294967295,g=v+(f<<21&4294967295|f>>>11),f=m+(v^(g|~x))+y[12]+1700485571&4294967295,m=g+(f<<6&4294967295|f>>>26),f=x+(g^(m|~v))+y[3]+2399980690&4294967295,x=m+(f<<10&4294967295|f>>>22),f=v+(m^(x|~g))+y[10]+4293915773&4294967295,v=x+(f<<15&4294967295|f>>>17),f=g+(x^(v|~m))+y[1]+2240044497&4294967295,g=v+(f<<21&4294967295|f>>>11),f=m+(v^(g|~x))+y[8]+1873313359&4294967295,m=g+(f<<6&4294967295|f>>>26),f=x+(g^(m|~v))+y[15]+4264355552&4294967295,x=m+(f<<10&4294967295|f>>>22),f=v+(m^(x|~g))+y[6]+2734768916&4294967295,v=x+(f<<15&4294967295|f>>>17),f=g+(x^(v|~m))+y[13]+1309151649&4294967295,g=v+(f<<21&4294967295|f>>>11),f=m+(v^(g|~x))+y[4]+4149444226&4294967295,m=g+(f<<6&4294967295|f>>>26),f=x+(g^(m|~v))+y[11]+3174756917&4294967295,x=m+(f<<10&4294967295|f>>>22),f=v+(m^(x|~g))+y[2]+718787259&4294967295,v=x+(f<<15&4294967295|f>>>17),f=g+(x^(v|~m))+y[9]+3951481745&4294967295,C.g[0]=C.g[0]+m&4294967295,C.g[1]=C.g[1]+(v+(f<<21&4294967295|f>>>11))&4294967295,C.g[2]=C.g[2]+v&4294967295,C.g[3]=C.g[3]+x&4294967295}n.prototype.u=function(C,m){m===void 0&&(m=C.length);for(var g=m-this.blockSize,y=this.B,v=this.h,x=0;x<m;){if(v==0)for(;x<=g;)o(this,C,x),x+=this.blockSize;if(typeof C=="string"){for(;x<m;)if(y[v++]=C.charCodeAt(x++),v==this.blockSize){o(this,y),v=0;break}}else for(;x<m;)if(y[v++]=C[x++],v==this.blockSize){o(this,y),v=0;break}}this.h=v,this.o+=m},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var m=1;m<C.length-8;++m)C[m]=0;var g=8*this.o;for(m=C.length-8;m<C.length;++m)C[m]=g&255,g/=256;for(this.u(C),C=Array(16),m=g=0;4>m;++m)for(var y=0;32>y;y+=8)C[g++]=this.g[m]>>>y&255;return C};function a(C,m){var g=w;return Object.prototype.hasOwnProperty.call(g,C)?g[C]:g[C]=m(C)}function p(C,m){this.h=m;for(var g=[],y=!0,v=C.length-1;0<=v;v--){var x=C[v]|0;y&&x==m||(g[v]=x,y=!1)}this.g=g}var w={};function A(C){return-128<=C&&128>C?a(C,function(m){return new p([m|0],0>m?-1:0)}):new p([C|0],0>C?-1:0)}function P(C){if(isNaN(C)||!isFinite(C))return pe;if(0>C)return _e(P(-C));for(var m=[],g=1,y=0;C>=g;y++)m[y]=C/g|0,g*=4294967296;return new p(m,0)}function z(C,m){if(C.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(C.charAt(0)=="-")return _e(z(C.substring(1),m));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var g=P(Math.pow(m,8)),y=pe,v=0;v<C.length;v+=8){var x=Math.min(8,C.length-v),f=parseInt(C.substring(v,v+x),m);8>x?(x=P(Math.pow(m,x)),y=y.j(x).add(P(f))):(y=y.j(g),y=y.add(P(f)))}return y}var pe=A(0),ue=A(1),Xe=A(16777216);i=p.prototype,i.m=function(){if(Pe(this))return-_e(this).m();for(var C=0,m=1,g=0;g<this.g.length;g++){var y=this.i(g);C+=(0<=y?y:4294967296+y)*m,m*=4294967296}return C},i.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(Y(this))return"0";if(Pe(this))return"-"+_e(this).toString(C);for(var m=P(Math.pow(C,6)),g=this,y="";;){var v=Pt(g,m).g;g=_n(g,v.j(m));var x=((0<g.g.length?g.g[0]:g.h)>>>0).toString(C);if(g=v,Y(g))return x+y;for(;6>x.length;)x="0"+x;y=x+y}},i.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function Y(C){if(C.h!=0)return!1;for(var m=0;m<C.g.length;m++)if(C.g[m]!=0)return!1;return!0}function Pe(C){return C.h==-1}i.l=function(C){return C=_n(this,C),Pe(C)?-1:Y(C)?0:1};function _e(C){for(var m=C.g.length,g=[],y=0;y<m;y++)g[y]=~C.g[y];return new p(g,~C.h).add(ue)}i.abs=function(){return Pe(this)?_e(this):this},i.add=function(C){for(var m=Math.max(this.g.length,C.g.length),g=[],y=0,v=0;v<=m;v++){var x=y+(this.i(v)&65535)+(C.i(v)&65535),f=(x>>>16)+(this.i(v)>>>16)+(C.i(v)>>>16);y=f>>>16,x&=65535,f&=65535,g[v]=f<<16|x}return new p(g,g[g.length-1]&-2147483648?-1:0)};function _n(C,m){return C.add(_e(m))}i.j=function(C){if(Y(this)||Y(C))return pe;if(Pe(this))return Pe(C)?_e(this).j(_e(C)):_e(_e(this).j(C));if(Pe(C))return _e(this.j(_e(C)));if(0>this.l(Xe)&&0>C.l(Xe))return P(this.m()*C.m());for(var m=this.g.length+C.g.length,g=[],y=0;y<2*m;y++)g[y]=0;for(y=0;y<this.g.length;y++)for(var v=0;v<C.g.length;v++){var x=this.i(y)>>>16,f=this.i(y)&65535,bt=C.i(v)>>>16,$n=C.i(v)&65535;g[2*y+2*v]+=f*$n,at(g,2*y+2*v),g[2*y+2*v+1]+=x*$n,at(g,2*y+2*v+1),g[2*y+2*v+1]+=f*bt,at(g,2*y+2*v+1),g[2*y+2*v+2]+=x*bt,at(g,2*y+2*v+2)}for(y=0;y<m;y++)g[y]=g[2*y+1]<<16|g[2*y];for(y=m;y<2*m;y++)g[y]=0;return new p(g,0)};function at(C,m){for(;(C[m]&65535)!=C[m];)C[m+1]+=C[m]>>>16,C[m]&=65535,m++}function Ye(C,m){this.g=C,this.h=m}function Pt(C,m){if(Y(m))throw Error("division by zero");if(Y(C))return new Ye(pe,pe);if(Pe(C))return m=Pt(_e(C),m),new Ye(_e(m.g),_e(m.h));if(Pe(m))return m=Pt(C,_e(m)),new Ye(_e(m.g),m.h);if(30<C.g.length){if(Pe(C)||Pe(m))throw Error("slowDivide_ only works with positive integers.");for(var g=ue,y=m;0>=y.l(C);)g=ki(g),y=ki(y);var v=ct(g,1),x=ct(y,1);for(y=ct(y,2),g=ct(g,2);!Y(y);){var f=x.add(y);0>=f.l(C)&&(v=v.add(g),x=f),y=ct(y,1),g=ct(g,1)}return m=_n(C,v.j(m)),new Ye(v,m)}for(v=pe;0<=C.l(m);){for(g=Math.max(1,Math.floor(C.m()/m.m())),y=Math.ceil(Math.log(g)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),x=P(g),f=x.j(m);Pe(f)||0<f.l(C);)g-=y,x=P(g),f=x.j(m);Y(x)&&(x=ue),v=v.add(x),C=_n(C,f)}return new Ye(v,C)}i.A=function(C){return Pt(this,C).h},i.and=function(C){for(var m=Math.max(this.g.length,C.g.length),g=[],y=0;y<m;y++)g[y]=this.i(y)&C.i(y);return new p(g,this.h&C.h)},i.or=function(C){for(var m=Math.max(this.g.length,C.g.length),g=[],y=0;y<m;y++)g[y]=this.i(y)|C.i(y);return new p(g,this.h|C.h)},i.xor=function(C){for(var m=Math.max(this.g.length,C.g.length),g=[],y=0;y<m;y++)g[y]=this.i(y)^C.i(y);return new p(g,this.h^C.h)};function ki(C){for(var m=C.g.length+1,g=[],y=0;y<m;y++)g[y]=C.i(y)<<1|C.i(y-1)>>>31;return new p(g,C.h)}function ct(C,m){var g=m>>5;m%=32;for(var y=C.g.length-g,v=[],x=0;x<y;x++)v[x]=0<m?C.i(x+g)>>>m|C.i(x+g+1)<<32-m:C.i(x+g);return new p(v,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,bl=vl.Md5=n,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.A,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=P,p.fromString=z,Vs=vl.Integer=p}).apply(typeof yl<"u"?yl:typeof self<"u"?self:typeof window<"u"?window:{});var Mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dt={};var wl,pp,Cl,xl,El,Sl,Il,Tl,Al;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,s,c){return r==Array.prototype||r==Object.prototype||(r[s]=c.value),r};function t(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mr=="object"&&Mr];for(var s=0;s<r.length;++s){var c=r[s];if(c&&c.Math==Math)return c}throw Error("Cannot find global object")}var n=t(this);function o(r,s){if(s)e:{var c=n;r=r.split(".");for(var h=0;h<r.length-1;h++){var b=r[h];if(!(b in c))break e;c=c[b]}r=r[r.length-1],h=c[r],s=s(h),s!=h&&s!=null&&e(c,r,{configurable:!0,writable:!0,value:s})}}function a(r,s){r instanceof String&&(r+="");var c=0,h=!1,b={next:function(){if(!h&&c<r.length){var S=c++;return{value:s(S,r[S]),done:!1}}return h=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}o("Array.prototype.values",function(r){return r||function(){return a(this,function(s,c){return c})}});var p=p||{},w=this||self;function A(r){var s=typeof r;return s=s!="object"?s:r?Array.isArray(r)?"array":s:"null",s=="array"||s=="object"&&typeof r.length=="number"}function P(r){var s=typeof r;return s=="object"&&r!=null||s=="function"}function z(r,s,c){return r.call.apply(r.bind,arguments)}function pe(r,s,c){if(!r)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,h),r.apply(s,b)}}return function(){return r.apply(s,arguments)}}function ue(r,s,c){return ue=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?z:pe,ue.apply(null,arguments)}function Xe(r,s){var c=Array.prototype.slice.call(arguments,1);return function(){var h=c.slice();return h.push.apply(h,arguments),r.apply(this,h)}}function Y(r,s){function c(){}c.prototype=s.prototype,r.aa=s.prototype,r.prototype=new c,r.prototype.constructor=r,r.Qb=function(h,b,S){for(var R=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)R[ne-2]=arguments[ne];return s.prototype[b].apply(h,R)}}function Pe(r){let s=r.length;if(0<s){let c=Array(s);for(let h=0;h<s;h++)c[h]=r[h];return c}return[]}function _e(r,s){for(let c=1;c<arguments.length;c++){let h=arguments[c];if(A(h)){let b=r.length||0,S=h.length||0;r.length=b+S;for(let R=0;R<S;R++)r[b+R]=h[R]}else r.push(h)}}class _n{constructor(s,c){this.i=s,this.j=c,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}function at(r){return/^[\s\xa0]*$/.test(r)}function Ye(){var r=w.navigator;return r&&(r=r.userAgent)?r:""}function Pt(r){return Pt[" "](r),r}Pt[" "]=function(){};var ki=Ye().indexOf("Gecko")!=-1&&!(Ye().toLowerCase().indexOf("webkit")!=-1&&Ye().indexOf("Edge")==-1)&&!(Ye().indexOf("Trident")!=-1||Ye().indexOf("MSIE")!=-1)&&Ye().indexOf("Edge")==-1;function ct(r,s,c){for(let h in r)s.call(c,r[h],h,r)}function C(r,s){for(let c in r)s.call(void 0,r[c],c,r)}function m(r){let s={};for(let c in r)s[c]=r[c];return s}let g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(r,s){let c,h;for(let b=1;b<arguments.length;b++){h=arguments[b];for(c in h)r[c]=h[c];for(let S=0;S<g.length;S++)c=g[S],Object.prototype.hasOwnProperty.call(h,c)&&(r[c]=h[c])}}function v(r){var s=1;r=r.split(":");let c=[];for(;0<s&&r.length;)c.push(r.shift()),s--;return r.length&&c.push(r.join(":")),c}function x(r){w.setTimeout(()=>{throw r},0)}function f(){var r=Ro;let s=null;return r.g&&(s=r.g,r.g=r.g.next,r.g||(r.h=null),s.next=null),s}class bt{constructor(){this.h=this.g=null}add(s,c){let h=$n.get();h.set(s,c),this.h?this.h.next=h:this.g=h,this.h=h}}var $n=new _n(()=>new Ql,r=>r.reset());class Ql{constructor(){this.next=this.g=this.h=null}set(s,c){this.h=s,this.g=c,this.next=null}reset(){this.next=this.g=this.h=null}}let Gn,Wn=!1,Ro=new bt,ta=()=>{let r=w.Promise.resolve(void 0);Gn=()=>{r.then(Jl)}};var Jl=()=>{for(var r;r=f();){try{r.h.call(r.g)}catch(c){x(c)}var s=$n;s.j(r),100>s.h&&(s.h++,r.next=s.g,s.g=r)}Wn=!1};function Rt(){this.s=this.s,this.C=this.C}Rt.prototype.s=!1,Rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(r,s){this.type=r,this.g=this.target=s,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var Xl=function(){if(!w.addEventListener||!Object.defineProperty)return!1;var r=!1,s=Object.defineProperty({},"passive",{get:function(){r=!0}});try{let c=()=>{};w.addEventListener("test",c,s),w.removeEventListener("test",c,s)}catch{}return r}();function Hn(r,s){if(Re.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var c=this.type=r.type,h=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=s,s=r.relatedTarget){if(ki){e:{try{Pt(s.nodeName);var b=!0;break e}catch{}b=!1}b||(s=null)}}else c=="mouseover"?s=r.fromElement:c=="mouseout"&&(s=r.toElement);this.relatedTarget=s,h?(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0):(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType=typeof r.pointerType=="string"?r.pointerType:Yl[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Hn.aa.h.call(this)}}Y(Hn,Re);var Yl={2:"touch",3:"pen",4:"mouse"};Hn.prototype.h=function(){Hn.aa.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var Kn="closure_listenable_"+(1e6*Math.random()|0),Zl=0;function eu(r,s,c,h,b){this.listener=r,this.proxy=null,this.src=s,this.type=c,this.capture=!!h,this.ha=b,this.key=++Zl,this.da=this.fa=!1}function Vi(r){r.da=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function Ni(r){this.src=r,this.g={},this.h=0}Ni.prototype.add=function(r,s,c,h,b){var S=r.toString();r=this.g[S],r||(r=this.g[S]=[],this.h++);var R=Oo(r,s,h,b);return-1<R?(s=r[R],c||(s.fa=!1)):(s=new eu(s,this.src,S,!!h,b),s.fa=c,r.push(s)),s};function Mo(r,s){var c=s.type;if(c in r.g){var h=r.g[c],b=Array.prototype.indexOf.call(h,s,void 0),S;(S=0<=b)&&Array.prototype.splice.call(h,b,1),S&&(Vi(s),r.g[c].length==0&&(delete r.g[c],r.h--))}}function Oo(r,s,c,h){for(var b=0;b<r.length;++b){var S=r[b];if(!S.da&&S.listener==s&&S.capture==!!c&&S.ha==h)return b}return-1}var ko="closure_lm_"+(1e6*Math.random()|0),Vo={};function na(r,s,c,h,b){if(h&&h.once)return ra(r,s,c,h,b);if(Array.isArray(s)){for(var S=0;S<s.length;S++)na(r,s[S],c,h,b);return null}return c=Lo(c),r&&r[Kn]?r.K(s,c,P(h)?!!h.capture:!!h,b):ia(r,s,c,!1,h,b)}function ia(r,s,c,h,b,S){if(!s)throw Error("Invalid event type");var R=P(b)?!!b.capture:!!b,ne=Fo(r);if(ne||(r[ko]=ne=new Ni(r)),c=ne.add(s,c,h,R,S),c.proxy)return c;if(h=tu(),c.proxy=h,h.src=r,h.listener=c,r.addEventListener)Xl||(b=R),b===void 0&&(b=!1),r.addEventListener(s.toString(),h,b);else if(r.attachEvent)r.attachEvent(sa(s.toString()),h);else if(r.addListener&&r.removeListener)r.addListener(h);else throw Error("addEventListener and attachEvent are unavailable.");return c}function tu(){function r(c){return s.call(r.src,r.listener,c)}let s=nu;return r}function ra(r,s,c,h,b){if(Array.isArray(s)){for(var S=0;S<s.length;S++)ra(r,s[S],c,h,b);return null}return c=Lo(c),r&&r[Kn]?r.L(s,c,P(h)?!!h.capture:!!h,b):ia(r,s,c,!0,h,b)}function oa(r,s,c,h,b){if(Array.isArray(s))for(var S=0;S<s.length;S++)oa(r,s[S],c,h,b);else h=P(h)?!!h.capture:!!h,c=Lo(c),r&&r[Kn]?(r=r.i,s=String(s).toString(),s in r.g&&(S=r.g[s],c=Oo(S,c,h,b),-1<c&&(Vi(S[c]),Array.prototype.splice.call(S,c,1),S.length==0&&(delete r.g[s],r.h--)))):r&&(r=Fo(r))&&(s=r.g[s.toString()],r=-1,s&&(r=Oo(s,c,h,b)),(c=-1<r?s[r]:null)&&No(c))}function No(r){if(typeof r!="number"&&r&&!r.da){var s=r.src;if(s&&s[Kn])Mo(s.i,r);else{var c=r.type,h=r.proxy;s.removeEventListener?s.removeEventListener(c,h,r.capture):s.detachEvent?s.detachEvent(sa(c),h):s.addListener&&s.removeListener&&s.removeListener(h),(c=Fo(s))?(Mo(c,r),c.h==0&&(c.src=null,s[ko]=null)):Vi(r)}}}function sa(r){return r in Vo?Vo[r]:Vo[r]="on"+r}function nu(r,s){if(r.da)r=!0;else{s=new Hn(s,this);var c=r.listener,h=r.ha||r.src;r.fa&&No(r),r=c.call(h,s)}return r}function Fo(r){return r=r[ko],r instanceof Ni?r:null}var Uo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lo(r){return typeof r=="function"?r:(r[Uo]||(r[Uo]=function(s){return r.handleEvent(s)}),r[Uo])}function Me(){Rt.call(this),this.i=new Ni(this),this.M=this,this.F=null}Y(Me,Rt),Me.prototype[Kn]=!0,Me.prototype.removeEventListener=function(r,s,c,h){oa(this,r,s,c,h)};function Fe(r,s){var c,h=r.F;if(h)for(c=[];h;h=h.F)c.push(h);if(r=r.M,h=s.type||s,typeof s=="string")s=new Re(s,r);else if(s instanceof Re)s.target=s.target||r;else{var b=s;s=new Re(h,r),y(s,b)}if(b=!0,c)for(var S=c.length-1;0<=S;S--){var R=s.g=c[S];b=Fi(R,h,!0,s)&&b}if(R=s.g=r,b=Fi(R,h,!0,s)&&b,b=Fi(R,h,!1,s)&&b,c)for(S=0;S<c.length;S++)R=s.g=c[S],b=Fi(R,h,!1,s)&&b}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var r=this.i,s;for(s in r.g){for(var c=r.g[s],h=0;h<c.length;h++)Vi(c[h]);delete r.g[s],r.h--}}this.F=null},Me.prototype.K=function(r,s,c,h){return this.i.add(String(r),s,!1,c,h)},Me.prototype.L=function(r,s,c,h){return this.i.add(String(r),s,!0,c,h)};function Fi(r,s,c,h){if(s=r.i.g[String(s)],!s)return!0;s=s.concat();for(var b=!0,S=0;S<s.length;++S){var R=s[S];if(R&&!R.da&&R.capture==c){var ne=R.listener,Ae=R.ha||R.src;R.fa&&Mo(r.i,R),b=ne.call(Ae,h)!==!1&&b}}return b&&!h.defaultPrevented}function aa(r,s,c){if(typeof r=="function")c&&(r=ue(r,c));else if(r&&typeof r.handleEvent=="function")r=ue(r.handleEvent,r);else throw Error("Invalid listener argument");return 2147483647<Number(s)?-1:w.setTimeout(r,s||0)}function ca(r){r.g=aa(()=>{r.g=null,r.i&&(r.i=!1,ca(r))},r.l);let s=r.h;r.h=null,r.m.apply(null,s)}class iu extends Rt{constructor(s,c){super(),this.m=s,this.l=c,this.h=null,this.i=!1,this.g=null}j(s){this.h=arguments,this.g?this.i=!0:ca(this)}N(){super.N(),this.g&&(w.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qn(r){Rt.call(this),this.h=r,this.g={}}Y(Qn,Rt);var la=[];function ua(r){ct(r.g,function(s,c){this.g.hasOwnProperty(c)&&No(s)},r),r.g={}}Qn.prototype.N=function(){Qn.aa.N.call(this),ua(this)},Qn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bo=w.JSON.stringify,ru=w.JSON.parse,ou=class{stringify(r){return w.JSON.stringify(r,void 0)}parse(r){return w.JSON.parse(r,void 0)}};function qo(){}qo.prototype.h=null;function da(r){return r.h||(r.h=r.i())}function ha(){}var Jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zo(){Re.call(this,"d")}Y(zo,Re);function jo(){Re.call(this,"c")}Y(jo,Re);var en={},pa=null;function Ui(){return pa=pa||new Me}en.La="serverreachability";function ma(r){Re.call(this,en.La,r)}Y(ma,Re);function Xn(r){let s=Ui();Fe(s,new ma(s))}en.STAT_EVENT="statevent";function fa(r,s){Re.call(this,en.STAT_EVENT,r),this.stat=s}Y(fa,Re);function Ue(r){let s=Ui();Fe(s,new fa(s,r))}en.Ma="timingevent";function ga(r,s){Re.call(this,en.Ma,r),this.size=s}Y(ga,Re);function Yn(r,s){if(typeof r!="function")throw Error("Fn must not be null and must be a function");return w.setTimeout(function(){r()},s)}function Zn(){this.g=!0}Zn.prototype.xa=function(){this.g=!1};function su(r,s,c,h,b,S){r.info(function(){if(r.g)if(S)for(var R="",ne=S.split("&"),Ae=0;Ae<ne.length;Ae++){var Q=ne[Ae].split("=");if(1<Q.length){var Oe=Q[0];Q=Q[1];var ke=Oe.split("_");R=2<=ke.length&&ke[1]=="type"?R+(Oe+"="+Q+"&"):R+(Oe+"=redacted&")}}else R=null;else R=S;return"XMLHTTP REQ ("+h+") [attempt "+b+"]: "+s+`
`+c+`
`+R})}function au(r,s,c,h,b,S,R){r.info(function(){return"XMLHTTP RESP ("+h+") [ attempt "+b+"]: "+s+`
`+c+`
`+S+" "+R})}function yn(r,s,c,h){r.info(function(){return"XMLHTTP TEXT ("+s+"): "+lu(r,c)+(h?" "+h:"")})}function cu(r,s){r.info(function(){return"TIMEOUT: "+s})}Zn.prototype.info=function(){};function lu(r,s){if(!r.g)return s;if(!s)return null;try{var c=JSON.parse(s);if(c){for(r=0;r<c.length;r++)if(Array.isArray(c[r])){var h=c[r];if(!(2>h.length)){var b=h[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var R=1;R<b.length;R++)b[R]=""}}}}return Bo(c)}catch{return s}}var Li={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_a={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$o;function Bi(){}Y(Bi,qo),Bi.prototype.g=function(){return new XMLHttpRequest},Bi.prototype.i=function(){return{}},$o=new Bi;function Mt(r,s,c,h){this.j=r,this.i=s,this.l=c,this.R=h||1,this.U=new Qn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ya}function ya(){this.i=null,this.g="",this.h=!1}var va={},Go={};function Wo(r,s,c){r.L=1,r.v=$i(wt(s)),r.m=c,r.P=!0,ba(r,null)}function ba(r,s){r.F=Date.now(),qi(r),r.A=wt(r.v);var c=r.A,h=r.R;Array.isArray(h)||(h=[String(h)]),ka(c.i,"t",h),r.C=0,c=r.j.J,r.h=new ya,r.g=Ya(r.j,c?s:null,!r.m),0<r.O&&(r.M=new iu(ue(r.Y,r,r.g),r.O)),s=r.U,c=r.g,h=r.ca;var b="readystatechange";Array.isArray(b)||(b&&(la[0]=b.toString()),b=la);for(var S=0;S<b.length;S++){var R=na(c,b[S],h||s.handleEvent,!1,s.h||s);if(!R)break;s.g[R.key]=R}s=r.H?m(r.H):{},r.m?(r.u||(r.u="POST"),s["Content-Type"]="application/x-www-form-urlencoded",r.g.ea(r.A,r.u,r.m,s)):(r.u="GET",r.g.ea(r.A,r.u,null,s)),Xn(),su(r.i,r.u,r.A,r.l,r.R,r.m)}Mt.prototype.ca=function(r){r=r.target;let s=this.M;s&&Ct(r)==3?s.j():this.Y(r)},Mt.prototype.Y=function(r){try{if(r==this.g)e:{let ke=Ct(this.g);var s=this.g.Ba();let wn=this.g.Z();if(!(3>ke)&&(ke!=3||this.g&&(this.h.h||this.g.oa()||qa(this.g)))){this.J||ke!=4||s==7||(s==8||0>=wn?Xn(3):Xn(2)),Ho(this);var c=this.g.Z();this.X=c;t:if(wa(this)){var h=qa(this.g);r="";var b=h.length,S=Ct(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),ei(this);var R="";break t}this.h.i=new w.TextDecoder}for(s=0;s<b;s++)this.h.h=!0,r+=this.h.i.decode(h[s],{stream:!(S&&s==b-1)});h.length=0,this.h.g+=r,this.C=0,R=this.h.g}else R=this.g.oa();if(this.o=c==200,au(this.i,this.u,this.A,this.l,this.R,ke,c),this.o){if(this.T&&!this.K){t:{if(this.g){var ne,Ae=this.g;if((ne=Ae.g?Ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!at(ne)){var Q=ne;break t}}Q=null}if(c=Q)yn(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ko(this,c);else{this.o=!1,this.s=3,Ue(12),tn(this),ei(this);break e}}if(this.P){c=!0;let nt;for(;!this.J&&this.C<R.length;)if(nt=uu(this,R),nt==Go){ke==4&&(this.s=4,Ue(14),c=!1),yn(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==va){this.s=4,Ue(15),yn(this.i,this.l,R,"[Invalid Chunk]"),c=!1;break}else yn(this.i,this.l,nt,null),Ko(this,nt);if(wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||R.length!=0||this.h.h||(this.s=1,Ue(16),c=!1),this.o=this.o&&c,!c)yn(this.i,this.l,R,"[Invalid Chunked Response]"),tn(this),ei(this);else if(0<R.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),es(Oe),Oe.M=!0,Ue(11))}}else yn(this.i,this.l,R,null),Ko(this,R);ke==4&&tn(this),this.o&&!this.J&&(ke==4?Ka(this.j,this):(this.o=!1,qi(this)))}else Tu(this.g),c==400&&0<R.indexOf("Unknown SID")?(this.s=3,Ue(12)):(this.s=0,Ue(13)),tn(this),ei(this)}}}catch{}finally{}};function wa(r){return r.g?r.u=="GET"&&r.L!=2&&r.j.Ca:!1}function uu(r,s){var c=r.C,h=s.indexOf(`
`,c);return h==-1?Go:(c=Number(s.substring(c,h)),isNaN(c)?va:(h+=1,h+c>s.length?Go:(s=s.slice(h,h+c),r.C=h+c,s)))}Mt.prototype.cancel=function(){this.J=!0,tn(this)};function qi(r){r.S=Date.now()+r.I,Ca(r,r.I)}function Ca(r,s){if(r.B!=null)throw Error("WatchDog timer not null");r.B=Yn(ue(r.ba,r),s)}function Ho(r){r.B&&(w.clearTimeout(r.B),r.B=null)}Mt.prototype.ba=function(){this.B=null;let r=Date.now();0<=r-this.S?(cu(this.i,this.A),this.L!=2&&(Xn(),Ue(17)),tn(this),this.s=2,ei(this)):Ca(this,this.S-r)};function ei(r){r.j.G==0||r.J||Ka(r.j,r)}function tn(r){Ho(r);var s=r.M;s&&typeof s.ma=="function"&&s.ma(),r.M=null,ua(r.U),r.g&&(s=r.g,r.g=null,s.abort(),s.ma())}function Ko(r,s){try{var c=r.j;if(c.G!=0&&(c.g==r||Qo(c.h,r))){if(!r.K&&Qo(c.h,r)&&c.G==3){try{var h=c.Da.g.parse(s)}catch{h=null}if(Array.isArray(h)&&h.length==3){var b=h;if(b[0]==0){e:if(!c.u){if(c.g)if(c.g.F+3e3<r.F)Qi(c),Hi(c);else break e;Zo(c),Ue(18)}}else c.za=b[1],0<c.za-c.T&&37500>b[2]&&c.F&&c.v==0&&!c.C&&(c.C=Yn(ue(c.Za,c),6e3));if(1>=Sa(c.h)&&c.ca){try{c.ca()}catch{}c.ca=void 0}}else rn(c,11)}else if((r.K||c.g==r)&&Qi(c),!at(s))for(b=c.Da.g.parse(s),s=0;s<b.length;s++){let Q=b[s];if(c.T=Q[0],Q=Q[1],c.G==2)if(Q[0]=="c"){c.K=Q[1],c.ia=Q[2];let Oe=Q[3];Oe!=null&&(c.la=Oe,c.j.info("VER="+c.la));let ke=Q[4];ke!=null&&(c.Aa=ke,c.j.info("SVER="+c.Aa));let wn=Q[5];wn!=null&&typeof wn=="number"&&0<wn&&(h=1.5*wn,c.L=h,c.j.info("backChannelRequestTimeoutMs_="+h)),h=c;let nt=r.g;if(nt){let Xi=nt.g?nt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xi){var S=h.h;S.g||Xi.indexOf("spdy")==-1&&Xi.indexOf("quic")==-1&&Xi.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Jo(S,S.h),S.h=null))}if(h.D){let ts=nt.g?nt.g.getResponseHeader("X-HTTP-Session-Id"):null;ts&&(h.ya=ts,de(h.I,h.D,ts))}}c.G=3,c.l&&c.l.ua(),c.ba&&(c.R=Date.now()-r.F,c.j.info("Handshake RTT: "+c.R+"ms")),h=c;var R=r;if(h.qa=Xa(h,h.J?h.ia:null,h.W),R.K){Ia(h.h,R);var ne=R,Ae=h.L;Ae&&(ne.I=Ae),ne.B&&(Ho(ne),qi(ne)),h.g=R}else Wa(h);0<c.i.length&&Ki(c)}else Q[0]!="stop"&&Q[0]!="close"||rn(c,7);else c.G==3&&(Q[0]=="stop"||Q[0]=="close"?Q[0]=="stop"?rn(c,7):Yo(c):Q[0]!="noop"&&c.l&&c.l.ta(Q),c.v=0)}}Xn(4)}catch{}}var du=class{constructor(r,s){this.g=r,this.map=s}};function xa(r){this.l=r||10,w.PerformanceNavigationTiming?(r=w.performance.getEntriesByType("navigation"),r=0<r.length&&(r[0].nextHopProtocol=="hq"||r[0].nextHopProtocol=="h2")):r=!!(w.chrome&&w.chrome.loadTimes&&w.chrome.loadTimes()&&w.chrome.loadTimes().wasFetchedViaSpdy),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ea(r){return r.h?!0:r.g?r.g.size>=r.j:!1}function Sa(r){return r.h?1:r.g?r.g.size:0}function Qo(r,s){return r.h?r.h==s:r.g?r.g.has(s):!1}function Jo(r,s){r.g?r.g.add(s):r.h=s}function Ia(r,s){r.h&&r.h==s?r.h=null:r.g&&r.g.has(s)&&r.g.delete(s)}xa.prototype.cancel=function(){if(this.i=Ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let r of this.g.values())r.cancel();this.g.clear()}};function Ta(r){if(r.h!=null)return r.i.concat(r.h.D);if(r.g!=null&&r.g.size!==0){let s=r.i;for(let c of r.g.values())s=s.concat(c.D);return s}return Pe(r.i)}function hu(r){if(r.V&&typeof r.V=="function")return r.V();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if(typeof r=="string")return r.split("");if(A(r)){for(var s=[],c=r.length,h=0;h<c;h++)s.push(r[h]);return s}s=[],c=0;for(h in r)s[c++]=r[h];return s}function pu(r){if(r.na&&typeof r.na=="function")return r.na();if(!r.V||typeof r.V!="function"){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(A(r)||typeof r=="string"){var s=[];r=r.length;for(var c=0;c<r;c++)s.push(c);return s}s=[],c=0;for(let h in r)s[c++]=h;return s}}}function Aa(r,s){if(r.forEach&&typeof r.forEach=="function")r.forEach(s,void 0);else if(A(r)||typeof r=="string")Array.prototype.forEach.call(r,s,void 0);else for(var c=pu(r),h=hu(r),b=h.length,S=0;S<b;S++)s.call(void 0,h[S],c&&c[S],r)}var Da=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mu(r,s){if(r){r=r.split("&");for(var c=0;c<r.length;c++){var h=r[c].indexOf("="),b=null;if(0<=h){var S=r[c].substring(0,h);b=r[c].substring(h+1)}else S=r[c];s(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function nn(r){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,r instanceof nn){this.h=r.h,zi(this,r.j),this.o=r.o,this.g=r.g,ji(this,r.s),this.l=r.l;var s=r.i,c=new ii;c.i=s.i,s.g&&(c.g=new Map(s.g),c.h=s.h),Pa(this,c),this.m=r.m}else r&&(s=String(r).match(Da))?(this.h=!1,zi(this,s[1]||"",!0),this.o=ti(s[2]||""),this.g=ti(s[3]||"",!0),ji(this,s[4]),this.l=ti(s[5]||"",!0),Pa(this,s[6]||"",!0),this.m=ti(s[7]||"")):(this.h=!1,this.i=new ii(null,this.h))}nn.prototype.toString=function(){var r=[],s=this.j;s&&r.push(ni(s,Ra,!0),":");var c=this.g;return(c||s=="file")&&(r.push("//"),(s=this.o)&&r.push(ni(s,Ra,!0),"@"),r.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.s,c!=null&&r.push(":",String(c))),(c=this.l)&&(this.g&&c.charAt(0)!="/"&&r.push("/"),r.push(ni(c,c.charAt(0)=="/"?_u:gu,!0))),(c=this.i.toString())&&r.push("?",c),(c=this.m)&&r.push("#",ni(c,vu)),r.join("")};function wt(r){return new nn(r)}function zi(r,s,c){r.j=c?ti(s,!0):s,r.j&&(r.j=r.j.replace(/:$/,""))}function ji(r,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);r.s=s}else r.s=null}function Pa(r,s,c){s instanceof ii?(r.i=s,bu(r.i,r.h)):(c||(s=ni(s,yu)),r.i=new ii(s,r.h))}function de(r,s,c){r.i.set(s,c)}function $i(r){return de(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function ti(r,s){return r?s?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function ni(r,s,c){return typeof r=="string"?(r=encodeURI(r).replace(s,fu),c&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function fu(r){return r=r.charCodeAt(0),"%"+(r>>4&15).toString(16)+(r&15).toString(16)}var Ra=/[#\/\?@]/g,gu=/[#\?:]/g,_u=/[#\?]/g,yu=/[#\?@]/g,vu=/#/g;function ii(r,s){this.h=this.g=null,this.i=r||null,this.j=!!s}function Ot(r){r.g||(r.g=new Map,r.h=0,r.i&&mu(r.i,function(s,c){r.add(decodeURIComponent(s.replace(/\+/g," ")),c)}))}i=ii.prototype,i.add=function(r,s){Ot(this),this.i=null,r=vn(this,r);var c=this.g.get(r);return c||this.g.set(r,c=[]),c.push(s),this.h+=1,this};function Ma(r,s){Ot(r),s=vn(r,s),r.g.has(s)&&(r.i=null,r.h-=r.g.get(s).length,r.g.delete(s))}function Oa(r,s){return Ot(r),s=vn(r,s),r.g.has(s)}i.forEach=function(r,s){Ot(this),this.g.forEach(function(c,h){c.forEach(function(b){r.call(s,b,h,this)},this)},this)},i.na=function(){Ot(this);let r=Array.from(this.g.values()),s=Array.from(this.g.keys()),c=[];for(let h=0;h<s.length;h++){let b=r[h];for(let S=0;S<b.length;S++)c.push(s[h])}return c},i.V=function(r){Ot(this);let s=[];if(typeof r=="string")Oa(this,r)&&(s=s.concat(this.g.get(vn(this,r))));else{r=Array.from(this.g.values());for(let c=0;c<r.length;c++)s=s.concat(r[c])}return s},i.set=function(r,s){return Ot(this),this.i=null,r=vn(this,r),Oa(this,r)&&(this.h-=this.g.get(r).length),this.g.set(r,[s]),this.h+=1,this},i.get=function(r,s){return r?(r=this.V(r),0<r.length?String(r[0]):s):s};function ka(r,s,c){Ma(r,s),0<c.length&&(r.i=null,r.g.set(vn(r,s),Pe(c)),r.h+=c.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";let r=[],s=Array.from(this.g.keys());for(var c=0;c<s.length;c++){var h=s[c];let S=encodeURIComponent(String(h)),R=this.V(h);for(h=0;h<R.length;h++){var b=S;R[h]!==""&&(b+="="+encodeURIComponent(String(R[h]))),r.push(b)}}return this.i=r.join("&")};function vn(r,s){return s=String(s),r.j&&(s=s.toLowerCase()),s}function bu(r,s){s&&!r.j&&(Ot(r),r.i=null,r.g.forEach(function(c,h){var b=h.toLowerCase();h!=b&&(Ma(this,h),ka(this,b,c))},r)),r.j=s}function wu(r,s){let c=new Zn;if(w.Image){let h=new Image;h.onload=Xe(kt,c,"TestLoadImage: loaded",!0,s,h),h.onerror=Xe(kt,c,"TestLoadImage: error",!1,s,h),h.onabort=Xe(kt,c,"TestLoadImage: abort",!1,s,h),h.ontimeout=Xe(kt,c,"TestLoadImage: timeout",!1,s,h),w.setTimeout(function(){h.ontimeout&&h.ontimeout()},1e4),h.src=r}else s(!1)}function Cu(r,s){let c=new Zn,h=new AbortController,b=setTimeout(()=>{h.abort(),kt(c,"TestPingServer: timeout",!1,s)},1e4);fetch(r,{signal:h.signal}).then(S=>{clearTimeout(b),S.ok?kt(c,"TestPingServer: ok",!0,s):kt(c,"TestPingServer: server error",!1,s)}).catch(()=>{clearTimeout(b),kt(c,"TestPingServer: error",!1,s)})}function kt(r,s,c,h,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),h(c)}catch{}}function xu(){this.g=new ou}function Eu(r,s,c){let h=c||"";try{Aa(r,function(b,S){let R=b;P(b)&&(R=Bo(b)),s.push(h+S+"="+encodeURIComponent(R))})}catch(b){throw s.push(h+"type="+encodeURIComponent("_badmap")),b}}function ri(r){this.l=r.Ub||null,this.j=r.eb||!1}Y(ri,qo),ri.prototype.g=function(){return new Gi(this.l,this.j)},ri.prototype.i=function(r){return function(){return r}}({});function Gi(r,s){Me.call(this),this.D=r,this.o=s,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(Gi,Me),i=Gi.prototype,i.open=function(r,s){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=r,this.A=s,this.readyState=1,si(this)},i.send=function(r){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let s={headers:this.u,method:this.B,credentials:this.m,cache:void 0};r&&(s.body=r),(this.D||w).fetch(new Request(this.A,s)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},i.Sa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")r.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof w.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Va(this)}else r.text().then(this.Ra.bind(this),this.ga.bind(this))};function Va(r){r.j.read().then(r.Pa.bind(r)).catch(r.ga.bind(r))}i.Pa=function(r){if(this.g){if(this.o&&r.value)this.response.push(r.value);else if(!this.o){var s=r.value?r.value:new Uint8Array(0);(s=this.v.decode(s,{stream:!r.done}))&&(this.response=this.responseText+=s)}r.done?oi(this):si(this),this.readyState==3&&Va(this)}},i.Ra=function(r){this.g&&(this.response=this.responseText=r,oi(this))},i.Qa=function(r){this.g&&(this.response=r,oi(this))},i.ga=function(){this.g&&oi(this)};function oi(r){r.readyState=4,r.l=null,r.j=null,r.v=null,si(r)}i.setRequestHeader=function(r,s){this.u.append(r,s)},i.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";let r=[],s=this.h.entries();for(var c=s.next();!c.done;)c=c.value,r.push(c[0]+": "+c[1]),c=s.next();return r.join(`\r
`)};function si(r){r.onreadystatechange&&r.onreadystatechange.call(r)}Object.defineProperty(Gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(r){this.m=r?"include":"same-origin"}});function Na(r){let s="";return ct(r,function(c,h){s+=h,s+=":",s+=c,s+=`\r
`}),s}function Xo(r,s,c){e:{for(h in c){var h=!1;break e}h=!0}h||(c=Na(c),typeof r=="string"?c!=null&&encodeURIComponent(String(c)):de(r,s,c))}function fe(r){Me.call(this),this.headers=new Map,this.o=r||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(fe,Me);var Su=/^https?$/i,Iu=["POST","PUT"];i=fe.prototype,i.Ha=function(r){this.J=r},i.ea=function(r,s,c,h){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+r);s=s?s.toUpperCase():"GET",this.D=r,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$o.g(),this.v=this.o?da(this.o):da($o),this.g.onreadystatechange=ue(this.Ea,this);try{this.B=!0,this.g.open(s,String(r),!0),this.B=!1}catch(S){Fa(this,S);return}if(r=c||"",c=new Map(this.headers),h)if(Object.getPrototypeOf(h)===Object.prototype)for(var b in h)c.set(b,h[b]);else if(typeof h.keys=="function"&&typeof h.get=="function")for(let S of h.keys())c.set(S,h.get(S));else throw Error("Unknown input type for opt_headers: "+String(h));h=Array.from(c.keys()).find(S=>S.toLowerCase()=="content-type"),b=w.FormData&&r instanceof w.FormData,!(0<=Array.prototype.indexOf.call(Iu,s,void 0))||h||b||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,R]of c)this.g.setRequestHeader(S,R);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ba(this),this.u=!0,this.g.send(r),this.u=!1}catch(S){Fa(this,S)}};function Fa(r,s){r.h=!1,r.g&&(r.j=!0,r.g.abort(),r.j=!1),r.l=s,r.m=5,Ua(r),Wi(r)}function Ua(r){r.A||(r.A=!0,Fe(r,"complete"),Fe(r,"error"))}i.abort=function(r){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=r||7,Fe(this,"complete"),Fe(this,"abort"),Wi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wi(this,!0)),fe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?La(this):this.bb())},i.bb=function(){La(this)};function La(r){if(r.h&&typeof p<"u"&&(!r.v[1]||Ct(r)!=4||r.Z()!=2)){if(r.u&&Ct(r)==4)aa(r.Ea,0,r);else if(Fe(r,"readystatechange"),Ct(r)==4){r.h=!1;try{let R=r.Z();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}var c;if(!(c=s)){var h;if(h=R===0){var b=String(r.D).match(Da)[1]||null;!b&&w.self&&w.self.location&&(b=w.self.location.protocol.slice(0,-1)),h=!Su.test(b?b.toLowerCase():"")}c=h}if(c)Fe(r,"complete"),Fe(r,"success");else{r.m=6;try{var S=2<Ct(r)?r.g.statusText:""}catch{S=""}r.l=S+" ["+r.Z()+"]",Ua(r)}}finally{Wi(r)}}}}function Wi(r,s){if(r.g){Ba(r);let c=r.g,h=r.v[0]?()=>{}:null;r.g=null,r.v=null,s||Fe(r,"ready");try{c.onreadystatechange=h}catch{}}}function Ba(r){r.I&&(w.clearTimeout(r.I),r.I=null)}i.isActive=function(){return!!this.g};function Ct(r){return r.g?r.g.readyState:0}i.Z=function(){try{return 2<Ct(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(r){if(this.g){var s=this.g.responseText;return r&&s.indexOf(r)==0&&(s=s.substring(r.length)),ru(s)}};function qa(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.H){case"":case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function Tu(r){let s={};r=(r.g&&2<=Ct(r)&&r.g.getAllResponseHeaders()||"").split(`\r
`);for(let h=0;h<r.length;h++){if(at(r[h]))continue;var c=v(r[h]);let b=c[0];if(c=c[1],typeof c!="string")continue;c=c.trim();let S=s[b]||[];s[b]=S,S.push(c)}C(s,function(h){return h.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(r,s,c){return c&&c.internalChannelParams&&c.internalChannelParams[r]||s}function za(r){this.Aa=0,this.i=[],this.j=new Zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ai("failFast",!1,r),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ai("baseRetryDelayMs",5e3,r),this.cb=ai("retryDelaySeedMs",1e4,r),this.Wa=ai("forwardChannelMaxRetries",2,r),this.wa=ai("forwardChannelRequestTimeoutMs",2e4,r),this.pa=r&&r.xmlHttpFactory||void 0,this.Xa=r&&r.Tb||void 0,this.Ca=r&&r.useFetchStreams||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.h=new xa(r&&r.concurrentRequestLimit),this.Da=new xu,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=r&&r.Rb||!1,r&&r.xa&&this.j.xa(),r&&r.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&r&&r.detectBufferingProxy||!1,this.ja=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.ja=r.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=za.prototype,i.la=8,i.G=1,i.connect=function(r,s,c,h){Ue(0),this.W=r,this.H=s||{},c&&h!==void 0&&(this.H.OSID=c,this.H.OAID=h),this.F=this.X,this.I=Xa(this,null,this.W),Ki(this)};function Yo(r){if(ja(r),r.G==3){var s=r.U++,c=wt(r.I);if(de(c,"SID",r.K),de(c,"RID",s),de(c,"TYPE","terminate"),ci(r,c),s=new Mt(r,r.j,s),s.L=2,s.v=$i(wt(c)),c=!1,w.navigator&&w.navigator.sendBeacon)try{c=w.navigator.sendBeacon(s.v.toString(),"")}catch{}!c&&w.Image&&(new Image().src=s.v,c=!0),c||(s.g=Ya(s.j,null),s.g.ea(s.v)),s.F=Date.now(),qi(s)}Ja(r)}function Hi(r){r.g&&(es(r),r.g.cancel(),r.g=null)}function ja(r){Hi(r),r.u&&(w.clearTimeout(r.u),r.u=null),Qi(r),r.h.cancel(),r.s&&(typeof r.s=="number"&&w.clearTimeout(r.s),r.s=null)}function Ki(r){if(!Ea(r.h)&&!r.s){r.s=!0;var s=r.Ga;Gn||ta(),Wn||(Gn(),Wn=!0),Ro.add(s,r),r.B=0}}function Au(r,s){return Sa(r.h)>=r.h.j-(r.s?1:0)?!1:r.s?(r.i=s.D.concat(r.i),!0):r.G==1||r.G==2||r.B>=(r.Va?0:r.Wa)?!1:(r.s=Yn(ue(r.Ga,r,s),Qa(r,r.B)),r.B++,!0)}i.Ga=function(r){if(this.s)if(this.s=null,this.G==1){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;let b=new Mt(this,this.j,r),S=this.o;if(this.S&&(S?(S=m(S),y(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var s=0,c=0;c<this.i.length;c++){t:{var h=this.i[c];if("__data__"in h.map&&(h=h.map.__data__,typeof h=="string")){h=h.length;break t}h=void 0}if(h===void 0)break;if(s+=h,4096<s){s=c;break e}if(s===4096||c===this.i.length-1){s=c+1;break e}}s=1e3}else s=1e3;s=Ga(this,b,s),c=wt(this.I),de(c,"RID",r),de(c,"CVER",22),this.D&&de(c,"X-HTTP-Session-Id",this.D),ci(this,c),S&&(this.O?s="headers="+encodeURIComponent(String(Na(S)))+"&"+s:this.m&&Xo(c,this.m,S)),Jo(this.h,b),this.Ua&&de(c,"TYPE","init"),this.P?(de(c,"$req",s),de(c,"SID","null"),b.T=!0,Wo(b,c,null)):Wo(b,c,s),this.G=2}}else this.G==3&&(r?$a(this,r):this.i.length==0||Ea(this.h)||$a(this))};function $a(r,s){var c;s?c=s.l:c=r.U++;let h=wt(r.I);de(h,"SID",r.K),de(h,"RID",c),de(h,"AID",r.T),ci(r,h),r.m&&r.o&&Xo(h,r.m,r.o),c=new Mt(r,r.j,c,r.B+1),r.m===null&&(c.H=r.o),s&&(r.i=s.D.concat(r.i)),s=Ga(r,c,1e3),c.I=Math.round(.5*r.wa)+Math.round(.5*r.wa*Math.random()),Jo(r.h,c),Wo(c,h,s)}function ci(r,s){r.H&&ct(r.H,function(c,h){de(s,h,c)}),r.l&&Aa({},function(c,h){de(s,h,c)})}function Ga(r,s,c){c=Math.min(r.i.length,c);var h=r.l?ue(r.l.Na,r.l,r):null;e:{var b=r.i;let S=-1;for(;;){let R=["count="+c];S==-1?0<c?(S=b[0].g,R.push("ofs="+S)):S=0:R.push("ofs="+S);let ne=!0;for(let Ae=0;Ae<c;Ae++){let Q=b[Ae].g,Oe=b[Ae].map;if(Q-=S,0>Q)S=Math.max(0,b[Ae].g-100),ne=!1;else try{Eu(Oe,R,"req"+Q+"_")}catch{h&&h(Oe)}}if(ne){h=R.join("&");break e}}}return r=r.i.splice(0,c),s.D=r,h}function Wa(r){if(!r.g&&!r.u){r.Y=1;var s=r.Fa;Gn||ta(),Wn||(Gn(),Wn=!0),Ro.add(s,r),r.v=0}}function Zo(r){return r.g||r.u||3<=r.v?!1:(r.Y++,r.u=Yn(ue(r.Fa,r),Qa(r,r.v)),r.v++,!0)}i.Fa=function(){if(this.u=null,Ha(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var r=2*this.R;this.j.info("BP detection timer enabled: "+r),this.A=Yn(ue(this.ab,this),r)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ue(10),Hi(this),Ha(this))};function es(r){r.A!=null&&(w.clearTimeout(r.A),r.A=null)}function Ha(r){r.g=new Mt(r,r.j,"rpc",r.Y),r.m===null&&(r.g.H=r.o),r.g.O=0;var s=wt(r.qa);de(s,"RID","rpc"),de(s,"SID",r.K),de(s,"AID",r.T),de(s,"CI",r.F?"0":"1"),!r.F&&r.ja&&de(s,"TO",r.ja),de(s,"TYPE","xmlhttp"),ci(r,s),r.m&&r.o&&Xo(s,r.m,r.o),r.L&&(r.g.I=r.L);var c=r.g;r=r.ia,c.L=1,c.v=$i(wt(s)),c.m=null,c.P=!0,ba(c,r)}i.Za=function(){this.C!=null&&(this.C=null,Hi(this),Zo(this),Ue(19))};function Qi(r){r.C!=null&&(w.clearTimeout(r.C),r.C=null)}function Ka(r,s){var c=null;if(r.g==s){Qi(r),es(r),r.g=null;var h=2}else if(Qo(r.h,s))c=s.D,Ia(r.h,s),h=1;else return;if(r.G!=0){if(s.o)if(h==1){c=s.m?s.m.length:0,s=Date.now()-s.F;var b=r.B;h=Ui(),Fe(h,new ga(h,c)),Ki(r)}else Wa(r);else if(b=s.s,b==3||b==0&&0<s.X||!(h==1&&Au(r,s)||h==2&&Zo(r)))switch(c&&0<c.length&&(s=r.h,s.i=s.i.concat(c)),b){case 1:rn(r,5);break;case 4:rn(r,10);break;case 3:rn(r,6);break;default:rn(r,2)}}}function Qa(r,s){let c=r.Ta+Math.floor(Math.random()*r.cb);return r.isActive()||(c*=2),c*s}function rn(r,s){if(r.j.info("Error code "+s),s==2){var c=ue(r.fb,r),h=r.Xa;let b=!h;h=new nn(h||"//www.google.com/images/cleardot.gif"),w.location&&w.location.protocol=="http"||zi(h,"https"),$i(h),b?wu(h.toString(),c):Cu(h.toString(),c)}else Ue(2);r.G=0,r.l&&r.l.sa(s),Ja(r),ja(r)}i.fb=function(r){r?(this.j.info("Successfully pinged google.com"),Ue(2)):(this.j.info("Failed to ping google.com"),Ue(1))};function Ja(r){if(r.G=0,r.ka=[],r.l){let s=Ta(r.h);(s.length!=0||r.i.length!=0)&&(_e(r.ka,s),_e(r.ka,r.i),r.h.i.length=0,Pe(r.i),r.i.length=0),r.l.ra()}}function Xa(r,s,c){var h=c instanceof nn?wt(c):new nn(c);if(h.g!="")s&&(h.g=s+"."+h.g),ji(h,h.s);else{var b=w.location;h=b.protocol,s=s?s+"."+b.hostname:b.hostname,b=+b.port;var S=new nn(null);h&&zi(S,h),s&&(S.g=s),b&&ji(S,b),c&&(S.l=c),h=S}return c=r.D,s=r.ya,c&&s&&de(h,c,s),de(h,"VER",r.la),ci(r,h),h}function Ya(r,s,c){if(s&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return s=r.Ca&&!r.pa?new fe(new ri({eb:c})):new fe(r.pa),s.Ha(r.J),s}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Za(){}i=Za.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ji(){}Ji.prototype.g=function(r,s){return new We(r,s)};function We(r,s){Me.call(this),this.g=new za(s),this.l=r,this.h=s&&s.messageUrlParams||null,r=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.o=r,r=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(r?r["X-WebChannel-Content-Type"]=s.messageContentType:r={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.va&&(r?r["X-WebChannel-Client-Profile"]=s.va:r={"X-WebChannel-Client-Profile":s.va}),this.g.S=r,(r=s&&s.Sb)&&!at(r)&&(this.g.m=r),this.v=s&&s.supportsCrossDomainXhr||!1,this.u=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!at(s)&&(this.g.D=s,r=this.h,r!==null&&s in r&&(r=this.h,s in r&&delete r[s])),this.j=new bn(this)}Y(We,Me),We.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},We.prototype.close=function(){Yo(this.g)},We.prototype.o=function(r){var s=this.g;if(typeof r=="string"){var c={};c.__data__=r,r=c}else this.u&&(c={},c.__data__=Bo(r),r=c);s.i.push(new du(s.Ya++,r)),s.G==3&&Ki(s)},We.prototype.N=function(){this.g.l=null,delete this.j,Yo(this.g),delete this.g,We.aa.N.call(this)};function ec(r){zo.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var s=r.__sm__;if(s){e:{for(let c in s){r=c;break e}r=void 0}(this.i=r)&&(r=this.i,s=s!==null&&r in s?s[r]:void 0),this.data=s}else this.data=r}Y(ec,zo);function tc(){jo.call(this),this.status=1}Y(tc,jo);function bn(r){this.g=r}Y(bn,Za),bn.prototype.ua=function(){Fe(this.g,"a")},bn.prototype.ta=function(r){Fe(this.g,new ec(r))},bn.prototype.sa=function(r){Fe(this.g,new tc)},bn.prototype.ra=function(){Fe(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,We.prototype.send=We.prototype.o,We.prototype.open=We.prototype.m,We.prototype.close=We.prototype.close,Al=Dt.createWebChannelTransport=function(){return new Ji},Tl=Dt.getStatEventTarget=function(){return Ui()},Il=Dt.Event=en,Sl=Dt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Li.NO_ERROR=0,Li.TIMEOUT=8,Li.HTTP_ERROR=6,El=Dt.ErrorCode=Li,_a.COMPLETE="complete",xl=Dt.EventType=_a,ha.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",Me.prototype.listen=Me.prototype.K,Cl=Dt.WebChannel=ha,pp=Dt.FetchXmlHttpFactory=ri,fe.prototype.listenOnce=fe.prototype.L,fe.prototype.getLastError=fe.prototype.Ka,fe.prototype.getLastErrorCode=fe.prototype.Ba,fe.prototype.getStatus=fe.prototype.Z,fe.prototype.getResponseJson=fe.prototype.Oa,fe.prototype.getResponseText=fe.prototype.oa,fe.prototype.send=fe.prototype.ea,fe.prototype.setWithCredentials=fe.prototype.Ha,wl=Dt.XhrIo=fe}).apply(typeof Mr<"u"?Mr:typeof self<"u"?self:typeof window<"u"?window:{});var Dl="@firebase/firestore";var Be=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Be.UNAUTHENTICATED=new Be(null),Be.GOOGLE_CREDENTIALS=new Be("google-credentials-uid"),Be.FIRST_PARTY=new Be("first-party-uid"),Be.MOCK_USER=new Be("mock-user");var qr="11.0.0";var Or=new Vn("@firebase/firestore");function ot(i,...e){if(Or.logLevel<=se.DEBUG){let t=e.map(Vl);Or.debug(`Firestore (${qr}): ${i}`,...t)}}function kl(i,...e){if(Or.logLevel<=se.ERROR){let t=e.map(Vl);Or.error(`Firestore (${qr}): ${i}`,...t)}}function Vl(i){if(typeof i=="string")return i;try{return function(t){return JSON.stringify(t)}(i)}catch{return i}}function Ke(i="Unexpected state"){let e=`FIRESTORE (${qr}) INTERNAL ASSERTION FAILED: `+i;throw kl(e),new Error(e)}function hn(i,e){i||Ke()}var Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ie=class extends Tt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Fs=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Us=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Be.UNAUTHENTICATED))}shutdown(){}};var Ls=class{constructor(e){this.t=e,this.currentUser=Be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){hn(this.o===void 0);let n=this.i,o=A=>this.i!==n?(n=this.i,t(A)):Promise.resolve(),a=new pn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new pn,e.enqueueRetryable(()=>o(this.currentUser))};let p=()=>{let A=a;e.enqueueRetryable(()=>F(this,null,function*(){yield A.promise,yield o(this.currentUser)}))},w=A=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit(A=>w(A)),setTimeout(()=>{if(!this.auth){let A=this.t.getImmediate({optional:!0});A?w(A):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pn)}},0),p()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(hn(typeof n.accessToken=="string"),new Fs(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return hn(e===null||typeof e=="string"),new Be(e)}},Bs=class{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Be.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},qs=class{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Bs(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Be.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zs=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},js=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){hn(this.o===void 0);let n=a=>{a.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);let p=a.token!==this.R;return this.R=a.token,ot("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};let o=a=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){let a=this.A.getImmediate({optional:!0});a?o(a):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(hn(typeof t.token=="string"),this.R=t.token,new zs(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function kr(i,e){return i<e?-1:i>e?1:0}var Vr=class i{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ie(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return i.fromMillis(Date.now())}static fromDate(e){return i.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new i(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kr(this.nanoseconds,e.nanoseconds):kr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var $s=class i{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ke(),n===void 0?n=e.length-t:n>e.length-t&&Ke(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return i.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof i?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let n=Math.min(e.length,t.length);for(let o=0;o<n;o++){let a=e.get(o),p=t.get(o);if(a<p)return-1;if(a>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Xt=class i extends $s{construct(e,t,n){return new i(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let n of e){if(n.indexOf("//")>=0)throw new Ie(Ne.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(o=>o.length>0))}return new i(t)}static emptyPath(){return new i([])}};var mn=class i{constructor(e){this.path=e}static fromPath(e){return new i(Xt.fromString(e))}static fromName(e){return new i(Xt.fromString(e).popFirst(5))}static empty(){return new i(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new i(new Xt(e.slice()))}};var Gs=class{constructor(e,t,n,o){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=o}};Gs.UNKNOWN_ID=-1;function mp(i){return i.name==="IndexedDbTransactionError"}function fp(i){return i===0&&1/i==-1/0}var gp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],b_=[...gp,"documentOverlays"],_p=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yp=_p,vp=[...yp,"indexConfiguration","indexState","indexEntries"];var w_=[...vp,"globals"];var Un=class i{constructor(e,t){this.comparator=e,this.root=t||gt.EMPTY}insert(e,t){return new i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let o=this.comparator(e,n.key);if(o===0)return t+n.left.size;o<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){let e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fn(this.root,e,this.comparator,!0)}},Fn=class{constructor(e,t,n,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gt=class i{constructor(e,t,n,o,a){this.key=e,this.value=t,this.color=n??i.RED,this.left=o??i.EMPTY,this.right=a??i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,o,a){return new i(e??this.key,t??this.value,n??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let o=this,a=n(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,n),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp()}removeMin(){if(this.left.isEmpty())return i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return i.EMPTY;n=o.right.min(),o=o.copy(n.key,n.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ke();let e=this.left.check();if(e!==this.right.check())throw Ke();return e+(this.isRed()?0:1)}};gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke()}get value(){throw Ke()}get color(){throw Ke()}get left(){throw Ke()}get right(){throw Ke()}copy(e,t,n,o,a){return this}insert(e,t,n){return new gt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Nr=class i{constructor(e){this.comparator=e,this.data=new Un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let o=n.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fr(this.data.getIterator())}getIteratorFrom(e){return new Fr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof i)||this.size!==e.size)return!1;let t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){let o=t.getNext().key,a=n.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new i(this.comparator);return t.data=e,t}},Fr=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ws=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ln=class i{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Ws("Invalid base64 string: "+a):a}}(e);return new i(t)}static fromUint8Array(e){let t=function(o){let a="";for(let p=0;p<o.length;++p)a+=String.fromCharCode(o[p]);return a}(e);return new i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ln.EMPTY_BYTE_STRING=new Ln("");var bp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wp(i){if(hn(!!i),typeof i=="string"){let e=0,t=bp.exec(i);if(hn(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}let n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ti(i.seconds),nanos:Ti(i.nanos)}}function Ti(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Cp(i){return typeof i=="string"?Ln.fromBase64String(i):Ln.fromUint8Array(i)}var Hs=class i{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof i&&e.projectId===this.projectId&&e.database===this.database}};function xp(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ep(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var x_=new Un(mn.comparator);var E_=new Un(mn.comparator);var S_=new Un(mn.comparator),I_=new Nr(mn.comparator);var T_=new Nr(kr);var Pl,H;(H=Pl||(Pl={}))[H.OK=0]="OK",H[H.CANCELLED=1]="CANCELLED",H[H.UNKNOWN=2]="UNKNOWN",H[H.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",H[H.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",H[H.NOT_FOUND=5]="NOT_FOUND",H[H.ALREADY_EXISTS=6]="ALREADY_EXISTS",H[H.PERMISSION_DENIED=7]="PERMISSION_DENIED",H[H.UNAUTHENTICATED=16]="UNAUTHENTICATED",H[H.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",H[H.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",H[H.ABORTED=10]="ABORTED",H[H.OUT_OF_RANGE=11]="OUT_OF_RANGE",H[H.UNIMPLEMENTED=12]="UNIMPLEMENTED",H[H.INTERNAL=13]="INTERNAL",H[H.UNAVAILABLE=14]="UNAVAILABLE",H[H.DATA_LOSS=15]="DATA_LOSS";var A_=new Vs([4294967295,4294967295],0);var Ur=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ti(e.integerValue));else if("doubleValue"in e){let n=Ti(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),fp(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),typeof n=="string"&&(n=wp(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Cp(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Ep(e)?this.dt(t,Number.MAX_SAFE_INTEGER):xp(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ke()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let n=e.fields||{};this.dt(t,55);for(let o of Object.keys(n))this.Vt(o,t),this.Tt(n[o],t)}wt(e,t){var n,o;let a=e.fields||{};this.dt(t,53);let p="value",w=((o=(n=a[p].arrayValue)===null||n===void 0?void 0:n.values)===null||o===void 0?void 0:o.length)||0;this.dt(t,15),t.At(Ti(w)),this.Vt(p,t),this.Tt(a[p],t)}bt(e,t){let n=e.values||[];this.dt(t,50);for(let o of n)this.Tt(o,t)}yt(e,t){this.dt(t,37),mn.fromName(e).path.forEach(n=>{this.dt(t,60),this.Dt(n,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Ur.vt=new Ur;var D_=new Uint8Array(0);var ft=class i{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new i(e,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ft.DEFAULT_COLLECTION_PERCENTILE=10,ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ft.DEFAULT=new ft(41943040,ft.DEFAULT_COLLECTION_PERCENTILE,ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ft.DISABLED=new ft(-1,0,0);function Ns(){return typeof document<"u"?document:null}var Ks=class{constructor(e,t,n=1e3,o=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=o,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-n);o>0&&ot("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Qs=class i{constructor(e,t,n,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=o,this.removalCallback=a,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,o,a){let p=Date.now()+n,w=new i(e,t,p,o,a);return w.start(n),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Rl,Ml;(Ml=Rl||(Rl={})).ea="default",Ml.Cache="cache";function Sp(i){let e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}var Ol=new Map;function Ip(i,e,t,n){if(e===!0&&n===!0)throw new Ie(Ne.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}var Lr=class{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ie(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ip("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sp((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ie(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ie(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ie(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,o){return n.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Js=class{constructor(e,t,n,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lr({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lr(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Us;switch(n.type){case"firstParty":return new qs(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ie(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return F(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let n=Ol.get(t);n&&(ot("ComponentProvider","Removing Datastore"),Ol.delete(t),n.terminate())}(this),Promise.resolve()}};var Br=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ks(this,"async_queue_retry"),this.Vu=()=>{let n=Ns();n&&ot("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;let t=Ns();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Ns();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new pn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return F(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!mp(e))throw e;ot("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;let o=function(p){let w=p.message||"";return p.stack&&(w=p.stack.includes(p.message)?p.stack:p.message+`
`+p.stack),w}(n);throw kl("INTERNAL UNHANDLED ERROR: ",o),n}).then(n=>(this.du=!1,n))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let o=Qs.createAndSchedule(this,e,t,n,a=>this.yu(a));return this.Tu.push(o),o}fu(){this.Eu&&Ke()}verifyOperationInProgress(){}wu(){return F(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Xs=class extends Js{constructor(e,t,n,o){super(e,t,n,o),this.type="firestore",this._queue=new Br,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return F(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Br(e),this._firestoreClient=void 0,yield e}})}};var P_=new RegExp("[~\\*/\\[\\]]");(function(e,t=!0){(function(o){qr=o})(fl),Si(new Jt("firestore",(n,{instanceIdentifier:o,options:a})=>{let p=n.getProvider("app").getImmediate(),w=new Xs(new Ls(n.getProvider("auth-internal")),new js(n.getProvider("app-check-internal")),function(P,z){if(!Object.prototype.hasOwnProperty.apply(P.options,["projectId"]))throw new Ie(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hs(P.options.projectId,z)}(p,o),p);return a=Object.assign({useFetchStreams:t},a),w._setSettings(a),w},"PUBLIC").setMultipleInstances(!0)),Nn(Dl,"4.7.4",e),Nn(Dl,"4.7.4","esm2017")})();var Tp=(i,e)=>({"rejected-bg":i,"accepted-bg":e});function Ap(i,e){if(i&1&&(u(0,"p")(1,"strong"),d(2,"Adres\u0103:"),l(),d(3),l()),i&2){let t=T();_(3),G(" ",t.request.senderContactInfo==null?null:t.request.senderContactInfo.address," ")}}function Dp(i,e){if(i&1&&(u(0,"p")(1,"strong"),d(2,"Telefon:"),l(),d(3),l()),i&2){let t=T();_(3),G(" ",t.request.senderContactInfo==null?null:t.request.senderContactInfo.phoneNumber," ")}}function Pp(i,e){i&1&&(u(0,"p",5),d(1,"\xCEn a\u0219teptare..."),l())}function Rp(i,e){if(i&1){let t=j();u(0,"div",6)(1,"button",7),D("click",function(){V(t);let o=T(2);return N(o.acceptRequest())}),d(2," Accept\u0103 "),l(),u(3,"button",8),D("click",function(){V(t);let o=T(2);return N(o.rejectRequest())}),d(4," Respinge "),l()()}}function Mp(i,e){if(i&1&&(u(0,"div"),O(1,Pp,2,0,"p",4)(2,Rp,5,0,"div",3),l()),i&2){let t=T();_(),E("ngIf",t.userRole==="Client"),_(),E("ngIf",t.userRole==="Specialist")}}function Op(i,e){if(i&1){let t=j();u(0,"div",6)(1,"button",9),D("click",function(){V(t);let o=T();return N(o.triggerOffer())}),d(2,"F\u0103 o ofert\u0103"),l()()}}var zr=class i{constructor(e,t){this.authService=e;this.requestService=t}request={id:"",senderId:"",requestedStartDate:Vr.fromDate(new Date),description:"",status:"Pending",senderContactInfo:{phoneNumber:"",address:""}};date=new Date;userRole="";requestAccepted=new J;requestRejected=new J;makeOffer=new J;ngOnInit(){this.userRole=this.authService.getUserRole(),this.date=this.request.requestedStartDate.toDate()}acceptRequest(){this.requestAccepted.emit(this.request.id)}rejectRequest(){this.requestRejected.emit(this.request.id)}showOfferButton(){return this.request.status==="Accepted"&&this.userRole==="Specialist"}triggerOffer(){this.makeOffer.emit(this.request.id)}static \u0275fac=function(t){return new(t||i)(M(W),M(Ht))};static \u0275cmp=k({type:i,selectors:[["app-request-message"]],inputs:{request:"request"},outputs:{requestAccepted:"requestAccepted",requestRejected:"requestRejected",makeOffer:"makeOffer"},decls:17,vars:13,consts:[[1,"request-wrapper"],[1,"request-summary",3,"ngClass"],[4,"ngIf"],["class","action-buttons",4,"ngIf"],["class","status-button",4,"ngIf"],[1,"status-button"],[1,"action-buttons"],[1,"accept-btn",3,"click"],[1,"reject-btn",3,"click"],[1,"offer-btn",3,"click"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"h3"),d(3,"Solicitare"),l(),u(4,"p")(5,"strong"),d(6,"Data \u0219i ora:"),l(),d(7),Ve(8,"date"),l(),u(9,"p")(10,"strong"),d(11,"Descriere:"),l(),d(12),l(),O(13,Ap,4,1,"p",2)(14,Dp,4,1,"p",2)(15,Mp,3,2,"div",2)(16,Op,3,0,"div",3),l()()),t&2&&(_(),E("ngClass",di(10,Tp,n.request.status==="Rejected",n.request.status==="Accepted"||n.request.status==="Completed")),_(6),G(" ",Ut(8,7,n.date,"short"),""),_(5),G(" ",n.request.description,""),_(),E("ngIf",n.request.senderContactInfo==null?null:n.request.senderContactInfo.address),_(),E("ngIf",n.request.senderContactInfo==null?null:n.request.senderContactInfo.phoneNumber),_(),E("ngIf",n.request.status==="Pending"),_(),E("ngIf",n.showOfferButton()))},dependencies:[Lt,Z,et],styles:['@charset "UTF-8";.request-summary[_ngcontent-%COMP%]{max-width:300px;margin:8px auto;padding:12px;border:2px solid black;background-color:#f8faff;font-size:.8rem;line-height:1.4;border-radius:6px;font-family:Roboto Mono,monospace}.request-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.request-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1rem;text-align:center}.request-status[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;padding:.25rem .5rem;font-weight:700;border-radius:4px}.status-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.status-pending[_ngcontent-%COMP%]{background-color:#fff5c4;color:#856404}.status-accepted[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-rejected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.accepted-bg[_ngcontent-%COMP%]{background-color:#d4edda;border:4px solid #155724}.rejected-bg[_ngcontent-%COMP%]{background-color:#f8d7da;border:4px solid #721c24}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .offer-btn[_ngcontent-%COMP%]{background-color:#d4e2ed;color:#001b3f}.action-buttons[_ngcontent-%COMP%]   .offer-btn[_ngcontent-%COMP%]:hover{background-color:#78a2c4;box-shadow:0 2px 6px #0003}']})};var kp=(i,e)=>({"bubble-left":i,"bubble-right":e}),Vp=(i,e)=>({left:i,right:e}),jr=class i{message;currentUserId;get isOwnMessage(){return this.message.senderId===this.currentUserId}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-message-bubble"]],inputs:{message:"message",currentUserId:"currentUserId"},decls:6,vars:13,consts:[[1,"bubble",3,"ngClass"],[1,"bubble-content",3,"ngClass"],[1,"timestamp"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1),d(2),u(3,"div",2),d(4),Ve(5,"date"),l()()()),t&2&&(E("ngClass",di(7,kp,!n.isOwnMessage,n.isOwnMessage)),_(),E("ngClass",di(10,Vp,!n.isOwnMessage,n.isOwnMessage)),_(),G(" ",n.message.content," "),_(2),he(Ut(5,4,n.message.createdAt,"shortTime")))},dependencies:[Lt,et],styles:[".bubble[_ngcontent-%COMP%]{display:flex;width:100%;margin:8px 0}.bubble-left[_ngcontent-%COMP%]{justify-content:flex-start}.bubble-right[_ngcontent-%COMP%]{justify-content:flex-end}.bubble-content[_ngcontent-%COMP%]{display:inline-block;padding:10px 14px;border-radius:12px;font-size:12px;word-wrap:break-word;min-width:80px;max-width:70%;text-align:left}.bubble-content.left[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #514c70;color:#000;border-top-left-radius:4px}.bubble-content.right[_ngcontent-%COMP%]{background-color:#a79ed7;border:1px solid #514c70;color:#000;border-top-right-radius:4px}.bubble-content[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{font-size:10px;opacity:.6;margin-top:4px;text-align:right}"]})};var $r=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Reply";addReply(e,t){let n=this.authService.getToken(),o=new B({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/Add/${e}`,t,{headers:o})}updateReply(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update/${e.id}`,e,{headers:n})}acceptReply(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return console.log(t),this.http.patch(`${this.baseUrl}/Accept/${e}`,{},{headers:n})}rejectReply(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Reject/${e}`,{},{headers:n})}cancelReply(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Cancel/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(K(ve),K(W))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var Gr=class i{constructor(e,t){this.authService=e;this.http=t}baseUrl="http://localhost:5241/api/Conversation";getExchange(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}getExchanges(){let e=this.authService.getToken(),t=new B({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/GetPage`,{headers:t})}static \u0275fac=function(t){return new(t||i)(K(W),K(ve))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var Wr=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Message";sendMessage(e,t){let n=this.authService.getToken(),o=new B({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/Add/${e}`,t,{headers:o})}static \u0275fac=function(t){return new(t||i)(K(ve),K(W))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var Hr=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/ServiceTask";getServiceTask(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}updateServiceTask(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update/${e.id}`,e,{headers:n})}completeServiceTask(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Complete/${e}`,{},{headers:n})}cancelServiceTask(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Complete/${e}`,{},{headers:n})}static \u0275fac=function(t){return new(t||i)(K(ve),K(W))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var Bn=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Review";addReview(e,t){let n=this.authService.getToken(),o=new B({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}task/${e}/confirm/reviews`,t,{headers:o})}getReviews(e,t){let n=this.authService.getToken(),o=new B({Authorization:`Bearer ${n}`}),a=new Bt().set("page",e).set("pageSize",t);return this.http.get(`${this.baseUrl}/GetPage`,{params:a,headers:o})}getReview(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(K(ve),K(W))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var Qe=class extends Error{constructor(e,t){let n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}},Yt=class extends Error{constructor(e="A timeout occurred."){let t=new.target.prototype;super(e),this.__proto__=t}},Te=class extends Error{constructor(e="An abort occurred."){let t=new.target.prototype;super(e),this.__proto__=t}},Kr=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}},Qr=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}},Jr=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}},Ai=class extends Error{constructor(e){let t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}},Xr=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}};var qn=class{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}},_t=class{get(e,t){return this.send(ge(U({},t),{method:"GET",url:e}))}post(e,t){return this.send(ge(U({},t),{method:"POST",url:e}))}delete(e,t){return this.send(ge(U({},t),{method:"DELETE",url:e}))}getCookieString(e){return""}};var I=function(i){return i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None",i}(I||{});var yt=class{constructor(){}log(e,t){}};yt.instance=new yt;var Bp="8.0.7",te=class{static isRequired(e,t){if(e==null)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw new Error(`Unknown ${n} value: ${e}.`)}},ae=class i{static get isBrowser(){return!i.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!i.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!i.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}};function Zt(i,e){let t="";return st(i)?(t=`Binary data of length ${i.byteLength}`,e&&(t+=`. Content: '${qp(i)}'`)):typeof i=="string"&&(t=`String data of length ${i.length}`,e&&(t+=`. Content: '${i}'`)),t}function qp(i){let e=new Uint8Array(i),t="";return e.forEach(n=>{let o=n<16?"0":"";t+=`0x${o}${n.toString(16)} `}),t.substr(0,t.length-1)}function st(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Zr(i,e,t,n,o,a){return F(this,null,function*(){let p={},[w,A]=vt();p[w]=A,i.log(I.Trace,`(${e} transport) sending data. ${Zt(o,a.logMessageContent)}.`);let P=st(o)?"arraybuffer":"text",z=yield t.post(n,{content:o,headers:U(U({},p),a.headers),responseType:P,timeout:a.timeout,withCredentials:a.withCredentials});i.log(I.Trace,`(${e} transport) request complete. Response status: ${z.statusCode}.`)})}function Fl(i){return i===void 0?new fn(I.Information):i===null?yt.instance:i.log!==void 0?i:new fn(i)}var Yr=class{constructor(e,t){this._subject=e,this._observer=t}dispose(){let e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}},fn=class{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){let n=`[${new Date().toISOString()}] ${I[e]}: ${t}`;switch(e){case I.Critical:case I.Error:this.out.error(n);break;case I.Warning:this.out.warn(n);break;case I.Information:this.out.info(n);break;default:this.out.log(n);break}}}};function vt(){let i="X-SignalR-User-Agent";return ae.isNode&&(i="User-Agent"),[i,zp(Bp,jp(),Gp(),$p())]}function zp(i,e,t,n){let o="Microsoft SignalR/",a=i.split(".");return o+=`${a[0]}.${a[1]}`,o+=` (${i}; `,e&&e!==""?o+=`${e}; `:o+="Unknown OS; ",o+=`${t}`,n?o+=`; ${n}`:o+="; Unknown Runtime Version",o+=")",o}function jp(){if(ae.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function $p(){if(ae.isNode)return process.versions.node}function Gp(){return ae.isNode?"NodeJS":"Browser"}function eo(i){return i.stack?i.stack:i.message?i.message:`${i}`}function Ul(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var to=class extends _t{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||ae.isNode){let t=typeof __webpack_require__=="function"?__non_webpack_require__:Cn;this._jar=new(t("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=t("node-fetch"):this._fetchType=fetch,this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Ul());if(typeof AbortController>"u"){let t=typeof __webpack_require__=="function"?__non_webpack_require__:Cn;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}send(e){return F(this,null,function*(){if(e.abortSignal&&e.abortSignal.aborted)throw new Te;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");let t=new this._abortControllerType,n;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),n=new Te});let o=null;if(e.timeout){let A=e.timeout;o=setTimeout(()=>{t.abort(),this._logger.log(I.Warning,"Timeout from HTTP request."),n=new Yt},A)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},st(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let a;try{a=yield this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:U({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(A){throw n||(this._logger.log(I.Warning,`Error from HTTP request. ${A}.`),A)}finally{o&&clearTimeout(o),e.abortSignal&&(e.abortSignal.onabort=null)}if(!a.ok){let A=yield Ll(a,"text");throw new Qe(A||a.statusText,a.status)}let w=yield Ll(a,e.responseType);return new qn(a.status,a.statusText,w)})}getCookieString(e){let t="";return ae.isNode&&this._jar&&this._jar.getCookies(e,(n,o)=>t=o.join("; ")),t}};function Ll(i,e){let t;switch(e){case"arraybuffer":t=i.arrayBuffer();break;case"text":t=i.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:t=i.text();break}return t}var no=class extends _t{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Te):e.method?e.url?new Promise((t,n)=>{let o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(st(e.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let a=e.headers;a&&Object.keys(a).forEach(p=>{o.setRequestHeader(p,a[p])}),e.responseType&&(o.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{o.abort(),n(new Te)}),e.timeout&&(o.timeout=e.timeout),o.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),o.status>=200&&o.status<300?t(new qn(o.status,o.statusText,o.response||o.responseText)):n(new Qe(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(I.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),n(new Qe(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(I.Warning,"Timeout from HTTP request."),n(new Yt)},o.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var io=class extends _t{constructor(e){if(super(),typeof fetch<"u"||ae.isNode)this._httpClient=new to(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new no(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Te):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}};var Je=class i{static write(e){return`${e}${i.RecordSeparator}`}static parse(e){if(e[e.length-1]!==i.RecordSeparator)throw new Error("Message is incomplete.");let t=e.split(i.RecordSeparator);return t.pop(),t}};Je.RecordSeparatorCode=30;Je.RecordSeparator=String.fromCharCode(Je.RecordSeparatorCode);var ro=class{writeHandshakeRequest(e){return Je.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(st(e)){let w=new Uint8Array(e),A=w.indexOf(Je.RecordSeparatorCode);if(A===-1)throw new Error("Message is incomplete.");let P=A+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(w.slice(0,P))),n=w.byteLength>P?w.slice(P).buffer:null}else{let w=e,A=w.indexOf(Je.RecordSeparator);if(A===-1)throw new Error("Message is incomplete.");let P=A+1;t=w.substring(0,P),n=w.length>P?w.substring(P):null}let o=Je.parse(t),a=JSON.parse(o[0]);if(a.type)throw new Error("Expected a handshake response from the server.");return[n,a]}};var q=function(i){return i[i.Invocation=1]="Invocation",i[i.StreamItem=2]="StreamItem",i[i.Completion=3]="Completion",i[i.StreamInvocation=4]="StreamInvocation",i[i.CancelInvocation=5]="CancelInvocation",i[i.Ping=6]="Ping",i[i.Close=7]="Close",i[i.Ack=8]="Ack",i[i.Sequence=9]="Sequence",i}(q||{});var oo=class{constructor(){this.observers=[]}next(e){for(let t of this.observers)t.next(e)}error(e){for(let t of this.observers)t.error&&t.error(e)}complete(){for(let e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new Yr(this,e)}};var so=class{constructor(e,t,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=n}_send(e){return F(this,null,function*(){let t=this._protocol.writeMessage(e),n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let o=()=>{},a=()=>{};st(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise((p,w)=>{o=p,a=w})),this._messages.push(new Ys(t,this._totalMessageCount,o,a))}try{this._reconnectInProgress||(yield this._connection.send(t))}catch{this._disconnected()}yield n})}_ack(e){let t=-1;for(let n=0;n<this._messages.length;n++){let o=this._messages[n];if(o._id<=e.sequenceId)t=n,st(o._message)?this._bufferedByteCount-=o._message.byteLength:this._bufferedByteCount-=o._message.length,o._resolver();else if(this._bufferedByteCount<this._bufferSize)o._resolver();else break}t!==-1&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==q.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;let t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){return F(this,null,function*(){let e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;yield this._connection.send(this._protocol.writeMessage({type:q.Sequence,sequenceId:e}));let t=this._messages;for(let n of t)yield this._connection.send(n._message);this._reconnectInProgress=!1})}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(let t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case q.Invocation:case q.StreamItem:case q.Completion:case q.StreamInvocation:case q.CancelInvocation:return!0;case q.Close:case q.Sequence:case q.Ping:case q.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(()=>F(this,null,function*(){try{this._reconnectInProgress||(yield this._connection.send(this._protocol.writeMessage({type:q.Ack,sequenceId:this._latestReceivedSequenceId})))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}},Ys=class{constructor(e,t,n,o){this._message=e,this._id=t,this._resolver=n,this._rejector=o}};var Wp=30*1e3,Hp=15*1e3,Kp=1e5,me=function(i){return i.Disconnected="Disconnected",i.Connecting="Connecting",i.Connected="Connected",i.Disconnecting="Disconnecting",i.Reconnecting="Reconnecting",i}(me||{}),ao=class i{static create(e,t,n,o,a,p,w){return new i(e,t,n,o,a,p,w)}constructor(e,t,n,o,a,p,w){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(I.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},te.isRequired(e,"connection"),te.isRequired(t,"logger"),te.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=a??Wp,this.keepAliveIntervalInMilliseconds=p??Hp,this._statefulReconnectBufferSize=w??Kp,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=o,this._handshakeProtocol=new ro,this.connection.onreceive=A=>this._processIncomingData(A),this.connection.onclose=A=>this._connectionClosed(A),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=me.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:q.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==me.Disconnected&&this._connectionState!==me.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return F(this,null,function*(){if(this._connectionState!==me.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=me.Connecting,this._logger.log(I.Debug,"Starting HubConnection.");try{yield this._startInternal(),ae.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=me.Connected,this._connectionStarted=!0,this._logger.log(I.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=me.Disconnected,this._logger.log(I.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})}_startInternal(){return F(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let e=new Promise((t,n)=>{this._handshakeResolver=t,this._handshakeRejecter=n});yield this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);let n={protocol:this._protocol.name,version:t};if(this._logger.log(I.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(I.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new so(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(t){throw this._logger.log(I.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(t),t}})}stop(){return F(this,null,function*(){let e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield e}catch{}})}_stopInternal(e){if(this._connectionState===me.Disconnected)return this._logger.log(I.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===me.Disconnecting)return this._logger.log(I.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;let t=this._connectionState;return this._connectionState=me.Disconnecting,this._logger.log(I.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(I.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===me.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Te("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}_sendCloseMessage(){return F(this,null,function*(){try{yield this._sendWithProtocol(this._createCloseMessage())}catch{}})}stream(e,...t){let[n,o]=this._replaceStreamingParams(t),a=this._createStreamInvocation(e,t,o),p,w=new oo;return w.cancelCallback=()=>{let A=this._createCancelInvocation(a.invocationId);return delete this._callbacks[a.invocationId],p.then(()=>this._sendWithProtocol(A))},this._callbacks[a.invocationId]=(A,P)=>{if(P){w.error(P);return}else A&&(A.type===q.Completion?A.error?w.error(new Error(A.error)):w.complete():w.next(A.item))},p=this._sendWithProtocol(a).catch(A=>{w.error(A),delete this._callbacks[a.invocationId]}),this._launchStreams(n,p),w}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){let[n,o]=this._replaceStreamingParams(t),a=this._sendWithProtocol(this._createInvocation(e,t,!0,o));return this._launchStreams(n,a),a}invoke(e,...t){let[n,o]=this._replaceStreamingParams(t),a=this._createInvocation(e,t,!1,o);return new Promise((w,A)=>{this._callbacks[a.invocationId]=(z,pe)=>{if(pe){A(pe);return}else z&&(z.type===q.Completion?z.error?A(new Error(z.error)):w(z.result):A(new Error(`Unexpected message type: ${z.type}`)))};let P=this._sendWithProtocol(a).catch(z=>{A(z),delete this._callbacks[a.invocationId]});this._launchStreams(n,P)})}on(e,t){!e||!t||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(t)===-1&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();let n=this._methods[e];if(n)if(t){let o=n.indexOf(t);o!==-1&&(n.splice(o,1),n.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){let t=this._protocol.parseMessages(e,this._logger);for(let n of t)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(n)))switch(n.type){case q.Invocation:this._invokeClientMethod(n).catch(o=>{this._logger.log(I.Error,`Invoke client method threw error: ${eo(o)}`)});break;case q.StreamItem:case q.Completion:{let o=this._callbacks[n.invocationId];if(o){n.type===q.Completion&&delete this._callbacks[n.invocationId];try{o(n)}catch(a){this._logger.log(I.Error,`Stream callback threw error: ${eo(a)}`)}}break}case q.Ping:break;case q.Close:{this._logger.log(I.Information,"Close message received from server.");let o=n.error?new Error("Server returned an error on close: "+n.error):void 0;n.allowReconnect===!0?this.connection.stop(o):this._stopPromise=this._stopInternal(o);break}case q.Ack:this._messageBuffer&&this._messageBuffer._ack(n);break;case q.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(n);break;default:this._logger.log(I.Warning,`Invalid message type: ${n.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(o){let a="Error parsing handshake response: "+o;this._logger.log(I.Error,a);let p=new Error(a);throw this._handshakeRejecter(p),p}if(t.error){let o="Server returned handshake error: "+t.error;this._logger.log(I.Error,o);let a=new Error(o);throw this._handshakeRejecter(a),a}else this._logger.log(I.Debug,"Server handshake complete.");return this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(()=>F(this,null,function*(){if(this._connectionState===me.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(e){return F(this,null,function*(){let t=e.target.toLowerCase(),n=this._methods[t];if(!n){this._logger.log(I.Warning,`No client method with the name '${t}' found.`),e.invocationId&&(this._logger.log(I.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}let o=n.slice(),a=!!e.invocationId,p,w,A;for(let P of o)try{let z=p;p=yield P.apply(this,e.arguments),a&&p&&z&&(this._logger.log(I.Error,`Multiple results provided for '${t}'. Sending error to server.`),A=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),w=void 0}catch(z){w=z,this._logger.log(I.Error,`A callback for the method '${t}' threw error '${z}'.`)}A?yield this._sendWithProtocol(A):a?(w?A=this._createCompletionMessage(e.invocationId,`${w}`,null):p!==void 0?A=this._createCompletionMessage(e.invocationId,null,p):(this._logger.log(I.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),A=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(A)):p&&this._logger.log(I.Error,`Result given for '${t}' method but server is not expecting a result.`)})}_connectionClosed(e){this._logger.log(I.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Te("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===me.Disconnecting?this._completeClose(e):this._connectionState===me.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===me.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=me.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),ae.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(I.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}_reconnect(e){return F(this,null,function*(){let t=Date.now(),n=0,o=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),a=this._getNextRetryDelay(n++,0,o);if(a===null){this._logger.log(I.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=me.Reconnecting,e?this._logger.log(I.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(I.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(p=>p.apply(this,[e]))}catch(p){this._logger.log(I.Error,`An onreconnecting callback called with error '${e}' threw error '${p}'.`)}if(this._connectionState!==me.Reconnecting){this._logger.log(I.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;a!==null;){if(this._logger.log(I.Information,`Reconnect attempt number ${n} will start in ${a} ms.`),yield new Promise(p=>{this._reconnectDelayHandle=setTimeout(p,a)}),this._reconnectDelayHandle=void 0,this._connectionState!==me.Reconnecting){this._logger.log(I.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=me.Connected,this._logger.log(I.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(p=>p.apply(this,[this.connection.connectionId]))}catch(p){this._logger.log(I.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${p}'.`)}return}catch(p){if(this._logger.log(I.Information,`Reconnect attempt failed because of error '${p}'.`),this._connectionState!==me.Reconnecting){this._logger.log(I.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===me.Disconnecting&&this._completeClose();return}o=p instanceof Error?p:new Error(p.toString()),a=this._getNextRetryDelay(n++,Date.now()-t,o)}}this._logger.log(I.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(o){return this._logger.log(I.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${o}'.`),null}}_cancelCallbacksWithError(e){let t=this._callbacks;this._callbacks={},Object.keys(t).forEach(n=>{let o=t[n];try{o(null,e)}catch(a){this._logger.log(I.Error,`Stream 'error' callback called with '${e}' threw error: ${eo(a)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,o){if(n)return o.length!==0?{arguments:t,streamIds:o,target:e,type:q.Invocation}:{arguments:t,target:e,type:q.Invocation};{let a=this._invocationId;return this._invocationId++,o.length!==0?{arguments:t,invocationId:a.toString(),streamIds:o,target:e,type:q.Invocation}:{arguments:t,invocationId:a.toString(),target:e,type:q.Invocation}}}_launchStreams(e,t){if(e.length!==0){t||(t=Promise.resolve());for(let n in e)e[n].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n)))},error:o=>{let a;o instanceof Error?a=o.message:o&&o.toString?a=o.toString():a="Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n,a)))},next:o=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(n,o)))}})}}_replaceStreamingParams(e){let t=[],n=[];for(let o=0;o<e.length;o++){let a=e[o];if(this._isObservable(a)){let p=this._invocationId;this._invocationId++,t[p]=a,n.push(p.toString()),e.splice(o,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,t,n){let o=this._invocationId;return this._invocationId++,n.length!==0?{arguments:t,invocationId:o.toString(),streamIds:n,target:e,type:q.StreamInvocation}:{arguments:t,invocationId:o.toString(),target:e,type:q.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:q.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:q.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:q.Completion}:{invocationId:e,result:n,type:q.Completion}}_createCloseMessage(){return{type:q.Close}}};var Qp=[0,2e3,1e4,3e4,null],Di=class{constructor(e){this._retryDelays=e!==void 0?[...e,null]:Qp}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}};var gn=(()=>{class i{}return i.Authorization="Authorization",i.Cookie="Cookie",i})();var co=class extends _t{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}send(e){return F(this,null,function*(){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(e);let n=yield this._innerClient.send(e);return t&&n.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(e),yield this._innerClient.send(e)):n})}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[gn.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[gn.Authorization]&&delete e.headers[gn.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}};var Ce=function(i){return i[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling",i}(Ce||{}),be=function(i){return i[i.Text=1]="Text",i[i.Binary=2]="Binary",i}(be||{});var lo=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var Pi=class{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new lo,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}connect(e,t){return F(this,null,function*(){if(te.isRequired(e,"url"),te.isRequired(t,"transferFormat"),te.isIn(t,be,"transferFormat"),this._url=e,this._logger.log(I.Trace,"(LongPolling transport) Connecting."),t===be.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[n,o]=vt(),a=U({[n]:o},this._options.headers),p={abortSignal:this._pollAbort.signal,headers:a,timeout:1e5,withCredentials:this._options.withCredentials};t===be.Binary&&(p.responseType="arraybuffer");let w=`${e}&_=${Date.now()}`;this._logger.log(I.Trace,`(LongPolling transport) polling: ${w}.`);let A=yield this._httpClient.get(w,p);A.statusCode!==200?(this._logger.log(I.Error,`(LongPolling transport) Unexpected response code: ${A.statusCode}.`),this._closeError=new Qe(A.statusText||"",A.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,p)})}_poll(e,t){return F(this,null,function*(){try{for(;this._running;)try{let n=`${e}&_=${Date.now()}`;this._logger.log(I.Trace,`(LongPolling transport) polling: ${n}.`);let o=yield this._httpClient.get(n,t);o.statusCode===204?(this._logger.log(I.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):o.statusCode!==200?(this._logger.log(I.Error,`(LongPolling transport) Unexpected response code: ${o.statusCode}.`),this._closeError=new Qe(o.statusText||"",o.statusCode),this._running=!1):o.content?(this._logger.log(I.Trace,`(LongPolling transport) data received. ${Zt(o.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(o.content)):this._logger.log(I.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(n){this._running?n instanceof Yt?this._logger.log(I.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=n,this._running=!1):this._logger.log(I.Trace,`(LongPolling transport) Poll errored after shutdown: ${n.message}`)}}finally{this._logger.log(I.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(e){return F(this,null,function*(){return this._running?Zr(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return F(this,null,function*(){this._logger.log(I.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(I.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let e={},[t,n]=vt();e[t]=n;let o={headers:U(U({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},a;try{yield this._httpClient.delete(this._url,o)}catch(p){a=p}a?a instanceof Qe&&(a.statusCode===404?this._logger.log(I.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(I.Trace,`(LongPolling transport) Error sending a DELETE request: ${a}`)):this._logger.log(I.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(I.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(I.Trace,e),this.onclose(this._closeError)}}};var uo=class{constructor(e,t,n,o){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=o,this.onreceive=null,this.onclose=null}connect(e,t){return F(this,null,function*(){return te.isRequired(e,"url"),te.isRequired(t,"transferFormat"),te.isIn(t,be,"transferFormat"),this._logger.log(I.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((n,o)=>{let a=!1;if(t!==be.Text){o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let p;if(ae.isBrowser||ae.isWebWorker)p=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{let w=this._httpClient.getCookieString(e),A={};A.Cookie=w;let[P,z]=vt();A[P]=z,p=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:U(U({},A),this._options.headers)})}try{p.onmessage=w=>{if(this.onreceive)try{this._logger.log(I.Trace,`(SSE transport) data received. ${Zt(w.data,this._options.logMessageContent)}.`),this.onreceive(w.data)}catch(A){this._close(A);return}},p.onerror=w=>{a?this._close():o(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},p.onopen=()=>{this._logger.log(I.Information,`SSE connected to ${this._url}`),this._eventSource=p,a=!0,n()}}catch(w){o(w);return}})})}send(e){return F(this,null,function*(){return this._eventSource?Zr(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}};var ho=class{constructor(e,t,n,o,a,p){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=o,this._webSocketConstructor=a,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=p}connect(e,t){return F(this,null,function*(){te.isRequired(e,"url"),te.isRequired(t,"transferFormat"),te.isIn(t,be,"transferFormat"),this._logger.log(I.Trace,"(WebSockets transport) Connecting.");let n;return this._accessTokenFactory&&(n=yield this._accessTokenFactory()),new Promise((o,a)=>{e=e.replace(/^http/,"ws");let p,w=this._httpClient.getCookieString(e),A=!1;if(ae.isNode||ae.isReactNative){let P={},[z,pe]=vt();P[z]=pe,n&&(P[gn.Authorization]=`Bearer ${n}`),w&&(P[gn.Cookie]=w),p=new this._webSocketConstructor(e,void 0,{headers:U(U({},P),this._headers)})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);p||(p=new this._webSocketConstructor(e)),t===be.Binary&&(p.binaryType="arraybuffer"),p.onopen=P=>{this._logger.log(I.Information,`WebSocket connected to ${e}.`),this._webSocket=p,A=!0,o()},p.onerror=P=>{let z=null;typeof ErrorEvent<"u"&&P instanceof ErrorEvent?z=P.error:z="There was an error with the transport",this._logger.log(I.Information,`(WebSockets transport) ${z}.`)},p.onmessage=P=>{if(this._logger.log(I.Trace,`(WebSockets transport) data received. ${Zt(P.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(P.data)}catch(z){this._close(z);return}},p.onclose=P=>{if(A)this._close(P);else{let z=null;typeof ErrorEvent<"u"&&P instanceof ErrorEvent?z=P.error:z="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",a(new Error(z))}}})})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(I.Trace,`(WebSockets transport) sending data. ${Zt(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(I.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}};var Bl=100,po=class{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,te.isRequired(e,"url"),this._logger=Fl(t.logger),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=t.logMessageContent===void 0?!1:t.logMessageContent,typeof t.withCredentials=="boolean"||t.withCredentials===void 0)t.withCredentials=t.withCredentials===void 0?!0:t.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.timeout=t.timeout===void 0?100*1e3:t.timeout;let n=null,o=null;if(ae.isNode&&typeof Cn<"u"){let a=typeof __webpack_require__=="function"?__non_webpack_require__:Cn;n=a("ws"),o=a("eventsource")}!ae.isNode&&typeof WebSocket<"u"&&!t.WebSocket?t.WebSocket=WebSocket:ae.isNode&&!t.WebSocket&&n&&(t.WebSocket=n),!ae.isNode&&typeof EventSource<"u"&&!t.EventSource?t.EventSource=EventSource:ae.isNode&&!t.EventSource&&typeof o<"u"&&(t.EventSource=o),this._httpClient=new co(t.httpClient||new io(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}start(e){return F(this,null,function*(){if(e=e||be.Binary,te.isIn(e,be,"transferFormat"),this._logger.log(I.Debug,`Starting connection with transfer format '${be[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(I.Error,t),yield this._stopPromise,Promise.reject(new Te(t))}else if(this._connectionState!=="Connected"){let t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(I.Error,t),Promise.reject(new Te(t))}this._connectionStarted=!0})}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Zs(this.transport)),this._sendQueue.send(e))}stop(e){return F(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(I.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(I.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),yield this._stopInternal(e),yield this._stopPromise})}_stopInternal(e){return F(this,null,function*(){this._stopError=e;try{yield this._startInternalPromise}catch{}if(this.transport){try{yield this.transport.stop()}catch(t){this._logger.log(I.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(I.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(e){return F(this,null,function*(){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Ce.WebSockets)this.transport=this._constructTransport(Ce.WebSockets),yield this._startTransport(t,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let n=null,o=0;do{if(n=yield this._getNegotiationResponse(t),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Te("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){let a=n.accessToken;this._accessTokenFactory=()=>a,this._httpClient._accessToken=a,this._httpClient._accessTokenFactory=void 0}o++}while(n.url&&o<Bl);if(o===Bl&&n.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(t,this._options.transport,n,e)}this.transport instanceof Pi&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(I.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(n){return this._logger.log(I.Error,"Failed to start the connection: "+n),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(n)}})}_getNegotiationResponse(e){return F(this,null,function*(){let t={},[n,o]=vt();t[n]=o;let a=this._resolveNegotiateUrl(e);this._logger.log(I.Debug,`Sending negotiation request: ${a}.`);try{let p=yield this._httpClient.post(a,{content:"",headers:U(U({},t),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(p.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${p.statusCode}'`));let w=JSON.parse(p.content);return(!w.negotiateVersion||w.negotiateVersion<1)&&(w.connectionToken=w.connectionId),w.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Ai("Client didn't negotiate Stateful Reconnect but the server did.")):w}catch(p){let w="Failed to complete negotiation with the server: "+p;return p instanceof Qe&&p.statusCode===404&&(w=w+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(I.Error,w),Promise.reject(new Ai(w))}})}_createConnectUrl(e,t){return t?e+(e.indexOf("?")===-1?"?":"&")+`id=${t}`:e}_createTransport(e,t,n,o){return F(this,null,function*(){let a=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t)){this._logger.log(I.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,yield this._startTransport(a,o),this.connectionId=n.connectionId;return}let p=[],w=n.availableTransports||[],A=n;for(let P of w){let z=this._resolveTransportOrError(P,t,o,A?.useStatefulReconnect===!0);if(z instanceof Error)p.push(`${P.transport} failed:`),p.push(z);else if(this._isITransport(z)){if(this.transport=z,!A){try{A=yield this._getNegotiationResponse(e)}catch(pe){return Promise.reject(pe)}a=this._createConnectUrl(e,A.connectionToken)}try{yield this._startTransport(a,o),this.connectionId=A.connectionId;return}catch(pe){if(this._logger.log(I.Error,`Failed to start the transport '${P.transport}': ${pe}`),A=void 0,p.push(new Jr(`${P.transport} failed: ${pe}`,Ce[P.transport])),this._connectionState!=="Connecting"){let ue="Failed to select transport before stop() was called.";return this._logger.log(I.Debug,ue),Promise.reject(new Te(ue))}}}}return p.length>0?Promise.reject(new Xr(`Unable to connect to the server with any of the available transports. ${p.join(" ")}`,p)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(e){switch(e){case Ce.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new ho(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Ce.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new uo(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Ce.LongPolling:return new Pi(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=n=>F(this,null,function*(){let o=!1;if(this.features.reconnect)try{this.features.disconnected(),yield this.transport.connect(e,t),yield this.features.resend()}catch{o=!0}else{this._stopConnection(n);return}o&&this._stopConnection(n)}):this.transport.onclose=n=>this._stopConnection(n),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n,o){let a=Ce[e.transport];if(a==null)return this._logger.log(I.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(Jp(t,a))if(e.transferFormats.map(w=>be[w]).indexOf(n)>=0){if(a===Ce.WebSockets&&!this._options.WebSocket||a===Ce.ServerSentEvents&&!this._options.EventSource)return this._logger.log(I.Debug,`Skipping transport '${Ce[a]}' because it is not supported in your environment.'`),new Kr(`'${Ce[a]}' is not supported in your environment.`,a);this._logger.log(I.Debug,`Selecting transport '${Ce[a]}'.`);try{return this.features.reconnect=a===Ce.WebSockets?o:void 0,this._constructTransport(a)}catch(w){return w}}else return this._logger.log(I.Debug,`Skipping transport '${Ce[a]}' because it does not support the requested transfer format '${be[n]}'.`),new Error(`'${Ce[a]}' does not support ${be[n]}.`);else return this._logger.log(I.Debug,`Skipping transport '${Ce[a]}' because it was disabled by the client.`),new Qr(`'${Ce[a]}' is disabled by the client.`,a)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(I.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(I.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(I.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(I.Error,`Connection disconnected with error '${e}'.`):this._logger.log(I.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(I.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(I.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!ae.isBrowser)throw new Error(`Cannot resolve '${e}'.`);let t=window.document.createElement("a");return t.href=e,this._logger.log(I.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){let t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";let n=new URLSearchParams(t.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?n.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&n.append("useStatefulReconnect","true"),t.search=n.toString(),t.toString()}};function Jp(i,e){return!i||(e&i)!==0}var Zs=class i{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new zn,this._transportResult=new zn,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new zn),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}_sendLoop(){return F(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new zn;let e=this._transportResult;this._transportResult=void 0;let t=typeof this._buffer[0]=="string"?this._buffer.join(""):i._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(t),e.resolve()}catch(n){e.reject(n)}}})}static _concatBuffers(e){let t=e.map(a=>a.byteLength).reduce((a,p)=>a+p),n=new Uint8Array(t),o=0;for(let a of e)n.set(new Uint8Array(a),o),o+=a.byteLength;return n.buffer}},zn=class{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}};var Xp="json",mo=class{constructor(){this.name=Xp,this.version=2,this.transferFormat=be.Text}parseMessages(e,t){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];t===null&&(t=yt.instance);let n=Je.parse(e),o=[];for(let a of n){let p=JSON.parse(a);if(typeof p.type!="number")throw new Error("Invalid payload.");switch(p.type){case q.Invocation:this._isInvocationMessage(p);break;case q.StreamItem:this._isStreamItemMessage(p);break;case q.Completion:this._isCompletionMessage(p);break;case q.Ping:break;case q.Close:break;case q.Ack:this._isAckMessage(p);break;case q.Sequence:this._isSequenceMessage(p);break;default:t.log(I.Information,"Unknown message type '"+p.type+"' ignored.");continue}o.push(p)}return o}writeMessage(e){return Je.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if(typeof e!="string"||e==="")throw new Error(t)}};var Yp={trace:I.Trace,debug:I.Debug,info:I.Information,information:I.Information,warn:I.Warning,warning:I.Warning,error:I.Error,critical:I.Critical,none:I.None};function Zp(i){let e=Yp[i.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${i}`)}var Ri=class{configureLogging(e){if(te.isRequired(e,"logging"),em(e))this.logger=e;else if(typeof e=="string"){let t=Zp(e);this.logger=new fn(t)}else this.logger=new fn(e);return this}withUrl(e,t){return te.isRequired(e,"url"),te.isNotEmpty(e,"url"),this.url=e,typeof t=="object"?this.httpConnectionOptions=U(U({},this.httpConnectionOptions),t):this.httpConnectionOptions=ge(U({},this.httpConnectionOptions),{transport:t}),this}withHubProtocol(e){return te.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Di(e):this.reconnectPolicy=e:this.reconnectPolicy=new Di,this}withServerTimeout(e){return te.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return te.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){let e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let t=new po(this.url,e);return ao.create(t,this.logger||yt.instance,this.protocol||new mo,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}};function em(i){return i.log!==void 0}var fo=class i{hubConnection;connect(e){this.hubConnection=new Ri().withUrl("http://localhost:5241/hubs/conversations").build(),this.hubConnection.start().then(()=>{console.log("SignalR connected"),this.hubConnection.invoke("Join",e)}).catch(t=>console.error("SignalR failed to connect:",t))}onNewMessage(e){this.hubConnection.on("ReceiveNewMessage",e)}disconnect(){this.hubConnection.stop()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var rm=i=>["/specialist",i];function om(i,e){if(i&1){let t=j();u(0,"div",7),D("click",function(){let o=V(t).$implicit,a=T();return N(a.loadExchange(o.userId))}),L(1,"img",8),d(2),l()}if(i&2){let t=e.$implicit,n=T();cn("active",t.userId===(n.selectedExchange==null?null:n.selectedExchange.userId)),_(2),G(" ",t.userFullName," ")}}function sm(i,e){if(i&1&&L(0,"app-message-bubble",19),i&2){let t=e.$implicit,n=T(2);E("message",t)("currentUserId",n.userId)}}function am(i,e){if(i&1){let t=j();xe(0),u(1,"div",20)(2,"app-request-message",21),D("requestAccepted",function(){let o=V(t).$implicit,a=T(2);return N(a.acceptRequest(o.id))})("requestRejected",function(){let o=V(t).$implicit,a=T(2);return N(a.rejectRequest(o.id))})("makeOffer",function(o){V(t);let a=T(2);return N(a.openReplyForm(o))}),l()(),Ee()}if(i&2){let t=e.$implicit,n=T(2);_(),E("ngClass",n.userRole==="Client"?"message-right":"message-left"),_(),E("request",t)}}function cm(i,e){if(i&1){let t=j();u(0,"div",9)(1,"div",10)(2,"div"),d(3),l(),u(4,"div")(5,"button"),L(6,"img",11),l()()(),u(7,"div",12),O(8,sm,1,2,"app-message-bubble",13)(9,am,3,2,"ng-container",14),l(),u(10,"div",15)(11,"button")(12,"img",16),D("click",function(){V(t);let o=T();return N(o.openMediaPicker())}),l()(),u(13,"input",17),oe("ngModelChange",function(o){V(t);let a=T();return re(a.messageContent,o)||(a.messageContent=o),N(o)}),D("keydown.enter",function(){V(t);let o=T();return N(o.sendMessage(o.messageContent))}),l(),u(14,"button",18),D("click",function(){V(t);let o=T();return N(o.sendMessage(o.messageContent))}),d(15,"\u2192"),l()()()}if(i&2){let t=T();_(3),he(t.selectedExchange.userFullName),_(3),E("routerLink",Nt(5,rm,t.selectedExchange.userId)),_(2),E("ngForOf",t.selectedExchange.messages),_(),E("ngForOf",t.selectedExchange.requests),_(4),ie("ngModel",t.messageContent)}}function lm(i,e){i&1&&(u(0,"div",22)(1,"p"),d(2,"Nu exist\u0103 conversa\u021Bii disponibile."),l()())}var go=class i{constructor(e,t,n,o,a,p,w,A,P){this.authService=e;this.requestService=t;this.replyService=n;this.exchangeService=o;this.messageService=a;this.taskService=p;this.reviewService=w;this.route=A;this.signalRService=P}messageContent="";request;userRole;userId;isReplyFormVisible=!1;isReviewFormVisible=!1;replyForm={requestId:"",startDate:new Date,endDate:new Date,price:0};reviewForm={receiverUserId:"",rating:5,content:""};selectedRequestId;exchanges=[];selectedExchange;selectedTaskId;ngOnInit(){this.userRole=this.authService.getUserRole(),this.userId=this.authService.getUserId(),this.exchangeService.getExchanges().subscribe({next:e=>{if(this.exchanges=e.response??[],console.log("Convorbiri \xEEnc\u0103rcate:",this.exchanges),this.exchanges.length>0){let t=this.exchanges[this.exchanges.length-1];this.loadExchange(t.userId)}},error:e=>{console.error("Eroare la \xEEnc\u0103rcarea convorbirilor:",e)}})}loadExchange(e){console.log("Loading exchange for user:",e),this.exchangeService.getExchange(e).subscribe({next:t=>{console.log("Exchange loaded:",t.response),this.selectedExchange=t.response},error:t=>{console.error("Failed to reload exchange",t)}})}sendMessage(e){if(console.log("Sending message:",e),!this.selectedExchange){console.error("No exchange selected");return}let t={content:e};this.messageService.sendMessage(this.selectedExchange?.conversationId,t).subscribe({next:n=>{console.log("Mesaj trimis cu succes:",n),this.loadExchange(this.selectedExchange?.userId),this.messageContent=""},error:n=>{console.error("Eroare la trimiterea mesajului:",n)}})}acceptRequest(e){this.requestService.acceptRequest(e).subscribe({next:()=>{console.log("Cererea a fost acceptat\u0103"),this.selectedExchange?.requests.find(n=>n.id===e)&&this.loadExchange(this.selectedExchange?.userId)},error:t=>{console.error("Eroare la acceptare:",t)}})}rejectRequest(e){this.requestService.rejectRequest(e).subscribe({next:()=>{console.log("Cererea a fost respins\u0103"),this.selectedExchange?.requests.find(n=>n.id===e)&&this.loadExchange(this.selectedExchange?.userId)},error:t=>{console.error("Eroare la respingere:",t)}})}openReplyForm(e){this.selectedRequestId=e,this.isReplyFormVisible=!0}closeReplyForm(){this.isReplyFormVisible=!1}submitReply(e){if(!this.selectedRequestId)return;if(!this.selectedRequestId){console.error("No requestId found to submit reply.");return}let t=e;this.replyService.addReply(this.selectedRequestId,t).subscribe({next:()=>{console.log("Reply submitted successfully!"),this.closeReplyForm()},error:n=>{console.error("Eroare la trimiterea ofertei:",n)}})}showReviewForm(e){let t=this.authService.getUserId(),n=t===e.userId||t===e.specialistId,o=e.status==="Completed";n&&o&&this.prepareReviewForm(e)}submitReview(e){if(console.log(this.selectedTaskId),!this.selectedTaskId){console.error("No requestId found to submit reply.");return}console.log(e);let t=e;this.reviewService.addReview(this.selectedTaskId,t).subscribe({next:()=>{console.log("Reply submitted successfully!"),this.closeReplyForm()},error:n=>{console.error("Eroare la trimiterea ofertei:",n)}})}closeReviewForm(){this.isReviewFormVisible=!1,this.reviewForm={receiverUserId:"",rating:5,content:""}}prepareReviewForm(e){let n=this.authService.getUserId()===e.userId?e.specialistId:e.userId;this.reviewForm={receiverUserId:n,rating:0,content:""},this.isReviewFormVisible=!0}cancelTask(e,t){this.taskService.cancelServiceTask(t).subscribe({next:()=>{console.log("Cererea a fost acceptat\u0103")},error:n=>{console.error("Eroare la acceptare:",n)}})}openMediaPicker(){console.log("Open media picker"),this.route.navigate(["/service-payment"])}ngOnDestroy(){this.signalRService.disconnect()}static \u0275fac=function(t){return new(t||i)(M(W),M(Ht),M($r),M(Gr),M(Wr),M(Hr),M(Bn),M(Se),M(fo))};static \u0275cmp=k({type:i,selectors:[["app-messages"]],decls:9,vars:3,consts:[["noSelection",""],[1,"chat-wrapper"],[1,"chat-container"],[1,"sidebar"],[1,"sidebar-header"],["class","conversation",3,"active","click",4,"ngFor","ngForOf"],["class","chat-area",4,"ngIf","ngIfElse"],[1,"conversation",3,"click"],["src","assets/avatar.svg","alt","avatar"],[1,"chat-area"],[1,"chat-header"],["src","assets/icons/info.svg","alt","specialist_info",3,"routerLink"],[1,"chat-messages"],[3,"message","currentUserId",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"chat-input"],["src","assets/icons/photo_media.svg","alt","photo_media",3,"click"],["type","text","placeholder","Scrie un mesaj aici",3,"ngModelChange","keydown.enter","ngModel"],[1,"send-btn",3,"click"],[3,"message","currentUserId"],[3,"ngClass"],[3,"requestAccepted","requestRejected","makeOffer","request"],[1,"chat-area","empty"]],template:function(t,n){if(t&1&&(u(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),d(4,"Convorbiri"),l(),O(5,om,3,3,"div",5),l(),O(6,cm,16,7,"div",6)(7,lm,3,0,"ng-template",null,0,hi),l()()),t&2){let o=ze(8);_(5),E("ngForOf",n.exchanges),_(),E("ngIf",n.selectedExchange)("ngIfElse",o)}},dependencies:[le,et,ye,Z,ee,je,$e,He,ht,zr,lt,jr],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Roboto Mono,monospace}[_nghost-%COMP%]{display:block;background-color:#f4f4f4;padding:2rem;position:relative}.chat-wrapper[_ngcontent-%COMP%]{width:100%;max-width:1000px;margin:auto;border:3px solid black;background-color:#e8d9ff}.chat-container[_ngcontent-%COMP%]{display:flex;height:600px}.sidebar[_ngcontent-%COMP%]{width:25%;border-right:3px solid black;display:flex;flex-direction:column}.sidebar-header[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:12px}.conversation[_ngcontent-%COMP%]{padding:1rem;border-bottom:2px solid black;background-color:#c9b7ff;display:flex;align-items:center;gap:1rem}.conversation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.chat-area[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column}.chat-header[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:16px;background-color:#c9b7ff;display:flex;justify-content:space-between;align-items:center}.chat-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer}.chat-messages[_ngcontent-%COMP%]{flex-grow:1;padding:1rem;overflow-y:auto;position:relative}.chat-input[_ngcontent-%COMP%]{border-top:2px solid black;display:flex;align-items:center;padding:.5rem;gap:.5rem}.chat-input[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex:1;padding:.5rem;border-radius:6px;border:none;font-family:Roboto Mono,monospace}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer}.chat-input[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{background-color:#c9b7ff;padding:.5rem 1rem;border-radius:6px}.contact-link[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px;font-size:.9rem}.message-left[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin:10px}.message-right[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:10px}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.conversation-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;z-index:10;display:flex;align-items:center;justify-content:center;padding:1rem;box-shadow:0 0 12px #0003}.no-conversations[_ngcontent-%COMP%]{padding:1rem;color:#888;font-style:italic}.chat-area.empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#888;font-style:italic}"]})};var jn=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Category";addCategory(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.post(`${this.baseUrl}/Add`,e,{headers:n})}getCategoryById(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}getAllCategories(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`}),o=new Bt;return e&&(o=o.set("search",e)),this.http.get(`${this.baseUrl}/GetAll`,{headers:n,params:o})}getCategoriesForSpecialist(e){let t=new Bt;return e&&(t=t.set("search",e)),this.http.get(`${this.baseUrl}/GetAllForSpecialist`,{params:t})}getCategoriesAdminPage(e,t,n){let o=this.authService.getToken(),a=new B({Authorization:`Bearer ${o}`}),p=new Bt().set("search",e||"").set("page",t).set("pageSize",n);return this.http.get(`${this.baseUrl}/GetPageForAdmin`,{headers:a,params:p})}updateCategory(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update/${e.id}`,e,{headers:n})}deleteCategory(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.delete(`${this.baseUrl}/Delete/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(K(ve),K(W))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};function um(i,e){if(i&1){let t=j();u(0,"span",8),D("click",function(){let o=V(t).$implicit,a=T();return N(a.toggle(o.id))}),d(1),l()}if(i&2){let t=e.$implicit,n=T();cn("disabled",n.selectedCategoryIds.includes(t.id)),_(),G(" ",t.name," ")}}function dm(i,e){if(i&1){let t=j();u(0,"span",11),d(1),u(2,"button",12),D("click",function(){let o=V(t).$implicit,a=T(2);return N(a.remove(o))}),d(3,"\xD7"),l()()}if(i&2){let t=e.$implicit,n=T(2);_(),G(" ",n.getCategoryName(t)," ")}}function hm(i,e){if(i&1&&(xe(0),u(1,"div",9),O(2,dm,4,1,"span",10),l(),Ee()),i&2){let t=T();_(2),E("ngForOf",t.selectedCategoryIds)}}var _o=class i{constructor(e){this.categoryService=e}category=null;allCategories=[];searchTerm="";dummyCategories=[{id:"cat-001",name:"Traduceri medicale",description:"Traducerea documentelor medicale de specialitate."},{id:"cat-002",name:"Logopedie",description:"Servicii de diagnostic \u0219i terapie pentru tulbur\u0103ri de vorbire."},{id:"cat-003",name:"Psihoterapie",description:"Sesiuni individuale sau de grup pentru s\u0103n\u0103tatea mintal\u0103."},{id:"cat-004",name:"Nutri\u021Bie clinic\u0103",description:"Planuri alimentare personalizate pentru afec\u021Biuni cronice."},{id:"cat-005",name:"Fizioterapie",description:"Reabilitare fizic\u0103 post-traumatic\u0103 sau post-operatorie."}];placeholder="Caut\u0103 o categorie...";selectedCategoryIds=[];categoryChange=new J;ngOnInit(){this.allCategories=this.dummyCategories}getCategories(){this.categoryService.getAllCategories().subscribe({next:e=>{let t=this.removeDiacritics(this.searchTerm);this.allCategories=e.response.filter(n=>this.removeDiacritics(n.name).includes(t))},error:e=>{console.error("Eroare la ob\u021Binerea categoriilor:",e.errorMessage)}})}toggle(e){this.selectedCategoryIds.includes(e)||(this.selectedCategoryIds.push(e),this.categoryChange.emit(this.selectedCategoryIds))}remove(e){this.selectedCategoryIds=this.selectedCategoryIds.filter(t=>t!==e),this.categoryChange.emit(this.selectedCategoryIds)}getCategoryName(e){return this.allCategories?.find(t=>t.id===e)?.name||"Categorie necunoscut\u0103"}onSearch(e){this.searchTerm=e,this.getCategories()}removeDiacritics(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}static \u0275fac=function(t){return new(t||i)(M(jn))};static \u0275cmp=k({type:i,selectors:[["app-category-selector"]],inputs:{selectedCategoryIds:"selectedCategoryIds"},outputs:{categoryChange:"categoryChange"},decls:11,vars:3,consts:[[1,"tag-selector"],[1,"section-title"],[1,"category-box"],[1,"search-category-wrapper"],[3,"searchChanged","placeholder"],[1,"category-options"],["class","tag option",3,"disabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"tag","option",3,"click"],[1,"category-box","category-options"],["class","tag selected",4,"ngFor","ngForOf"],[1,"tag","selected"],["type","button",3,"click"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"h3",1),d(2,"Alege din lista de categorii:"),l(),u(3,"div",2)(4,"div",3)(5,"app-search-input",4),D("searchChanged",function(a){return n.onSearch(a)}),l()(),u(6,"div",5),O(7,um,2,3,"span",6),l()(),u(8,"h3",1),d(9,"Categoriile selectate:"),l(),O(10,hm,3,1,"ng-container",7),l()),t&2&&(_(5),E("placeholder",n.placeholder),_(2),E("ngForOf",n.allCategories),_(3),E("ngIf",n.selectedCategoryIds.length>0))},dependencies:[ee,ye,Z,tt],styles:[".tag-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.category-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:1.5rem;padding:1rem;background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:8px;box-shadow:0 0 4px #0000001a;flex-wrap:wrap}.category-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;align-items:flex-start}.tag.option[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem;font-family:Roboto Mono,monospace}.tag.option[_ngcontent-%COMP%]:hover{background-color:#333}.tag.option.disabled[_ngcontent-%COMP%]{background-color:#a1a1a1;cursor:not-allowed;opacity:.6}.tag.selected[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem;font-family:Roboto Mono,monospace}button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff}.section-title[_ngcontent-%COMP%]{margin-bottom:8px;font-family:Roboto Mono,monospace}.search-category-wrapper[_ngcontent-%COMP%]{background-color:#f6efff;border-radius:5px;width:300px;margin:auto;border:2px solid #c9b7ff}"]})};var yo=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/SpecialistProfile";becomeSpecialist(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.put(`${this.baseUrl}/BecomeSpecialist`,e,{headers:n}).pipe(ac(o=>{o.response?.token&&localStorage.setItem("access_token",o.response.token)}))}getSpecialistProfile(){let e=this.authService.getToken(),t=new B({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/Get`,{headers:t})}updateSpecialistProfile(e){let t=this.authService.getToken(),n=new B({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update`,e,{headers:n})}static \u0275fac=function(t){return new(t||i)(K(ve),K(W))};static \u0275prov=ce({token:i,factory:i.\u0275fac,providedIn:"root"})};var mm=()=>[];function fm(i,e){if(i&1){let t=j();u(0,"app-dynamic-form",5),D("formSubmit",function(o){V(t);let a=T();return N(a.handleStep1(o))}),l()}if(i&2){let t=T();E("fields",t.step1FormFields)("submitText","Treci la pasul urm\u0103tor")}}function gm(i,e){if(i&1){let t=j();u(0,"div",6)(1,"app-category-selector",7),D("categoryChange",function(o){V(t);let a=T();return N(a.updateCategories(o))}),l(),u(2,"div",8)(3,"div",9)(4,"button",10),D("click",function(){V(t);let o=T();return N(o.addEntity())}),d(5,"Finalizeaz\u0103"),l()()()()}if(i&2){let t=T();_(),E("selectedCategoryIds",t.specialistData.categories||Ze(1,mm))}}var vo=class i{constructor(e,t,n){this.authService=e;this.specialistProfileService=t;this.router=n}step=1;specialistData={yearsExperience:0,phoneNumber:"",address:"",description:"",categories:[]};formData={};step1FormFields=Le({yearsExperience:0,phoneNumber:"",address:"",description:""},{address:{type:"text",class:"full-width"},yearsExperience:{type:"number",placeholder:"Ex: 5"},description:{type:"textarea",placeholder:"Descrie serviciile oferite",class:"full-width"}});isAddUserFormVisible=!1;ngOnInit(){let e={phoneNumber:"",address:"",yearsExperience:0,description:""};this.formData=U({},e)}handleStep1(e){this.specialistData=U(U({},this.specialistData),e),this.step=2}updateCategories(e){this.specialistData.categories=e}addEntity(){let e=this.authService.getUserId();if(!e){console.error("User ID not found");return}let t={userId:e,phoneNumber:this.specialistData.phoneNumber,address:this.specialistData.address,yearsExperience:this.specialistData.yearsExperience,description:this.specialistData.description,categories:this.specialistData.categories};this.specialistProfileService.becomeSpecialist(t).subscribe({next:()=>{this.closeAddUserForm(),this.router.navigate(["/home"])},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}closeAddUserForm(){this.isAddUserFormVisible=!1}static \u0275fac=function(t){return new(t||i)(M(W),M(yo),M(Se))};static \u0275cmp=k({type:i,selectors:[["app-become-specialist"]],decls:7,vars:3,consts:[[1,"form-wrapper"],[1,"form-box"],[3,"ngSwitch"],[3,"fields","submitText","formSubmit",4,"ngSwitchCase"],["class","form-layout",4,"ngSwitchCase"],[3,"formSubmit","fields","submitText"],[1,"form-layout"],[3,"categoryChange","selectedCategoryIds"],[1,"form-group","full-width"],[1,"button-wrapper"],[1,"send-button",3,"click"]],template:function(t,n){t&1&&(u(0,"h2"),d(1,"Devino specialist!"),l(),u(2,"div",0)(3,"div",1),xe(4,2),O(5,fm,1,2,"app-dynamic-form",3)(6,gm,6,2,"div",4),Ee(),l()()),t&2&&(_(4),E("ngSwitch",n.step),_(),E("ngSwitchCase",1),_(),E("ngSwitchCase",2))},dependencies:[Ge,tr,nr,_o],styles:["h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}"]})};var _m=["class","categories"],ym=()=>[5,10,20];function vm(i,e){if(i&1){let t=j();u(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),D("click",function(){V(t);let o=T();return N(o.closeAddEntityForm())}),d(4,"\xD7"),l()(),u(5,"app-dynamic-form",13),D("formSubmit",function(o){V(t);let a=T();return N(a.addEntity(o))}),l()()()}if(i&2){let t=T();_(5),E("fields",t.addEntityFormFields)("submitText","Trimite")}}function bm(i,e){if(i&1){let t=j();u(0,"div",9)(1,"div",10)(2,"button",12),D("click",function(){V(t);let o=T();return N(o.closeUpdateEntityForm())}),d(3,"\xD7"),l(),u(4,"app-dynamic-form",14),D("formSubmit",function(o){V(t);let a=T();return N(a.updateEntity(o))}),l()()()}if(i&2){let t=T();_(4),E("fields",t.updateEntityFormFields)("initialData",t.formData)("submitText","Actualizeaz\u0103")}}function wm(i,e){if(i&1){let t=j();u(0,"app-admin-details",18),D("close",function(){V(t);let o=T(2);return N(o.closeEntityDetails())}),l()}if(i&2){let t=T(2);E("entity",t.entityDetails)("title","Detalii categorie")}}function Cm(i,e){if(i&1){let t=j();u(0,"div",15)(1,"div",16)(2,"button",12),D("click",function(){V(t);let o=T();return N(o.closeEntityDetails())}),d(3,"\xD7"),l(),O(4,wm,1,2,"app-admin-details",17),l()()}if(i&2){let t=T();_(4),E("ngIf",t.isEntityDetailsVisible)}}var bo=class i{constructor(e){this.adminService=e}dummy_categories=[{id:"c1",name:"Psihologie",description:"Categoria pentru speciali\u0219ti \xEEn psihologie",specialistsCount:5,specialistIds:["s1","s2","s3","s4","s5"]},{id:"c2",name:"Nutri\u021Bie",description:"Categoria pentru speciali\u0219ti \xEEn nutri\u021Bie",specialistsCount:3,specialistIds:["s6","s7","s8"]}];searchTerm="";entities=[];selectedEntity=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddEntityFormVisible=!1;isUpdateEntityFormVisible=!1;isEntityDetailsVisible=!1;selectedEntityId=null;columns=[{key:"id",header:"ID"},{key:"name",header:"Denumire"},{key:"description",header:"Descriere"},{key:"specialistsCount",header:"Num\u0103r speciali\u0219ti"},{key:"specialistIds",header:"Speciali\u0219tii cu aceast\u0103 categorie"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:e=>this.getEntity(e.id)},{label:"Modific\u0103",class:"edit",callback:e=>this.editEntity(e)},{label:"\u0218terge",class:"delete",callback:e=>this.deleteEntity(e)}]}];defaultEntity={name:"",description:""};formData={};error=null;addEntityFormFields=Le(this.defaultEntity,{description:{type:"input",placeholder:"Descrie categoria",required:!1}});updateEntityFormFields=Le({name:this.selectedEntity?.name||"",description:this.selectedEntity?.description||""});placeholder="Caut\u0103 o categorie...";ngOnInit(){let e={name:"",description:""};this.formData=U({},e),this.getPage()}onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}getEntity(e){console.log(e),this.adminService.getCategoryById(e).subscribe({next:t=>{this.entityDetailsId=t.response?.id,this.entityDetails=Mn(t.response??{}),this.isEntityDetailsVisible=!0},error:t=>{console.error("Eroare la preluarea utilizatorului:",t.errorMessage?.status),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getCategoriesAdminPage(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{console.log(e.response),this.entities=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(e){let t=e;this.adminService.addCategory(t).subscribe({next:()=>{this.closeAddEntityForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editEntity(e){this.selectedEntityId=e.id,this.formData={name:e.name,description:e.description},this.isUpdateEntityFormVisible=!0}updateEntity(e){if(!this.selectedEntityId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let t={id:this.selectedEntityId,name:e.name||this.formData.name,description:e.description||this.formData.description};this.adminService.updateCategory(t).subscribe({next:()=>{this.closeUpdateEntityForm(),this.getPage()},error:n=>{console.error("Eroare la actualizare:",n)}})}showEntityDetails(e){this.isEntityDetailsVisible=!0}closeEntityDetails(){this.isEntityDetailsVisible=!1,this.selectedEntity=null}closeUpdateEntityForm(){this.selectedEntityId=null,this.resetForm(),this.isUpdateEntityFormVisible=!1}openAddEntityForm(){this.selectedEntityId=null,this.resetForm(),this.isAddEntityFormVisible=!0}viewEntity(e){this.isEntityDetailsVisible=!0}deleteEntity(e){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi categoria ${e.name}?`)&&this.adminService.deleteCategory(e.id).subscribe({next:()=>{this.getPage()},error:t=>{console.error("Eroare la \u0219tergerea utilizatorului:",t)}})}closeAddEntityForm(){this.isAddEntityFormVisible=!1,this.resetForm()}resetForm(){this.formData={name:"",description:""}}onPageChange(e){this.currentPage=e,this.getPage()}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}static \u0275fac=function(t){return new(t||i)(M(jn))};static \u0275cmp=k({type:i,selectors:[["app-admin",8,"categories"]],attrs:_m,decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[1,"admin-modal"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(t,n){t&1&&(u(0,"app-pagination",0),D("pageChange",function(a){return n.onPageChange(a)})("pageSizeChange",function(a){return n.onPageSizeChange(a)}),l(),u(1,"div",1)(2,"div",2)(3,"h2"),d(4,"Administreaz\u0103 toate categoriile"),l(),u(5,"div",3)(6,"app-search-input",4),D("searchChanged",function(a){return n.onSearch(a)}),l()(),u(7,"button",5),D("click",function(){return n.openAddEntityForm()}),d(8,"Adaug\u0103 categorie"),l(),L(9,"app-dynamic-table",6),l()(),O(10,vm,6,2,"div",7)(11,bm,5,3,"div",7)(12,Cm,5,1,"div",8)),t&2&&(E("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",Ze(10,ym))("totalItems",n.totalItems),_(6),E("placeholder",n.placeholder),_(3),E("columns",n.columns)("data",n.entities),_(),E("ngIf",n.isAddEntityFormVisible),_(),E("ngIf",n.isUpdateEntityFormVisible),_(),E("ngIf",n.isEntityDetailsVisible))},dependencies:[Qt,Ge,tt,Kt,pt,Z],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var wo=class i{settings={fullName:"",email:"",phoneNumber:"",language:"ro",darkMode:!1,emailNotifications:!0,smsNotifications:!1};onImageUpload(e){let t=e.target.files?.[0];t&&console.log("Uploaded image:",t.name)}changePassword(){alert("Password change flow goes here.")}deactivateAccount(){confirm("E\u0219ti sigur c\u0103 vrei s\u0103 dezactivezi contul?")&&console.log("Account deactivated")}deleteAccount(){confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi contul? Aceast\u0103 ac\u021Biune este ireversibil\u0103.")&&console.log("Account deleted")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-settings"]],decls:48,vars:7,consts:[[1,"settings-container"],[1,"settings-title"],[1,"settings-section"],["for","fullName"],["id","fullName","type","text","name","fullName",3,"ngModelChange","ngModel"],["for","email"],["id","email","type","email","name","email",3,"ngModelChange","ngModel"],["for","phone"],["id","phone","type","text","name","phone",3,"ngModelChange","ngModel"],["for","profileImage"],["id","profileImage","type","file",3,"change"],["type","button",3,"click"],["for","language"],["id","language","name","language",3,"ngModelChange","ngModel"],["value","ro"],["value","en"],["type","checkbox","name","darkMode",3,"ngModelChange","ngModel"],["type","checkbox","name","emailNotifications",3,"ngModelChange","ngModel"],["type","checkbox","name","smsNotifications",3,"ngModelChange","ngModel"],[1,"danger",3,"click"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"h1",1),d(2,"Set\u0103rile contului"),l(),u(3,"section",2)(4,"h2"),d(5,"Profilul t\u0103u"),l(),u(6,"form")(7,"label",3),d(8,"Nume complet"),l(),u(9,"input",4),oe("ngModelChange",function(a){return re(n.settings.fullName,a)||(n.settings.fullName=a),a}),l(),u(10,"label",5),d(11,"Adresa e-mail"),l(),u(12,"input",6),oe("ngModelChange",function(a){return re(n.settings.email,a)||(n.settings.email=a),a}),l(),u(13,"label",7),d(14,"Num\u0103r de telefon"),l(),u(15,"input",8),oe("ngModelChange",function(a){return re(n.settings.phoneNumber,a)||(n.settings.phoneNumber=a),a}),l(),u(16,"label",9),d(17,"Poza de profil"),l(),u(18,"input",10),D("change",function(a){return n.onImageUpload(a)}),l(),u(19,"button",11),D("click",function(){return n.changePassword()}),d(20,"Schimb\u0103 parola"),l()()(),u(21,"section",2)(22,"h2"),d(23,"Set\u0103ri aplica\u021Bie"),l(),u(24,"form")(25,"label",12),d(26,"Limba aplica\u021Biei"),l(),u(27,"select",13),oe("ngModelChange",function(a){return re(n.settings.language,a)||(n.settings.language=a),a}),u(28,"option",14),d(29,"Rom\xE2n\u0103"),l(),u(30,"option",15),d(31,"English"),l()(),u(32,"label")(33,"input",16),oe("ngModelChange",function(a){return re(n.settings.darkMode,a)||(n.settings.darkMode=a),a}),l(),d(34," Activeaz\u0103 modul \xEEntrunecat "),l(),u(35,"label")(36,"input",17),oe("ngModelChange",function(a){return re(n.settings.emailNotifications,a)||(n.settings.emailNotifications=a),a}),l(),d(37," Notific\u0103ri prin e-mail "),l(),u(38,"label")(39,"input",18),oe("ngModelChange",function(a){return re(n.settings.smsNotifications,a)||(n.settings.smsNotifications=a),a}),l(),d(40," Notific\u0103ri prin SMS "),l()()(),u(41,"section",2)(42,"h2"),d(43,"Siguran\u021B\u0103 \u0219i ac\u021Biuni"),l(),u(44,"button",19),D("click",function(){return n.deactivateAccount()}),d(45,"Dezactiveaz\u0103 contul"),l(),u(46,"button",19),D("click",function(){return n.deleteAccount()}),d(47,"\u0218terge contul"),l()()()),t&2&&(_(9),ie("ngModel",n.settings.fullName),_(3),ie("ngModel",n.settings.email),_(3),ie("ngModel",n.settings.phoneNumber),_(12),ie("ngModel",n.settings.language),_(6),ie("ngModel",n.settings.darkMode),_(3),ie("ngModel",n.settings.emailNotifications),_(3),ie("ngModel",n.settings.smsNotifications))},dependencies:[ee,dt,Dn,Pn,je,cs,jt,$e,ut,He,St],styles:[".settings-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto;padding:2rem;background-color:#f9f6ff;border-radius:12px;box-shadow:0 0 8px #0000001a}.settings-title[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:2rem;font-weight:700;text-align:center}.settings-section[_ngcontent-%COMP%]{margin-bottom:2.5rem;border-top:1px solid #ccc;padding-top:1.5rem}.settings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:1rem}.settings-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;margin:.5rem 0 .25rem}.settings-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-bottom:1rem;border-radius:6px;border:1px solid #ccc;font-size:1rem}button[_ngcontent-%COMP%]{display:inline-block;padding:.5rem 1rem;margin-top:1rem;border:none;border-radius:6px;background-color:#6541f0;color:#fff;font-weight:700;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#5134c9}button.danger[_ngcontent-%COMP%]{background-color:#d9534f;margin-right:1rem}button.danger[_ngcontent-%COMP%]:hover{background-color:#c9302c}"]})};var xm=()=>[];function Em(i,e){if(i&1&&L(0,"img",9),i&2){let t=T().$implicit;E("src",t.senderUserProfilePictureUrl,Vt)}}function Sm(i,e){i&1&&(xe(0),L(1,"img",10),Ee())}function Im(i,e){if(i&1&&(u(0,"div",3)(1,"div",4),O(2,Em,1,1,"img",5),u(3,"div",6)(4,"strong"),d(5),l(),u(6,"span",7),O(7,Sm,2,0,"ng-container",8),l()()(),u(8,"p"),d(9),l(),u(10,"small"),d(11),Ve(12,"date"),l()()),i&2){let t=e.$implicit;_(2),E("ngIf",t.senderUserProfilePictureUrl),_(3),he(t.senderUserFullName),_(2),E("ngForOf",Ze(8,xm).constructor(t.rating)),_(2),he(t.content),_(2),he(Ut(12,5,t.createdAt,"shortDate"))}}var Co=class i{constructor(e){this.reviewService=e}reviews=[];page=1;pageSize=5;dummyReviews=[{id:"1",receiverUserId:"user-123",senderUserFullName:"Ana Popescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/21.jpg",rating:5,content:"Excelent! A fost foarte profesionist\u0103 \u0219i m-a ajutat rapid.",createdAt:new Date("2024-12-05T14:35:00"),updatedAt:new Date("2024-12-05T14:35:00")},{id:"2",receiverUserId:"user-456",senderUserFullName:"Andrei Ionescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/32.jpg",rating:4,content:"Serviciu bun, dar am avut o mic\u0103 \xEEnt\xE2rziere la \xEEnceput.",createdAt:new Date("2025-01-10T09:20:00"),updatedAt:new Date("2025-01-10T09:20:00")},{id:"3",receiverUserId:"user-789",senderUserFullName:"Mihai Georgescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/45.jpg",rating:3,content:"Experien\u021B\u0103 ok, dar se poate \xEEmbun\u0103t\u0103\u021Bi comunicarea.",createdAt:new Date("2025-03-18T17:45:00"),updatedAt:new Date("2025-03-18T17:45:00")},{id:"4",receiverUserId:"user-123",senderUserFullName:"Elena Tudor",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/55.jpg",rating:5,content:"Foarte mul\u021Bumit\u0103! Recomand cu \xEEncredere!",createdAt:new Date("2025-04-02T11:10:00"),updatedAt:new Date("2025-04-02T11:10:00")},{id:"5",receiverUserId:"user-999",senderUserFullName:"Radu Vasile",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/61.jpg",rating:2,content:"Din p\u0103cate, nu a fost ce am a\u0219teptat. Probleme de punctualitate.",createdAt:new Date("2025-02-14T08:30:00"),updatedAt:new Date("2025-02-14T08:30:00")},{id:"6",receiverUserId:"user-888",senderUserFullName:"Ioana Marinescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/88.jpg",rating:4,content:"Totul a decurs bine, dar a\u0219 fi vrut mai multe explica\u021Bii.",createdAt:new Date("2025-05-22T15:50:00"),updatedAt:new Date("2025-05-22T15:50:00")}];ngOnInit(){this.reviews=this.dummyReviews,this.loadReviews()}loadReviews(){this.reviewService.getReviews(this.page,this.pageSize).subscribe({next:e=>{this.reviews=e.response?.data||[]},error:e=>{console.error("Error loading reviews",e)}})}static \u0275fac=function(t){return new(t||i)(M(Bn))};static \u0275cmp=k({type:i,selectors:[["app-reviews"]],decls:5,vars:1,consts:[[1,"account-card"],[1,"reviews-container"],["class","review-card",4,"ngFor","ngForOf"],[1,"review-card"],[1,"header"],["alt","Profil",3,"src",4,"ngIf"],[1,"review-info"],[1,"rating"],[4,"ngFor","ngForOf"],["alt","Profil",3,"src"],["src","assets/icons/star-filled.svg","alt","star",2,"width","24px","height","24px","margin-right","0"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"h2"),d(3,"Recenziile tale"),l(),O(4,Im,13,9,"div",2),l()()),t&2&&(_(4),E("ngForOf",n.reviews))},dependencies:[ye,Z,Lt],styles:[".account-card[_ngcontent-%COMP%]{background:#e0caff;max-width:1000px;margin:32px auto;box-shadow:0 4px 16px #0000001a;font-family:Roboto Mono,monospace;border:3px solid black}.reviews-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:32px}.reviews-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px;text-align:center;margin-bottom:32px;font-weight:700;color:#000}.review-card[_ngcontent-%COMP%]{background-color:#f5f2ff;border-radius:10px;padding:1.25rem;margin-bottom:1.5rem;box-shadow:0 2px 8px #0000000d;transition:transform .2s}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;object-fit:cover;margin-right:16px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;padding-top:4px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:18px;line-height:1;margin-left:3px;margin-bottom:2px}.review-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem;color:#333}.review-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;text-align:right;color:#777;font-size:.85rem}.rating[_ngcontent-%COMP%]{display:flex;align-items:center}.rating[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:1px}"]})};var $l="basil",Tm=function(e){return e===3?"v3":e},Gl="https://js.stripe.com",Am="".concat(Gl,"/").concat($l,"/stripe.js"),Dm=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Pm=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,zl="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Rm=function(e){return Dm.test(e)||Pm.test(e)},Mm=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Gl,'"]')),t=0;t<e.length;t++){var n=e[t];if(Rm(n.src))return n}return null},jl=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Am).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n},Om=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.1",startTime:t})},Mi=null,xo=null,Eo=null,km=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},Vm=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Nm=function(e){return Mi!==null?Mi:(Mi=new Promise(function(t,n){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&e&&console.warn(zl),window.Stripe){t(window.Stripe);return}try{var o=Mm();if(o&&e)console.warn(zl);else if(!o)o=jl(e);else if(o&&Eo!==null&&xo!==null){var a;o.removeEventListener("load",Eo),o.removeEventListener("error",xo),(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=jl(e)}Eo=Vm(t,n),xo=km(n),o.addEventListener("load",Eo),o.addEventListener("error",xo)}catch(p){n(p);return}}),Mi.catch(function(t){return Mi=null,Promise.reject(t)}))},Fm=function(e,t,n){if(e===null)return null;var o=t[0],a=o.match(/^pk_test/),p=Tm(e.version),w=$l;a&&p!==w&&console.warn("Stripe.js@".concat(p," was loaded on the page, but @stripe/stripe-js@").concat("7.3.1"," expected Stripe.js@").concat(w,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var A=e.apply(void 0,t);return Om(A,n),A},Oi,Wl=!1,Hl=function(){return Oi||(Oi=Nm(null).catch(function(e){return Oi=null,Promise.reject(e)}),Oi)};Promise.resolve().then(function(){return Hl()}).catch(function(i){Wl||console.warn(i)});var Kl=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Wl=!0;var o=Date.now();return Hl().then(function(a){return Fm(a,t,o)})};var So=class i{serviceTask={id:"12345",replyId:"67890",userId:"user123",specialistId:"spec456",description:"Montare mobilier",address:"Str. Exemplu 123",startDate:new Date,endDate:new Date,specialistFullName:"Ion Popescu",price:350,status:"Confirmed",completedAt:new Date,cancelledAt:new Date};cardPaymentSelected=!1;showError=!1;ngAfterViewInit(){this.setupStripe()}setupStripe(){return F(this,null,function*(){let e=yield Kl("pk_test_51RY4TaRP4R8qcMUlWSJwbW6GBjetIiG7jc4fLrsUcl7xMS8uTMcI2mfDHId8YRAku8lllViJiAY0mVPObrvgLYke00QP5RVa7S");if(!e){console.error("Stripe failed to initialize.");return}let n=e.elements().create("card");n.mount("#card-element");let o=yield fetch("http://localhost:5241/api/stripe/account/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"}}),{clientSecret:a}=yield o.json();console.log("Client secret:",a);let p=document.getElementById("payment-form");if(!p){console.error("Payment form not found.");return}p.addEventListener("submit",w=>F(this,null,function*(){w.preventDefault();let A=yield e.confirmCardPayment(a,{payment_method:{card:n,billing_details:{name:"Test Client"}}});A.error?console.error(A.error.message):A.paymentIntent.status==="succeeded"&&alert("Plat\u0103 reu\u0219it\u0103!")}))})}selectCardPayment(){this.cardPaymentSelected=!0,this.showError=!1}payForService(){if(!this.cardPaymentSelected){this.showError=!0;return}console.log("Plat\u0103 ini\u021Biat\u0103 cu cardul bancar."),window.open("https://www.plata-cu-cardul.ro","_blank")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-service-payment"]],decls:7,vars:0,consts:[["id","payment-form"],["for","card-element",2,"display","block","margin-bottom","8px"],["id","card-element",2,"padding","10px","border","1px solid #ccc","border-radius","6px","margin-bottom","12px"],["id","card-errors","role","alert",2,"color","red","margin-bottom","12px"],["id","submit","type","submit",2,"padding","10px 20px","background-color","#8e44ad","color","white","border","none","border-radius","4px","cursor","pointer"]],template:function(t,n){t&1&&(u(0,"form",0)(1,"label",1),d(2," Num\u0103r card "),l(),L(3,"div",2)(4,"div",3),u(5,"button",4),d(6," Pl\u0103te\u0219te "),l()())},dependencies:[ee,dt,ut,St],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f9f7ff;margin:0;padding:0}.container[_ngcontent-%COMP%]{max-width:700px;margin:40px auto;background-color:#fff;padding:32px;border-radius:12px;box-shadow:0 4px 16px #0000001a;border:2px solid #8e44ad}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:24px}.task-detail[_ngcontent-%COMP%]{margin-bottom:12px}.task-detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#555;display:block}.task-detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-size:1rem}.pay-section[_ngcontent-%COMP%]{margin-top:32px;text-align:center}.price[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:#27ae60;margin-bottom:16px}.pay-button[_ngcontent-%COMP%]{background-color:#8e44ad;color:#fff;padding:12px 24px;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .2s ease}.pay-button[_ngcontent-%COMP%]:hover{background-color:#732d91}"]})};var Io=class i{constructor(e){this.fb=e;this.contactForm=this.fb.group({name:["",qt.required],email:["",[qt.required,qt.email]],subject:["",qt.required],message:["",qt.required]})}contactForm;onSubmit(){if(this.contactForm.valid){let e=this.contactForm.value;console.log("Contact form data:",e),alert("Mesajul a fost trimis cu succes!"),this.contactForm.reset()}}static \u0275fac=function(t){return new(t||i)(M(Xc))};static \u0275cmp=k({type:i,selectors:[["app-contact-us"]],decls:47,vars:1,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"contact-wrapper"],[3,"ngSubmit","formGroup"],["for","name"],["id","name","type","text","formControlName","name","placeholder","Ex: Ana Popescu"],["for","email"],["id","email","type","email","formControlName","email","placeholder","Ex: ana@email.com"],["for","subject"],["id","subject","type","text","formControlName","subject","placeholder","Subiectul mesajului"],["for","message"],["id","message","rows","5","formControlName","message","placeholder","Scrie-ne mesajul t\u0103u..."],[1,"form-actions"],["type","submit"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"h1",2),d(3,"Ai o \u021Beav\u0103 spart\u0103?"),l(),u(4,"h1",2),d(5,"\u021Ai s-a stricat chiuveta?"),l(),u(6,"h1"),d(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),u(8,"strong",3),d(9,"ExpertEase"),l(),d(10,"!"),l()(),u(11,"p"),d(12,"Peste "),u(13,"strong"),d(14,"100 de speciali\u0219ti"),l(),d(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),l()(),u(16,"div",4)(17,"h2"),d(18,"Contacteaz\u0103-ne"),l(),u(19,"p")(20,"strong"),d(21,"Email:"),l(),d(22," contact@expertease.ro"),l(),u(23,"p")(24,"strong"),d(25,"Telefon:"),l(),d(26," +40 712 345 678"),l(),u(27,"p")(28,"strong"),d(29,"Adres\u0103:"),l(),d(30," Str. Exemplului 123, Bucure\u0219ti"),l(),u(31,"form",5),D("ngSubmit",function(){return n.onSubmit()}),u(32,"label",6),d(33,"Nume complet"),l(),L(34,"input",7),u(35,"label",8),d(36,"Email"),l(),L(37,"input",9),u(38,"label",10),d(39,"Subiect"),l(),L(40,"input",11),u(41,"label",12),d(42,"Mesaj"),l(),L(43,"textarea",13),u(44,"div",14)(45,"button",15),d(46,"Trimite"),l()()()()),t&2&&(_(31),E("formGroup",n.contactForm))},dependencies:[ht,dt,je,$e,ut,_s,ys],styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.contact-wrapper[_ngcontent-%COMP%]{max-width:600px;margin:10px auto;padding:24px;font-family:Roboto Mono,monospace;border:2px solid #3c1a7d;border-radius:8px;background-color:#fff}h2[_ngcontent-%COMP%]{color:#3c1a7d;margin-bottom:24px;text-align:center}label[_ngcontent-%COMP%]{display:block;margin:12px 0 4px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;height:auto;padding:8px 10px;line-height:1.4;font-size:14px;box-sizing:border-box;border:1px solid #ccc;border-radius:4px;margin-bottom:12px;font-family:Roboto Mono,monospace}.form-actions[_ngcontent-%COMP%]{text-align:center;margin-top:20px}button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}"]})};var To=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-terms"]],decls:104,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"terms-container"],["href","/confidentialitate",1,"privacy-link"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"h1",2),d(3,"Ai o \u021Beav\u0103 spart\u0103?"),l(),u(4,"h1",2),d(5,"\u021Ai s-a stricat chiuveta?"),l(),u(6,"h1"),d(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),u(8,"strong",3),d(9,"ExpertEase"),l(),d(10,"!"),l()(),u(11,"p"),d(12,"Peste "),u(13,"strong"),d(14,"100 de speciali\u0219ti"),l(),d(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),l()(),u(16,"div",4)(17,"section")(18,"h2"),d(19,"Introducere"),l(),u(20,"p"),d(21," Acest document stabile\u0219te termenii \u0219i condi\u021Biile de utilizare a platformei "),u(22,"strong"),d(23,"ExpertEase"),l(),d(24,". Prin accesarea sau utilizarea serviciilor noastre, sunte\u021Bi de acord cu ace\u0219ti termeni. "),l()(),u(25,"section")(26,"h2"),d(27,"Defini\u021Bii"),l(),u(28,"p")(29,"strong"),d(30,"Platform\u0103:"),l(),d(31," aplica\u021Bia ExpertEase care faciliteaz\u0103 conexiunea dintre clien\u021Bi \u0219i speciali\u0219ti."),l(),u(32,"p")(33,"strong"),d(34,"Client:"),l(),d(35," utilizator care solicit\u0103 servicii."),l(),u(36,"p")(37,"strong"),d(38,"Specialist:"),l(),d(39," utilizator care ofer\u0103 servicii."),l()(),u(40,"section")(41,"h2"),d(42,"Condi\u021Bii de utilizare"),l(),u(43,"ul")(44,"li"),d(45,"Accesul necesit\u0103 crearea unui cont valid."),l(),u(46,"li"),d(47,"Utilizatorii trebuie s\u0103 aib\u0103 minim 18 ani."),l(),u(48,"li"),d(49,"Este interzis\u0103 utilizarea platformei \xEEn scopuri ilegale, abuzive sau frauduloase."),l()()(),u(50,"section")(51,"h2"),d(52,"Obliga\u021Biile utilizatorilor"),l(),u(53,"p")(54,"strong"),d(55,"Clien\u021Bi:"),l()(),u(56,"ul")(57,"li"),d(58,"S\u0103 ofere informa\u021Bii clare \u0219i reale despre cerere."),l(),u(59,"li"),d(60,"S\u0103 respecte termenii agrea\u021Bi cu specialistul."),l()(),u(61,"p")(62,"strong"),d(63,"Speciali\u0219ti:"),l()(),u(64,"ul")(65,"li"),d(66,"S\u0103 ofere servicii conforme cu descrierea."),l(),u(67,"li"),d(68,"S\u0103 respecte confiden\u021Bialitatea \u0219i termenele stabilite."),l()()(),u(69,"section")(70,"h2"),d(71,"Pl\u0103\u021Bi \u0219i comisioane"),l(),u(72,"p"),d(73," Pl\u0103\u021Bile se realizeaz\u0103 prin Stripe. Comisioanele platformei, dac\u0103 exist\u0103, vor fi afi\u0219ate transparent \xEEnainte de confirmarea serviciului. "),l()(),u(74,"section")(75,"h2"),d(76,"Limitarea r\u0103spunderii"),l(),u(77,"p"),d(78," Platforma ExpertEase ac\u021Bioneaz\u0103 doar ca intermediar. Nu ne asum\u0103m responsabilitatea pentru calitatea serviciilor oferite de speciali\u0219ti. "),l()(),u(79,"section")(80,"h2"),d(81,"Suspendarea contului"),l(),u(82,"p"),d(83," Ne rezerv\u0103m dreptul de a suspenda sau \u0219terge conturi care \xEEncalc\u0103 ace\u0219ti termeni sau folosesc platforma \xEEn mod abuziv. "),l()(),u(84,"section")(85,"h2"),d(86,"Protec\u021Bia datelor"),l(),u(87,"p"),d(88," Datele personale sunt gestionate conform "),u(89,"a",5),d(90,"Politicii de confiden\u021Bialitate"),l(),d(91,". "),l()(),u(92,"section")(93,"h2"),d(94,"Modificarea termenilor"),l(),u(95,"p"),d(96," Putem actualiza ace\u0219ti termeni periodic. Modific\u0103rile vor fi anun\u021Bate \xEEn aplica\u021Bie \u0219i vor intra \xEEn vigoare la publicare. "),l()(),u(97,"section")(98,"h2"),d(99,"Contact"),l(),u(100,"p"),d(101," Pentru \xEEntreb\u0103ri legate de ace\u0219ti termeni, ne pute\u021Bi contacta la: "),u(102,"strong"),d(103,"contact@expertease.ro"),l()()()())},styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.home-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%}.terms-container[_ngcontent-%COMP%]{max-width:900px;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6}.terms-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff}.terms-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d}.terms-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-top:8px;margin-bottom:12px}.terms-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.privacy-link[_ngcontent-%COMP%]{color:#000;text-decoration:none;font-weight:700}.privacy-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var Ao=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-privacy"]],decls:103,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"privacy-container"]],template:function(t,n){t&1&&(u(0,"div",0)(1,"div",1)(2,"h1",2),d(3,"Ai o \u021Beav\u0103 spart\u0103?"),l(),u(4,"h1",2),d(5,"\u021Ai s-a stricat chiuveta?"),l(),u(6,"h1"),d(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),u(8,"strong",3),d(9,"ExpertEase"),l(),d(10,"!"),l()(),u(11,"p"),d(12,"Peste "),u(13,"strong"),d(14,"100 de speciali\u0219ti"),l(),d(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),l()(),u(16,"div",4)(17,"section")(18,"h2"),d(19,"Politica de Confiden\u021Bialitate"),l(),u(20,"p"),d(21," Aceast\u0103 politic\u0103 explic\u0103 modul \xEEn care ExpertEase colecteaz\u0103, utilizeaz\u0103 \u0219i protejeaz\u0103 datele personale ale utilizatorilor platformei. Ne angaj\u0103m s\u0103 respect\u0103m confiden\u021Bialitatea \u0219i s\u0103 protej\u0103m toate informa\u021Biile personale furnizate. "),l()(),u(22,"section")(23,"h2"),d(24,"Tipuri de date colectate"),l(),u(25,"ul")(26,"li"),d(27,"Nume \u0219i prenume"),l(),u(28,"li"),d(29,"Adres\u0103 de email"),l(),u(30,"li"),d(31,"Num\u0103r de telefon (dac\u0103 este furnizat)"),l(),u(32,"li"),d(33,"Mesaje transmise prin formularele de contact"),l(),u(34,"li"),d(35,"Date pentru autentificare \xEEn cont"),l(),u(36,"li"),d(37,"Date de plat\u0103 (prin Stripe)"),l(),u(38,"li"),d(39,"Informa\u021Bii despre dispozitiv \u0219i IP (pentru securitate)"),l()()(),u(40,"section")(41,"h2"),d(42,"Scopul prelucr\u0103rii datelor"),l(),u(43,"ul")(44,"li"),d(45,"Crearea \u0219i administrarea contului de utilizator"),l(),u(46,"li"),d(47,"Procesarea solicit\u0103rilor \u0219i a pl\u0103\u021Bilor"),l(),u(48,"li"),d(49,"Comunicare \xEEntre utilizatori (client\u2013specialist)"),l(),u(50,"li"),d(51,"\xCEmbun\u0103t\u0103\u021Birea platformei \u0219i a experien\u021Bei de utilizare"),l(),u(52,"li"),d(53,"Respectarea obliga\u021Biilor legale"),l()()(),u(54,"section")(55,"h2"),d(56,"Temeiuri legale (GDPR)"),l(),u(57,"p"),d(58," Datele sunt colectate \xEEn baza consim\u021B\u0103m\xE2ntului dumneavoastr\u0103, a interesului legitim al platformei sau \xEEn scopul execut\u0103rii unui contract. "),l()(),u(59,"section")(60,"h2"),d(61,"Durata de stocare a datelor"),l(),u(62,"p"),d(63," Datele sunt p\u0103strate pe durata existen\u021Bei contului sau conform obliga\u021Biilor legale. Utilizatorii pot solicita \u0219tergerea acestora \xEEn orice moment. "),l()(),u(64,"section")(65,"h2"),d(66,"Partajarea datelor"),l(),u(67,"p"),d(68," Datele nu sunt v\xE2ndute c\u0103tre ter\u021Bi. Ele pot fi partajate doar cu furnizori de servicii esen\u021Biali (ex: Stripe pentru procesarea pl\u0103\u021Bilor). "),l()(),u(69,"section")(70,"h2"),d(71,"Drepturile utilizatorilor"),l(),u(72,"ul")(73,"li"),d(74,"Dreptul de acces la date"),l(),u(75,"li"),d(76,"Dreptul de rectificare sau \u0219tergere"),l(),u(77,"li"),d(78,"Dreptul de restric\u021Bionare a prelucr\u0103rii"),l(),u(79,"li"),d(80,"Dreptul de opozi\u021Bie"),l(),u(81,"li"),d(82,"Dreptul la portabilitatea datelor"),l(),u(83,"li"),d(84,"Dreptul de a depune pl\xE2ngere la ANSPDCP"),l()()(),u(85,"section")(86,"h2"),d(87,"Securitatea datelor"),l(),u(88,"p"),d(89," Implement\u0103m m\u0103suri tehnice \u0219i organizatorice pentru a proteja datele (criptare, acces limitat, autentificare securizat\u0103). "),l()(),u(90,"section")(91,"h2"),d(92,"Modific\u0103ri ale politicii"),l(),u(93,"p"),d(94," Politica poate fi actualizat\u0103. Modific\u0103rile vor fi publicate pe aceast\u0103 pagin\u0103 \u0219i vor intra \xEEn vigoare imediat. "),l()(),u(95,"section")(96,"h2"),d(97,"Contact"),l(),u(98,"p"),d(99," Pentru \xEEntreb\u0103ri legate de datele tale, ne po\u021Bi scrie la "),u(100,"strong"),d(101,"contact@expertease.ro"),l(),d(102,". "),l()()())},styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.privacy-container[_ngcontent-%COMP%]{max-width:900px;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6}.privacy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff}.privacy-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d}.privacy-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-top:8px;margin-bottom:12px}.privacy-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}"]})};var Do=[{path:"home",component:br},{path:"about",component:wr},{path:"contact-us",component:Io},{path:"terms",component:To},{path:"privacy",component:Ao},{path:"profile",component:Pr,canActivate:[kn]},{path:"home/:id",loadComponent:()=>import("./chunk-75ANY6ZT.js").then(i=>i.SpecialistDetailsComponent)},{path:"specialist/:id",component:rs},{path:"messages",component:go,canActivate:[kn]},{path:"profile/user/become-specialist",component:vo,canActivate:[kn]},{path:"profile/user-settings",component:wo},{path:"profile/user-reviews",component:Co},{path:"request-form",component:Rn},{path:"register",component:Cr},{path:"login",component:xr},{path:"specialist-details",component:rs},{path:"service-payment",component:So},{path:"admin",component:Er},{path:"admin/users",component:Sr},{path:"admin/specialists",component:Ir},{path:"admin/categories",component:bo},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",component:Tr}];var ea={providers:[dc({eventCoalescing:!0}),rr(Do),gc()]};var Um=i=>({show:i});function Lm(i,e){i&1&&(u(0,"li")(1,"a",15),d(2,"Devino specialist!"),l()())}function Bm(i,e){i&1&&(u(0,"li")(1,"a",16),d(2,"Mesajele tale"),l()())}var Po=class i{constructor(e,t){this.authService=e;this.router=t;this.router.events.pipe(sc(n=>n instanceof _c)).subscribe(n=>{console.log("Navigated to:",n)})}title="ExpertEase.Frontend";navbarOpen=!1;toggleNavbar(){this.navbarOpen=!this.navbarOpen}static \u0275fac=function(t){return new(t||i)(M(W),M(Se))};static \u0275cmp=k({type:i,selectors:[["app-root"]],decls:31,vars:7,consts:[[1,"navbar"],["routerLink","/home","data-btn","Acas\u0103",1,"logo-button","toggle-btn"],["src","logo.svg","alt","Logo"],[1,"navbar-toggle",3,"click"],[1,"navbar-links",3,"ngClass"],[4,"ngIf"],["routerLink","/about","routerLinkActive","active"],["routerLinkActive","active",3,"routerLink"],["routerLink","/admin","routerLinkActive","active"],[1,"site-footer"],[1,"footer-content"],[1,"footer-links"],["routerLink","/contact-us","routerLinkActive","active"],["routerLink","/terms","routerLinkActive","active"],["routerLink","/privacy","routerLinkActive","active"],["routerLink","profile/user/become-specialist","routerLinkActive","active"],["routerLink","/messages","routerLinkActive","active"]],template:function(t,n){t&1&&(u(0,"nav",0)(1,"button",1),L(2,"img",2),l(),u(3,"button",3),D("click",function(){return n.toggleNavbar()}),d(4,"\u2630"),l(),u(5,"ul",4),O(6,Lm,3,0,"li",5),u(7,"li")(8,"a",6),d(9,"Despre noi"),l()(),O(10,Bm,3,0,"li",5),u(11,"li")(12,"a",7),d(13),l()(),u(14,"li")(15,"a",8),d(16,"Admin Dashboard"),l()()()(),L(17,"router-outlet"),u(18,"footer",9)(19,"div",10)(20,"p"),d(21,"\xA9 2025 ExpertEase. Toate drepturile rezervate."),l(),u(22,"nav",11)(23,"a",6),d(24,"Despre noi"),l(),u(25,"a",12),d(26,"Contacteaz\u0103-ne!"),l(),u(27,"a",13),d(28,"Termeni \u0219i condi\u021Bii"),l(),u(29,"a",14),d(30,"Politic\u0103 de confiden\u021Bialitate"),l()()()()),t&2&&(_(5),E("ngClass",Nt(5,Um,n.navbarOpen)),_(),E("ngIf",n.authService.getUserRole()==="Client"),_(4),E("ngIf",n.authService.getUserRole()==="Client"||n.authService.getUserRole()==="Specialist"),_(2),E("routerLink",n.authService.getToken()?"/profile":"/register"),_(),G(" ",n.authService.getToken()?"Contul t\u0103u":"\xCEnregistreaz\u0103-te!"," "))},dependencies:[le,et,Z,ir,lt],styles:[".navbar[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;padding:16px 32px;background-color:#1e1e2f;color:#fff;box-shadow:0 2px 2px #0000001a;position:relative}.navbar-toggle[_ngcontent-%COMP%]{display:none;font-size:32px;background:none;border:none;color:#fff;cursor:pointer}.navbar-links[_ngcontent-%COMP%]{list-style:none;display:grid;grid-auto-flow:column;gap:24px;margin:0;padding:0;font-family:Roboto Mono,monospace}.navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:2px 0;transition:border-bottom .2s ease}.navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{border-bottom:2px solid white}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{grid-template-columns:1fr auto;grid-template-rows:auto auto;row-gap:16px}.navbar-toggle[_ngcontent-%COMP%]{display:block}.navbar-links[_ngcontent-%COMP%]{display:none;grid-auto-flow:row;width:100%;grid-column:1/-1}.navbar-links.show[_ngcontent-%COMP%]{display:grid}}.site-footer[_ngcontent-%COMP%]{background-color:#3c1a7d;color:#fff;padding:24px;text-align:center;font-family:Roboto Mono,monospace;margin-top:64px}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.footer-links[_ngcontent-%COMP%]{margin-top:12px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:0 12px;font-size:14px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};fc(Po,ge(U({},ea),{providers:[...ea.providers,rr(Do)]})).catch(i=>console.error(i));
