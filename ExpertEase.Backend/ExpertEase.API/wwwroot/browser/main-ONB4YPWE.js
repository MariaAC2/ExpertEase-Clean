import{$ as pe,A as h,Aa as X,B as y,Ba as Qi,C as Ht,Ca as er,D as te,Da as Jt,E as de,Ea as Y,F as C,Fa as Ee,G as $i,Ga as tr,H as Li,Ha as Zt,I as p,Ia as I,J as et,Ja as Xt,K as s,Ka as _i,L as o,M as w,N as H,O as G,P as S,Q as g,R as u,S as ce,T as c,U as W,V as E,W as Wi,X as F,Y as V,Z as N,_ as xe,a as x,aa as qe,b as ee,ba as tt,c as at,ca as Z,d as T,da as ze,e as Ni,ea as ve,f as Ui,fa as Hi,g as qi,ga as lt,h as zi,ha as Gi,i as ji,ia as Ki,j as Bi,ja as fi,k as Lt,ka as Re,l as ye,la as dt,m as $,ma as hi,n as Wt,na as ue,o as Xe,oa as J,p as R,pa as z,q as Ye,qa as Gt,r as b,ra as Kt,s as v,sa as Ji,t as Qe,ta as Zi,u as k,ua as Me,v as Mt,va as Xi,w as ct,wa as L,x as Se,xa as Yi,y as l,ya as M,z as Et,za as je}from"./chunk-ENV6XYEU.js";var pr=(()=>{class i{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,n){this._renderer=t,this._elementRef=n}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(n){return new(n||i)(h(Et),h(Mt))};static \u0275dir=te({type:i})}return i})(),At=(()=>{class i extends pr{static \u0275fac=(()=>{let t;return function(r){return(t||(t=Qe(i)))(r||i)}})();static \u0275dir=te({type:i,features:[de]})}return i})(),it=new Xe(""),Zr={provide:it,useExisting:ye(()=>yi),multi:!0},yi=(()=>{class i extends At{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Qe(i)))(r||i)}})();static \u0275dir=te({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,r){n&1&&g("change",function(d){return r.onChange(d.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[xe([Zr]),de]})}return i})(),Xr={provide:it,useExisting:ye(()=>ie),multi:!0};function Yr(){let i=hi()?hi().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var Qr=new Xe(""),ie=(()=>{class i extends pr{_compositionMode;_composing=!1;constructor(t,n,r){super(t,n),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Yr())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(n){return new(n||i)(h(Et),h(Mt),h(Qr,8))};static \u0275dir=te({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&g("input",function(d){return r._handleInput(d.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(d){return r._compositionEnd(d.target.value)})},standalone:!1,features:[xe([Xr]),de]})}return i})();function xi(i){return i==null||wi(i)===0}function wi(i){return i==null?null:Array.isArray(i)||typeof i=="string"?i.length:i instanceof Set?i.size:null}var Rt=new Xe(""),dn=new Xe(""),eo=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Be=class{static min(e){return to(e)}static max(e){return no(e)}static required(e){return ur(e)}static requiredTrue(e){return io(e)}static email(e){return ro(e)}static minLength(e){return oo(e)}static maxLength(e){return so(e)}static pattern(e){return ao(e)}static nullValidator(e){return Qt()}static compose(e){return br(e)}static composeAsync(e){return vr(e)}};function to(i){return e=>{if(e.value==null||i==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function no(i){return e=>{if(e.value==null||i==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function ur(i){return xi(i.value)?{required:!0}:null}function io(i){return i.value===!0?null:{required:!0}}function ro(i){return xi(i.value)||eo.test(i.value)?null:{email:!0}}function oo(i){return e=>{let t=e.value?.length??wi(e.value);return t===null||t===0?null:t<i?{minlength:{requiredLength:i,actualLength:t}}:null}}function so(i){return e=>{let t=e.value?.length??wi(e.value);return t!==null&&t>i?{maxlength:{requiredLength:i,actualLength:t}}:null}}function ao(i){if(!i)return Qt;let e,t;return typeof i=="string"?(t="",i.charAt(0)!=="^"&&(t+="^"),t+=i,i.charAt(i.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(xi(n.value))return null;let r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function Qt(i){return null}function mr(i){return i!=null}function gr(i){return $i(i)?Ui(i):i}function fr(i){let e={};return i.forEach(t=>{e=t!=null?x(x({},e),t):e}),Object.keys(e).length===0?null:e}function hr(i,e){return e.map(t=>t(i))}function co(i){return!i.validate}function _r(i){return i.map(e=>co(e)?e:t=>e.validate(t))}function br(i){if(!i)return null;let e=i.filter(mr);return e.length==0?null:function(t){return fr(hr(t,e))}}function Si(i){return i!=null?br(_r(i)):null}function vr(i){if(!i)return null;let e=i.filter(mr);return e.length==0?null:function(t){let n=hr(t,e).map(gr);return zi(n).pipe(qi(fr))}}function Mi(i){return i!=null?vr(_r(i)):null}function nr(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Cr(i){return i._rawValidators}function yr(i){return i._rawAsyncValidators}function bi(i){return i?Array.isArray(i)?i:[i]:[]}function en(i,e){return Array.isArray(i)?i.includes(e):i===e}function ir(i,e){let t=bi(e);return bi(i).forEach(r=>{en(t,r)||t.push(r)}),t}function rr(i,e){return bi(e).filter(t=>!en(i,t))}var tn=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Si(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Mi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Fe=class extends tn{name;get formDirective(){return null}get path(){return null}},nt=class extends tn{_parent=null;name=null;valueAccessor=null},nn=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},lo={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},vc=ee(x({},lo),{"[class.ng-submitted]":"isSubmitted"}),re=(()=>{class i extends nn{constructor(t){super(t)}static \u0275fac=function(n){return new(n||i)(h(nt,2))};static \u0275dir=te({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&et("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[de]})}return i})(),me=(()=>{class i extends nn{constructor(t){super(t)}static \u0275fac=function(n){return new(n||i)(h(Fe,10))};static \u0275dir=te({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&et("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[de]})}return i})();var Dt="VALID",Yt="INVALID",pt="PENDING",Pt="DISABLED",$e=class{},rn=class extends $e{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Tt=class extends $e{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},kt=class extends $e{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ut=class extends $e{status;source;constructor(e,t){super(),this.status=e,this.source=t}},on=class extends $e{source;constructor(e){super(),this.source=e}},sn=class extends $e{source;constructor(e){super(),this.source=e}};function Ei(i){return(pn(i)?i.validators:i)||null}function po(i){return Array.isArray(i)?Si(i):i||null}function Di(i,e){return(pn(e)?e.asyncValidators:i)||null}function uo(i){return Array.isArray(i)?Mi(i):i||null}function pn(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function xr(i,e,t){let n=i.controls;if(!(e?Object.keys(n):n).length)throw new Lt(1e3,"");if(!n[t])throw new Lt(1001,"")}function wr(i,e,t){i._forEachChild((n,r)=>{if(t[r]===void 0)throw new Lt(1002,"")})}var mt=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Re(this.statusReactive)}set status(e){Re(()=>this.statusReactive.set(e))}_status=dt(()=>this.statusReactive());statusReactive=ct(void 0);get valid(){return this.status===Dt}get invalid(){return this.status===Yt}get pending(){return this.status==pt}get disabled(){return this.status===Pt}get enabled(){return this.status!==Pt}errors;get pristine(){return Re(this.pristineReactive)}set pristine(e){Re(()=>this.pristineReactive.set(e))}_pristine=dt(()=>this.pristineReactive());pristineReactive=ct(!0);get dirty(){return!this.pristine}get touched(){return Re(this.touchedReactive)}set touched(e){Re(()=>this.touchedReactive.set(e))}_touched=dt(()=>this.touchedReactive());touchedReactive=ct(!1);get untouched(){return!this.touched}_events=new Ni;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ir(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ir(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rr(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rr(e,this._rawAsyncValidators))}hasValidator(e){return en(this._rawValidators,e)}hasAsyncValidator(e){return en(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ee(x({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new kt(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new kt(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ee(x({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Tt(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new Tt(!0,n))}markAsPending(e={}){this.status=pt;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ut(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ee(x({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pt,this.errors=null,this._forEachChild(r=>{r.disable(ee(x({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rn(this.value,n)),this._events.next(new ut(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(x({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Dt,this._forEachChild(n=>{n.enable(ee(x({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ee(x({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dt||this.status===pt)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rn(this.value,t)),this._events.next(new ut(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ee(x({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pt:Dt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pt,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=gr(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new ut(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new k,this.statusChanges=new k}_calculateStatus(){return this._allControlsDisabled()?Pt:this.errors?Yt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pt)?pt:this._anyControlsHaveStatus(Yt)?Yt:Dt}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Tt(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new kt(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pn(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=po(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=uo(this._rawAsyncValidators)}},gt=class extends mt{constructor(e,t,n){super(Ei(t),Di(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){wr(this,!0,e),Object.keys(e).forEach(n=>{xr(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,a)=>{n=t(n,r,a)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var vi=class extends gt{};var Ft=new Xe("",{providedIn:"root",factory:()=>un}),un="always";function Sr(i,e){return[...e.path,i]}function an(i,e,t=un){Pi(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),go(i,e),ho(i,e),fo(i,e),mo(i,e)}function or(i,e,t=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),ln(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function cn(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mo(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function Pi(i,e){let t=Cr(i);e.validator!==null?i.setValidators(nr(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=yr(i);e.asyncValidator!==null?i.setAsyncValidators(nr(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();cn(e._rawValidators,r),cn(e._rawAsyncValidators,r)}function ln(i,e){let t=!1;if(i!==null){if(e.validator!==null){let r=Cr(i);if(Array.isArray(r)&&r.length>0){let a=r.filter(d=>d!==e.validator);a.length!==r.length&&(t=!0,i.setValidators(a))}}if(e.asyncValidator!==null){let r=yr(i);if(Array.isArray(r)&&r.length>0){let a=r.filter(d=>d!==e.asyncValidator);a.length!==r.length&&(t=!0,i.setAsyncValidators(a))}}}let n=()=>{};return cn(e._rawValidators,n),cn(e._rawAsyncValidators,n),t}function go(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&Mr(i,e)})}function fo(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&Mr(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function Mr(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function ho(i,e){let t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function Er(i,e){i==null,Pi(i,e)}function _o(i,e){return ln(i,e)}function Dr(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function bo(i){return Object.getPrototypeOf(i.constructor)===At}function Pr(i,e){i._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function Or(i,e){if(!e)return null;Array.isArray(e);let t,n,r;return e.forEach(a=>{a.constructor===ie?t=a:bo(a)?n=a:r=a}),r||n||t||null}function vo(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}var Co={provide:Fe,useExisting:ye(()=>he)},Ot=Promise.resolve(),he=(()=>{class i extends Fe{callSetDisabledState;get submitted(){return Re(this.submittedReactive)}_submitted=dt(()=>this.submittedReactive());submittedReactive=ct(!1);_directives=new Set;form;ngSubmit=new k;options;constructor(t,n,r){super(),this.callSetDisabledState=r,this.form=new gt({},Si(t),Mi(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ot.then(()=>{let n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),an(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ot.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ot.then(()=>{let n=this._findContainer(t.path),r=new gt({});Er(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ot.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Ot.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Pr(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new on(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new sn(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(n){return new(n||i)(h(Rt,10),h(dn,10),h(Ft,8))};static \u0275dir=te({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&g("submit",function(d){return r.onSubmit(d)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[xe([Co]),de]})}return i})();function sr(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function ar(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var It=class extends mt{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,n){super(Ei(t),Di(n,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pn(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ar(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sr(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sr(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ar(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yo=i=>i instanceof It;var xo={provide:nt,useExisting:ye(()=>ae)},cr=Promise.resolve(),ae=(()=>{class i extends nt{_changeDetectorRef;callSetDisabledState;control=new It;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new k;constructor(t,n,r,a,d,f){super(),this._changeDetectorRef=d,this.callSetDisabledState=f,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Or(this,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Dr(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){an(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){cr.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,r=n!==0&&fi(n);cr.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Sr(t,this._parent):[t]}static \u0275fac=function(n){return new(n||i)(h(Fe,9),h(Rt,10),h(dn,10),h(it,10),h(Ki,8),h(Ft,8))};static \u0275dir=te({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[xe([xo]),de,Ye]})}return i})();var ge=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=te({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return i})(),wo={provide:it,useExisting:ye(()=>Vt),multi:!0},Vt=(()=>{class i extends At{writeValue(t){let n=t??"";this.setProperty("value",n)}registerOnChange(t){this.onChange=n=>{t(n==""?null:parseFloat(n))}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Qe(i)))(r||i)}})();static \u0275dir=te({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){n&1&&g("input",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[xe([wo]),de]})}return i})();var Tr=new Xe("");var So={provide:Fe,useExisting:ye(()=>Oi)},Oi=(()=>{class i extends Fe{callSetDisabledState;get submitted(){return Re(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=dt(()=>this._submittedReactive());_submittedReactive=ct(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new k;constructor(t,n,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ln(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let n=this.form.get(t.path);return an(n,t,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){or(t.control||null,t,!1),vo(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this._submittedReactive.set(!0),Pr(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new on(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new sn(this.form))}_updateDomValue(){this.directives.forEach(t=>{let n=t.control,r=this.form.get(t.path);n!==r&&(or(n||null,t),yo(r)&&(an(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let n=this.form.get(t.path);Er(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let n=this.form.get(t.path);n&&_o(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Pi(this.form,this),this._oldForm&&ln(this._oldForm,this)}static \u0275fac=function(n){return new(n||i)(h(Rt,10),h(dn,10),h(Ft,8))};static \u0275dir=te({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&g("submit",function(d){return r.onSubmit(d)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[xe([So]),de,Ye]})}return i})();var Mo={provide:nt,useExisting:ye(()=>Ti)},Ti=(()=>{class i extends nt{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new k;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,n,r,a,d){super(),this._ngModelWarningConfig=d,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Or(this,a)}ngOnChanges(t){this._added||this._setUpControl(),Dr(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Sr(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(n){return new(n||i)(h(Fe,13),h(Rt,10),h(dn,10),h(it,10),h(Tr,8))};static \u0275dir=te({type:i,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[xe([Mo]),de,Ye]})}return i})();var Eo={provide:it,useExisting:ye(()=>Le),multi:!0};function kr(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function Do(i){return i.split(":")[0]}var Le=(()=>{class i extends At{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let n=this._getOptionId(t),r=kr(n,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){let n=Do(t);return this._optionMap.has(n)?this._optionMap.get(n):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Qe(i)))(r||i)}})();static \u0275dir=te({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&g("change",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[xe([Eo]),de]})}return i})(),ft=(()=>{class i{_element;_renderer;_select;id;constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(kr(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(h(Mt),h(Et),h(Le,9))};static \u0275dir=te({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})(),Po={provide:it,useExisting:ye(()=>Ir),multi:!0};function lr(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function Oo(i){return i.split(":")[0]}var Ir=(()=>{class i extends At{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let n;if(Array.isArray(t)){let r=t.map(a=>this._getOptionId(a));n=(a,d)=>{a._setSelected(r.indexOf(d.toString())>-1)}}else n=(r,a)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{let r=[],a=n.selectedOptions;if(a!==void 0){let d=a;for(let f=0;f<d.length;f++){let _=d[f],D=this._getOptionValue(_.value);r.push(D)}}else{let d=n.options;for(let f=0;f<d.length;f++){let _=d[f];if(_.selected){let D=this._getOptionValue(_.value);r.push(D)}}}this.value=r,t(r)}}_registerOption(t){let n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){let n=Oo(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Qe(i)))(r||i)}})();static \u0275dir=te({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&g("change",function(d){return r.onChange(d.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[xe([Po]),de]})}return i})(),ht=(()=>{class i{_element;_renderer;_select;id;_value;constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(lr(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(lr(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(h(Mt),h(Et),h(Ir,9))};static \u0275dir=te({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})();var To=(()=>{class i{_validator=Qt;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Qt,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(n){return new(n||i)};static \u0275dir=te({type:i,features:[Ye]})}return i})();var ko={provide:Rt,useExisting:ye(()=>Ve),multi:!0};var Ve=(()=>{class i extends To{required;inputName="required";normalizeInput=fi;createValidator=t=>ur;enabled(t){return t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=Qe(i)))(r||i)}})();static \u0275dir=te({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,r){n&2&&Li("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[xe([ko]),de]})}return i})();var Ar=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ht({type:i});static \u0275inj=Wt({})}return i})(),Ci=class extends mt{constructor(e,t,n){super(Ei(t),Di(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){wr(this,!1,e),e.forEach((n,r)=>{xr(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,n)=>n._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function dr(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var Rr=(()=>{class i{useNonNullable=!1;get nonNullable(){let t=new i;return t.useNonNullable=!0,t}group(t,n=null){let r=this._reduceControls(t),a={};return dr(n)?a=n:n!==null&&(a.validators=n.validator,a.asyncValidators=n.asyncValidator),new gt(r,a)}record(t,n=null){let r=this._reduceControls(t);return new vi(r,n)}control(t,n,r){let a={};return this.useNonNullable?(dr(n)?a=n:(a.validators=n,a.asyncValidators=r),new It(t,ee(x({},a),{nonNullable:!0}))):new It(t,n,r)}array(t,n,r){let a=t.map(d=>this._createControl(d));return new Ci(a,n,r)}_reduceControls(t){let n={};return Object.keys(t).forEach(r=>{n[r]=this._createControl(t[r])}),n}_createControl(t){if(t instanceof It)return t;if(t instanceof mt)return t;if(Array.isArray(t)){let n=t[0],r=t.length>1?t[1]:null,a=t.length>2?t[2]:null;return this.control(n,r,a)}else return this.control(t)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var U=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Ft,useValue:t.callSetDisabledState??un}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ht({type:i});static \u0275inj=Wt({imports:[Ar]})}return i})(),De=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Tr,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ft,useValue:t.callSetDisabledState??un}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ht({type:i});static \u0275inj=Wt({imports:[Ar]})}return i})();var Ce=class i{searchTerm="";placeholder="Caut\u0103 ...";searchChanged=new k;onSearchChanged(){this.searchChanged.emit(this.searchTerm.trim())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder"},outputs:{searchChanged:"searchChanged"},decls:4,vars:2,consts:[[1,"search-box"],["type","text",3,"ngModelChange","placeholder","ngModel"],["aria-label","Search",1,"search-icon-button",3,"click"],["src","assets/icons/search.svg","alt","Search Icon"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"input",1),N("ngModelChange",function(a){return V(n.searchTerm,a)||(n.searchTerm=a),a}),o(),s(2,"button",2),g("click",function(){return n.onSearchChanged()}),w(3,"img",3),o()()),t&2&&(l(),p("placeholder",n.placeholder||"Caut\u0103..."),F("ngModel",n.searchTerm))},dependencies:[L,U,ie,re,ae],styles:[".search-box[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;gap:20px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px 50px 15px 20px;border:none;background:transparent;outline:none;font-family:Roboto Mono,monospace;font-size:12px}.search-icon-button[_ngcontent-%COMP%]{background:none;border:none;padding:0 16px;font-size:1.2rem;color:#444;cursor:pointer;display:flex;align-items:center;justify-content:center}.search-icon-button[_ngcontent-%COMP%]:hover{color:#000}.search-icon-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}"]})};function Io(i,e){if(i&1&&(s(0,"option",7),c(1),o()),i&2){let t=e.$implicit;p("value",t),l(),W(t)}}var Oe=class i{currentPage=1;totalItems=0;pageSize=10;pageSizeOptions=[5,10,20];pageChange=new k;pageSizeChange=new k;getTotalPages(){return Math.ceil(this.totalItems/this.pageSize)}goToPreviousPage(){this.currentPage>1&&this.pageChange.emit(this.currentPage-1)}goToNextPage(){this.currentPage<this.getTotalPages()&&this.pageChange.emit(this.currentPage+1)}onPageSizeChange(e){let t=Number(e);this.pageSizeChange.emit(t)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalItems:"totalItems",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},outputs:{pageChange:"pageChange",pageSizeChange:"pageSizeChange"},decls:13,vars:6,consts:[[1,"pagination-wrapper"],[1,"page-size-selector"],["for","pageSize"],["id","pageSize",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"pagination-controls"],[3,"click","disabled"],[3,"value"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"label",2),c(3,"Afi\u0219eaz\u0103 pe pagin\u0103:"),o(),s(4,"select",3),N("ngModelChange",function(a){return V(n.pageSize,a)||(n.pageSize=a),a}),g("change",function(){return n.onPageSizeChange(n.pageSize)}),C(5,Io,2,2,"option",4),o()(),s(6,"div",5)(7,"button",6),g("click",function(){return n.goToPreviousPage()}),c(8,"\u2190"),o(),s(9,"span"),c(10),o(),s(11,"button",6),g("click",function(){return n.goToNextPage()}),c(12,"\u2192"),o()()()),t&2&&(l(4),F("ngModel",n.pageSize),l(),p("ngForOf",n.pageSizeOptions),l(2),p("disabled",n.currentPage===1),l(3),Wi("Pagina ",n.currentPage," din ",n.getTotalPages(),""),l(),p("disabled",n.currentPage===n.getTotalPages()))},dependencies:[J,De,ft,ht,Le,re,U,ae],styles:[".pagination-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:32px;flex-wrap:wrap;margin-top:24px;font-family:Roboto Mono,monospace}.page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:16px}.page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}.page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 6px;border:1px solid #aaa;border-radius:4px;font-size:15px;font-family:Roboto Mono,monospace}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:16px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border:2px solid #000;background-color:#d9c8ff;border-radius:4px;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:default}"]})};var _t=class i{constructor(e){this.router=e}requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""};formSubmit=new k;close=new k;submitRequest(){this.formSubmit.emit(this.requestForm)}closeForm(){this.close.emit()}static \u0275fac=function(t){return new(t||i)(h(Y))};static \u0275cmp=y({type:i,selectors:[["app-request-form"]],inputs:{requestForm:"requestForm"},outputs:{formSubmit:"formSubmit",close:"close"},decls:23,vars:4,consts:[[1,"overlay"],[1,"request-form-wrapper"],[1,"close-button",3,"click"],[1,"request-form"],[1,"form-row"],["type","datetime-local","name","startDate","required","",3,"ngModelChange","ngModel"],["type","tel","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["type","text","name","address","required","",3,"ngModelChange","ngModel"],["name","description","rows","4","required","",3,"ngModelChange","ngModel"],[1,"center-button"],["type","submit",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),g("click",function(){return n.closeForm()}),c(3,"\xD7"),o(),s(4,"h2"),c(5,"Trimite o solicitare"),o(),s(6,"form",3)(7,"div",4)(8,"label"),c(9," Data \u0219i ora dorite: "),s(10,"input",5),N("ngModelChange",function(a){return V(n.requestForm.requestedStartDate,a)||(n.requestForm.requestedStartDate=a),a}),o()(),s(11,"label"),c(12," Num\u0103r de telefon: "),s(13,"input",6),N("ngModelChange",function(a){return V(n.requestForm.phoneNumber,a)||(n.requestForm.phoneNumber=a),a}),o()()(),s(14,"label"),c(15," Adres\u0103: "),s(16,"input",7),N("ngModelChange",function(a){return V(n.requestForm.address,a)||(n.requestForm.address=a),a}),o()(),s(17,"label"),c(18," Descrierea solicit\u0103rii: "),s(19,"textarea",8),N("ngModelChange",function(a){return V(n.requestForm.description,a)||(n.requestForm.description=a),a}),o()(),s(20,"div",9)(21,"button",10),g("click",function(){return n.submitRequest()}),c(22,"Trimite solicitarea"),o()()()()()),t&2&&(l(10),F("ngModel",n.requestForm.requestedStartDate),l(3),F("ngModel",n.requestForm.phoneNumber),l(3),F("ngModel",n.requestForm.address),l(3),F("ngModel",n.requestForm.description))},dependencies:[L,U,ge,ie,re,me,Ve,ae,he,De],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.request-form-wrapper[_ngcontent-%COMP%]{position:relative;max-width:600px;margin:2rem auto;background-color:#e8d9ff;border:2px solid #000;padding:2rem;font-family:Roboto Mono,monospace}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1.5rem}.request-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;font-size:.95rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;font-family:Roboto Mono,monospace;font-size:.9rem}.request-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #999;border-radius:4px;font-family:Roboto Mono,monospace;background-color:#fff}.request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.center-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem;padding:.5rem 1rem;border:2px solid #000;border-radius:6px;background-color:#c9b7ff;font-weight:700;cursor:pointer;display:flex;justify-content:center;font-family:Roboto Mono,monospace}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#dcdcdc;color:#888;cursor:not-allowed}"]})};var Ao=i=>["/specialist",i];function Ro(i,e){if(i&1&&(s(0,"span",18),c(1),o()),i&2){let t=e.$implicit;l(),W(t.name)}}function Fo(i,e){if(i&1){let t=S();s(0,"div",19)(1,"app-request-form",20),g("formSubmit",function(r){b(t);let a=u();return v(a.submitRequest(r))})("close",function(){b(t);let r=u();return v(r.closeRequestForm())}),o()()}if(i&2){let t=u();l(),p("requestForm",t.requestForm)}}var Nt=class i{constructor(e){this.router=e}specialist={id:"",fullName:"",email:"",profilePictureUrl:"",phoneNumber:"",address:"",categories:[],yearsExperience:0,description:"",createdAt:new Date,updatedAt:new Date,rating:0};isRequestFormVisible=!1;requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""};specialistId=new k;requestFormSubmit=new k;goToSendRequest(){this.requestForm.receiverUserId=this.specialist.id,this.isRequestFormVisible=!0}closeRequestForm(){this.requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""},this.isRequestFormVisible=!1}submitRequest(e){this.requestFormSubmit.emit(e),this.closeRequestForm()}static \u0275fac=function(t){return new(t||i)(h(Y))};static \u0275cmp=y({type:i,selectors:[["app-specialist-card"]],inputs:{specialist:"specialist"},outputs:{specialistId:"specialistId",requestFormSubmit:"requestFormSubmit"},decls:28,vars:10,consts:[[1,"card"],[1,"avatar-wrapper"],[1,"avatar"],["alt","User avatar",3,"src"],[1,"rating-badge"],["src","assets/star-rating.svg","alt","User star"],[1,"rating-value"],[1,"info"],[1,"full-name",3,"routerLink"],[1,"details-block"],[1,"row"],[1,"categories"],[1,"label"],["class","tag",4,"ngFor","ngForOf"],[1,"experience"],[1,"description"],[1,"request-btn",3,"click"],["class","overlay",4,"ngIf"],[1,"tag"],[1,"overlay"],[3,"formSubmit","close","requestForm"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),w(3,"img",3),o(),s(4,"div",4),w(5,"img",5),s(6,"span",6),c(7),o()()(),s(8,"div",7)(9,"h2",8),c(10),o(),s(11,"div",9)(12,"div",10)(13,"div",11)(14,"span",12),c(15,"Categorii:"),o(),C(16,Ro,2,1,"span",13),o(),s(17,"div",14)(18,"span",12),c(19,"Ani experien\u021B\u0103:"),o(),c(20),o()(),s(21,"div",15)(22,"span",12),c(23,"Descriere:"),o(),c(24),o()()(),s(25,"button",16),g("click",function(){return n.goToSendRequest()}),c(26,"F\u0103 o solicitare"),o()(),C(27,Fo,2,1,"div",17)),t&2&&(l(3),p("src",n.specialist.profilePictureUrl||"assets/avatar.svg",Se),l(4),W(n.specialist.rating),l(2),p("routerLink",qe(8,Ao,n.specialist.id)),l(),E(" ",n.specialist.fullName," "),l(6),p("ngForOf",n.specialist.categories),l(4),E(" ",n.specialist.yearsExperience," "),l(4),E(" ",n.specialist.description," "),l(3),p("ngIf",n.isRequestFormVisible))},dependencies:[L,J,z,_t,Ee],styles:[".card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#cfbdfe;padding:20px;width:100%;gap:20px;justify-content:space-between;box-sizing:border-box;font-family:Roboto Mono,monospace}.info[_ngcontent-%COMP%]{flex:1}.full-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:.25rem;margin-bottom:.5rem}.full-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.details-block[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:12px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.categories[_ngcontent-%COMP%], .experience[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-size:.95rem}.label[_ngcontent-%COMP%]{font-weight:700;margin-right:6px}.tag[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem}.request-btn[_ngcontent-%COMP%]{background-color:#9a83db;padding:32px 24px;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:100px;aspect-ratio:1/1}.avatar[_ngcontent-%COMP%]{position:relative;width:100px;height:100px;overflow:hidden}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background-color:#e6dfff;object-fit:cover;display:block}.rating-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;display:inline-flex;align-items:center;gap:.3em;background:#fff;padding:.2em .5em;border-radius:.6em;font-size:1em;box-shadow:0 1px 4px #0000001a}.rating-badge[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1em;height:1em}"]})};var He=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Request";addRequest(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.post(`${this.baseUrl}/Add`,e,{headers:n})}acceptRequest(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Accept/${e}`,{},{headers:n})}rejectRequest(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Reject/${e}`,{},{headers:n})}cancelRequest(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Cancel/${e}`,{},{headers:n})}static \u0275fac=function(t){return new(t||i)(R(X),R(I))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var No=()=>[5,10,20];function Uo(i,e){i&1&&w(0,"div",13)}function qo(i,e){if(i&1){let t=S();H(0),s(1,"app-specialist-card",11),g("specialistId",function(r){let a=b(t).$implicit;return v(a.id=r)})("requestFormSubmit",function(r){b(t);let a=u();return v(a.addRequest(r))}),o(),C(2,Uo,1,0,"div",12),G()}if(i&2){let t=e.$implicit,n=e.index,r=u();l(),p("specialist",t),l(),p("ngIf",n<r.users.length-1)}}var mn=class i{constructor(e,t){this.homeService=e;this.userRequestService=t}searchTerm="";currentPage=1;pageSize=10;totalItems=0;entityDetails={};isUserDetailsVisible=!1;users=[];error=null;selectedSpecialist=null;isRequestFormVisible=!1;requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""};receiverUserId="";dummySpecialists=[{id:"spec-001",fullName:"Andrei Popescu",email:"andrei.popescu@example.com",phoneNumber:"0721123456",address:"Strada Mihai Eminescu 45, Bucure\u0219ti",yearsExperience:5,description:"Traduc\u0103tor medical cu experien\u021B\u0103 \xEEn terminologie clinic\u0103 \u0219i farmaceutic\u0103.",createdAt:new Date("2022-03-10T10:00:00Z"),updatedAt:new Date,rating:5,categories:[{id:"cat-001",name:"Traduceri medicale"},{id:"cat-002",name:"Farmacie"}]},{id:"spec-002",fullName:"Ioana Marinescu",email:"ioana.marinescu@example.com",phoneNumber:"0733456789",address:"Bd. Revolu\u021Biei 17, Cluj-Napoca",yearsExperience:8,description:"Specialist \xEEn psihologie cu experien\u021B\u0103 \xEEn redactarea \u0219i corectarea articolelor \u0219tiin\u021Bifice.",createdAt:new Date("2020-11-20T08:30:00Z"),updatedAt:new Date,rating:4},{id:"spec-003",fullName:"Victor Ionescu",email:"victor.ionescu@example.com",phoneNumber:"0744123123",address:"Str. Libert\u0103\u021Bii 88, Ia\u0219i",yearsExperience:3,description:"T\xE2n\u0103r specialist \xEEn tehnologia informa\u021Biei, ofer servicii de consultan\u021B\u0103 \u0219i mentenan\u021B\u0103 software.",createdAt:new Date("2023-01-15T14:45:00Z"),updatedAt:new Date,rating:4.5}];ngOnInit(){this.getPage()}getPage(){this.homeService.getSpecialists(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{this.users=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addRequest(e){let t=e;this.userRequestService.addRequest(t).subscribe({next:n=>{alert("Cererea a fost trimis\u0103 cu succes!"),this.closeRequestForm()},error:n=>{console.error("Eroare la trimiterea cererii:",n),alert("Nu s-a putut trimite cererea.")}})}onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}onPageChange(e){this.currentPage=e,this.getPage()}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}getCategoryNames(e){return e.map(t=>t.name)}closeUserDetails(){this.isUserDetailsVisible=!1,this.entityDetails={}}closeRequestForm(){this.requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""},this.isRequestFormVisible=!1}SpecialistCardComponent=Nt;static \u0275fac=function(t){return new(t||i)(h(Xt),h(He))};static \u0275cmp=y({type:i,selectors:[["app-home"]],decls:24,vars:6,consts:[[1,"top-action-button"],["routerLink","/contact-us","routerLinkActive","active",1,"contact-button"],[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"search-box-wrapper"],[3,"searchChanged"],[1,"user-list"],[4,"ngFor","ngForOf"],[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[3,"specialistId","requestFormSubmit","specialist"],["class","separator",4,"ngIf"],[1,"separator"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"a",1),c(2,"Contacteaz\u0103-ne!"),o()(),s(3,"div",2)(4,"div",3)(5,"h1",4),c(6,"Ai o \u021Beav\u0103 spart\u0103?"),o(),s(7,"h1",4),c(8,"\u021Ai s-a stricat chiuveta?"),o(),s(9,"h1"),c(10,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),s(11,"strong",5),c(12,"ExpertEase"),o(),c(13,"!"),o()(),s(14,"div",6)(15,"app-search-input",7),g("searchChanged",function(a){return n.onSearch(a)}),o()(),s(16,"p"),c(17,"Peste "),s(18,"strong"),c(19,"100 de speciali\u0219ti"),o(),c(20," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),o()(),s(21,"div",8),C(22,qo,3,2,"ng-container",9),o(),s(23,"app-pagination",10),g("pageChange",function(a){return n.onPageChange(a)})("pageSizeChange",function(a){return n.onPageSizeChange(a)}),o()),t&2&&(l(22),p("ngForOf",n.users),l(),p("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",pe(5,No))("totalItems",n.totalItems))},dependencies:[Nt,L,J,z,De,U,Ce,Oe,Ee,tr],styles:[".top-action-button[_ngcontent-%COMP%]{position:absolute;top:100px;right:32px;z-index:10}.contact-button[_ngcontent-%COMP%]{text-decoration:none;font-family:Roboto Mono,monospace;font-weight:700;border:1px solid transparent;transition:all .2s ease;color:#000}.contact-button[_ngcontent-%COMP%]:hover{text-decoration:underline}.user-list[_ngcontent-%COMP%]   app-specialist-card[_ngcontent-%COMP%]{border-bottom:1px solid #b7a4dd;padding-bottom:1rem;margin-bottom:1rem}.user-list[_ngcontent-%COMP%]   app-specialist-card[_ngcontent-%COMP%]:last-child{border-bottom:none}.separator[_ngcontent-%COMP%]{height:3px;background-color:#b7a4dd;width:100%}.home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:2rem}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.close-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1.2rem;font-size:1.5rem;background:none;border:none;color:#333;font-weight:700;cursor:pointer;transition:transform .2s}.close-button[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#d11a2a}",".search-box[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;gap:20px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px 50px 15px 20px;border:none;background:transparent;outline:none;font-family:Roboto Mono,monospace;font-size:12px}.search-icon-button[_ngcontent-%COMP%]{background:none;border:none;padding:0 16px;font-size:1.2rem;color:#444;cursor:pointer;display:flex;align-items:center;justify-content:center}.search-icon-button[_ngcontent-%COMP%]:hover{color:#000}.search-icon-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}"]})};var gn=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-about"]],decls:142,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"about-info"],[1,"role-sections"],[1,"client-section"],[1,"specialist-section"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"h1",2),c(3,"Ai o \u021Beav\u0103 spart\u0103?"),o(),s(4,"h1",2),c(5,"\u021Ai s-a stricat chiuveta?"),o(),s(6,"h1"),c(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),s(8,"strong",3),c(9,"ExpertEase"),o(),c(10,"!"),o()(),s(11,"p"),c(12,"Peste "),s(13,"strong"),c(14,"100 de speciali\u0219ti"),o(),c(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),o()(),s(16,"div",4)(17,"section")(18,"h2"),c(19,"Cine suntem noi?"),o(),s(20,"p"),c(21,"Compania "),s(22,"strong"),c(23,"ExpertEase"),o(),c(24," se ocup\u0103 cu problemele tale \xEEn materie de repara\u021Bii sau instala\u021Bii."),o()(),s(25,"section")(26,"h2"),c(27,"Cum facem asta?"),o(),s(28,"p"),c(29,"\xCE\u021Bi punem la dispozi\u021Bie "),s(30,"strong"),c(31,"peste 100 de speciali\u0219ti"),o(),c(32," din domeniu, cu varii nivele de experien\u021B\u0103, care sunt preocupa\u021Bi \xEEn a \xEE\u021Bi rezolva problema."),o()(),s(33,"section")(34,"h2"),c(35,"Cum func\u021Bioneaz\u0103 platforma?"),o(),s(36,"p"),c(37,"Platforma noastr\u0103 este simplu de utilizat. Po\u021Bi c\u0103uta speciali\u0219ti dup\u0103 domeniu, po\u021Bi vedea recenziile altor clien\u021Bi \u0219i po\u021Bi contacta direct specialistul pentru a discuta detaliile repara\u021Biei sau instala\u021Biei."),o()(),s(38,"section")(39,"h2"),c(40,"De ce s\u0103 ne alegi?"),o(),s(41,"p"),c(42,"ExpertEase \xEE\u021Bi ofer\u0103 acces rapid \u0219i u\u0219or la o re\u021Bea extins\u0103 de speciali\u0219ti, asigur\xE2ndu-te c\u0103 vei g\u0103si pe cineva potrivit pentru nevoile tale. \xCEn plus, platforma noastr\u0103 este gratuit\u0103 pentru utilizatori!"),o()(),s(43,"div",5)(44,"section",6)(45,"h2"),c(46,"Ce poate face un client?"),o(),s(47,"p"),c(48,"Pe platforma ExpertEase, clien\u021Bii pot:"),o(),s(49,"ol")(50,"li")(51,"strong"),c(52,"Crea un cont"),o(),w(53,"br"),c(54," \xCE\u021Bi faci un cont rapid \u0219i ai acces la panoul t\u0103u personal."),o(),s(55,"li")(56,"strong"),c(57,"C\u0103uta speciali\u0219ti"),o(),w(58,"br"),c(59," Po\u021Bi filtra speciali\u0219tii dup\u0103: "),s(60,"ul")(61,"li"),c(62,"Categorie (ex. Psihologie, Drept, IT)"),o(),s(63,"li"),c(64,"Ani de experien\u021B\u0103"),o(),s(65,"li"),c(66,"Adres\u0103 (cu op\u021Biune de c\u0103utare pe hart\u0103)"),o()()(),s(67,"li")(68,"strong"),c(69,"Trimite o cerere"),o(),w(70,"br"),c(71," Dup\u0103 ce g\u0103se\u0219ti un specialist potrivit, po\u021Bi trimite o cerere \xEEn care descrii problema sau serviciul dorit \u0219i o dat\u0103 preferat\u0103."),o(),s(72,"li")(73,"strong"),c(74,"Comunic\u0103 prin mesaje"),o(),w(75,"br"),c(76," Vei putea: "),s(77,"ul")(78,"li"),c(79,"Primi r\u0103spunsuri de la specialist"),o(),s(80,"li"),c(81,"Vizualiza propunerea de serviciu \u0219i pre\u021Bul"),o(),s(82,"li"),c(83,"Accepta sau refuza oferta"),o()()(),s(84,"li")(85,"strong"),c(86,"Las\u0103 o recenzie"),o(),w(87,"br"),c(88," Dup\u0103 \xEEncheierea colabor\u0103rii, po\u021Bi scrie o recenzie care ajut\u0103 al\u021Bi utilizatori \u0219i sus\u021Bine calitatea pe platform\u0103."),o(),s(89,"li")(90,"strong"),c(91,"Pl\u0103te\u0219te \xEEn siguran\u021B\u0103"),o(),w(92,"br"),c(93," Pl\u0103\u021Bile se realizeaz\u0103 prin Stripe, \xEEntr-un mod securizat \u0219i transparent. Vei \u0219ti exact c\xE2t pl\u0103te\u0219ti \xEEnainte de confirmare."),o()()(),s(94,"section",7)(95,"h2"),c(96,"Ce poate face un specialist?"),o(),s(97,"p"),c(98,"Speciali\u0219tii au acces la instrumente prin care \xEE\u0219i pot gestiona cererile \u0219i construi o reputa\u021Bie solid\u0103:"),o(),s(99,"ol")(100,"li")(101,"strong"),c(102,"\xCEnregistrare \u0219i verificare profil"),o(),w(103,"br"),c(104," \xCE\u021Bi creezi un cont profesional, alegi domeniul de expertiz\u0103 \u0219i adaugi informa\u021Bii relevante."),o(),s(105,"li")(106,"strong"),c(107,"Prime\u0219ti cereri de la clien\u021Bi"),o(),w(108,"br"),c(109," Vei fi notificat atunci c\xE2nd un client te contacteaz\u0103. Po\u021Bi: "),s(110,"ul")(111,"li"),c(112,"Analiza cererea"),o(),s(113,"li"),c(114,"Accepta, refuza sau propune o ofert\u0103 alternativ\u0103"),o()()(),s(115,"li")(116,"strong"),c(117,"Trimite un r\u0103spuns detaliat"),o(),w(118,"br"),c(119," Po\u021Bi r\u0103spunde cu: "),s(120,"ul")(121,"li"),c(122,"Detalii despre serviciu"),o(),s(123,"li"),c(124,"Dat\u0103 propus\u0103"),o(),s(125,"li"),c(126,"Pre\u021B"),o()()(),s(127,"li")(128,"strong"),c(129,"Gestioneaz\u0103 conversa\u021Biile"),o(),w(130,"br"),c(131," Ai acces la un sistem de mesagerie clar \u0219i sigur, unde po\u021Bi urm\u0103ri fiecare cerere \xEEn parte."),o(),s(132,"li")(133,"strong"),c(134,"Prime\u0219te pl\u0103\u021Bi direct"),o(),w(135,"br"),c(136," Prin conectarea contului t\u0103u Stripe Express, po\u021Bi primi banii direct \xEEn contul bancar."),o(),s(137,"li")(138,"strong"),c(139,"Prime\u0219te recenzii"),o(),w(140,"br"),c(141," Dup\u0103 fiecare colaborare, clien\u021Bii pot l\u0103sa o recenzie care te va ajuta s\u0103 c\xE2\u0219tigi \xEEncrederea altor utilizatori."),o()()()()())},styles:['@charset "UTF-8";.home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.about-info[_ngcontent-%COMP%]{max-width:1600px;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6}.about-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d}.about-info[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff}.role-sections[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:32px;margin-top:32px}.role-sections[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{flex:1 1 45%;border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff;font-family:Roboto Mono,monospace;font-size:16px;line-height:25.6px}.role-sections[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#3c1a7d;font-weight:700;margin-bottom:16px}.role-sections[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:16px}.role-sections[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .role-sections[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-bottom:24px}.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:12px;line-height:25.6px}.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:8px;padding-left:20px}@media (max-width: 900px){.role-sections[_ngcontent-%COMP%]{flex-direction:column}.role-sections[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{flex:1 1 100%}}']})};var Ii={firstName:"Prenume",lastName:"Nume",fullName:"Nume complet",email:"Adres\u0103 e-mail",password:"Parol\u0103",role:"Rol",phoneNumber:"Num\u0103r de telefon",address:"Adres\u0103",yearsExperience:"Ani experien\u021B\u0103",description:"Descriere",id:"ID",account:"Cont",transaction:"Tranzac\u021Bie",createdAt:"Creat la",updatedAt:"Actualizat la",categories:"Categorii",name:"Denumire",specialistsCount:"Num\u0103r speciali\u0219ti",specialistIds:"Speciali\u0219tii cu aceast\u0103 categorie"};function le(i,e={},t=Ii){return Object.keys(i).map(n=>{let r=e[n]||{},a=r.type||(r.options?"select":"text"),d=t[n]||zo(n);return x({key:n,label:d,type:a,placeholder:r.placeholder||`Introdu ${d.toLowerCase()}`,required:r.required??!0,class:r.class||"half-width"},r)})}function zo(i){return i.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}function bt(i){if(!i)return{};let e={},t=Object.keys(i);if("id"in i){let n=Ii.id||"id";e[n]=i.id}for(let n of t){if(["id","firstName","lastName"].includes(n))continue;let r=i[n];if(r==null||typeof r=="string"&&r.trim()==="")continue;let a=Ii[n]||n,d=r;typeof r=="string"&&jo(r)||r instanceof Date?d=Fr(r):n.toLowerCase().includes("password")&&(d="********"),e[a]=d}return e}function jo(i){return/^\d{4}-\d{2}-\d{2}T/.test(i)}function Fr(i){let e=new Date(i),t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return`${t}.${n}.${r}`}var Bo=i=>({"placeholder-selected":i});function $o(i,e){if(i&1&&(s(0,"div",15),c(1),Z(2,"lowercase"),o()),i&2){let t=u(2).$implicit;l(),E(" C\xE2mpul ",ze(2,1,t.label)," este obligatoriu. ")}}function Lo(i,e){if(i&1){let t=S();s(0,"div")(1,"div",12)(2,"input",13,1),N("ngModelChange",function(r){b(t);let a=u().$implicit,d=u();return V(d.formData[a.key],r)||(d.formData[a.key]=r),v(r)}),g("input",function(){b(t);let r=u().$implicit,a=u();return v(r.key==="phoneNumber"&&a.liveFormatPhoneNumber(r.key))}),o()(),C(4,$o,3,3,"div",14),o()}if(i&2){let t=ce(3),n=u().$implicit,r=u();l(2),p("id",n.key)("name",n.key),F("ngModel",r.formData[n.key]),p("placeholder",n.placeholder)("required",!!n.required),l(2),p("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||r.formSubmitted))}}function Wo(i,e){if(i&1&&(s(0,"div",15),c(1),Z(2,"lowercase"),o()),i&2){let t=u(2).$implicit;l(),E(" C\xE2mpul ",ze(2,1,t.label)," este obligatoriu. ")}}function Ho(i,e){if(i&1){let t=S();s(0,"div")(1,"div",12)(2,"input",16,1),N("ngModelChange",function(r){b(t);let a=u().$implicit,d=u();return V(d.formData[a.key],r)||(d.formData[a.key]=r),v(r)}),o()(),C(4,Wo,3,3,"div",14),o()}if(i&2){let t=ce(3),n=u().$implicit,r=u();l(2),p("id",n.key)("name",n.key),F("ngModel",r.formData[n.key]),p("placeholder",n.placeholder)("required",!!n.required),l(2),p("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||r.formSubmitted))}}function Go(i,e){if(i&1&&(s(0,"div",15),c(1),Z(2,"lowercase"),o()),i&2){let t=u(2).$implicit;l(),E(" C\xE2mpul ",ze(2,1,t.label)," este obligatoriu. ")}}function Ko(i,e){if(i&1){let t=S();s(0,"div")(1,"div",12)(2,"input",17,1),N("ngModelChange",function(r){b(t);let a=u().$implicit,d=u();return V(d.formData[a.key],r)||(d.formData[a.key]=r),v(r)}),o()(),C(4,Go,3,3,"div",14),o()}if(i&2){let t=ce(3),n=u().$implicit,r=u();l(2),p("id",n.key)("name",n.key),F("ngModel",r.formData[n.key]),p("placeholder",n.placeholder)("required",!!n.required),l(2),p("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||r.formSubmitted))}}function Jo(i,e){if(i&1&&(s(0,"div",15),c(1),Z(2,"lowercase"),o()),i&2){let t=u(2).$implicit;l(),E(" C\xE2mpul ",ze(2,1,t.label)," este obligatoriu. ")}}function Zo(i,e){if(i&1){let t=S();s(0,"div")(1,"div",12)(2,"input",18,1),N("ngModelChange",function(r){b(t);let a=u().$implicit,d=u();return V(d.formData[a.key],r)||(d.formData[a.key]=r),v(r)}),o()(),C(4,Jo,3,3,"div",14),o()}if(i&2){let t=ce(3),n=u().$implicit,r=u();l(2),p("id",n.key)("name",n.key),F("ngModel",r.formData[n.key]),p("placeholder",n.placeholder)("required",!!n.required),l(2),p("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||r.formSubmitted))}}function Xo(i,e){if(i&1&&(s(0,"option",23),c(1),o()),i&2){let t=e.$implicit;p("value",t),l(),W(t)}}function Yo(i,e){if(i&1&&(s(0,"div",15),c(1),Z(2,"lowercase"),o()),i&2){let t=u(2).$implicit;l(),E(" C\xE2mpul ",ze(2,1,t.label)," este obligatoriu. ")}}function Qo(i,e){if(i&1){let t=S();s(0,"div")(1,"div",19)(2,"select",20,1),N("ngModelChange",function(r){b(t);let a=u().$implicit,d=u();return V(d.formData[a.key],r)||(d.formData[a.key]=r),v(r)}),s(4,"option",21),c(5),o(),C(6,Xo,2,2,"option",22),o()(),C(7,Yo,3,3,"div",14),o()}if(i&2){let t=ce(3),n=u().$implicit,r=u();l(2),p("id",n.key)("name",n.key),F("ngModel",r.formData[n.key]),p("required",!!n.required)("ngClass",qe(8,Bo,r.formData[n.key]==="")),l(3),W(n.placeholder||"Selecteaz\u0103 o op\u021Biune"),l(),p("ngForOf",n.options),l(),p("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||r.formSubmitted))}}function es(i,e){if(i&1&&(s(0,"div",15),c(1),Z(2,"lowercase"),o()),i&2){let t=u(2).$implicit;l(),E(" C\xE2mpul ",ze(2,1,t.label)," este obligatoriu. ")}}function ts(i,e){if(i&1){let t=S();s(0,"div")(1,"div",12)(2,"textarea",24,1),N("ngModelChange",function(r){b(t);let a=u().$implicit,d=u();return V(d.formData[a.key],r)||(d.formData[a.key]=r),v(r)}),c(4,"          "),o()(),C(5,es,3,3,"div",14),o()}if(i&2){let t=ce(3),n=u().$implicit,r=u();l(2),p("id",n.key)("name",n.key),F("ngModel",r.formData[n.key]),p("placeholder",n.placeholder)("required",!!n.required),l(3),p("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||r.formSubmitted))}}function ns(i,e){if(i&1&&(s(0,"div",15),c(1),Z(2,"lowercase"),o()),i&2){let t=u(2).$implicit;l(),E(" C\xE2mpul ",ze(2,1,t.label)," este obligatoriu. ")}}function is(i,e){if(i&1){let t=S();s(0,"div")(1,"div",12)(2,"input",25,1),N("ngModelChange",function(r){b(t);let a=u().$implicit,d=u();return V(d.formData[a.key],r)||(d.formData[a.key]=r),v(r)}),o()(),C(4,ns,3,3,"div",14),o()}if(i&2){let t=ce(3),n=u().$implicit,r=u();l(2),p("type",n.type)("id",n.key)("name",n.key),F("ngModel",r.formData[n.key]),p("placeholder",n.placeholder)("required",!!n.required),l(2),p("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||r.formSubmitted))}}function rs(i,e){if(i&1&&(s(0,"div",6)(1,"label",7),c(2),o(),s(3,"div",8),H(4,9),C(5,Lo,5,6,"div",10)(6,Ho,5,6,"div",10)(7,Ko,5,6,"div",10)(8,Zo,5,6,"div",10)(9,Qo,8,10,"div",10)(10,ts,6,6,"div",10)(11,is,5,7,"div",11),G(),o()()),i&2){let t=e.$implicit;p("ngClass",t.class),l(),p("for",t.key),l(),W(t.label),l(2),p("ngSwitch",t.type),l(),p("ngSwitchCase","text"),l(),p("ngSwitchCase","email"),l(),p("ngSwitchCase","password"),l(),p("ngSwitchCase","number"),l(),p("ngSwitchCase","select"),l(),p("ngSwitchCase","textarea")}}var fe=class i{fields=[];initialData={};submitText="Submit";formSubmit=new k;formData={};formSubmitted=!1;ngOnChanges(e){e.initialData&&e.initialData.currentValue&&(this.formData=x({},e.initialData.currentValue),this.fields.forEach(t=>{t.key in this.formData||(this.formData[t.key]="")}))}onSubmit(e){this.formSubmitted=!0,console.log(this.formSubmitted),!e.invalid&&this.formSubmit.emit(this.formData)}liveFormatPhoneNumber(e){let t=this.formData[e]||"",n=t.startsWith("+"),r=t.replace(/\D/g,""),a=r;r.length===11&&r.startsWith("40")?a=r.replace(/(\d{2})(\d{3})(\d{3})(\d{3})/,"$1 $2 $3 $4"):r.length===10&&r.startsWith("0")?a=r.replace(/(\d{3})(\d{3})(\d{4})/,"$1 $2 $3"):r.length===9&&(a=r.replace(/(\d{3})(\d{3})(\d{3})/,"$1 $2 $3")),this.formData[e]=n?`+${a}`:a}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-dynamic-form"]],inputs:{fields:"fields",initialData:"initialData",submitText:"submitText"},outputs:{formSubmit:"formSubmit"},features:[Ye],decls:6,vars:2,consts:[["formRef","ngForm"],["ctrl","ngModel"],[1,"form-layout",3,"ngSubmit"],["class","form-group",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-group","full-width"],["type","submit",1,"send-button"],[1,"form-group",3,"ngClass"],[3,"for"],[1,"field-wrapper"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"input-box"],["type","text",3,"ngModelChange","input","id","name","ngModel","placeholder","required"],["class","error",4,"ngIf"],[1,"error"],["type","email",3,"ngModelChange","id","name","ngModel","placeholder","required"],["type","password",3,"ngModelChange","id","name","ngModel","placeholder","required"],["type","number",3,"ngModelChange","id","name","ngModel","placeholder","required"],[1,"select-box"],[3,"ngModelChange","id","name","ngModel","required","ngClass"],["value","","disabled","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","4",3,"ngModelChange","id","name","ngModel","placeholder","required"],[3,"ngModelChange","type","id","name","ngModel","placeholder","required"]],template:function(t,n){if(t&1){let r=S();s(0,"form",2,0),g("ngSubmit",function(){b(r);let d=ce(1);return v(n.onSubmit(d))}),C(2,rs,12,10,"div",3),s(3,"div",4)(4,"button",5),c(5),o()()()}t&2&&(l(2),p("ngForOf",n.fields),l(3),E(" ",n.submitText," "))},dependencies:[L,ue,J,z,Gt,Kt,Ji,Zi,U,ge,ft,ht,ie,Vt,Le,re,me,Ve,ae,he],styles:[".grid-form[_ngcontent-%COMP%]{gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto;font-family:Roboto Mono,monospace;border:2px solid #c9b7ff;border-radius:6px;box-shadow:0 4px 12px #0000001a}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:12px 16px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.form-group.half-width[_ngcontent-%COMP%]{flex:1 1 48%}label[_ngcontent-%COMP%]{margin-bottom:8px}.input-box[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:16px;outline:none}.input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-family:inherit;font-size:1rem;border:none;border-radius:6px;box-sizing:border-box;resize:vertical;background:#e6dfff}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;font-size:16px;outline:none;appearance:auto;font-family:inherit;width:100%}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#a388ff;box-shadow:0 0 3px #a388ff}.placeholder-selected[_ngcontent-%COMP%]{color:#7d7d7f!important}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.field-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px}"]})};var fn=class i{constructor(e,t){this.authService=e;this.router=t;let n={firstName:"",lastName:"",email:"",password:""};this.formFields=le(n,{email:{type:"email"},password:{type:"password"}}),console.log(this.formFields)}formFields=[];formData={};errorMessage=null;registerUser(e){let t=e;this.authService.registerUser(t).subscribe({next:()=>{let n={email:t.email,password:t.password};this.authService.loginUser(n).subscribe({next:()=>{this.router.navigate(["/home"])},error:r=>{console.error("Login failed:",r),this.errorMessage=r.error?.errorMessage?.message||"Eroare necunoscut\u0103."}})},error:n=>{console.error("Registration failed:",n),this.errorMessage=n.error?.errorMessage?.message||"Eroare necunoscut\u0103."}})}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||i)(h(I),h(Y))};static \u0275cmp=y({type:i,selectors:[["app-register"]],decls:9,vars:2,consts:[[1,"form-wrapper"],[1,"form-box"],[3,"formSubmit","fields","submitText"],[1,"auth-switch"],[1,"auth-button",3,"click"]],template:function(t,n){t&1&&(s(0,"h2"),c(1,"\xCEnregistrare"),o(),s(2,"div",0)(3,"div",1)(4,"app-dynamic-form",2),g("formSubmit",function(a){return n.registerUser(a)}),o()()(),s(5,"p",3),c(6," Deja ai un cont? "),s(7,"button",4),g("click",function(){return n.goToLogin()}),c(8,"Autentific\u0103-te"),o()()),t&2&&(l(4),p("fields",n.formFields)("submitText","Trimite"))},dependencies:[L,U,fe],styles:["p[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:16px}h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.auth-button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700}.auth-button[_ngcontent-%COMP%]:hover{color:#6a5799}"]})};var hn=class i{constructor(e,t){this.authService=e;this.router=t;let n={email:"",password:""};this.formFields=le(n,{email:{type:"email"},password:{type:"password"}})}formFields=[];formData={};errorMessage=null;loginUser(e){let t=e;this.authService.loginUser(t).subscribe({next:n=>{console.log("Login successful:",n),this.router.navigate(["/home"])},error:n=>{console.error("Login failed:",n),this.errorMessage=n.error?.errorMessage?.message||"Eroare necunoscut\u0103."}})}goToRegister(){this.router.navigate(["/register"])}static \u0275fac=function(t){return new(t||i)(h(I),h(Y))};static \u0275cmp=y({type:i,selectors:[["app-login"]],decls:9,vars:2,consts:[[1,"form-wrapper"],[1,"form-box"],[3,"formSubmit","fields","submitText"],[1,"auth-switch"],[1,"auth-button",3,"click"]],template:function(t,n){t&1&&(s(0,"h2"),c(1,"Autentificare"),o(),s(2,"div",0)(3,"div",1)(4,"app-dynamic-form",2),g("formSubmit",function(a){return n.loginUser(a)}),o()()(),s(5,"p",3),c(6," Nu ai cont? "),s(7,"button",4),g("click",function(){return n.goToRegister()}),c(8,"\xCEnregistreaz\u0103-te"),o()()),t&2&&(l(4),p("fields",n.formFields)("submitText","Trimite"))},dependencies:[L,U,fe],styles:["p[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:16px}h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.auth-button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700}.auth-button[_ngcontent-%COMP%]:hover{color:#6a5799}"]})};var _n=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-admin"]],decls:15,vars:0,consts:[[1,"grid-form"],[1,"button-group"],["routerLink","/admin/users","routerLinkActive","active",1,"admin-button"],["routerLink","/admin/specialists","routerLinkActive","active",1,"admin-button"],["routerLink","/admin/categories","routerLinkActive","active",1,"admin-button"],[1,"admin-button"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),c(3,"Utilizatori"),o(),s(4,"button",3),c(5,"Speciali\u0219ti"),o(),s(6,"button",4),c(7,"Categorii"),o(),s(8,"button",5),c(9,"Servicii"),o(),s(10,"button",5),c(11,"Tranzac\u021Bii"),o(),s(12,"button",5),c(13,"Recenzii"),o()()(),w(14,"router-outlet"))},dependencies:[Jt,Ee],styles:[".grid-form[_ngcontent-%COMP%]{position:absolute;top:calc(50vh - 250px);left:calc(50vw - 400px);width:800px;height:500px;display:flex;flex-direction:column;padding:40px 60px;border:3px solid black;border-radius:4px;box-shadow:0 4px 12px #0000001a;background-color:#cfbdfe;box-sizing:border-box}.button-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:32px;width:100%;justify-items:center;margin-top:24px}.admin-button[_ngcontent-%COMP%]{width:100%;height:5vw;background-color:#e6dfff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;border:3px solid #4b358e;border-radius:5px;cursor:pointer;box-shadow:0 2px 6px #0000001a;transition:background-color .3s ease,text-decoration .2s ease;display:flex;align-items:center;justify-content:center;text-align:center}.admin-button[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var rt=(n=>(n.Admin="Admin",n.Specialist="Specialist",n.Client="Client",n))(rt||{});function os(i,e){if(i&1&&(s(0,"th"),c(1),o()),i&2){let t=e.$implicit;l(),W(t.header)}}function ss(i,e){if(i&1&&(H(0),c(1),G()),i&2){let t=u(2).$implicit,n=u().$implicit;l(),E(" ",t.compute(n)," ")}}function as(i,e){if(i&1&&c(0),i&2){let t=u(2).$implicit,n=u().$implicit;E(" ",n[t.key]," ")}}function cs(i,e){if(i&1&&(H(0),C(1,ss,2,1,"ng-container",4)(2,as,1,1,"ng-template",null,1,lt),G()),i&2){let t=ce(3),n=u().$implicit;l(),p("ngIf",n.compute)("ngIfElse",t)}}function ls(i,e){if(i&1){let t=S();s(0,"a",6),g("click",function(){let r=b(t).$implicit,a=u(3).$implicit;return v(r.callback(a))}),c(1),o()}if(i&2){let t=e.$implicit;p("ngClass",t.class),l(),E(" ",t.label," ")}}function ds(i,e){if(i&1&&C(0,ls,2,2,"a",5),i&2){let t=u().$implicit;p("ngForOf",t.actions)}}function ps(i,e){if(i&1&&(s(0,"td"),C(1,cs,4,2,"ng-container",4)(2,ds,1,1,"ng-template",null,0,lt),o()),i&2){let t=e.$implicit,n=ce(3);l(),p("ngIf",t.type!=="action")("ngIfElse",n)}}function us(i,e){if(i&1&&(s(0,"tr"),C(1,ps,4,2,"td",3),o()),i&2){let t=u();l(),p("ngForOf",t.columns)}}var Ge=class i{columns=[];data=[];static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-dynamic-table"]],inputs:{columns:"columns",data:"data"},decls:6,vars:2,consts:[["actionCell",""],["directValue",""],[1,"admin-table"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["class","action-link",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"action-link",3,"click","ngClass"]],template:function(t,n){t&1&&(s(0,"table",2)(1,"thead")(2,"tr"),C(3,os,2,1,"th",3),o()(),s(4,"tbody"),C(5,us,2,1,"tr",3),o()()),t&2&&(l(3),p("ngForOf",n.columns),l(2),p("ngForOf",n.data))},dependencies:[L,ue,J,z,U],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}"]})};function ms(i,e){if(i&1&&(H(0),s(1,"p")(2,"strong"),c(3),o(),c(4),o(),G()),i&2){let t=u().$implicit,n=u();l(3),E("",n.formatKey(t),":"),l(),E(" ",n.formatValue(n.entity[t])," ")}}function gs(i,e){if(i&1&&(H(0),C(1,ms,5,2,"ng-container",5),G()),i&2){let t=e.$implicit;l(),p("ngIf",t!=="ID")}}var Ke=class i{entity={};title="";close=new k;onClose(){this.close.emit()}objectKeys=Object.keys;formatKey(e){return e.includes(" ")||e.includes("-")?e:e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase())}formatValue(e){return typeof e=="boolean"?e?"Da":"Nu":e instanceof Date?e.toLocaleDateString():typeof e=="string"&&e.toLowerCase().includes("password")?"********":e}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-admin-details"]],inputs:{entity:"entity",title:"title"},outputs:{close:"close"},decls:10,vars:3,consts:[[1,"admin-wrapper"],[1,"page-title"],[1,"card"],[1,"divider"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"h2",1),c(2),o(),s(3,"div",2)(4,"p")(5,"strong"),c(6,"ID:"),o(),c(7),o(),w(8,"hr",3),C(9,gs,2,1,"ng-container",4),o()()),t&2&&(l(2),W(n.title),l(5),E(" ",n.entity.ID,""),l(2),p("ngForOf",n.objectKeys(n.entity)))},dependencies:[L,J,z],styles:[".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var vt=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/User";getUser(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}getUserProfile(){let e=this.authService.getToken(),t=new M({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/Get`,{headers:t})}getUsers(e,t,n){let r=this.authService.getToken(),a=new M({Authorization:`Bearer ${r}`}),d=new je().set("search",e??"").set("page",t).set("pageSize",n);return this.http.get(`${this.baseUrl}/GetPage`,{headers:a,params:d})}addUser(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.post(`${this.baseUrl}/Add`,e,{headers:n})}updateUser(e,t){let n=this.authService.getToken(),r=new M({Authorization:`Bearer ${n}`});return this.http.patch(`${this.baseUrl}/Update/${e}`,t,{headers:r})}updateUserProfile(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}`,e,{headers:n})}deleteUser(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.delete(`${this.baseUrl}/Delete/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(R(X),R(I))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var fs=()=>[5,10,20];function hs(i,e){if(i&1){let t=S();s(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),g("click",function(){b(t);let r=u();return v(r.closeAddUserForm())}),c(4,"\xD7"),o()(),s(5,"app-dynamic-form",13),g("formSubmit",function(r){b(t);let a=u();return v(a.addEntity(r))}),o()()()}if(i&2){let t=u();l(5),p("fields",t.addEntityFormFields)("submitText","Trimite")}}function _s(i,e){if(i&1){let t=S();s(0,"div",9)(1,"div",10)(2,"button",12),g("click",function(){b(t);let r=u();return v(r.closeUpdateUserForm())}),c(3,"\xD7"),o(),s(4,"app-dynamic-form",14),g("formSubmit",function(r){b(t);let a=u();return v(a.updateEntity(r))}),o()()()}if(i&2){let t=u();l(4),p("fields",t.updateEntityFormFields)("initialData",t.formData)("submitText","Actualizeaz\u0103")}}function bs(i,e){if(i&1){let t=S();s(0,"app-admin-details",18),g("close",function(){b(t);let r=u(2);return v(r.closeUserDetails())}),o()}if(i&2){let t=u(2);p("entity",t.entityDetails)("title","Detalii utilizator")}}function vs(i,e){if(i&1){let t=S();s(0,"div",15)(1,"div",16)(2,"button",12),g("click",function(){b(t);let r=u();return v(r.closeUserDetails())}),c(3,"\xD7"),o(),C(4,bs,1,2,"app-admin-details",17),o()()}if(i&2){let t=u();l(4),p("ngIf",t.isUserDetailsVisible)}}var bn=class i{constructor(e){this.adminService=e}dummy_users=[{id:"m3n4o5p6",fullName:"Ana Georgescu",email:"ana.georgescu@example.com",role:"Admin",createdAt:new Date("2024-09-01T11:30:00Z"),updatedAt:new Date("2025-01-12T13:00:00Z"),rating:4.5},{id:"q7r8s9t0",fullName:"Radu Enache",email:"radu.enache@example.com",role:"Client",createdAt:new Date("2024-08-20T15:45:00Z"),updatedAt:new Date("2025-01-08T11:15:00Z"),rating:4}];searchTerm="";users=[];selectedUser=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddUserFormVisible=!1;isUpdateUserFormVisible=!1;isUserDetailsVisible=!1;selectedUserId=null;placeholder="Caut\u0103 un utilizator...";columns=[{key:"id",header:"ID"},{key:"fullName",header:"Nume"},{key:"email",header:"Email"},{key:"role",header:"Rol"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:e=>this.getEntity(e.id)},{label:"Modific\u0103",class:"edit",callback:e=>this.editUser(e)},{label:"\u0218terge",class:"delete",callback:e=>this.deleteEntity(e)}]}];defaultUser={fullName:"",email:"",password:"",role:"Client"};formData={};error=null;addEntityFormFields=le(this.defaultUser,{email:{type:"email"},password:{type:"password"},role:{type:"select",options:Object.values(rt)}});updateEntityFormFields=le({fullName:this.selectedUser?.fullName||"",role:this.selectedUser?.role||""},{role:{type:"select",options:Object.values(rt)}});ngOnInit(){let e={fullName:"",email:"",password:"",role:"Client"};this.formData=x({},e),this.getPage()}onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}getEntity(e){console.log(e),this.adminService.getUser(e).subscribe({next:t=>{this.entityDetailsId=t.response?.id,this.entityDetails=bt(t.response??{}),this.isUserDetailsVisible=!0},error:t=>{console.error("Eroare la preluarea utilizatorului:",t),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getUsers(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{console.log(e.response),this.users=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(e){let t=e;this.adminService.addUser(t).subscribe({next:()=>{this.closeAddUserForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editUser(e){this.selectedUserId=e.id,this.formData={fullName:e.fullName,role:e.role},this.isUpdateUserFormVisible=!0}updateEntity(e){if(!this.selectedUserId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let t=e.fullName??[e.firstName,e.lastName].filter(Boolean).join(" ").trim(),n={id:this.selectedUserId,fullName:t,role:e.role};this.adminService.updateUser(this.selectedUserId,n).subscribe({next:()=>{this.closeUpdateUserForm(),this.getPage()},error:r=>{console.error("Eroare la actualizare:",r)}})}showUserDetails(e){this.isUserDetailsVisible=!0}closeUserDetails(){this.isUserDetailsVisible=!1,this.selectedUser=null}closeUpdateUserForm(){this.selectedUserId=null,this.resetForm(),this.isUpdateUserFormVisible=!1}openAddUserForm(){this.selectedUserId=null,this.resetForm(),this.isAddUserFormVisible=!0}viewUser(e){this.isUserDetailsVisible=!0}deleteEntity(e){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi utilizatorul ${e.fullName}?`)&&this.adminService.deleteUser(e.id).subscribe({next:()=>{this.getPage()},error:t=>{console.error("Eroare la \u0219tergerea utilizatorului:",t)}})}closeAddUserForm(){this.isAddUserFormVisible=!1,this.resetForm()}resetForm(){this.formData={firstName:"",lastName:"",email:"",password:"",role:"Client"}}onPageChange(e){this.currentPage=e,this.getPage()}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}static \u0275fac=function(t){return new(t||i)(h(vt))};static \u0275cmp=y({type:i,selectors:[["app-admin-users"]],decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[1,"admin-modal"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(t,n){t&1&&(s(0,"app-pagination",0),g("pageChange",function(a){return n.onPageChange(a)})("pageSizeChange",function(a){return n.onPageSizeChange(a)}),o(),s(1,"div",1)(2,"div",2)(3,"h2"),c(4,"Administreaz\u0103 to\u021Bi utilizatorii"),o(),s(5,"div",3)(6,"app-search-input",4),g("searchChanged",function(a){return n.onSearch(a)}),o()(),s(7,"button",5),g("click",function(){return n.openAddUserForm()}),c(8,"Adaug\u0103 utilizator"),o(),w(9,"app-dynamic-table",6),o()(),C(10,hs,6,2,"div",7)(11,_s,5,3,"div",7)(12,vs,5,1,"div",8)),t&2&&(p("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",pe(10,fs))("totalItems",n.totalItems),l(6),p("placeholder",n.placeholder),l(3),p("columns",n.columns)("data",n.users),l(),p("ngIf",n.isAddUserFormVisible),l(),p("ngIf",n.isUpdateUserFormVisible),l(),p("ngIf",n.isUserDetailsVisible))},dependencies:[L,z,U,fe,Ge,Ke,Ce,Oe],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}",".grid-form[_ngcontent-%COMP%]{gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto;font-family:Roboto Mono,monospace;border:2px solid #c9b7ff;border-radius:6px;box-shadow:0 4px 12px #0000001a}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:12px 16px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.form-group.half-width[_ngcontent-%COMP%]{flex:1 1 48%}label[_ngcontent-%COMP%]{margin-bottom:8px}.input-box[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:16px;outline:none}.input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-family:inherit;font-size:1rem;border:none;border-radius:6px;box-sizing:border-box;resize:vertical;background:#e6dfff}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;font-size:16px;outline:none;appearance:auto;font-family:inherit;width:100%}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#a388ff;box-shadow:0 0 3px #a388ff}.placeholder-selected[_ngcontent-%COMP%]{color:#7d7d7f!important}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.field-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var Cs=["class","users"],ys=()=>[5,10,20];function xs(i,e){if(i&1){let t=S();s(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),g("click",function(){b(t);let r=u();return v(r.closeAddUserForm())}),c(4,"\xD7"),o()(),s(5,"app-dynamic-form",13),g("formSubmit",function(r){b(t);let a=u();return v(a.addEntity(r))}),o()()()}if(i&2){let t=u();l(5),p("fields",t.addEntityFormFields)("submitText","Adaug\u0103")}}function ws(i,e){if(i&1){let t=S();s(0,"div",9)(1,"div",10)(2,"button",12),g("click",function(){b(t);let r=u();return v(r.closeUpdateUserForm())}),c(3,"\xD7"),o(),s(4,"app-dynamic-form",14),g("formSubmit",function(r){b(t);let a=u();return v(a.updateEntity(r))}),o()()()}if(i&2){let t=u();l(4),p("fields",t.updateEntityFormFields)("initialData",t.formData)("submitText","Actualizeaz\u0103")}}function Ss(i,e){if(i&1){let t=S();s(0,"app-admin-details",17),g("close",function(){b(t);let r=u(2);return v(r.closeUserDetails())}),o()}if(i&2){let t=u(2);p("entity",t.entityDetails)("title","Detalii specialist")}}function Ms(i,e){if(i&1){let t=S();s(0,"div",15)(1,"div",10)(2,"button",12),g("click",function(){b(t);let r=u();return v(r.closeUserDetails())}),c(3,"\xD7"),o(),C(4,Ss,1,2,"app-admin-details",16),o()()}if(i&2){let t=u();l(4),p("ngIf",t.isUserDetailsVisible)}}var vn=class i{constructor(e){this.adminService=e;let t={fullName:"",email:"",password:"",phoneNumber:"",address:"",yearsExperience:0,description:""};this.formData=x({},t),this.getPage()}searchTerm="";users=[];selectedUser=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddUserFormVisible=!1;isUpdateUserFormVisible=!1;isUserDetailsVisible=!1;selectedUserId=null;placeholder="Caut\u0103 un specialist...";columns=[{key:"id",header:"ID"},{key:"fullName",header:"Nume"},{key:"email",header:"Email"},{key:"phoneNumber",header:"Num\u0103r de telefon"},{key:"address",header:"Adres\u0103"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:e=>this.getEntity(e.id)},{label:"Modific\u0103",class:"edit",callback:e=>this.editUser(e)},{label:"\u0218terge",class:"delete",callback:e=>this.deleteUser(e)}]}];defaultUser={fullName:"",email:"",password:"",phoneNumber:"",address:"",yearsExperience:0,description:""};formData={};error=null;addEntityFormFields=le(this.defaultUser,{email:{type:"email"},password:{type:"password"},yearsExperience:{type:"number",placeholder:"Ex: 5"},description:{type:"textarea",placeholder:"Descrie serviciile oferite",class:"full-width"}});updateEntityFormFields=le({fullName:this.selectedUser?.fullName||"",phoneNumber:this.selectedUser?.phoneNumber||"",address:this.selectedUser?.address||"",yearsExperience:this.selectedUser?.yearsExperience||"",description:this.selectedUser?.description||""});onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}getEntity(e){this.adminService.getSpecialist(e).subscribe({next:t=>{this.entityDetailsId=t.response?.id,console.log(t.response),this.entityDetails=bt(t.response??{}),this.isUserDetailsVisible=!0},error:t=>{console.error("Eroare la preluarea utilizatorului:",t),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getSpecialists(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{this.users=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(e){let t=e;this.adminService.addSpecialist(t).subscribe({next:()=>{this.closeAddUserForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editUser(e){this.selectedUserId=e.id,this.formData={fullName:e.fullName,phoneNumber:e.phoneNumber,address:e.address,yearsExperience:e.yearsExperience,description:e.description},this.isUpdateUserFormVisible=!0}updateEntity(e){if(console.log("Form data submitted:",e),!this.selectedUserId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let t={id:this.selectedUserId,fullName:e.fullName,phoneNumber:e.phoneNumber,address:e.address,yearsExperience:e.yearsExperience,description:e.description};console.log("Update payload:",t),this.adminService.updateSpecialist(this.selectedUserId,t).subscribe({next:()=>{console.log(),this.closeUpdateUserForm(),this.getPage()},error:n=>{console.error("Eroare la actualizare:",n)}})}closeUserDetails(){this.isUserDetailsVisible=!1,this.entityDetails={}}closeUpdateUserForm(){this.selectedUserId=null,this.resetForm(),this.isUpdateUserFormVisible=!1}openAddUserForm(){this.selectedUserId=null,this.resetForm(),this.isAddUserFormVisible=!0}viewUser(e){this.isUserDetailsVisible=!0}deleteUser(e){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi utilizatorul ${e.fullName}?`)&&this.adminService.deleteSpecialist(e.id).subscribe({next:()=>{this.getPage()},error:t=>{console.error("Eroare la \u0219tergerea utilizatorului:",t)}})}closeAddUserForm(){this.isAddUserFormVisible=!1,this.resetForm()}resetForm(){this.formData={firstName:"",lastName:"",email:"",password:"",role:"Client"}}getTotalPages(){return Math.ceil(this.totalItems/this.pageSize)}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}onPageChange(e){this.currentPage=e,this.getPage()}static \u0275fac=function(t){return new(t||i)(h(Xt))};static \u0275cmp=y({type:i,selectors:[["app-admin",8,"users"]],attrs:Cs,decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(t,n){t&1&&(s(0,"app-pagination",0),g("pageChange",function(a){return n.onPageChange(a)})("pageSizeChange",function(a){return n.onPageSizeChange(a)}),o(),s(1,"div",1)(2,"div",2)(3,"h2"),c(4,"Administreaz\u0103 to\u021Bi speciali\u0219tii"),o(),s(5,"div",3)(6,"app-search-input",4),g("searchChanged",function(a){return n.onSearch(a)}),o()(),s(7,"button",5),g("click",function(){return n.openAddUserForm()}),c(8,"Adaug\u0103 specialist"),o(),w(9,"app-dynamic-table",6),o()(),C(10,xs,6,2,"div",7)(11,ws,5,3,"div",7)(12,Ms,5,1,"div",8)),t&2&&(p("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",pe(10,ys))("totalItems",n.totalItems),l(6),p("placeholder",n.placeholder),l(3),p("columns",n.columns)("data",n.users),l(),p("ngIf",n.isAddUserFormVisible),l(),p("ngIf",n.isUpdateUserFormVisible),l(),p("ngIf",n.isUserDetailsVisible))},dependencies:[U,Ke,fe,Ge,z,Ce,Oe],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var Cn=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-unauthorized"]],decls:6,vars:0,consts:[["routerLink","/home"]],template:function(t,n){t&1&&(s(0,"h2"),c(1,"Acces restric\u021Bionat"),o(),s(2,"p"),c(3,"Nu ai permisiunea necesar\u0103 pentru a accesa aceast\u0103 pagin\u0103."),o(),s(4,"a",0),c(5,"\xCEnapoi la pagina principal\u0103"),o())},encapsulation:2})};var Ct=class i{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.getToken()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(t){return new(t||i)(R(I),R(Y))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};function Es(i,e){if(i&1&&w(0,"img",2),i&2){let t=u();p("src",t.icon,Se)}}var yn=class i{label;icon;onClick=new k;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-icon-button"]],inputs:{label:"label",icon:"icon"},outputs:{onClick:"onClick"},decls:4,vars:2,consts:[[1,"icon-button",3,"click"],["alt","icon","class","button-icon",3,"src",4,"ngIf"],["alt","icon",1,"button-icon",3,"src"]],template:function(t,n){t&1&&(s(0,"button",0),g("click",function(){return n.onClick.emit()}),C(1,Es,1,1,"img",1),s(2,"span"),c(3),o()()),t&2&&(l(),p("ngIf",n.icon),l(2),W(n.label))},dependencies:[L,z],styles:[".icon-button[_ngcontent-%COMP%]{width:260px;height:55px;display:flex;align-items:center;gap:12px;padding:12px 24px;font-size:16px;font-weight:500;border:3px solid #4f378a;background-color:#f3e6ff;border-radius:10px;cursor:pointer;transition:background .2s ease;font-family:Roboto Mono,monospace}.icon-button[_ngcontent-%COMP%]:hover{background-color:#a197be}.icon-button[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain}"]})};var xn=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Photo";addProfilePicture(e){let t=new FormData;t.append("file",e);let n=this.authService.getToken(),r=new M({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/AddProfilePicture`,t,{headers:r})}updateProfilePicture(e){let t=new FormData;t.append("file",e);let n=this.authService.getToken(),r=new M({Authorization:`Bearer ${n}`});return this.http.patch(`${this.baseUrl}/UpdateProfilePicture`,t,{headers:r})}addPortfolioPicture(e){let t=new FormData;t.append("file",e);let n=this.authService.getToken(),r=new M({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/AddPortfolioPicture`,t,{headers:r})}deletePortfolioPicture(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.delete(`${this.baseUrl}/DeletePortfolioPicture/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(R(X),R(I))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};function Ps(i,e){if(i&1&&(s(0,"span",21),c(1),o()),i&2){let t=e.$implicit;l(),W(t.name)}}var wn=class i{constructor(e,t,n,r){this.profileService=e;this.authService=t;this.photoService=n;this.route=r}user;dummyUser={id:"user-001",fullName:"Elena Georgescu",email:"elena.georgescu@example.com",role:"Specialist",createdAt:new Date("2023-02-10T10:15:00Z"),updatedAt:new Date,rating:4.8,contactInfo:{phoneNumber:"0745123456",address:"Strada Florilor 12, Timi\u0219oara"},specialist:{yearsExperience:6,description:"Specialist \xEEn traduceri juridice \u0219i consultan\u021B\u0103 contractual\u0103.",categories:[{id:"cat-007",name:"Traduceri juridice"},{id:"cat-008",name:"Consultan\u021B\u0103 legal\u0103"}]}};ngOnInit(){this.profileService.getUserProfile().subscribe({next:e=>{this.user=e.response,console.log(this.user)},error:e=>{console.error(e)}})}onFileSelected(e){let t=e.target.files[0];if(!t)return;new FormData().append("file",t),this.photoService.addProfilePicture(t).subscribe({next:r=>{console.log("Upload success:",r),console.log(this.user?.profilePictureUrl)},error:r=>{console.error("Upload error:",r)}})}uploadProfilePicture(e){this.photoService.addProfilePicture(e).subscribe({next:t=>{console.log("Upload success:",t)},error:t=>{console.error("Upload error:",t)}})}onEdit(){}goToReviews(){this.route.navigate(["profile/user-reviews"])}goToHistory(){}goToExpertEase(){}goToSettings(){this.route.navigate(["profile/user-settings"])}logout(){window.confirm("Sigur vrei s\u0103 te deloghezi?")&&this.authService.logout(),this.route.navigate(["/home"])}UserRoleEnum=rt;static \u0275fac=function(t){return new(t||i)(h(vt),h(I),h(xn),h(Y))};static \u0275cmp=y({type:i,selectors:[["app-profile"]],decls:51,vars:22,consts:[[1,"account-card"],[1,"account-header"],[1,"avatar-wrapper"],[1,"avatar"],["alt","User avatar",3,"src"],[1,"upload-btn"],["type","file","accept","image/*","hidden","",3,"change"],["src","assets/icons/photo_media.svg","alt","Upload icon"],[1,"account-info"],[3,"onClick","label","icon"],[1,"card"],[1,"info"],[1,"full-name"],[1,"details-block"],[1,"row"],[1,"categories"],[1,"label"],["class","tag",4,"ngFor","ngForOf"],[1,"experience"],[1,"description"],[1,"account-actions"],[1,"tag"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),w(4,"img",4),s(5,"label",5)(6,"input",6),g("change",function(a){return n.onFileSelected(a)}),o(),w(7,"img",7),o()()(),s(8,"div",8)(9,"p")(10,"strong"),c(11,"Nume:"),o(),c(12),o(),s(13,"p")(14,"strong"),c(15,"Adresa mail:"),o(),c(16),o(),s(17,"p")(18,"strong"),c(19,"Parol\u0103:"),o(),c(20," ********"),o(),s(21,"p")(22,"strong"),c(23,"Creat la data de:"),o(),c(24),Z(25,"date"),o()(),s(26,"app-icon-button",9),g("onClick",function(){return n.onEdit()}),o()(),s(27,"div",10)(28,"div",11)(29,"h2",12),c(30,"Anun\u021Bul t\u0103u"),o(),s(31,"div",13)(32,"div",14)(33,"div",15)(34,"span",16),c(35,"Categorii:"),o(),C(36,Ps,2,1,"span",17),o(),s(37,"div",18)(38,"span",16),c(39,"Ani experien\u021B\u0103:"),o(),c(40),o()(),s(41,"div",19)(42,"span",16),c(43,"Descriere:"),o(),c(44),o()()(),s(45,"app-icon-button",9),g("onClick",function(){return n.onEdit()}),o()(),s(46,"div",20)(47,"app-icon-button",9),g("onClick",function(){return n.goToReviews()}),o(),s(48,"app-icon-button",9),g("onClick",function(){return n.goToHistory()}),o(),s(49,"app-icon-button",9),g("onClick",function(){return n.goToSettings()}),o(),s(50,"app-icon-button",9),g("onClick",function(){return n.logout()}),o()()()),t&2&&(l(4),p("src",(n.user==null?null:n.user.profilePictureUrl)||"assets/avatar.svg",Se),l(8),E(" ",n.user==null?null:n.user.fullName," "),l(4),E(" ",n.user==null?null:n.user.email,""),l(8),E(" ",ve(25,19,n.user==null?null:n.user.createdAt,"dd.MM.yyyy"),""),l(2),p("label","Editeaz\u0103 profilul")("icon","assets/icons/edit.svg"),l(10),p("ngForOf",n.user==null||n.user.specialist==null?null:n.user.specialist.categories),l(4),E(" ",n.user==null||n.user.specialist==null?null:n.user.specialist.yearsExperience," "),l(4),E(" ",n.user==null||n.user.specialist==null?null:n.user.specialist.description," "),l(),p("label","Editeaz\u0103 anun\u021Bul")("icon","assets/icons/edit.svg"),l(2),p("label","Recenziile tale")("icon","assets/icons/reviews.svg"),l(),p("label","Istoric servicii")("icon","assets/icons/history.svg"),l(),p("label","Set\u0103rile contului")("icon","assets/icons/settings.svg"),l(),p("label","Deconecteaz\u0103-te")("icon","assets/icons/logout.svg"))},dependencies:[Me,yn,J],styles:[".account-card[_ngcontent-%COMP%]{background:#e0caff;max-width:1000px;margin:32px auto;box-shadow:0 4px 16px #0000001a;font-family:Roboto Mono,monospace;border:3px solid black}.account-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:32px;gap:32px}.account-info[_ngcontent-%COMP%]{flex:1;margin-left:32px;font-size:16px}.account-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px 78px;padding:32px}.card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#a08ad2;padding:20px 32px;width:100%;gap:20px;justify-content:space-between;box-sizing:border-box;border-top:3px solid black;border-bottom:3px solid black;font-family:Roboto Mono,monospace}.info[_ngcontent-%COMP%]{flex:1}.full-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:.25rem;margin-bottom:.5rem}.full-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.details-block[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:12px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.categories[_ngcontent-%COMP%], .experience[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-size:.95rem}.label[_ngcontent-%COMP%]{font-weight:700;margin-right:6px}.tag[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:160px;aspect-ratio:1/1}.avatar[_ngcontent-%COMP%]{position:relative;width:160px;height:160px;overflow:hidden}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;display:block}.rating-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;display:inline-flex;align-items:center;gap:.3em;background:#fff;padding:.2em .5em;border-radius:.6em;font-size:1.2em;box-shadow:0 1px 4px #0000001a}.rating-badge[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1em;height:1em}.upload-btn[_ngcontent-%COMP%]{position:absolute;bottom:4px;right:4px;background:#fff;border-radius:50%;padding:6px;cursor:pointer;font-size:18px}.upload-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.upload-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}"]})};var Ts=(i,e)=>({"rejected-bg":i,"accepted-bg":e});function ks(i,e){if(i&1&&(s(0,"p")(1,"strong"),c(2,"Adres\u0103:"),o(),c(3),o()),i&2){let t=u();l(3),E(" ",t.request.senderContactInfo==null?null:t.request.senderContactInfo.address," ")}}function Is(i,e){if(i&1&&(s(0,"p")(1,"strong"),c(2,"Telefon:"),o(),c(3),o()),i&2){let t=u();l(3),E(" ",t.request.senderContactInfo==null?null:t.request.senderContactInfo.phoneNumber," ")}}function As(i,e){i&1&&(s(0,"p",5),c(1,"\xCEn a\u0219teptare..."),o())}function Rs(i,e){if(i&1){let t=S();s(0,"div",6)(1,"button",7),g("click",function(){b(t);let r=u(2);return v(r.acceptRequest())}),c(2," Accept\u0103 "),o(),s(3,"button",8),g("click",function(){b(t);let r=u(2);return v(r.rejectRequest())}),c(4," Respinge "),o()()}}function Fs(i,e){if(i&1&&(s(0,"div"),C(1,As,2,0,"p",4)(2,Rs,5,0,"div",3),o()),i&2){let t=u();l(),p("ngIf",t.userRole==="Client"),l(),p("ngIf",t.userRole==="Specialist")}}function Vs(i,e){if(i&1){let t=S();s(0,"div",6)(1,"button",9),g("click",function(){b(t);let r=u();return v(r.triggerOffer())}),c(2,"F\u0103 o ofert\u0103"),o()()}}var Sn=class i{constructor(e,t){this.authService=e;this.requestService=t}request={id:"",senderUserId:"",receiverUserId:"",requestedStartDate:new Date,description:"",status:"Pending",senderContactInfo:{phoneNumber:"",address:""}};userRole="";requestAccepted=new k;requestRejected=new k;makeOffer=new k;ngOnInit(){this.userRole=this.authService.getUserRole()}acceptRequest(){this.requestAccepted.emit(this.request.id)}rejectRequest(){this.requestRejected.emit(this.request.id)}showOfferButton(){return this.request.status==="Accepted"&&this.userRole==="Specialist"}triggerOffer(){this.makeOffer.emit(this.request.id)}static \u0275fac=function(t){return new(t||i)(h(I),h(He))};static \u0275cmp=y({type:i,selectors:[["app-request-message"]],inputs:{request:"request"},outputs:{requestAccepted:"requestAccepted",requestRejected:"requestRejected",makeOffer:"makeOffer"},decls:17,vars:13,consts:[[1,"request-wrapper"],[1,"request-summary",3,"ngClass"],[4,"ngIf"],["class","action-buttons",4,"ngIf"],["class","status-button",4,"ngIf"],[1,"status-button"],[1,"action-buttons"],[1,"accept-btn",3,"click"],[1,"reject-btn",3,"click"],[1,"offer-btn",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"h3"),c(3,"Solicitare"),o(),s(4,"p")(5,"strong"),c(6,"Data \u0219i ora:"),o(),c(7),Z(8,"date"),o(),s(9,"p")(10,"strong"),c(11,"Descriere:"),o(),c(12),o(),C(13,ks,4,1,"p",2)(14,Is,4,1,"p",2)(15,Fs,3,2,"div",2)(16,Vs,3,0,"div",3),o()()),t&2&&(l(),p("ngClass",tt(10,Ts,n.request.status==="Rejected",n.request.status==="Accepted"||n.request.status==="Completed")),l(6),E(" ",ve(8,7,n.request.requestedStartDate,"short"),""),l(5),E(" ",n.request.description,""),l(),p("ngIf",n.request.senderContactInfo==null?null:n.request.senderContactInfo.address),l(),p("ngIf",n.request.senderContactInfo==null?null:n.request.senderContactInfo.phoneNumber),l(),p("ngIf",n.request.status==="Pending"),l(),p("ngIf",n.showOfferButton()))},dependencies:[Me,z,ue],styles:['@charset "UTF-8";.request-summary[_ngcontent-%COMP%]{max-width:300px;margin:8px auto;padding:12px;border:2px solid black;background-color:#f8faff;font-size:.8rem;line-height:1.4;border-radius:6px;font-family:Roboto Mono,monospace}.request-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.request-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1rem;text-align:center}.request-status[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;padding:.25rem .5rem;font-weight:700;border-radius:4px}.status-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.status-pending[_ngcontent-%COMP%]{background-color:#fff5c4;color:#856404}.status-accepted[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-rejected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.accepted-bg[_ngcontent-%COMP%]{background-color:#d4edda;border:4px solid #155724}.rejected-bg[_ngcontent-%COMP%]{background-color:#f8d7da;border:4px solid #721c24}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .offer-btn[_ngcontent-%COMP%]{background-color:#d4e2ed;color:#001b3f}.action-buttons[_ngcontent-%COMP%]   .offer-btn[_ngcontent-%COMP%]:hover{background-color:#78a2c4;box-shadow:0 2px 6px #0003}']})};var Mn=class i{constructor(e){this.router=e}replyForm={startDate:new Date,endDate:new Date,price:0};formSubmit=new k;close=new k;submitReply(){this.formSubmit.emit(this.replyForm)}closeForm(){this.close.emit()}static \u0275fac=function(t){return new(t||i)(h(Y))};static \u0275cmp=y({type:i,selectors:[["app-reply-form"]],inputs:{replyForm:"replyForm"},outputs:{formSubmit:"formSubmit",close:"close"},decls:19,vars:3,consts:[[1,"request-form-wrapper"],[1,"close-button",3,"click"],[1,"request-form"],[1,"form-row"],["type","datetime-local","name","startDate","required","",3,"ngModelChange","ngModel"],["type","datetime-local","name","endDate","required","",3,"ngModelChange","ngModel"],["type","number","name","price","step","0.01","required","",3,"ngModelChange","ngModel"],[1,"center-button"],["type","submit",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"button",1),g("click",function(){return n.closeForm()}),c(2,"\xD7"),o(),s(3,"h2"),c(4,"Trimite o ofert\u0103"),o(),s(5,"form",2)(6,"div",3)(7,"label"),c(8," De la data de: "),s(9,"input",4),N("ngModelChange",function(a){return V(n.replyForm.startDate,a)||(n.replyForm.startDate=a),a}),o()(),s(10,"label"),c(11," P\xE2n\u0103 la data de: "),s(12,"input",5),N("ngModelChange",function(a){return V(n.replyForm.endDate,a)||(n.replyForm.endDate=a),a}),o()()(),s(13,"label"),c(14," Pre\u021B: "),s(15,"input",6),N("ngModelChange",function(a){return V(n.replyForm.price,a)||(n.replyForm.price=a),a}),o()(),s(16,"div",7)(17,"button",8),g("click",function(){return n.submitReply()}),c(18,"Trimite oferta"),o()()()()),t&2&&(l(9),F("ngModel",n.replyForm.startDate),l(3),F("ngModel",n.replyForm.endDate),l(3),F("ngModel",n.replyForm.price))},dependencies:[U,ge,ie,Vt,re,me,Ve,ae,he],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.request-form-wrapper[_ngcontent-%COMP%]{position:relative;max-width:600px;margin:2rem auto;background-color:#e8d9ff;border:2px solid #000;padding:2rem;font-family:Roboto Mono,monospace}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1.5rem}.request-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;font-size:.95rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;font-family:Roboto Mono,monospace;font-size:.9rem}.request-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #999;border-radius:4px;font-family:Roboto Mono,monospace;background-color:#fff}.request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.center-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem;padding:.5rem 1rem;border:2px solid #000;border-radius:6px;background-color:#c9b7ff;font-weight:700;cursor:pointer;display:flex;justify-content:center;font-family:Roboto Mono,monospace}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#dcdcdc;color:#888;cursor:not-allowed}"]})};var Ns=(i,e)=>({"rejected-bg":i,"accepted-bg":e});function Us(i,e){i&1&&(s(0,"p"),c(1,"\xCEn a\u0219teptare..."),o())}function qs(i,e){if(i&1){let t=S();s(0,"div",5)(1,"button",6),g("click",function(){b(t);let r=u(2);return v(r.acceptReply())}),c(2," Accept\u0103 "),o(),s(3,"button",7),g("click",function(){b(t);let r=u(2);return v(r.rejectReply())}),c(4," Respinge "),o()()}}function zs(i,e){if(i&1&&(s(0,"div"),C(1,Us,2,0,"p",3)(2,qs,5,0,"div",4),o()),i&2){let t=u();l(),p("ngIf",t.userRole==="Specialist"),l(),p("ngIf",t.userRole==="Client")}}var En=class i{constructor(e){this.authService=e}reply={id:"",startDate:new Date,endDate:new Date,price:0,status:"Pending"};userRole="";requestId="";replyAccepted=new k;replyRejected=new k;ngOnInit(){this.userRole=this.authService.getUserRole()}acceptReply(){this.replyAccepted.emit({requestId:this.requestId,replyId:this.reply.id})}rejectReply(){this.replyRejected.emit({requestId:this.requestId,replyId:this.reply.id})}static \u0275fac=function(t){return new(t||i)(h(I))};static \u0275cmp=y({type:i,selectors:[["app-reply-message"]],inputs:{reply:"reply",requestId:"requestId"},outputs:{replyAccepted:"replyAccepted",replyRejected:"replyRejected"},decls:22,vars:23,consts:[[1,"request-wrapper"],[1,"request-summary",3,"ngClass"],[1,"big-price"],[4,"ngIf"],["class","action-buttons",4,"ngIf"],[1,"action-buttons"],[1,"accept-btn",3,"click"],[1,"reject-btn",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"h3"),c(3,"Ofert\u0103"),o(),s(4,"p")(5,"strong"),c(6,"Data:"),o(),c(7),Z(8,"date"),o(),s(9,"p")(10,"strong"),c(11,"De la ora:"),o(),c(12),Z(13,"date"),s(14,"strong"),c(15,"P\xE2n\u0103 la ora:"),o(),c(16),Z(17,"date"),o(),s(18,"div",2),c(19),Z(20,"currency"),o(),C(21,zs,3,2,"div",3),o()()),t&2&&(l(),p("ngClass",tt(20,Ns,n.reply.status==="Rejected",n.reply.status==="Accepted")),l(6),E(" ",ve(8,6,n.reply.startDate,"dd MMMM yyyy"),""),l(5),E(" ",ve(13,9,n.reply.startDate,"HH:mm")," \xA0\u2014\xA0 "),l(4),E(" ",ve(17,12,n.reply.endDate,"HH:mm")," "),l(3),E(" ",Hi(20,15,n.reply.price,"RON","symbol","1.2-2")," "),l(2),p("ngIf",n.reply.status==="Pending"))},dependencies:[Me,z,Xi,ue],styles:['@charset "UTF-8";.request-summary[_ngcontent-%COMP%]{max-width:300px;margin:8px auto;padding:12px;border:2px solid black;background-color:#f8faff;font-size:.8rem;line-height:1.4;border-radius:6px;font-family:Roboto Mono,monospace}.request-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.request-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1rem;text-align:center}.request-status[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;padding:.25rem .5rem;font-weight:700;border-radius:4px}.status-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.status-pending[_ngcontent-%COMP%]{background-color:#fff5c4;color:#856404}.status-accepted[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-rejected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.accepted-bg[_ngcontent-%COMP%]{background-color:#d4edda;border:4px solid #155724}.rejected-bg[_ngcontent-%COMP%]{background-color:#f8d7da;border:4px solid #721c24}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.big-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1a202c;margin-top:.5rem;margin-bottom:.5rem}']})};var js=()=>[1,2,3,4,5];function Bs(i,e){if(i&1){let t=S();H(0),s(1,"img",11),g("click",function(){let r=b(t).index,a=u();return v(a.reviewForm.rating=r+1)}),o(),G()}if(i&2){let t=e.index,n=u();l(),p("src",t<n.reviewForm.rating?"assets/icons/star-filled.svg":"assets/icons/star.svg",Se)}}var Dn=class i{reviewForm={receiverUserId:"",rating:5,content:""};formSubmit=new k;close=new k;submitReview(){this.formSubmit.emit(this.reviewForm)}closeForm(){this.close.emit()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-review-form"]],inputs:{reviewForm:"reviewForm"},outputs:{formSubmit:"formSubmit",close:"close"},decls:19,vars:3,consts:[["form","ngForm"],[1,"overlay"],[1,"request-form-wrapper"],[1,"close-button",3,"click"],[1,"request-form",3,"ngSubmit"],[1,"rating-container"],[1,"star-rating"],[4,"ngFor","ngForOf"],["name","comment","rows","4","required","",3,"ngModelChange","ngModel"],[1,"center-button"],["type","submit"],["alt","Star",1,"star",3,"click","src"]],template:function(t,n){if(t&1){let r=S();s(0,"div",1)(1,"div",2)(2,"button",3),g("click",function(){return b(r),v(n.closeForm())}),c(3,"\xD7"),o(),s(4,"h2"),c(5,"Trimite o recenzie"),o(),s(6,"form",4,0),g("ngSubmit",function(){return b(r),v(n.submitReview())}),s(8,"div",5)(9,"span"),c(10,"Not\u0103:"),o(),s(11,"div",6),C(12,Bs,2,1,"ng-container",7),o()(),s(13,"label"),c(14," Comentariu: "),s(15,"textarea",8),N("ngModelChange",function(d){return b(r),V(n.reviewForm.content,d)||(n.reviewForm.content=d),v(d)}),o()(),s(16,"div",9)(17,"button",10),c(18,"Trimite recenzia"),o()()()()()}t&2&&(l(12),p("ngForOf",pe(2,js)),l(3),F("ngModel",n.reviewForm.content))},dependencies:[U,ge,ie,re,me,Ve,ae,he,J],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.request-form-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;margin:60px auto;background-color:#e8d9ff;border:2px solid #000;padding:32px;font-family:Roboto Mono,monospace}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:1.5rem}.request-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;font-size:.95rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;font-family:Roboto Mono,monospace;font-size:.9rem}.request-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #999;border-radius:4px;font-family:Roboto Mono,monospace;background-color:#fff}.request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.center-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem;padding:.5rem 1rem;border:2px solid #000;border-radius:6px;background-color:#c9b7ff;font-weight:700;cursor:pointer;display:flex;justify-content:center;font-family:Roboto Mono,monospace}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#dcdcdc;color:#888;cursor:not-allowed}.rating-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:1rem}.star-rating[_ngcontent-%COMP%]{display:flex;gap:6px}.star[_ngcontent-%COMP%]{width:24px;height:24px;cursor:pointer;transition:transform .15s ease-in-out}.star[_ngcontent-%COMP%]:hover{transform:scale(1.2)}"]})};var $s=(i,e)=>({"bubble-left":i,"bubble-right":e}),Ls=(i,e)=>({left:i,right:e}),Pn=class i{message;currentUserId;get isOwnMessage(){return this.message.senderId===this.currentUserId}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-message-bubble"]],inputs:{message:"message",currentUserId:"currentUserId"},decls:6,vars:13,consts:[[1,"bubble",3,"ngClass"],[1,"bubble-content",3,"ngClass"],[1,"timestamp"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1),c(2),s(3,"div",2),c(4),Z(5,"date"),o()()()),t&2&&(p("ngClass",tt(7,$s,!n.isOwnMessage,n.isOwnMessage)),l(),p("ngClass",tt(10,Ls,!n.isOwnMessage,n.isOwnMessage)),l(),E(" ",n.message.content," "),l(2),W(ve(5,4,n.message.createdAt,"shortTime")))},dependencies:[Me,ue],styles:[".bubble[_ngcontent-%COMP%]{display:flex;width:100%;margin:8px 0}.bubble-left[_ngcontent-%COMP%]{justify-content:flex-start}.bubble-right[_ngcontent-%COMP%]{justify-content:flex-end}.bubble-content[_ngcontent-%COMP%]{display:inline-block;padding:10px 14px;border-radius:12px;font-size:12px;word-wrap:break-word;min-width:80px;max-width:70%;text-align:left}.bubble-content.left[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #514c70;color:#000;border-top-left-radius:4px}.bubble-content.right[_ngcontent-%COMP%]{background-color:#a79ed7;border:1px solid #514c70;color:#000;border-top-right-radius:4px}.bubble-content[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{font-size:10px;opacity:.6;margin-top:4px;text-align:right}"]})};var On=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Reply";addReply(e,t){let n=this.authService.getToken(),r=new M({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/Add/${e}`,t,{headers:r})}updateReply(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update/${e.id}`,e,{headers:n})}acceptReply(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return console.log(t),this.http.patch(`${this.baseUrl}/Accept/${e}`,{},{headers:n})}rejectReply(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Reject/${e}`,{},{headers:n})}cancelReply(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Cancel/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(R(X),R(I))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var Tn=class i{constructor(e,t){this.authService=e;this.http=t}baseUrl="http://localhost:5241/api/Conversation";getExchange(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}getExchanges(){let e=this.authService.getToken(),t=new M({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/GetPage`,{headers:t})}static \u0275fac=function(t){return new(t||i)(R(I),R(X))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var kn=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Message";sendMessage(e,t){let n=this.authService.getToken(),r=new M({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/Add/${e}`,t,{headers:r})}static \u0275fac=function(t){return new(t||i)(R(X),R(I))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var In=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/ServiceTask";getServiceTask(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}updateServiceTask(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update/${e.id}`,e,{headers:n})}completeServiceTask(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Complete/${e}`,{},{headers:n})}cancelServiceTask(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Complete/${e}`,{},{headers:n})}static \u0275fac=function(t){return new(t||i)(R(X),R(I))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var yt=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Review";addReview(e,t){let n=this.authService.getToken(),r=new M({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}task/${e}/confirm/reviews`,t,{headers:r})}getReviews(e,t){let n=this.authService.getToken(),r=new M({Authorization:`Bearer ${n}`}),a=new je().set("page",e).set("pageSize",t);return this.http.get(`${this.baseUrl}/GetPage`,{params:a,headers:r})}getReview(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(R(X),R(I))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var _e=class extends Error{constructor(e,t){let n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}},Je=class extends Error{constructor(e="A timeout occurred."){let t=new.target.prototype;super(e),this.__proto__=t}},se=class extends Error{constructor(e="An abort occurred."){let t=new.target.prototype;super(e),this.__proto__=t}},An=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}},Rn=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}},Fn=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}},Ut=class extends Error{constructor(e){let t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}},Vn=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}};var xt=class{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}},Te=class{get(e,t){return this.send(ee(x({},t),{method:"GET",url:e}))}post(e,t){return this.send(ee(x({},t),{method:"POST",url:e}))}delete(e,t){return this.send(ee(x({},t),{method:"DELETE",url:e}))}getCookieString(e){return""}};var m=function(i){return i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None",i}(m||{});var ke=class{constructor(){}log(e,t){}};ke.instance=new ke;var Js="8.0.7",j=class{static isRequired(e,t){if(e==null)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw new Error(`Unknown ${n} value: ${e}.`)}},B=class i{static get isBrowser(){return!i.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!i.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!i.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}};function Ze(i,e){let t="";return we(i)?(t=`Binary data of length ${i.byteLength}`,e&&(t+=`. Content: '${Zs(i)}'`)):typeof i=="string"&&(t=`String data of length ${i.length}`,e&&(t+=`. Content: '${i}'`)),t}function Zs(i){let e=new Uint8Array(i),t="";return e.forEach(n=>{let r=n<16?"0":"";t+=`0x${r}${n.toString(16)} `}),t.substr(0,t.length-1)}function we(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Un(i,e,t,n,r,a){return T(this,null,function*(){let d={},[f,_]=Ie();d[f]=_,i.log(m.Trace,`(${e} transport) sending data. ${Ze(r,a.logMessageContent)}.`);let D=we(r)?"arraybuffer":"text",A=yield t.post(n,{content:r,headers:x(x({},d),a.headers),responseType:D,timeout:a.timeout,withCredentials:a.withCredentials});i.log(m.Trace,`(${e} transport) request complete. Response status: ${A.statusCode}.`)})}function Ur(i){return i===void 0?new ot(m.Information):i===null?ke.instance:i.log!==void 0?i:new ot(i)}var Nn=class{constructor(e,t){this._subject=e,this._observer=t}dispose(){let e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}},ot=class{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){let n=`[${new Date().toISOString()}] ${m[e]}: ${t}`;switch(e){case m.Critical:case m.Error:this.out.error(n);break;case m.Warning:this.out.warn(n);break;case m.Information:this.out.info(n);break;default:this.out.log(n);break}}}};function Ie(){let i="X-SignalR-User-Agent";return B.isNode&&(i="User-Agent"),[i,Xs(Js,Ys(),ea(),Qs())]}function Xs(i,e,t,n){let r="Microsoft SignalR/",a=i.split(".");return r+=`${a[0]}.${a[1]}`,r+=` (${i}; `,e&&e!==""?r+=`${e}; `:r+="Unknown OS; ",r+=`${t}`,n?r+=`; ${n}`:r+="; Unknown Runtime Version",r+=")",r}function Ys(){if(B.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function Qs(){if(B.isNode)return process.versions.node}function ea(){return B.isNode?"NodeJS":"Browser"}function qn(i){return i.stack?i.stack:i.message?i.message:`${i}`}function qr(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var zn=class extends Te{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||B.isNode){let t=typeof __webpack_require__=="function"?__non_webpack_require__:at;this._jar=new(t("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=t("node-fetch"):this._fetchType=fetch,this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(qr());if(typeof AbortController>"u"){let t=typeof __webpack_require__=="function"?__non_webpack_require__:at;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}send(e){return T(this,null,function*(){if(e.abortSignal&&e.abortSignal.aborted)throw new se;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");let t=new this._abortControllerType,n;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),n=new se});let r=null;if(e.timeout){let _=e.timeout;r=setTimeout(()=>{t.abort(),this._logger.log(m.Warning,"Timeout from HTTP request."),n=new Je},_)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},we(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let a;try{a=yield this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:x({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(_){throw n||(this._logger.log(m.Warning,`Error from HTTP request. ${_}.`),_)}finally{r&&clearTimeout(r),e.abortSignal&&(e.abortSignal.onabort=null)}if(!a.ok){let _=yield zr(a,"text");throw new _e(_||a.statusText,a.status)}let f=yield zr(a,e.responseType);return new xt(a.status,a.statusText,f)})}getCookieString(e){let t="";return B.isNode&&this._jar&&this._jar.getCookies(e,(n,r)=>t=r.join("; ")),t}};function zr(i,e){let t;switch(e){case"arraybuffer":t=i.arrayBuffer();break;case"text":t=i.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:t=i.text();break}return t}var jn=class extends Te{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new se):e.method?e.url?new Promise((t,n)=>{let r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(we(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let a=e.headers;a&&Object.keys(a).forEach(d=>{r.setRequestHeader(d,a[d])}),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),n(new se)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?t(new xt(r.status,r.statusText,r.response||r.responseText)):n(new _e(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(m.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),n(new _e(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(m.Warning,"Timeout from HTTP request."),n(new Je)},r.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var Bn=class extends Te{constructor(e){if(super(),typeof fetch<"u"||B.isNode)this._httpClient=new zn(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new jn(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new se):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}};var be=class i{static write(e){return`${e}${i.RecordSeparator}`}static parse(e){if(e[e.length-1]!==i.RecordSeparator)throw new Error("Message is incomplete.");let t=e.split(i.RecordSeparator);return t.pop(),t}};be.RecordSeparatorCode=30;be.RecordSeparator=String.fromCharCode(be.RecordSeparatorCode);var $n=class{writeHandshakeRequest(e){return be.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(we(e)){let f=new Uint8Array(e),_=f.indexOf(be.RecordSeparatorCode);if(_===-1)throw new Error("Message is incomplete.");let D=_+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(f.slice(0,D))),n=f.byteLength>D?f.slice(D).buffer:null}else{let f=e,_=f.indexOf(be.RecordSeparator);if(_===-1)throw new Error("Message is incomplete.");let D=_+1;t=f.substring(0,D),n=f.length>D?f.substring(D):null}let r=be.parse(t),a=JSON.parse(r[0]);if(a.type)throw new Error("Expected a handshake response from the server.");return[n,a]}};var O=function(i){return i[i.Invocation=1]="Invocation",i[i.StreamItem=2]="StreamItem",i[i.Completion=3]="Completion",i[i.StreamInvocation=4]="StreamInvocation",i[i.CancelInvocation=5]="CancelInvocation",i[i.Ping=6]="Ping",i[i.Close=7]="Close",i[i.Ack=8]="Ack",i[i.Sequence=9]="Sequence",i}(O||{});var Ln=class{constructor(){this.observers=[]}next(e){for(let t of this.observers)t.next(e)}error(e){for(let t of this.observers)t.error&&t.error(e)}complete(){for(let e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new Nn(this,e)}};var Wn=class{constructor(e,t,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=n}_send(e){return T(this,null,function*(){let t=this._protocol.writeMessage(e),n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let r=()=>{},a=()=>{};we(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise((d,f)=>{r=d,a=f})),this._messages.push(new Ai(t,this._totalMessageCount,r,a))}try{this._reconnectInProgress||(yield this._connection.send(t))}catch{this._disconnected()}yield n})}_ack(e){let t=-1;for(let n=0;n<this._messages.length;n++){let r=this._messages[n];if(r._id<=e.sequenceId)t=n,we(r._message)?this._bufferedByteCount-=r._message.byteLength:this._bufferedByteCount-=r._message.length,r._resolver();else if(this._bufferedByteCount<this._bufferSize)r._resolver();else break}t!==-1&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==O.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;let t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){return T(this,null,function*(){let e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;yield this._connection.send(this._protocol.writeMessage({type:O.Sequence,sequenceId:e}));let t=this._messages;for(let n of t)yield this._connection.send(n._message);this._reconnectInProgress=!1})}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(let t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case O.Invocation:case O.StreamItem:case O.Completion:case O.StreamInvocation:case O.CancelInvocation:return!0;case O.Close:case O.Sequence:case O.Ping:case O.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(()=>T(this,null,function*(){try{this._reconnectInProgress||(yield this._connection.send(this._protocol.writeMessage({type:O.Ack,sequenceId:this._latestReceivedSequenceId})))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}},Ai=class{constructor(e,t,n,r){this._message=e,this._id=t,this._resolver=n,this._rejector=r}};var ta=30*1e3,na=15*1e3,ia=1e5,K=function(i){return i.Disconnected="Disconnected",i.Connecting="Connecting",i.Connected="Connected",i.Disconnecting="Disconnecting",i.Reconnecting="Reconnecting",i}(K||{}),Hn=class i{static create(e,t,n,r,a,d,f){return new i(e,t,n,r,a,d,f)}constructor(e,t,n,r,a,d,f){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(m.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},j.isRequired(e,"connection"),j.isRequired(t,"logger"),j.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=a??ta,this.keepAliveIntervalInMilliseconds=d??na,this._statefulReconnectBufferSize=f??ia,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new $n,this.connection.onreceive=_=>this._processIncomingData(_),this.connection.onclose=_=>this._connectionClosed(_),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=K.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:O.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==K.Disconnected&&this._connectionState!==K.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return T(this,null,function*(){if(this._connectionState!==K.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=K.Connecting,this._logger.log(m.Debug,"Starting HubConnection.");try{yield this._startInternal(),B.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=K.Connected,this._connectionStarted=!0,this._logger.log(m.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=K.Disconnected,this._logger.log(m.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})}_startInternal(){return T(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let e=new Promise((t,n)=>{this._handshakeResolver=t,this._handshakeRejecter=n});yield this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);let n={protocol:this._protocol.name,version:t};if(this._logger.log(m.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(m.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Wn(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(t){throw this._logger.log(m.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(t),t}})}stop(){return T(this,null,function*(){let e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield e}catch{}})}_stopInternal(e){if(this._connectionState===K.Disconnected)return this._logger.log(m.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===K.Disconnecting)return this._logger.log(m.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;let t=this._connectionState;return this._connectionState=K.Disconnecting,this._logger.log(m.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(m.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===K.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new se("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}_sendCloseMessage(){return T(this,null,function*(){try{yield this._sendWithProtocol(this._createCloseMessage())}catch{}})}stream(e,...t){let[n,r]=this._replaceStreamingParams(t),a=this._createStreamInvocation(e,t,r),d,f=new Ln;return f.cancelCallback=()=>{let _=this._createCancelInvocation(a.invocationId);return delete this._callbacks[a.invocationId],d.then(()=>this._sendWithProtocol(_))},this._callbacks[a.invocationId]=(_,D)=>{if(D){f.error(D);return}else _&&(_.type===O.Completion?_.error?f.error(new Error(_.error)):f.complete():f.next(_.item))},d=this._sendWithProtocol(a).catch(_=>{f.error(_),delete this._callbacks[a.invocationId]}),this._launchStreams(n,d),f}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){let[n,r]=this._replaceStreamingParams(t),a=this._sendWithProtocol(this._createInvocation(e,t,!0,r));return this._launchStreams(n,a),a}invoke(e,...t){let[n,r]=this._replaceStreamingParams(t),a=this._createInvocation(e,t,!1,r);return new Promise((f,_)=>{this._callbacks[a.invocationId]=(A,Ae)=>{if(Ae){_(Ae);return}else A&&(A.type===O.Completion?A.error?_(new Error(A.error)):f(A.result):_(new Error(`Unexpected message type: ${A.type}`)))};let D=this._sendWithProtocol(a).catch(A=>{_(A),delete this._callbacks[a.invocationId]});this._launchStreams(n,D)})}on(e,t){!e||!t||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(t)===-1&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();let n=this._methods[e];if(n)if(t){let r=n.indexOf(t);r!==-1&&(n.splice(r,1),n.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){let t=this._protocol.parseMessages(e,this._logger);for(let n of t)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(n)))switch(n.type){case O.Invocation:this._invokeClientMethod(n).catch(r=>{this._logger.log(m.Error,`Invoke client method threw error: ${qn(r)}`)});break;case O.StreamItem:case O.Completion:{let r=this._callbacks[n.invocationId];if(r){n.type===O.Completion&&delete this._callbacks[n.invocationId];try{r(n)}catch(a){this._logger.log(m.Error,`Stream callback threw error: ${qn(a)}`)}}break}case O.Ping:break;case O.Close:{this._logger.log(m.Information,"Close message received from server.");let r=n.error?new Error("Server returned an error on close: "+n.error):void 0;n.allowReconnect===!0?this.connection.stop(r):this._stopPromise=this._stopInternal(r);break}case O.Ack:this._messageBuffer&&this._messageBuffer._ack(n);break;case O.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(n);break;default:this._logger.log(m.Warning,`Invalid message type: ${n.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(r){let a="Error parsing handshake response: "+r;this._logger.log(m.Error,a);let d=new Error(a);throw this._handshakeRejecter(d),d}if(t.error){let r="Server returned handshake error: "+t.error;this._logger.log(m.Error,r);let a=new Error(r);throw this._handshakeRejecter(a),a}else this._logger.log(m.Debug,"Server handshake complete.");return this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(()=>T(this,null,function*(){if(this._connectionState===K.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(e){return T(this,null,function*(){let t=e.target.toLowerCase(),n=this._methods[t];if(!n){this._logger.log(m.Warning,`No client method with the name '${t}' found.`),e.invocationId&&(this._logger.log(m.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}let r=n.slice(),a=!!e.invocationId,d,f,_;for(let D of r)try{let A=d;d=yield D.apply(this,e.arguments),a&&d&&A&&(this._logger.log(m.Error,`Multiple results provided for '${t}'. Sending error to server.`),_=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),f=void 0}catch(A){f=A,this._logger.log(m.Error,`A callback for the method '${t}' threw error '${A}'.`)}_?yield this._sendWithProtocol(_):a?(f?_=this._createCompletionMessage(e.invocationId,`${f}`,null):d!==void 0?_=this._createCompletionMessage(e.invocationId,null,d):(this._logger.log(m.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),_=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(_)):d&&this._logger.log(m.Error,`Result given for '${t}' method but server is not expecting a result.`)})}_connectionClosed(e){this._logger.log(m.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new se("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===K.Disconnecting?this._completeClose(e):this._connectionState===K.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===K.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=K.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),B.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(m.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}_reconnect(e){return T(this,null,function*(){let t=Date.now(),n=0,r=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),a=this._getNextRetryDelay(n++,0,r);if(a===null){this._logger.log(m.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=K.Reconnecting,e?this._logger.log(m.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(m.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(d=>d.apply(this,[e]))}catch(d){this._logger.log(m.Error,`An onreconnecting callback called with error '${e}' threw error '${d}'.`)}if(this._connectionState!==K.Reconnecting){this._logger.log(m.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;a!==null;){if(this._logger.log(m.Information,`Reconnect attempt number ${n} will start in ${a} ms.`),yield new Promise(d=>{this._reconnectDelayHandle=setTimeout(d,a)}),this._reconnectDelayHandle=void 0,this._connectionState!==K.Reconnecting){this._logger.log(m.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=K.Connected,this._logger.log(m.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(d=>d.apply(this,[this.connection.connectionId]))}catch(d){this._logger.log(m.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${d}'.`)}return}catch(d){if(this._logger.log(m.Information,`Reconnect attempt failed because of error '${d}'.`),this._connectionState!==K.Reconnecting){this._logger.log(m.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===K.Disconnecting&&this._completeClose();return}r=d instanceof Error?d:new Error(d.toString()),a=this._getNextRetryDelay(n++,Date.now()-t,r)}}this._logger.log(m.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(r){return this._logger.log(m.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${r}'.`),null}}_cancelCallbacksWithError(e){let t=this._callbacks;this._callbacks={},Object.keys(t).forEach(n=>{let r=t[n];try{r(null,e)}catch(a){this._logger.log(m.Error,`Stream 'error' callback called with '${e}' threw error: ${qn(a)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,r){if(n)return r.length!==0?{arguments:t,streamIds:r,target:e,type:O.Invocation}:{arguments:t,target:e,type:O.Invocation};{let a=this._invocationId;return this._invocationId++,r.length!==0?{arguments:t,invocationId:a.toString(),streamIds:r,target:e,type:O.Invocation}:{arguments:t,invocationId:a.toString(),target:e,type:O.Invocation}}}_launchStreams(e,t){if(e.length!==0){t||(t=Promise.resolve());for(let n in e)e[n].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n)))},error:r=>{let a;r instanceof Error?a=r.message:r&&r.toString?a=r.toString():a="Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n,a)))},next:r=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(n,r)))}})}}_replaceStreamingParams(e){let t=[],n=[];for(let r=0;r<e.length;r++){let a=e[r];if(this._isObservable(a)){let d=this._invocationId;this._invocationId++,t[d]=a,n.push(d.toString()),e.splice(r,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,t,n){let r=this._invocationId;return this._invocationId++,n.length!==0?{arguments:t,invocationId:r.toString(),streamIds:n,target:e,type:O.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:O.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:O.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:O.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:O.Completion}:{invocationId:e,result:n,type:O.Completion}}_createCloseMessage(){return{type:O.Close}}};var ra=[0,2e3,1e4,3e4,null],qt=class{constructor(e){this._retryDelays=e!==void 0?[...e,null]:ra}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}};var st=(()=>{class i{}return i.Authorization="Authorization",i.Cookie="Cookie",i})();var Gn=class extends Te{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}send(e){return T(this,null,function*(){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(e);let n=yield this._innerClient.send(e);return t&&n.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(e),yield this._innerClient.send(e)):n})}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[st.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[st.Authorization]&&delete e.headers[st.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}};var ne=function(i){return i[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling",i}(ne||{}),Q=function(i){return i[i.Text=1]="Text",i[i.Binary=2]="Binary",i}(Q||{});var Kn=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var zt=class{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new Kn,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}connect(e,t){return T(this,null,function*(){if(j.isRequired(e,"url"),j.isRequired(t,"transferFormat"),j.isIn(t,Q,"transferFormat"),this._url=e,this._logger.log(m.Trace,"(LongPolling transport) Connecting."),t===Q.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[n,r]=Ie(),a=x({[n]:r},this._options.headers),d={abortSignal:this._pollAbort.signal,headers:a,timeout:1e5,withCredentials:this._options.withCredentials};t===Q.Binary&&(d.responseType="arraybuffer");let f=`${e}&_=${Date.now()}`;this._logger.log(m.Trace,`(LongPolling transport) polling: ${f}.`);let _=yield this._httpClient.get(f,d);_.statusCode!==200?(this._logger.log(m.Error,`(LongPolling transport) Unexpected response code: ${_.statusCode}.`),this._closeError=new _e(_.statusText||"",_.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,d)})}_poll(e,t){return T(this,null,function*(){try{for(;this._running;)try{let n=`${e}&_=${Date.now()}`;this._logger.log(m.Trace,`(LongPolling transport) polling: ${n}.`);let r=yield this._httpClient.get(n,t);r.statusCode===204?(this._logger.log(m.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):r.statusCode!==200?(this._logger.log(m.Error,`(LongPolling transport) Unexpected response code: ${r.statusCode}.`),this._closeError=new _e(r.statusText||"",r.statusCode),this._running=!1):r.content?(this._logger.log(m.Trace,`(LongPolling transport) data received. ${Ze(r.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(r.content)):this._logger.log(m.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(n){this._running?n instanceof Je?this._logger.log(m.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=n,this._running=!1):this._logger.log(m.Trace,`(LongPolling transport) Poll errored after shutdown: ${n.message}`)}}finally{this._logger.log(m.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(e){return T(this,null,function*(){return this._running?Un(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return T(this,null,function*(){this._logger.log(m.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(m.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let e={},[t,n]=Ie();e[t]=n;let r={headers:x(x({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},a;try{yield this._httpClient.delete(this._url,r)}catch(d){a=d}a?a instanceof _e&&(a.statusCode===404?this._logger.log(m.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(m.Trace,`(LongPolling transport) Error sending a DELETE request: ${a}`)):this._logger.log(m.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(m.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(m.Trace,e),this.onclose(this._closeError)}}};var Jn=class{constructor(e,t,n,r){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=r,this.onreceive=null,this.onclose=null}connect(e,t){return T(this,null,function*(){return j.isRequired(e,"url"),j.isRequired(t,"transferFormat"),j.isIn(t,Q,"transferFormat"),this._logger.log(m.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((n,r)=>{let a=!1;if(t!==Q.Text){r(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let d;if(B.isBrowser||B.isWebWorker)d=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{let f=this._httpClient.getCookieString(e),_={};_.Cookie=f;let[D,A]=Ie();_[D]=A,d=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:x(x({},_),this._options.headers)})}try{d.onmessage=f=>{if(this.onreceive)try{this._logger.log(m.Trace,`(SSE transport) data received. ${Ze(f.data,this._options.logMessageContent)}.`),this.onreceive(f.data)}catch(_){this._close(_);return}},d.onerror=f=>{a?this._close():r(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},d.onopen=()=>{this._logger.log(m.Information,`SSE connected to ${this._url}`),this._eventSource=d,a=!0,n()}}catch(f){r(f);return}})})}send(e){return T(this,null,function*(){return this._eventSource?Un(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}};var Zn=class{constructor(e,t,n,r,a,d){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=r,this._webSocketConstructor=a,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=d}connect(e,t){return T(this,null,function*(){j.isRequired(e,"url"),j.isRequired(t,"transferFormat"),j.isIn(t,Q,"transferFormat"),this._logger.log(m.Trace,"(WebSockets transport) Connecting.");let n;return this._accessTokenFactory&&(n=yield this._accessTokenFactory()),new Promise((r,a)=>{e=e.replace(/^http/,"ws");let d,f=this._httpClient.getCookieString(e),_=!1;if(B.isNode||B.isReactNative){let D={},[A,Ae]=Ie();D[A]=Ae,n&&(D[st.Authorization]=`Bearer ${n}`),f&&(D[st.Cookie]=f),d=new this._webSocketConstructor(e,void 0,{headers:x(x({},D),this._headers)})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);d||(d=new this._webSocketConstructor(e)),t===Q.Binary&&(d.binaryType="arraybuffer"),d.onopen=D=>{this._logger.log(m.Information,`WebSocket connected to ${e}.`),this._webSocket=d,_=!0,r()},d.onerror=D=>{let A=null;typeof ErrorEvent<"u"&&D instanceof ErrorEvent?A=D.error:A="There was an error with the transport",this._logger.log(m.Information,`(WebSockets transport) ${A}.`)},d.onmessage=D=>{if(this._logger.log(m.Trace,`(WebSockets transport) data received. ${Ze(D.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(D.data)}catch(A){this._close(A);return}},d.onclose=D=>{if(_)this._close(D);else{let A=null;typeof ErrorEvent<"u"&&D instanceof ErrorEvent?A=D.error:A="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",a(new Error(A))}}})})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(m.Trace,`(WebSockets transport) sending data. ${Ze(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(m.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}};var jr=100,Xn=class{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,j.isRequired(e,"url"),this._logger=Ur(t.logger),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=t.logMessageContent===void 0?!1:t.logMessageContent,typeof t.withCredentials=="boolean"||t.withCredentials===void 0)t.withCredentials=t.withCredentials===void 0?!0:t.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.timeout=t.timeout===void 0?100*1e3:t.timeout;let n=null,r=null;if(B.isNode&&typeof at<"u"){let a=typeof __webpack_require__=="function"?__non_webpack_require__:at;n=a("ws"),r=a("eventsource")}!B.isNode&&typeof WebSocket<"u"&&!t.WebSocket?t.WebSocket=WebSocket:B.isNode&&!t.WebSocket&&n&&(t.WebSocket=n),!B.isNode&&typeof EventSource<"u"&&!t.EventSource?t.EventSource=EventSource:B.isNode&&!t.EventSource&&typeof r<"u"&&(t.EventSource=r),this._httpClient=new Gn(t.httpClient||new Bn(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}start(e){return T(this,null,function*(){if(e=e||Q.Binary,j.isIn(e,Q,"transferFormat"),this._logger.log(m.Debug,`Starting connection with transfer format '${Q[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(m.Error,t),yield this._stopPromise,Promise.reject(new se(t))}else if(this._connectionState!=="Connected"){let t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(m.Error,t),Promise.reject(new se(t))}this._connectionStarted=!0})}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Ri(this.transport)),this._sendQueue.send(e))}stop(e){return T(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(m.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(m.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),yield this._stopInternal(e),yield this._stopPromise})}_stopInternal(e){return T(this,null,function*(){this._stopError=e;try{yield this._startInternalPromise}catch{}if(this.transport){try{yield this.transport.stop()}catch(t){this._logger.log(m.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(m.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(e){return T(this,null,function*(){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===ne.WebSockets)this.transport=this._constructTransport(ne.WebSockets),yield this._startTransport(t,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let n=null,r=0;do{if(n=yield this._getNegotiationResponse(t),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new se("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){let a=n.accessToken;this._accessTokenFactory=()=>a,this._httpClient._accessToken=a,this._httpClient._accessTokenFactory=void 0}r++}while(n.url&&r<jr);if(r===jr&&n.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(t,this._options.transport,n,e)}this.transport instanceof zt&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(m.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(n){return this._logger.log(m.Error,"Failed to start the connection: "+n),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(n)}})}_getNegotiationResponse(e){return T(this,null,function*(){let t={},[n,r]=Ie();t[n]=r;let a=this._resolveNegotiateUrl(e);this._logger.log(m.Debug,`Sending negotiation request: ${a}.`);try{let d=yield this._httpClient.post(a,{content:"",headers:x(x({},t),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(d.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${d.statusCode}'`));let f=JSON.parse(d.content);return(!f.negotiateVersion||f.negotiateVersion<1)&&(f.connectionToken=f.connectionId),f.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Ut("Client didn't negotiate Stateful Reconnect but the server did.")):f}catch(d){let f="Failed to complete negotiation with the server: "+d;return d instanceof _e&&d.statusCode===404&&(f=f+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(m.Error,f),Promise.reject(new Ut(f))}})}_createConnectUrl(e,t){return t?e+(e.indexOf("?")===-1?"?":"&")+`id=${t}`:e}_createTransport(e,t,n,r){return T(this,null,function*(){let a=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t)){this._logger.log(m.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,yield this._startTransport(a,r),this.connectionId=n.connectionId;return}let d=[],f=n.availableTransports||[],_=n;for(let D of f){let A=this._resolveTransportOrError(D,t,r,_?.useStatefulReconnect===!0);if(A instanceof Error)d.push(`${D.transport} failed:`),d.push(A);else if(this._isITransport(A)){if(this.transport=A,!_){try{_=yield this._getNegotiationResponse(e)}catch(Ae){return Promise.reject(Ae)}a=this._createConnectUrl(e,_.connectionToken)}try{yield this._startTransport(a,r),this.connectionId=_.connectionId;return}catch(Ae){if(this._logger.log(m.Error,`Failed to start the transport '${D.transport}': ${Ae}`),_=void 0,d.push(new Fn(`${D.transport} failed: ${Ae}`,ne[D.transport])),this._connectionState!=="Connecting"){let Vi="Failed to select transport before stop() was called.";return this._logger.log(m.Debug,Vi),Promise.reject(new se(Vi))}}}}return d.length>0?Promise.reject(new Vn(`Unable to connect to the server with any of the available transports. ${d.join(" ")}`,d)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(e){switch(e){case ne.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Zn(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case ne.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Jn(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case ne.LongPolling:return new zt(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=n=>T(this,null,function*(){let r=!1;if(this.features.reconnect)try{this.features.disconnected(),yield this.transport.connect(e,t),yield this.features.resend()}catch{r=!0}else{this._stopConnection(n);return}r&&this._stopConnection(n)}):this.transport.onclose=n=>this._stopConnection(n),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n,r){let a=ne[e.transport];if(a==null)return this._logger.log(m.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(oa(t,a))if(e.transferFormats.map(f=>Q[f]).indexOf(n)>=0){if(a===ne.WebSockets&&!this._options.WebSocket||a===ne.ServerSentEvents&&!this._options.EventSource)return this._logger.log(m.Debug,`Skipping transport '${ne[a]}' because it is not supported in your environment.'`),new An(`'${ne[a]}' is not supported in your environment.`,a);this._logger.log(m.Debug,`Selecting transport '${ne[a]}'.`);try{return this.features.reconnect=a===ne.WebSockets?r:void 0,this._constructTransport(a)}catch(f){return f}}else return this._logger.log(m.Debug,`Skipping transport '${ne[a]}' because it does not support the requested transfer format '${Q[n]}'.`),new Error(`'${ne[a]}' does not support ${Q[n]}.`);else return this._logger.log(m.Debug,`Skipping transport '${ne[a]}' because it was disabled by the client.`),new Rn(`'${ne[a]}' is disabled by the client.`,a)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(m.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(m.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(m.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(m.Error,`Connection disconnected with error '${e}'.`):this._logger.log(m.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(m.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(m.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!B.isBrowser)throw new Error(`Cannot resolve '${e}'.`);let t=window.document.createElement("a");return t.href=e,this._logger.log(m.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){let t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";let n=new URLSearchParams(t.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?n.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&n.append("useStatefulReconnect","true"),t.search=n.toString(),t.toString()}};function oa(i,e){return!i||(e&i)!==0}var Ri=class i{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new wt,this._transportResult=new wt,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new wt),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}_sendLoop(){return T(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new wt;let e=this._transportResult;this._transportResult=void 0;let t=typeof this._buffer[0]=="string"?this._buffer.join(""):i._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(t),e.resolve()}catch(n){e.reject(n)}}})}static _concatBuffers(e){let t=e.map(a=>a.byteLength).reduce((a,d)=>a+d),n=new Uint8Array(t),r=0;for(let a of e)n.set(new Uint8Array(a),r),r+=a.byteLength;return n.buffer}},wt=class{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}};var sa="json",Yn=class{constructor(){this.name=sa,this.version=2,this.transferFormat=Q.Text}parseMessages(e,t){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];t===null&&(t=ke.instance);let n=be.parse(e),r=[];for(let a of n){let d=JSON.parse(a);if(typeof d.type!="number")throw new Error("Invalid payload.");switch(d.type){case O.Invocation:this._isInvocationMessage(d);break;case O.StreamItem:this._isStreamItemMessage(d);break;case O.Completion:this._isCompletionMessage(d);break;case O.Ping:break;case O.Close:break;case O.Ack:this._isAckMessage(d);break;case O.Sequence:this._isSequenceMessage(d);break;default:t.log(m.Information,"Unknown message type '"+d.type+"' ignored.");continue}r.push(d)}return r}writeMessage(e){return be.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if(typeof e!="string"||e==="")throw new Error(t)}};var aa={trace:m.Trace,debug:m.Debug,info:m.Information,information:m.Information,warn:m.Warning,warning:m.Warning,error:m.Error,critical:m.Critical,none:m.None};function ca(i){let e=aa[i.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${i}`)}var jt=class{configureLogging(e){if(j.isRequired(e,"logging"),la(e))this.logger=e;else if(typeof e=="string"){let t=ca(e);this.logger=new ot(t)}else this.logger=new ot(e);return this}withUrl(e,t){return j.isRequired(e,"url"),j.isNotEmpty(e,"url"),this.url=e,typeof t=="object"?this.httpConnectionOptions=x(x({},this.httpConnectionOptions),t):this.httpConnectionOptions=ee(x({},this.httpConnectionOptions),{transport:t}),this}withHubProtocol(e){return j.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new qt(e):this.reconnectPolicy=e:this.reconnectPolicy=new qt,this}withServerTimeout(e){return j.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return j.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){let e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let t=new Xn(this.url,e);return Hn.create(t,this.logger||ke.instance,this.protocol||new Yn,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}};function la(i){return i.log!==void 0}var Qn=class i{hubConnection;connect(e){this.hubConnection=new jt().withUrl("http://localhost:5241/hubs/conversations").build(),this.hubConnection.start().then(()=>{console.log("SignalR connected"),this.hubConnection.invoke("Join",e)}).catch(t=>console.error("SignalR failed to connect:",t))}onNewMessage(e){this.hubConnection.on("ReceiveNewMessage",e)}disconnect(){this.hubConnection.stop()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var ma=i=>["/specialist",i];function ga(i,e){if(i&1){let t=S();s(0,"div",8),g("click",function(){let r=b(t).$implicit,a=u();return v(a.loadExchange(r.userId))}),w(1,"img",9),c(2),o()}if(i&2){let t=e.$implicit,n=u();et("active",t.userId===(n.selectedExchange==null?null:n.selectedExchange.userId)),l(2),E(" ",t.userFullName," ")}}function fa(i,e){if(i&1&&w(0,"app-message-bubble",20),i&2){let t=e.$implicit,n=u(2);p("message",t)("currentUserId",n.userId)}}function ha(i,e){if(i&1){let t=S();s(0,"div",24)(1,"app-reply-form",25),g("formSubmit",function(r){b(t);let a=u(3);return v(a.submitReply(r))})("close",function(){b(t);let r=u(3);return v(r.closeReplyForm())}),o()()}if(i&2){let t=u(3);l(),p("replyForm",t.replyForm)}}function _a(i,e){if(i&1){let t=S();H(0),s(1,"app-review-form",29),g("formSubmit",function(r){b(t);let a=u(5);return v(a.submitReview(r))})("close",function(){b(t);let r=u(5);return v(r.closeReviewForm())}),o(),G()}if(i&2){let t=u(5);l(),p("reviewForm",t.reviewForm)}}function ba(i,e){}function va(i,e){if(i&1&&(H(0),s(1,"div",24),C(2,_a,2,1,"ng-container",28)(3,ba,0,0,"ng-template",null,1,lt),o(),G()),i&2){let t=ce(4),n=u(4);l(2),p("ngIf",n.isReviewFormVisible)("ngIfElse",t)}}function Ca(i,e){if(i&1){let t=S();H(0),s(1,"div",21)(2,"app-reply-message",26),g("replyAccepted",function(r){b(t);let a=u(3);return v(a.acceptReply(r.requestId,r.replyId))})("replyRejected",function(r){b(t);let a=u(3);return v(a.rejectReply(r.requestId,r.replyId))}),o()(),C(3,va,5,2,"ng-container",27),G()}if(i&2){let t=e.$implicit,n=u().$implicit,r=u(2);l(),p("ngClass",r.userRole==="Client"?"message-left":"message-right"),l(),p("reply",t)("requestId",n.id),l(),p("ngIf",r.hasActiveServiceTask(n))}}function ya(i,e){if(i&1){let t=S();H(0),s(1,"div",21)(2,"app-request-message",22),g("requestAccepted",function(){let r=b(t).$implicit,a=u(2);return v(a.acceptRequest(r.id))})("requestRejected",function(){let r=b(t).$implicit,a=u(2);return v(a.rejectRequest(r.id))})("makeOffer",function(r){b(t);let a=u(2);return v(a.openReplyForm(r))}),o(),C(3,ha,2,1,"div",23),o(),C(4,Ca,4,4,"ng-container",15),G()}if(i&2){let t=e.$implicit,n=u(2);l(),p("ngClass",n.userRole==="Client"?"message-right":"message-left"),l(),p("request",t),l(),p("ngIf",n.isReplyFormVisible&&n.selectedRequestId===t.id),l(),p("ngForOf",t.replies)}}function xa(i,e){if(i&1){let t=S();s(0,"div",10)(1,"div",11)(2,"div"),c(3),o(),s(4,"div")(5,"button"),w(6,"img",12),o()()(),s(7,"div",13),C(8,fa,1,2,"app-message-bubble",14)(9,ya,5,4,"ng-container",15),o(),s(10,"div",16)(11,"button")(12,"img",17),g("click",function(){b(t);let r=u();return v(r.openMediaPicker())}),o()(),s(13,"input",18),N("ngModelChange",function(r){b(t);let a=u();return V(a.messageContent,r)||(a.messageContent=r),v(r)}),g("keydown.enter",function(){b(t);let r=u();return v(r.sendMessage(r.messageContent))}),o(),s(14,"button",19),g("click",function(){b(t);let r=u();return v(r.sendMessage(r.messageContent))}),c(15,"\u2192"),o()()()}if(i&2){let t=u();l(3),W(t.selectedExchange.userFullName),l(3),p("routerLink",qe(5,ma,t.selectedExchange.userId)),l(2),p("ngForOf",t.selectedExchange.messages),l(),p("ngForOf",t.selectedExchange.requests),l(4),F("ngModel",t.messageContent)}}function wa(i,e){i&1&&(s(0,"div",30)(1,"p"),c(2,"Nu exist\u0103 conversa\u021Bii disponibile."),o()())}var ei=class i{constructor(e,t,n,r,a,d,f,_,D){this.authService=e;this.requestService=t;this.replyService=n;this.exchangeService=r;this.messageService=a;this.taskService=d;this.reviewService=f;this.route=_;this.signalRService=D}messageContent="";request;userRole;userId;isReplyFormVisible=!1;isReviewFormVisible=!1;replyForm={requestId:"",startDate:new Date,endDate:new Date,price:0};reviewForm={receiverUserId:"",rating:5,content:""};selectedRequestId;exchanges=[];selectedExchange;selectedTaskId;ngOnInit(){this.userRole=this.authService.getUserRole(),this.userId=this.authService.getUserId(),this.exchangeService.getExchanges().subscribe({next:e=>{if(this.exchanges=e.response??[],console.log("Convorbiri \xEEnc\u0103rcate:",this.exchanges),this.exchanges.length>0){let t=this.exchanges[this.exchanges.length-1];this.loadExchange(t.userId)}},error:e=>{console.error("Eroare la \xEEnc\u0103rcarea convorbirilor:",e)}}),this.signalRService.connect(this.userId?.toString()),this.signalRService.onNewMessage(e=>{if(console.log("New message received:",e),this.selectedExchange&&(this.selectedExchange.userId===e.senderId||this.selectedExchange.userId===e.receiverId)){let n=this.selectedExchange.userId===this.userId?e.senderId:e.receiverId;this.loadExchange(n)}else console.log("Message is for another conversation")})}loadExchange(e){console.log("Loading exchange for user:",e),this.exchangeService.getExchange(e).subscribe({next:t=>{this.selectedExchange=t.response},error:t=>{console.error("Failed to reload exchange",t)}})}sendMessage(e){if(console.log("Sending message:",e),!this.selectedExchange){console.error("No exchange selected");return}let t={content:e};this.messageService.sendMessage(this.selectedExchange?.conversationId,t).subscribe({next:n=>{console.log("Mesaj trimis cu succes:",n),this.loadExchange(this.selectedExchange?.userId),this.messageContent=""},error:n=>{console.error("Eroare la trimiterea mesajului:",n)}})}acceptRequest(e){this.requestService.acceptRequest(e).subscribe({next:()=>{console.log("Cererea a fost acceptat\u0103"),this.selectedExchange?.requests.find(n=>n.id===e)&&this.loadExchange(this.selectedExchange?.userId)},error:t=>{console.error("Eroare la acceptare:",t)}})}rejectRequest(e){this.requestService.rejectRequest(e).subscribe({next:()=>{console.log("Cererea a fost respins\u0103"),this.selectedExchange?.requests.find(n=>n.id===e)&&this.loadExchange(this.selectedExchange?.userId)},error:t=>{console.error("Eroare la respingere:",t)}})}openReplyForm(e){this.selectedRequestId=e,this.isReplyFormVisible=!0}closeReplyForm(){this.isReplyFormVisible=!1}submitReply(e){if(!this.selectedRequestId)return;if(!this.selectedRequestId){console.error("No requestId found to submit reply.");return}let t=e;this.replyService.addReply(this.selectedRequestId,t).subscribe({next:()=>{console.log("Reply submitted successfully!"),this.closeReplyForm()},error:n=>{console.error("Eroare la trimiterea ofertei:",n)}})}acceptReply(e,t){this.replyService.acceptReply(t).subscribe({next:()=>{console.log("Reply accepted");let n=this.selectedExchange?.requests.find(r=>r.id===e);if(n){let r=this.authService.getUserId();(n.senderUserId===r?n.receiverUserId:n.senderUserId)&&this.loadExchange(this.selectedExchange?.userId)}},error:n=>console.error("Error accepting reply:",n)})}rejectReply(e,t){this.replyService.rejectReply(t).subscribe({next:()=>{console.log("Reply rejected");let n=this.selectedExchange?.requests.find(r=>r.id===e);if(n){let r=this.authService.getUserId();(n.senderUserId===r?n.receiverUserId:n.senderUserId)&&this.loadExchange(this.selectedExchange?.userId)}},error:n=>{console.error("Error rejecting reply:",n)}})}hasActiveServiceTask(e){let t=e.replies??[],n=t[t.length-1];return!!n?.serviceTask&&n.serviceTask.status!=="Completed"}getLastReplyWithServiceTask(e){let t=e.replies??[],n=t[t.length-1];return n?.serviceTask?n:void 0}completeTask(e,t){this.taskService.completeServiceTask(t).subscribe({next:()=>{console.log("Task marked as completed"),this.selectedTaskId=t;let a=this.selectedExchange?.requests.find(d=>d.replies?.some(f=>f.id===e))?.replies?.find(d=>d.id===e)?.serviceTask;a?this.showReviewForm(a):console.warn("Task not found in local data")},error:n=>{console.error("Error completing task:",n)}})}showReviewForm(e){let t=this.authService.getUserId(),n=t===e.userId||t===e.specialistId,r=e.status==="Completed";n&&r&&this.prepareReviewForm(e)}submitReview(e){if(console.log(this.selectedTaskId),!this.selectedTaskId){console.error("No requestId found to submit reply.");return}console.log(e);let t=e;this.reviewService.addReview(this.selectedTaskId,t).subscribe({next:()=>{console.log("Reply submitted successfully!"),this.closeReplyForm()},error:n=>{console.error("Eroare la trimiterea ofertei:",n)}})}closeReviewForm(){this.isReviewFormVisible=!1,this.reviewForm={receiverUserId:"",rating:5,content:""}}prepareReviewForm(e){let n=this.authService.getUserId()===e.userId?e.specialistId:e.userId;this.reviewForm={receiverUserId:n,rating:0,content:""},this.isReviewFormVisible=!0}cancelTask(e,t){this.taskService.cancelServiceTask(t).subscribe({next:()=>{console.log("Cererea a fost acceptat\u0103")},error:n=>{console.error("Eroare la acceptare:",n)}})}openMediaPicker(){console.log("Open media picker"),this.route.navigate(["/service-payment"])}ngOnDestroy(){this.signalRService.disconnect()}static \u0275fac=function(t){return new(t||i)(h(I),h(He),h(On),h(Tn),h(kn),h(In),h(yt),h(Y),h(Qn))};static \u0275cmp=y({type:i,selectors:[["app-messages"]],decls:9,vars:3,consts:[["noSelection",""],["showTaskOverlay",""],[1,"chat-wrapper"],[1,"chat-container"],[1,"sidebar"],[1,"sidebar-header"],["class","conversation",3,"active","click",4,"ngFor","ngForOf"],["class","chat-area",4,"ngIf","ngIfElse"],[1,"conversation",3,"click"],["src","assets/avatar.svg","alt","avatar"],[1,"chat-area"],[1,"chat-header"],["src","assets/icons/info.svg","alt","specialist_info",3,"routerLink"],[1,"chat-messages"],[3,"message","currentUserId",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"chat-input"],["src","assets/icons/photo_media.svg","alt","photo_media",3,"click"],["type","text","placeholder","Scrie un mesaj aici",3,"ngModelChange","keydown.enter","ngModel"],[1,"send-btn",3,"click"],[3,"message","currentUserId"],[3,"ngClass"],[3,"requestAccepted","requestRejected","makeOffer","request"],["class","conversation-overlay",4,"ngIf"],[1,"conversation-overlay"],[3,"formSubmit","close","replyForm"],[3,"replyAccepted","replyRejected","reply","requestId"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"formSubmit","close","reviewForm"],[1,"chat-area","empty"]],template:function(t,n){if(t&1&&(s(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),c(4,"Convorbiri"),o(),C(5,ga,3,3,"div",6),o(),C(6,xa,16,7,"div",7)(7,wa,3,0,"ng-template",null,0,lt),o()()),t&2){let r=ce(8);l(5),p("ngForOf",n.exchanges),l(),p("ngIf",n.selectedExchange)("ngIfElse",r)}},dependencies:[L,ue,J,z,U,ie,re,ae,De,Sn,Mn,En,Dn,Ee,Pn],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Roboto Mono,monospace}[_nghost-%COMP%]{display:block;background-color:#f4f4f4;padding:2rem;position:relative}.chat-wrapper[_ngcontent-%COMP%]{width:100%;max-width:1000px;margin:auto;border:3px solid black;background-color:#e8d9ff}.chat-container[_ngcontent-%COMP%]{display:flex;height:600px}.sidebar[_ngcontent-%COMP%]{width:25%;border-right:3px solid black;display:flex;flex-direction:column}.sidebar-header[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:12px}.conversation[_ngcontent-%COMP%]{padding:1rem;border-bottom:2px solid black;background-color:#c9b7ff;display:flex;align-items:center;gap:1rem}.conversation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.chat-area[_ngcontent-%COMP%]{width:75%;display:flex;flex-direction:column}.chat-header[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:16px;background-color:#c9b7ff;display:flex;justify-content:space-between;align-items:center}.chat-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer}.chat-messages[_ngcontent-%COMP%]{flex-grow:1;padding:1rem;overflow-y:auto;position:relative}.chat-input[_ngcontent-%COMP%]{border-top:2px solid black;display:flex;align-items:center;padding:.5rem;gap:.5rem}.chat-input[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex:1;padding:.5rem;border-radius:6px;border:none;font-family:Roboto Mono,monospace}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer}.chat-input[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{background-color:#c9b7ff;padding:.5rem 1rem;border-radius:6px}.contact-link[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px;font-size:.9rem}.message-left[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin:10px}.message-right[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:10px}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.conversation-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;z-index:10;display:flex;align-items:center;justify-content:center;padding:1rem;box-shadow:0 0 12px #0003}.no-conversations[_ngcontent-%COMP%]{padding:1rem;color:#888;font-style:italic}.chat-area.empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#888;font-style:italic}"]})};var St=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Category";addCategory(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.post(`${this.baseUrl}/Add`,e,{headers:n})}getCategoryById(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}getAllCategories(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`}),r=new je;return e&&(r=r.set("search",e)),this.http.get(`${this.baseUrl}/GetAll`,{headers:n,params:r})}getCategoriesForSpecialist(e){let t=new je;return e&&(t=t.set("search",e)),this.http.get(`${this.baseUrl}/GetAllForSpecialist`,{params:t})}getCategoriesAdminPage(e,t,n){let r=this.authService.getToken(),a=new M({Authorization:`Bearer ${r}`}),d=new je().set("search",e||"").set("page",t).set("pageSize",n);return this.http.get(`${this.baseUrl}/GetPageForAdmin`,{headers:a,params:d})}updateCategory(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update/${e.id}`,e,{headers:n})}deleteCategory(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.delete(`${this.baseUrl}/Delete/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(R(X),R(I))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};function Sa(i,e){if(i&1){let t=S();s(0,"span",8),g("click",function(){let r=b(t).$implicit,a=u();return v(a.toggle(r.id))}),c(1),o()}if(i&2){let t=e.$implicit,n=u();et("disabled",n.selectedCategoryIds.includes(t.id)),l(),E(" ",t.name," ")}}function Ma(i,e){if(i&1){let t=S();s(0,"span",11),c(1),s(2,"button",12),g("click",function(){let r=b(t).$implicit,a=u(2);return v(a.remove(r))}),c(3,"\xD7"),o()()}if(i&2){let t=e.$implicit,n=u(2);l(),E(" ",n.getCategoryName(t)," ")}}function Ea(i,e){if(i&1&&(H(0),s(1,"div",9),C(2,Ma,4,1,"span",10),o(),G()),i&2){let t=u();l(2),p("ngForOf",t.selectedCategoryIds)}}var ti=class i{constructor(e){this.categoryService=e}category=null;allCategories=[];searchTerm="";dummyCategories=[{id:"cat-001",name:"Traduceri medicale",description:"Traducerea documentelor medicale de specialitate."},{id:"cat-002",name:"Logopedie",description:"Servicii de diagnostic \u0219i terapie pentru tulbur\u0103ri de vorbire."},{id:"cat-003",name:"Psihoterapie",description:"Sesiuni individuale sau de grup pentru s\u0103n\u0103tatea mintal\u0103."},{id:"cat-004",name:"Nutri\u021Bie clinic\u0103",description:"Planuri alimentare personalizate pentru afec\u021Biuni cronice."},{id:"cat-005",name:"Fizioterapie",description:"Reabilitare fizic\u0103 post-traumatic\u0103 sau post-operatorie."}];placeholder="Caut\u0103 o categorie...";selectedCategoryIds=[];categoryChange=new k;ngOnInit(){this.allCategories=this.dummyCategories}getCategories(){this.categoryService.getAllCategories().subscribe({next:e=>{let t=this.removeDiacritics(this.searchTerm);this.allCategories=e.response.filter(n=>this.removeDiacritics(n.name).includes(t))},error:e=>{console.error("Eroare la ob\u021Binerea categoriilor:",e.errorMessage)}})}toggle(e){this.selectedCategoryIds.includes(e)||(this.selectedCategoryIds.push(e),this.categoryChange.emit(this.selectedCategoryIds))}remove(e){this.selectedCategoryIds=this.selectedCategoryIds.filter(t=>t!==e),this.categoryChange.emit(this.selectedCategoryIds)}getCategoryName(e){return this.allCategories?.find(t=>t.id===e)?.name||"Categorie necunoscut\u0103"}onSearch(e){this.searchTerm=e,this.getCategories()}removeDiacritics(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}static \u0275fac=function(t){return new(t||i)(h(St))};static \u0275cmp=y({type:i,selectors:[["app-category-selector"]],inputs:{selectedCategoryIds:"selectedCategoryIds"},outputs:{categoryChange:"categoryChange"},decls:11,vars:3,consts:[[1,"tag-selector"],[1,"section-title"],[1,"category-box"],[1,"search-category-wrapper"],[3,"searchChanged","placeholder"],[1,"category-options"],["class","tag option",3,"disabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"tag","option",3,"click"],[1,"category-box","category-options"],["class","tag selected",4,"ngFor","ngForOf"],[1,"tag","selected"],["type","button",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"h3",1),c(2,"Alege din lista de categorii:"),o(),s(3,"div",2)(4,"div",3)(5,"app-search-input",4),g("searchChanged",function(a){return n.onSearch(a)}),o()(),s(6,"div",5),C(7,Sa,2,3,"span",6),o()(),s(8,"h3",1),c(9,"Categoriile selectate:"),o(),C(10,Ea,3,1,"ng-container",7),o()),t&2&&(l(5),p("placeholder",n.placeholder),l(2),p("ngForOf",n.allCategories),l(3),p("ngIf",n.selectedCategoryIds.length>0))},dependencies:[U,J,z,Ce],styles:[".tag-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.category-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:1.5rem;padding:1rem;background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:8px;box-shadow:0 0 4px #0000001a;flex-wrap:wrap}.category-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;align-items:flex-start}.tag.option[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem;font-family:Roboto Mono,monospace}.tag.option[_ngcontent-%COMP%]:hover{background-color:#333}.tag.option.disabled[_ngcontent-%COMP%]{background-color:#a1a1a1;cursor:not-allowed;opacity:.6}.tag.selected[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem;font-family:Roboto Mono,monospace}button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff}.section-title[_ngcontent-%COMP%]{margin-bottom:8px;font-family:Roboto Mono,monospace}.search-category-wrapper[_ngcontent-%COMP%]{background-color:#f6efff;border-radius:5px;width:300px;margin:auto;border:2px solid #c9b7ff}"]})};var ni=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/SpecialistProfile";becomeSpecialist(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.put(`${this.baseUrl}/BecomeSpecialist`,e,{headers:n}).pipe(Bi(r=>{r.response?.token&&localStorage.setItem("access_token",r.response.token)}))}getSpecialistProfile(){let e=this.authService.getToken(),t=new M({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/Get`,{headers:t})}updateSpecialistProfile(e){let t=this.authService.getToken(),n=new M({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update`,e,{headers:n})}static \u0275fac=function(t){return new(t||i)(R(X),R(I))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var Pa=()=>[];function Oa(i,e){if(i&1){let t=S();s(0,"app-dynamic-form",5),g("formSubmit",function(r){b(t);let a=u();return v(a.handleStep1(r))}),o()}if(i&2){let t=u();p("fields",t.step1FormFields)("submitText","Treci la pasul urm\u0103tor")}}function Ta(i,e){if(i&1){let t=S();s(0,"div",6)(1,"app-category-selector",7),g("categoryChange",function(r){b(t);let a=u();return v(a.updateCategories(r))}),o(),s(2,"div",8)(3,"div",9)(4,"button",10),g("click",function(){b(t);let r=u();return v(r.addEntity())}),c(5,"Finalizeaz\u0103"),o()()()()}if(i&2){let t=u();l(),p("selectedCategoryIds",t.specialistData.categories||pe(1,Pa))}}var ii=class i{constructor(e,t,n){this.authService=e;this.specialistProfileService=t;this.router=n}step=1;specialistData={yearsExperience:0,phoneNumber:"",address:"",description:"",categories:[]};formData={};step1FormFields=le({yearsExperience:0,phoneNumber:"",address:"",description:""},{address:{type:"text",class:"full-width"},yearsExperience:{type:"number",placeholder:"Ex: 5"},description:{type:"textarea",placeholder:"Descrie serviciile oferite",class:"full-width"}});isAddUserFormVisible=!1;ngOnInit(){let e={phoneNumber:"",address:"",yearsExperience:0,description:""};this.formData=x({},e)}handleStep1(e){this.specialistData=x(x({},this.specialistData),e),this.step=2}updateCategories(e){this.specialistData.categories=e}addEntity(){let e=this.authService.getUserId();if(!e){console.error("User ID not found");return}let t={userId:e,phoneNumber:this.specialistData.phoneNumber,address:this.specialistData.address,yearsExperience:this.specialistData.yearsExperience,description:this.specialistData.description,categories:this.specialistData.categories};this.specialistProfileService.becomeSpecialist(t).subscribe({next:()=>{this.closeAddUserForm(),this.router.navigate(["/home"])},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}closeAddUserForm(){this.isAddUserFormVisible=!1}static \u0275fac=function(t){return new(t||i)(h(I),h(ni),h(Y))};static \u0275cmp=y({type:i,selectors:[["app-become-specialist"]],decls:7,vars:3,consts:[[1,"form-wrapper"],[1,"form-box"],[3,"ngSwitch"],[3,"fields","submitText","formSubmit",4,"ngSwitchCase"],["class","form-layout",4,"ngSwitchCase"],[3,"formSubmit","fields","submitText"],[1,"form-layout"],[3,"categoryChange","selectedCategoryIds"],[1,"form-group","full-width"],[1,"button-wrapper"],[1,"send-button",3,"click"]],template:function(t,n){t&1&&(s(0,"h2"),c(1,"Devino specialist!"),o(),s(2,"div",0)(3,"div",1),H(4,2),C(5,Oa,1,2,"app-dynamic-form",3)(6,Ta,6,2,"div",4),G(),o()()),t&2&&(l(4),p("ngSwitch",n.step),l(),p("ngSwitchCase",1),l(),p("ngSwitchCase",2))},dependencies:[fe,Gt,Kt,ti],styles:["h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}"]})};var ka=["class","categories"],Ia=()=>[5,10,20];function Aa(i,e){if(i&1){let t=S();s(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),g("click",function(){b(t);let r=u();return v(r.closeAddEntityForm())}),c(4,"\xD7"),o()(),s(5,"app-dynamic-form",13),g("formSubmit",function(r){b(t);let a=u();return v(a.addEntity(r))}),o()()()}if(i&2){let t=u();l(5),p("fields",t.addEntityFormFields)("submitText","Trimite")}}function Ra(i,e){if(i&1){let t=S();s(0,"div",9)(1,"div",10)(2,"button",12),g("click",function(){b(t);let r=u();return v(r.closeUpdateEntityForm())}),c(3,"\xD7"),o(),s(4,"app-dynamic-form",14),g("formSubmit",function(r){b(t);let a=u();return v(a.updateEntity(r))}),o()()()}if(i&2){let t=u();l(4),p("fields",t.updateEntityFormFields)("initialData",t.formData)("submitText","Actualizeaz\u0103")}}function Fa(i,e){if(i&1){let t=S();s(0,"app-admin-details",18),g("close",function(){b(t);let r=u(2);return v(r.closeEntityDetails())}),o()}if(i&2){let t=u(2);p("entity",t.entityDetails)("title","Detalii categorie")}}function Va(i,e){if(i&1){let t=S();s(0,"div",15)(1,"div",16)(2,"button",12),g("click",function(){b(t);let r=u();return v(r.closeEntityDetails())}),c(3,"\xD7"),o(),C(4,Fa,1,2,"app-admin-details",17),o()()}if(i&2){let t=u();l(4),p("ngIf",t.isEntityDetailsVisible)}}var ri=class i{constructor(e){this.adminService=e}dummy_categories=[{id:"c1",name:"Psihologie",description:"Categoria pentru speciali\u0219ti \xEEn psihologie",specialistsCount:5,specialistIds:["s1","s2","s3","s4","s5"]},{id:"c2",name:"Nutri\u021Bie",description:"Categoria pentru speciali\u0219ti \xEEn nutri\u021Bie",specialistsCount:3,specialistIds:["s6","s7","s8"]}];searchTerm="";entities=[];selectedEntity=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddEntityFormVisible=!1;isUpdateEntityFormVisible=!1;isEntityDetailsVisible=!1;selectedEntityId=null;columns=[{key:"id",header:"ID"},{key:"name",header:"Denumire"},{key:"description",header:"Descriere"},{key:"specialistsCount",header:"Num\u0103r speciali\u0219ti"},{key:"specialistIds",header:"Speciali\u0219tii cu aceast\u0103 categorie"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:e=>this.getEntity(e.id)},{label:"Modific\u0103",class:"edit",callback:e=>this.editEntity(e)},{label:"\u0218terge",class:"delete",callback:e=>this.deleteEntity(e)}]}];defaultEntity={name:"",description:""};formData={};error=null;addEntityFormFields=le(this.defaultEntity,{description:{type:"input",placeholder:"Descrie categoria",required:!1}});updateEntityFormFields=le({name:this.selectedEntity?.name||"",description:this.selectedEntity?.description||""});placeholder="Caut\u0103 o categorie...";ngOnInit(){let e={name:"",description:""};this.formData=x({},e),this.getPage()}onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}getEntity(e){console.log(e),this.adminService.getCategoryById(e).subscribe({next:t=>{this.entityDetailsId=t.response?.id,this.entityDetails=bt(t.response??{}),this.isEntityDetailsVisible=!0},error:t=>{console.error("Eroare la preluarea utilizatorului:",t.errorMessage?.status),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getCategoriesAdminPage(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{console.log(e.response),this.entities=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(e){let t=e;this.adminService.addCategory(t).subscribe({next:()=>{this.closeAddEntityForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editEntity(e){this.selectedEntityId=e.id,this.formData={name:e.name,description:e.description},this.isUpdateEntityFormVisible=!0}updateEntity(e){if(!this.selectedEntityId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let t={id:this.selectedEntityId,name:e.name||this.formData.name,description:e.description||this.formData.description};this.adminService.updateCategory(t).subscribe({next:()=>{this.closeUpdateEntityForm(),this.getPage()},error:n=>{console.error("Eroare la actualizare:",n)}})}showEntityDetails(e){this.isEntityDetailsVisible=!0}closeEntityDetails(){this.isEntityDetailsVisible=!1,this.selectedEntity=null}closeUpdateEntityForm(){this.selectedEntityId=null,this.resetForm(),this.isUpdateEntityFormVisible=!1}openAddEntityForm(){this.selectedEntityId=null,this.resetForm(),this.isAddEntityFormVisible=!0}viewEntity(e){this.isEntityDetailsVisible=!0}deleteEntity(e){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi categoria ${e.name}?`)&&this.adminService.deleteCategory(e.id).subscribe({next:()=>{this.getPage()},error:t=>{console.error("Eroare la \u0219tergerea utilizatorului:",t)}})}closeAddEntityForm(){this.isAddEntityFormVisible=!1,this.resetForm()}resetForm(){this.formData={name:"",description:""}}onPageChange(e){this.currentPage=e,this.getPage()}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}static \u0275fac=function(t){return new(t||i)(h(St))};static \u0275cmp=y({type:i,selectors:[["app-admin",8,"categories"]],attrs:ka,decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[1,"admin-modal"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(t,n){t&1&&(s(0,"app-pagination",0),g("pageChange",function(a){return n.onPageChange(a)})("pageSizeChange",function(a){return n.onPageSizeChange(a)}),o(),s(1,"div",1)(2,"div",2)(3,"h2"),c(4,"Administreaz\u0103 toate categoriile"),o(),s(5,"div",3)(6,"app-search-input",4),g("searchChanged",function(a){return n.onSearch(a)}),o()(),s(7,"button",5),g("click",function(){return n.openAddEntityForm()}),c(8,"Adaug\u0103 categorie"),o(),w(9,"app-dynamic-table",6),o()(),C(10,Aa,6,2,"div",7)(11,Ra,5,3,"div",7)(12,Va,5,1,"div",8)),t&2&&(p("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",pe(10,Ia))("totalItems",n.totalItems),l(6),p("placeholder",n.placeholder),l(3),p("columns",n.columns)("data",n.entities),l(),p("ngIf",n.isAddEntityFormVisible),l(),p("ngIf",n.isUpdateEntityFormVisible),l(),p("ngIf",n.isEntityDetailsVisible))},dependencies:[Ke,fe,Ce,Ge,Oe,z],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var oi=class i{settings={fullName:"",email:"",phoneNumber:"",language:"ro",darkMode:!1,emailNotifications:!0,smsNotifications:!1};onImageUpload(e){let t=e.target.files?.[0];t&&console.log("Uploaded image:",t.name)}changePassword(){alert("Password change flow goes here.")}deactivateAccount(){confirm("E\u0219ti sigur c\u0103 vrei s\u0103 dezactivezi contul?")&&console.log("Account deactivated")}deleteAccount(){confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi contul? Aceast\u0103 ac\u021Biune este ireversibil\u0103.")&&console.log("Account deleted")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-settings"]],decls:48,vars:7,consts:[[1,"settings-container"],[1,"settings-title"],[1,"settings-section"],["for","fullName"],["id","fullName","type","text","name","fullName",3,"ngModelChange","ngModel"],["for","email"],["id","email","type","email","name","email",3,"ngModelChange","ngModel"],["for","phone"],["id","phone","type","text","name","phone",3,"ngModelChange","ngModel"],["for","profileImage"],["id","profileImage","type","file",3,"change"],["type","button",3,"click"],["for","language"],["id","language","name","language",3,"ngModelChange","ngModel"],["value","ro"],["value","en"],["type","checkbox","name","darkMode",3,"ngModelChange","ngModel"],["type","checkbox","name","emailNotifications",3,"ngModelChange","ngModel"],["type","checkbox","name","smsNotifications",3,"ngModelChange","ngModel"],[1,"danger",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"h1",1),c(2,"Set\u0103rile contului"),o(),s(3,"section",2)(4,"h2"),c(5,"Profilul t\u0103u"),o(),s(6,"form")(7,"label",3),c(8,"Nume complet"),o(),s(9,"input",4),N("ngModelChange",function(a){return V(n.settings.fullName,a)||(n.settings.fullName=a),a}),o(),s(10,"label",5),c(11,"Adresa e-mail"),o(),s(12,"input",6),N("ngModelChange",function(a){return V(n.settings.email,a)||(n.settings.email=a),a}),o(),s(13,"label",7),c(14,"Num\u0103r de telefon"),o(),s(15,"input",8),N("ngModelChange",function(a){return V(n.settings.phoneNumber,a)||(n.settings.phoneNumber=a),a}),o(),s(16,"label",9),c(17,"Poza de profil"),o(),s(18,"input",10),g("change",function(a){return n.onImageUpload(a)}),o(),s(19,"button",11),g("click",function(){return n.changePassword()}),c(20,"Schimb\u0103 parola"),o()()(),s(21,"section",2)(22,"h2"),c(23,"Set\u0103ri aplica\u021Bie"),o(),s(24,"form")(25,"label",12),c(26,"Limba aplica\u021Biei"),o(),s(27,"select",13),N("ngModelChange",function(a){return V(n.settings.language,a)||(n.settings.language=a),a}),s(28,"option",14),c(29,"Rom\xE2n\u0103"),o(),s(30,"option",15),c(31,"English"),o()(),s(32,"label")(33,"input",16),N("ngModelChange",function(a){return V(n.settings.darkMode,a)||(n.settings.darkMode=a),a}),o(),c(34," Activeaz\u0103 modul \xEEntrunecat "),o(),s(35,"label")(36,"input",17),N("ngModelChange",function(a){return V(n.settings.emailNotifications,a)||(n.settings.emailNotifications=a),a}),o(),c(37," Notific\u0103ri prin e-mail "),o(),s(38,"label")(39,"input",18),N("ngModelChange",function(a){return V(n.settings.smsNotifications,a)||(n.settings.smsNotifications=a),a}),o(),c(40," Notific\u0103ri prin SMS "),o()()(),s(41,"section",2)(42,"h2"),c(43,"Siguran\u021B\u0103 \u0219i ac\u021Biuni"),o(),s(44,"button",19),g("click",function(){return n.deactivateAccount()}),c(45,"Dezactiveaz\u0103 contul"),o(),s(46,"button",19),g("click",function(){return n.deleteAccount()}),c(47,"\u0218terge contul"),o()()()),t&2&&(l(9),F("ngModel",n.settings.fullName),l(3),F("ngModel",n.settings.email),l(3),F("ngModel",n.settings.phoneNumber),l(12),F("ngModel",n.settings.language),l(6),F("ngModel",n.settings.darkMode),l(3),F("ngModel",n.settings.emailNotifications),l(3),F("ngModel",n.settings.smsNotifications))},dependencies:[U,ge,ft,ht,ie,yi,Le,re,me,ae,he],styles:[".settings-container[_ngcontent-%COMP%]{max-width:700px;margin:0 auto;padding:2rem;background-color:#f9f6ff;border-radius:12px;box-shadow:0 0 8px #0000001a}.settings-title[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:2rem;font-weight:700;text-align:center}.settings-section[_ngcontent-%COMP%]{margin-bottom:2.5rem;border-top:1px solid #ccc;padding-top:1.5rem}.settings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:1rem}.settings-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;margin:.5rem 0 .25rem}.settings-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-bottom:1rem;border-radius:6px;border:1px solid #ccc;font-size:1rem}button[_ngcontent-%COMP%]{display:inline-block;padding:.5rem 1rem;margin-top:1rem;border:none;border-radius:6px;background-color:#6541f0;color:#fff;font-weight:700;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#5134c9}button.danger[_ngcontent-%COMP%]{background-color:#d9534f;margin-right:1rem}button.danger[_ngcontent-%COMP%]:hover{background-color:#c9302c}"]})};var Na=()=>[];function Ua(i,e){if(i&1&&w(0,"img",9),i&2){let t=u().$implicit;p("src",t.senderUserProfilePictureUrl,Se)}}function qa(i,e){i&1&&(H(0),w(1,"img",10),G())}function za(i,e){if(i&1&&(s(0,"div",3)(1,"div",4),C(2,Ua,1,1,"img",5),s(3,"div",6)(4,"strong"),c(5),o(),s(6,"span",7),C(7,qa,2,0,"ng-container",8),o()()(),s(8,"p"),c(9),o(),s(10,"small"),c(11),Z(12,"date"),o()()),i&2){let t=e.$implicit;l(2),p("ngIf",t.senderUserProfilePictureUrl),l(3),W(t.senderUserFullName),l(2),p("ngForOf",pe(8,Na).constructor(t.rating)),l(2),W(t.content),l(2),W(ve(12,5,t.createdAt,"shortDate"))}}var si=class i{constructor(e){this.reviewService=e}reviews=[];page=1;pageSize=5;dummyReviews=[{id:"1",receiverUserId:"user-123",senderUserFullName:"Ana Popescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/21.jpg",rating:5,content:"Excelent! A fost foarte profesionist\u0103 \u0219i m-a ajutat rapid.",createdAt:new Date("2024-12-05T14:35:00"),updatedAt:new Date("2024-12-05T14:35:00")},{id:"2",receiverUserId:"user-456",senderUserFullName:"Andrei Ionescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/32.jpg",rating:4,content:"Serviciu bun, dar am avut o mic\u0103 \xEEnt\xE2rziere la \xEEnceput.",createdAt:new Date("2025-01-10T09:20:00"),updatedAt:new Date("2025-01-10T09:20:00")},{id:"3",receiverUserId:"user-789",senderUserFullName:"Mihai Georgescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/45.jpg",rating:3,content:"Experien\u021B\u0103 ok, dar se poate \xEEmbun\u0103t\u0103\u021Bi comunicarea.",createdAt:new Date("2025-03-18T17:45:00"),updatedAt:new Date("2025-03-18T17:45:00")},{id:"4",receiverUserId:"user-123",senderUserFullName:"Elena Tudor",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/55.jpg",rating:5,content:"Foarte mul\u021Bumit\u0103! Recomand cu \xEEncredere!",createdAt:new Date("2025-04-02T11:10:00"),updatedAt:new Date("2025-04-02T11:10:00")},{id:"5",receiverUserId:"user-999",senderUserFullName:"Radu Vasile",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/61.jpg",rating:2,content:"Din p\u0103cate, nu a fost ce am a\u0219teptat. Probleme de punctualitate.",createdAt:new Date("2025-02-14T08:30:00"),updatedAt:new Date("2025-02-14T08:30:00")},{id:"6",receiverUserId:"user-888",senderUserFullName:"Ioana Marinescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/88.jpg",rating:4,content:"Totul a decurs bine, dar a\u0219 fi vrut mai multe explica\u021Bii.",createdAt:new Date("2025-05-22T15:50:00"),updatedAt:new Date("2025-05-22T15:50:00")}];ngOnInit(){this.reviews=this.dummyReviews,this.loadReviews()}loadReviews(){this.reviewService.getReviews(this.page,this.pageSize).subscribe({next:e=>{this.reviews=e.response?.data||[]},error:e=>{console.error("Error loading reviews",e)}})}static \u0275fac=function(t){return new(t||i)(h(yt))};static \u0275cmp=y({type:i,selectors:[["app-reviews"]],decls:5,vars:1,consts:[[1,"account-card"],[1,"reviews-container"],["class","review-card",4,"ngFor","ngForOf"],[1,"review-card"],[1,"header"],["alt","Profil",3,"src",4,"ngIf"],[1,"review-info"],[1,"rating"],[4,"ngFor","ngForOf"],["alt","Profil",3,"src"],["src","assets/icons/star-filled.svg","alt","star",2,"width","24px","height","24px","margin-right","0"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Recenziile tale"),o(),C(4,za,13,9,"div",2),o()()),t&2&&(l(4),p("ngForOf",n.reviews))},dependencies:[J,z,Me],styles:[".account-card[_ngcontent-%COMP%]{background:#e0caff;max-width:1000px;margin:32px auto;box-shadow:0 4px 16px #0000001a;font-family:Roboto Mono,monospace;border:3px solid black}.reviews-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:32px}.reviews-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px;text-align:center;margin-bottom:32px;font-weight:700;color:#000}.review-card[_ngcontent-%COMP%]{background-color:#f5f2ff;border-radius:10px;padding:1.25rem;margin-bottom:1.5rem;box-shadow:0 2px 8px #0000000d;transition:transform .2s}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;object-fit:cover;margin-right:16px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;padding-top:4px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:18px;line-height:1;margin-left:3px;margin-bottom:2px}.review-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem;color:#333}.review-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;text-align:right;color:#777;font-size:.85rem}.rating[_ngcontent-%COMP%]{display:flex;align-items:center}.rating[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:1px}"]})};var Wr="basil",ja=function(e){return e===3?"v3":e},Hr="https://js.stripe.com",Ba="".concat(Hr,"/").concat(Wr,"/stripe.js"),$a=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,La=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,$r="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Wa=function(e){return $a.test(e)||La.test(e)},Ha=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Hr,'"]')),t=0;t<e.length;t++){var n=e[t];if(Wa(n.src))return n}return null},Lr=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Ba).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},Ga=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.1",startTime:t})},Bt=null,ai=null,ci=null,Ka=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},Ja=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},Za=function(e){return Bt!==null?Bt:(Bt=new Promise(function(t,n){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&e&&console.warn($r),window.Stripe){t(window.Stripe);return}try{var r=Ha();if(r&&e)console.warn($r);else if(!r)r=Lr(e);else if(r&&ci!==null&&ai!==null){var a;r.removeEventListener("load",ci),r.removeEventListener("error",ai),(a=r.parentNode)===null||a===void 0||a.removeChild(r),r=Lr(e)}ci=Ja(t,n),ai=Ka(n),r.addEventListener("load",ci),r.addEventListener("error",ai)}catch(d){n(d);return}}),Bt.catch(function(t){return Bt=null,Promise.reject(t)}))},Xa=function(e,t,n){if(e===null)return null;var r=t[0],a=r.match(/^pk_test/),d=ja(e.version),f=Wr;a&&d!==f&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("7.3.1"," expected Stripe.js@").concat(f,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var _=e.apply(void 0,t);return Ga(_,n),_},$t,Gr=!1,Kr=function(){return $t||($t=Za(null).catch(function(e){return $t=null,Promise.reject(e)}),$t)};Promise.resolve().then(function(){return Kr()}).catch(function(i){Gr||console.warn(i)});var Jr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Gr=!0;var r=Date.now();return Kr().then(function(a){return Xa(a,t,r)})};var li=class i{serviceTask={id:"12345",replyId:"67890",userId:"user123",specialistId:"spec456",description:"Montare mobilier",address:"Str. Exemplu 123",startDate:new Date,endDate:new Date,specialistFullName:"Ion Popescu",price:350,status:"Confirmed",completedAt:new Date,cancelledAt:new Date};cardPaymentSelected=!1;showError=!1;ngAfterViewInit(){this.setupStripe()}setupStripe(){return T(this,null,function*(){let e=yield Jr("pk_test_51RY4TaRP4R8qcMUlWSJwbW6GBjetIiG7jc4fLrsUcl7xMS8uTMcI2mfDHId8YRAku8lllViJiAY0mVPObrvgLYke00QP5RVa7S");if(!e){console.error("Stripe failed to initialize.");return}let n=e.elements().create("card");n.mount("#card-element");let r=yield fetch("http://localhost:5241/api/stripe/account/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"}}),{clientSecret:a}=yield r.json();console.log("Client secret:",a);let d=document.getElementById("payment-form");if(!d){console.error("Payment form not found.");return}d.addEventListener("submit",f=>T(this,null,function*(){f.preventDefault();let _=yield e.confirmCardPayment(a,{payment_method:{card:n,billing_details:{name:"Test Client"}}});_.error?console.error(_.error.message):_.paymentIntent.status==="succeeded"&&alert("Plat\u0103 reu\u0219it\u0103!")}))})}selectCardPayment(){this.cardPaymentSelected=!0,this.showError=!1}payForService(){if(!this.cardPaymentSelected){this.showError=!0;return}console.log("Plat\u0103 ini\u021Biat\u0103 cu cardul bancar."),window.open("https://www.plata-cu-cardul.ro","_blank")}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-service-payment"]],decls:7,vars:0,consts:[["id","payment-form"],["for","card-element",2,"display","block","margin-bottom","8px"],["id","card-element",2,"padding","10px","border","1px solid #ccc","border-radius","6px","margin-bottom","12px"],["id","card-errors","role","alert",2,"color","red","margin-bottom","12px"],["id","submit","type","submit",2,"padding","10px 20px","background-color","#8e44ad","color","white","border","none","border-radius","4px","cursor","pointer"]],template:function(t,n){t&1&&(s(0,"form",0)(1,"label",1),c(2," Num\u0103r card "),o(),w(3,"div",2)(4,"div",3),s(5,"button",4),c(6," Pl\u0103te\u0219te "),o()())},dependencies:[U,ge,me,he],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;background-color:#f9f7ff;margin:0;padding:0}.container[_ngcontent-%COMP%]{max-width:700px;margin:40px auto;background-color:#fff;padding:32px;border-radius:12px;box-shadow:0 4px 16px #0000001a;border:2px solid #8e44ad}h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:24px}.task-detail[_ngcontent-%COMP%]{margin-bottom:12px}.task-detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;color:#555;display:block}.task-detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333;font-size:1rem}.pay-section[_ngcontent-%COMP%]{margin-top:32px;text-align:center}.price[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:#27ae60;margin-bottom:16px}.pay-button[_ngcontent-%COMP%]{background-color:#8e44ad;color:#fff;padding:12px 24px;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .2s ease}.pay-button[_ngcontent-%COMP%]:hover{background-color:#732d91}"]})};var di=class i{constructor(e){this.fb=e;this.contactForm=this.fb.group({name:["",Be.required],email:["",[Be.required,Be.email]],subject:["",Be.required],message:["",Be.required]})}contactForm;onSubmit(){if(this.contactForm.valid){let e=this.contactForm.value;console.log("Contact form data:",e),alert("Mesajul a fost trimis cu succes!"),this.contactForm.reset()}}static \u0275fac=function(t){return new(t||i)(h(Rr))};static \u0275cmp=y({type:i,selectors:[["app-contact-us"]],decls:47,vars:1,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"contact-wrapper"],[3,"ngSubmit","formGroup"],["for","name"],["id","name","type","text","formControlName","name","placeholder","Ex: Ana Popescu"],["for","email"],["id","email","type","email","formControlName","email","placeholder","Ex: ana@email.com"],["for","subject"],["id","subject","type","text","formControlName","subject","placeholder","Subiectul mesajului"],["for","message"],["id","message","rows","5","formControlName","message","placeholder","Scrie-ne mesajul t\u0103u..."],[1,"form-actions"],["type","submit"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"h1",2),c(3,"Ai o \u021Beav\u0103 spart\u0103?"),o(),s(4,"h1",2),c(5,"\u021Ai s-a stricat chiuveta?"),o(),s(6,"h1"),c(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),s(8,"strong",3),c(9,"ExpertEase"),o(),c(10,"!"),o()(),s(11,"p"),c(12,"Peste "),s(13,"strong"),c(14,"100 de speciali\u0219ti"),o(),c(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),o()(),s(16,"div",4)(17,"h2"),c(18,"Contacteaz\u0103-ne"),o(),s(19,"p")(20,"strong"),c(21,"Email:"),o(),c(22," contact@expertease.ro"),o(),s(23,"p")(24,"strong"),c(25,"Telefon:"),o(),c(26," +40 712 345 678"),o(),s(27,"p")(28,"strong"),c(29,"Adres\u0103:"),o(),c(30," Str. Exemplului 123, Bucure\u0219ti"),o(),s(31,"form",5),g("ngSubmit",function(){return n.onSubmit()}),s(32,"label",6),c(33,"Nume complet"),o(),w(34,"input",7),s(35,"label",8),c(36,"Email"),o(),w(37,"input",9),s(38,"label",10),c(39,"Subiect"),o(),w(40,"input",11),s(41,"label",12),c(42,"Mesaj"),o(),w(43,"textarea",13),s(44,"div",14)(45,"button",15),c(46,"Trimite"),o()()()()),t&2&&(l(31),p("formGroup",n.contactForm))},dependencies:[De,ge,ie,re,me,Oi,Ti],styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.contact-wrapper[_ngcontent-%COMP%]{max-width:600px;margin:10px auto;padding:24px;font-family:Roboto Mono,monospace;border:2px solid #3c1a7d;border-radius:8px;background-color:#fff}h2[_ngcontent-%COMP%]{color:#3c1a7d;margin-bottom:24px;text-align:center}label[_ngcontent-%COMP%]{display:block;margin:12px 0 4px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;height:auto;padding:8px 10px;line-height:1.4;font-size:14px;box-sizing:border-box;border:1px solid #ccc;border-radius:4px;margin-bottom:12px;font-family:Roboto Mono,monospace}.form-actions[_ngcontent-%COMP%]{text-align:center;margin-top:20px}button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}"]})};var pi=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-terms"]],decls:104,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"terms-container"],["href","/confidentialitate",1,"privacy-link"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"h1",2),c(3,"Ai o \u021Beav\u0103 spart\u0103?"),o(),s(4,"h1",2),c(5,"\u021Ai s-a stricat chiuveta?"),o(),s(6,"h1"),c(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),s(8,"strong",3),c(9,"ExpertEase"),o(),c(10,"!"),o()(),s(11,"p"),c(12,"Peste "),s(13,"strong"),c(14,"100 de speciali\u0219ti"),o(),c(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),o()(),s(16,"div",4)(17,"section")(18,"h2"),c(19,"Introducere"),o(),s(20,"p"),c(21," Acest document stabile\u0219te termenii \u0219i condi\u021Biile de utilizare a platformei "),s(22,"strong"),c(23,"ExpertEase"),o(),c(24,". Prin accesarea sau utilizarea serviciilor noastre, sunte\u021Bi de acord cu ace\u0219ti termeni. "),o()(),s(25,"section")(26,"h2"),c(27,"Defini\u021Bii"),o(),s(28,"p")(29,"strong"),c(30,"Platform\u0103:"),o(),c(31," aplica\u021Bia ExpertEase care faciliteaz\u0103 conexiunea dintre clien\u021Bi \u0219i speciali\u0219ti."),o(),s(32,"p")(33,"strong"),c(34,"Client:"),o(),c(35," utilizator care solicit\u0103 servicii."),o(),s(36,"p")(37,"strong"),c(38,"Specialist:"),o(),c(39," utilizator care ofer\u0103 servicii."),o()(),s(40,"section")(41,"h2"),c(42,"Condi\u021Bii de utilizare"),o(),s(43,"ul")(44,"li"),c(45,"Accesul necesit\u0103 crearea unui cont valid."),o(),s(46,"li"),c(47,"Utilizatorii trebuie s\u0103 aib\u0103 minim 18 ani."),o(),s(48,"li"),c(49,"Este interzis\u0103 utilizarea platformei \xEEn scopuri ilegale, abuzive sau frauduloase."),o()()(),s(50,"section")(51,"h2"),c(52,"Obliga\u021Biile utilizatorilor"),o(),s(53,"p")(54,"strong"),c(55,"Clien\u021Bi:"),o()(),s(56,"ul")(57,"li"),c(58,"S\u0103 ofere informa\u021Bii clare \u0219i reale despre cerere."),o(),s(59,"li"),c(60,"S\u0103 respecte termenii agrea\u021Bi cu specialistul."),o()(),s(61,"p")(62,"strong"),c(63,"Speciali\u0219ti:"),o()(),s(64,"ul")(65,"li"),c(66,"S\u0103 ofere servicii conforme cu descrierea."),o(),s(67,"li"),c(68,"S\u0103 respecte confiden\u021Bialitatea \u0219i termenele stabilite."),o()()(),s(69,"section")(70,"h2"),c(71,"Pl\u0103\u021Bi \u0219i comisioane"),o(),s(72,"p"),c(73," Pl\u0103\u021Bile se realizeaz\u0103 prin Stripe. Comisioanele platformei, dac\u0103 exist\u0103, vor fi afi\u0219ate transparent \xEEnainte de confirmarea serviciului. "),o()(),s(74,"section")(75,"h2"),c(76,"Limitarea r\u0103spunderii"),o(),s(77,"p"),c(78," Platforma ExpertEase ac\u021Bioneaz\u0103 doar ca intermediar. Nu ne asum\u0103m responsabilitatea pentru calitatea serviciilor oferite de speciali\u0219ti. "),o()(),s(79,"section")(80,"h2"),c(81,"Suspendarea contului"),o(),s(82,"p"),c(83," Ne rezerv\u0103m dreptul de a suspenda sau \u0219terge conturi care \xEEncalc\u0103 ace\u0219ti termeni sau folosesc platforma \xEEn mod abuziv. "),o()(),s(84,"section")(85,"h2"),c(86,"Protec\u021Bia datelor"),o(),s(87,"p"),c(88," Datele personale sunt gestionate conform "),s(89,"a",5),c(90,"Politicii de confiden\u021Bialitate"),o(),c(91,". "),o()(),s(92,"section")(93,"h2"),c(94,"Modificarea termenilor"),o(),s(95,"p"),c(96," Putem actualiza ace\u0219ti termeni periodic. Modific\u0103rile vor fi anun\u021Bate \xEEn aplica\u021Bie \u0219i vor intra \xEEn vigoare la publicare. "),o()(),s(97,"section")(98,"h2"),c(99,"Contact"),o(),s(100,"p"),c(101," Pentru \xEEntreb\u0103ri legate de ace\u0219ti termeni, ne pute\u021Bi contacta la: "),s(102,"strong"),c(103,"contact@expertease.ro"),o()()()())},styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.home-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%}.terms-container[_ngcontent-%COMP%]{max-width:900px;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6}.terms-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff}.terms-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d}.terms-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-top:8px;margin-bottom:12px}.terms-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.privacy-link[_ngcontent-%COMP%]{color:#000;text-decoration:none;font-weight:700}.privacy-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var ui=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=y({type:i,selectors:[["app-privacy"]],decls:103,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"privacy-container"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"h1",2),c(3,"Ai o \u021Beav\u0103 spart\u0103?"),o(),s(4,"h1",2),c(5,"\u021Ai s-a stricat chiuveta?"),o(),s(6,"h1"),c(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),s(8,"strong",3),c(9,"ExpertEase"),o(),c(10,"!"),o()(),s(11,"p"),c(12,"Peste "),s(13,"strong"),c(14,"100 de speciali\u0219ti"),o(),c(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),o()(),s(16,"div",4)(17,"section")(18,"h2"),c(19,"Politica de Confiden\u021Bialitate"),o(),s(20,"p"),c(21," Aceast\u0103 politic\u0103 explic\u0103 modul \xEEn care ExpertEase colecteaz\u0103, utilizeaz\u0103 \u0219i protejeaz\u0103 datele personale ale utilizatorilor platformei. Ne angaj\u0103m s\u0103 respect\u0103m confiden\u021Bialitatea \u0219i s\u0103 protej\u0103m toate informa\u021Biile personale furnizate. "),o()(),s(22,"section")(23,"h2"),c(24,"Tipuri de date colectate"),o(),s(25,"ul")(26,"li"),c(27,"Nume \u0219i prenume"),o(),s(28,"li"),c(29,"Adres\u0103 de email"),o(),s(30,"li"),c(31,"Num\u0103r de telefon (dac\u0103 este furnizat)"),o(),s(32,"li"),c(33,"Mesaje transmise prin formularele de contact"),o(),s(34,"li"),c(35,"Date pentru autentificare \xEEn cont"),o(),s(36,"li"),c(37,"Date de plat\u0103 (prin Stripe)"),o(),s(38,"li"),c(39,"Informa\u021Bii despre dispozitiv \u0219i IP (pentru securitate)"),o()()(),s(40,"section")(41,"h2"),c(42,"Scopul prelucr\u0103rii datelor"),o(),s(43,"ul")(44,"li"),c(45,"Crearea \u0219i administrarea contului de utilizator"),o(),s(46,"li"),c(47,"Procesarea solicit\u0103rilor \u0219i a pl\u0103\u021Bilor"),o(),s(48,"li"),c(49,"Comunicare \xEEntre utilizatori (client\u2013specialist)"),o(),s(50,"li"),c(51,"\xCEmbun\u0103t\u0103\u021Birea platformei \u0219i a experien\u021Bei de utilizare"),o(),s(52,"li"),c(53,"Respectarea obliga\u021Biilor legale"),o()()(),s(54,"section")(55,"h2"),c(56,"Temeiuri legale (GDPR)"),o(),s(57,"p"),c(58," Datele sunt colectate \xEEn baza consim\u021B\u0103m\xE2ntului dumneavoastr\u0103, a interesului legitim al platformei sau \xEEn scopul execut\u0103rii unui contract. "),o()(),s(59,"section")(60,"h2"),c(61,"Durata de stocare a datelor"),o(),s(62,"p"),c(63," Datele sunt p\u0103strate pe durata existen\u021Bei contului sau conform obliga\u021Biilor legale. Utilizatorii pot solicita \u0219tergerea acestora \xEEn orice moment. "),o()(),s(64,"section")(65,"h2"),c(66,"Partajarea datelor"),o(),s(67,"p"),c(68," Datele nu sunt v\xE2ndute c\u0103tre ter\u021Bi. Ele pot fi partajate doar cu furnizori de servicii esen\u021Biali (ex: Stripe pentru procesarea pl\u0103\u021Bilor). "),o()(),s(69,"section")(70,"h2"),c(71,"Drepturile utilizatorilor"),o(),s(72,"ul")(73,"li"),c(74,"Dreptul de acces la date"),o(),s(75,"li"),c(76,"Dreptul de rectificare sau \u0219tergere"),o(),s(77,"li"),c(78,"Dreptul de restric\u021Bionare a prelucr\u0103rii"),o(),s(79,"li"),c(80,"Dreptul de opozi\u021Bie"),o(),s(81,"li"),c(82,"Dreptul la portabilitatea datelor"),o(),s(83,"li"),c(84,"Dreptul de a depune pl\xE2ngere la ANSPDCP"),o()()(),s(85,"section")(86,"h2"),c(87,"Securitatea datelor"),o(),s(88,"p"),c(89," Implement\u0103m m\u0103suri tehnice \u0219i organizatorice pentru a proteja datele (criptare, acces limitat, autentificare securizat\u0103). "),o()(),s(90,"section")(91,"h2"),c(92,"Modific\u0103ri ale politicii"),o(),s(93,"p"),c(94," Politica poate fi actualizat\u0103. Modific\u0103rile vor fi publicate pe aceast\u0103 pagin\u0103 \u0219i vor intra \xEEn vigoare imediat. "),o()(),s(95,"section")(96,"h2"),c(97,"Contact"),o(),s(98,"p"),c(99," Pentru \xEEntreb\u0103ri legate de datele tale, ne po\u021Bi scrie la "),s(100,"strong"),c(101,"contact@expertease.ro"),o(),c(102,". "),o()()())},styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.privacy-container[_ngcontent-%COMP%]{max-width:900px;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6}.privacy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff}.privacy-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d}.privacy-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-top:8px;margin-bottom:12px}.privacy-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}"]})};var mi=[{path:"home",component:mn},{path:"about",component:gn},{path:"contact-us",component:di},{path:"terms",component:pi},{path:"privacy",component:ui},{path:"profile",component:wn,canActivate:[Ct]},{path:"home/:id",loadComponent:()=>import("./chunk-LNLUAD6T.js").then(i=>i.SpecialistDetailsComponent)},{path:"specialist/:id",component:_i},{path:"messages",component:ei,canActivate:[Ct]},{path:"profile/user/become-specialist",component:ii,canActivate:[Ct]},{path:"profile/user-settings",component:oi},{path:"profile/user-reviews",component:si},{path:"request-form",component:_t},{path:"register",component:fn},{path:"login",component:hn},{path:"specialist-details",component:_i},{path:"service-payment",component:li},{path:"admin",component:_n},{path:"admin/users",component:bn},{path:"admin/specialists",component:vn},{path:"admin/categories",component:ri},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",component:Cn}];var Fi={providers:[Gi({eventCoalescing:!0}),Zt(mi),Qi()]};var Ya=i=>({show:i});function Qa(i,e){i&1&&(s(0,"li")(1,"a",15),c(2,"Devino specialist!"),o()())}function ec(i,e){i&1&&(s(0,"li")(1,"a",16),c(2,"Mesajele tale"),o()())}var gi=class i{constructor(e,t){this.authService=e;this.router=t;this.router.events.pipe(ji(n=>n instanceof er)).subscribe(n=>{console.log("Navigated to:",n)})}title="ExpertEase.Frontend";navbarOpen=!1;toggleNavbar(){this.navbarOpen=!this.navbarOpen}static \u0275fac=function(t){return new(t||i)(h(I),h(Y))};static \u0275cmp=y({type:i,selectors:[["app-root"]],decls:31,vars:7,consts:[[1,"navbar"],["routerLink","/home","data-btn","Acas\u0103",1,"logo-button","toggle-btn"],["src","logo.svg","alt","Logo"],[1,"navbar-toggle",3,"click"],[1,"navbar-links",3,"ngClass"],[4,"ngIf"],["routerLink","/about","routerLinkActive","active"],["routerLinkActive","active",3,"routerLink"],["routerLink","/admin","routerLinkActive","active"],[1,"site-footer"],[1,"footer-content"],[1,"footer-links"],["routerLink","/contact-us","routerLinkActive","active"],["routerLink","/terms","routerLinkActive","active"],["routerLink","/privacy","routerLinkActive","active"],["routerLink","profile/user/become-specialist","routerLinkActive","active"],["routerLink","/messages","routerLinkActive","active"]],template:function(t,n){t&1&&(s(0,"nav",0)(1,"button",1),w(2,"img",2),o(),s(3,"button",3),g("click",function(){return n.toggleNavbar()}),c(4,"\u2630"),o(),s(5,"ul",4),C(6,Qa,3,0,"li",5),s(7,"li")(8,"a",6),c(9,"Despre noi"),o()(),C(10,ec,3,0,"li",5),s(11,"li")(12,"a",7),c(13),o()(),s(14,"li")(15,"a",8),c(16,"Admin Dashboard"),o()()()(),w(17,"router-outlet"),s(18,"footer",9)(19,"div",10)(20,"p"),c(21,"\xA9 2025 ExpertEase. Toate drepturile rezervate."),o(),s(22,"nav",11)(23,"a",6),c(24,"Despre noi"),o(),s(25,"a",12),c(26,"Contacteaz\u0103-ne!"),o(),s(27,"a",13),c(28,"Termeni \u0219i condi\u021Bii"),o(),s(29,"a",14),c(30,"Politic\u0103 de confiden\u021Bialitate"),o()()()()),t&2&&(l(5),p("ngClass",qe(5,Ya,n.navbarOpen)),l(),p("ngIf",n.authService.getUserRole()==="Client"),l(4),p("ngIf",n.authService.getUserRole()==="Client"||n.authService.getUserRole()==="Specialist"),l(2),p("routerLink",n.authService.getToken()?"/profile":"/register"),l(),E(" ",n.authService.getToken()?"Contul t\u0103u":"\xCEnregistreaz\u0103-te!"," "))},dependencies:[L,ue,z,Jt,Ee],styles:[".navbar[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;padding:16px 32px;background-color:#1e1e2f;color:#fff;box-shadow:0 2px 2px #0000001a;position:relative}.navbar-toggle[_ngcontent-%COMP%]{display:none;font-size:32px;background:none;border:none;color:#fff;cursor:pointer}.navbar-links[_ngcontent-%COMP%]{list-style:none;display:grid;grid-auto-flow:column;gap:24px;margin:0;padding:0;font-family:Roboto Mono,monospace}.navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:2px 0;transition:border-bottom .2s ease}.navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{border-bottom:2px solid white}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{grid-template-columns:1fr auto;grid-template-rows:auto auto;row-gap:16px}.navbar-toggle[_ngcontent-%COMP%]{display:block}.navbar-links[_ngcontent-%COMP%]{display:none;grid-auto-flow:row;width:100%;grid-column:1/-1}.navbar-links.show[_ngcontent-%COMP%]{display:grid}}.site-footer[_ngcontent-%COMP%]{background-color:#3c1a7d;color:#fff;padding:24px;text-align:center;font-family:Roboto Mono,monospace;margin-top:64px}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.footer-links[_ngcontent-%COMP%]{margin-top:12px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:0 12px;font-size:14px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};Yi(gi,ee(x({},Fi),{providers:[...Fi.providers,Zt(mi)]})).catch(i=>console.error(i));
