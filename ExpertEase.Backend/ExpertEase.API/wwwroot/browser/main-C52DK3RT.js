import{$ as y,$a as ur,A as Ae,Aa as rr,B as ke,Ba as st,C as g,Ca as wt,D as f,Da as ar,E as At,Ea as Ut,F as xo,Fa as Bn,G as Le,Ga as nt,H as F,Ha as Lt,I as ze,Ia as Co,J as rt,Ja as ie,K as zt,Ka as G,L as er,La as T,M as de,Ma as ct,N as l,Na as lt,O as hn,Oa as jn,P as v,Pa as sr,Q as S,Qa as cr,R as _n,Ra as ve,S as X,Sa as Bt,T as me,Ta as lr,U as h,Ua as Y,V as tr,Va as dr,W as at,Wa as pr,X as d,Xa as z,Y as H,Ya as He,Z as a,Za as oe,_ as r,_a as mr,a as O,aa as ce,ab as gr,b as $,ba as le,bb as jt,c as Ft,ca as x,cb as qn,d as C,da as u,db as re,e as Ho,ea as p,eb as De,f as xe,fa as nr,fb as $n,g as fe,ga as ir,gb as Wn,h as Rt,ha as Vt,hb as V,i as vo,ia as yt,ib as Be,j as Zo,ja as Mt,jb as yo,k as Ce,ka as L,l as Nn,la as s,m as Yo,ma as P,n as Ko,na as M,o as Jo,oa as Nt,p as Un,pa as k,q as bo,qa as E,r as Qo,ra as I,s as he,sa as _e,t as Xo,ta as Ee,u as Ln,ua as Ge,v as ye,va as Ie,w as U,wa as or,x as fn,xa as R,y as tt,ya as Z,z as N,za as se}from"./chunk-NL6NKX6K.js";var wr=(()=>{class i{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,n){this._renderer=e,this._elementRef=n}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(n){return new(n||i)(v(hn),v(rt))};static \u0275dir=X({type:i})}return i})(),wn=(()=>{class i extends wr{static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,features:[me]})}return i})(),Pt=new tt(""),ka={provide:Pt,useExisting:ye(()=>Ot),multi:!0},Ot=(()=>{class i extends wn{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,o){n&1&&u("change",function(m){return o.onChange(m.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[_e([ka]),me]})}return i})(),Ea={provide:Pt,useExisting:ye(()=>ae),multi:!0};function Ia(){let i=Co()?Co().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var Da=new tt(""),ae=(()=>{class i extends wr{_compositionMode;_composing=!1;constructor(e,n,o){super(e,n),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!Ia())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(n){return new(n||i)(v(hn),v(rt),v(Da,8))};static \u0275dir=X({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,o){n&1&&u("input",function(m){return o._handleInput(m.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(m){return o._compositionEnd(m.target.value)})},standalone:!1,features:[_e([Ea]),me]})}return i})();function Po(i){return i==null||Oo(i)===0}function Oo(i){return i==null?null:Array.isArray(i)||typeof i=="string"?i.length:i instanceof Set?i.size:null}var Ye=new tt(""),ii=new tt(""),Ta=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,dt=class{static min(t){return Sr(t)}static max(t){return Pr(t)}static required(t){return Or(t)}static requiredTrue(t){return kr(t)}static email(t){return Er(t)}static minLength(t){return Ir(t)}static maxLength(t){return Fa(t)}static pattern(t){return Ra(t)}static nullValidator(t){return Hn()}static compose(t){return zr(t)}static composeAsync(t){return Vr(t)}};function Sr(i){return t=>{if(t.value==null||i==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function Pr(i){return t=>{if(t.value==null||i==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function Or(i){return Po(i.value)?{required:!0}:null}function kr(i){return i.value===!0?null:{required:!0}}function Er(i){return Po(i.value)||Ta.test(i.value)?null:{email:!0}}function Ir(i){return t=>{let e=t.value?.length??Oo(t.value);return e===null||e===0?null:e<i?{minlength:{requiredLength:i,actualLength:e}}:null}}function Fa(i){return t=>{let e=t.value?.length??Oo(t.value);return e!==null&&e>i?{maxlength:{requiredLength:i,actualLength:e}}:null}}function Ra(i){if(!i)return Hn;let t,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(Po(n.value))return null;let o=n.value;return t.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}function Hn(i){return null}function Dr(i){return i!=null}function Tr(i){return tr(i)?Rt(i):i}function Fr(i){let t={};return i.forEach(e=>{t=e!=null?O(O({},t),e):t}),Object.keys(t).length===0?null:t}function Rr(i,t){return t.map(e=>e(i))}function Aa(i){return!i.validate}function Ar(i){return i.map(t=>Aa(t)?t:e=>t.validate(e))}function zr(i){if(!i)return null;let t=i.filter(Dr);return t.length==0?null:function(e){return Fr(Rr(e,t))}}function ko(i){return i!=null?zr(Ar(i)):null}function Vr(i){if(!i)return null;let t=i.filter(Dr);return t.length==0?null:function(e){let n=Rr(e,t).map(Tr);return Ko(n).pipe(Nn(Fr))}}function Eo(i){return i!=null?Vr(Ar(i)):null}function fr(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function Nr(i){return i._rawValidators}function Ur(i){return i._rawAsyncValidators}function Mo(i){return i?Array.isArray(i)?i:[i]:[]}function Zn(i,t){return Array.isArray(i)?i.includes(t):i===t}function hr(i,t){let e=Mo(t);return Mo(i).forEach(o=>{Zn(e,o)||e.push(o)}),e}function _r(i,t){return Mo(t).filter(e=>!Zn(i,e))}var Yn=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ko(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Eo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},it=class extends Yn{name;get formDirective(){return null}get path(){return null}},St=class extends Yn{_parent=null;name=null;valueAccessor=null},Kn=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},za={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Wu=$(O({},za),{"[class.ng-submitted]":"isSubmitted"}),J=(()=>{class i extends Kn{constructor(e){super(e)}static \u0275fac=function(n){return new(n||i)(v(St,2))};static \u0275dir=X({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,o){n&2&&H("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[me]})}return i})(),Me=(()=>{class i extends Kn{constructor(e){super(e)}static \u0275fac=function(n){return new(n||i)(v(it,10))};static \u0275dir=X({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,o){n&2&&H("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[me]})}return i})();var vn="VALID",Gn="INVALID",qt="PENDING",bn="DISABLED",pt=class{},Jn=class extends pt{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Cn=class extends pt{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},yn=class extends pt{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},$t=class extends pt{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Qn=class extends pt{source;constructor(t){super(),this.source=t}},Xn=class extends pt{source;constructor(t){super(),this.source=t}};function Io(i){return(oi(i)?i.validators:i)||null}function Va(i){return Array.isArray(i)?ko(i):i||null}function Do(i,t){return(oi(t)?t.asyncValidators:i)||null}function Na(i){return Array.isArray(i)?Eo(i):i||null}function oi(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function Lr(i,t,e){let n=i.controls;if(!(t?Object.keys(n):n).length)throw new Ln(1e3,"");if(!n[e])throw new Ln(1001,"")}function Br(i,t,e){i._forEachChild((n,o)=>{if(e[o]===void 0)throw new Ln(1002,"")})}var Wt=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return nt(this.statusReactive)}set status(t){nt(()=>this.statusReactive.set(t))}_status=Lt(()=>this.statusReactive());statusReactive=zt(void 0);get valid(){return this.status===vn}get invalid(){return this.status===Gn}get pending(){return this.status==qt}get disabled(){return this.status===bn}get enabled(){return this.status!==bn}errors;get pristine(){return nt(this.pristineReactive)}set pristine(t){nt(()=>this.pristineReactive.set(t))}_pristine=Lt(()=>this.pristineReactive());pristineReactive=zt(!0);get dirty(){return!this.pristine}get touched(){return nt(this.touchedReactive)}set touched(t){nt(()=>this.touchedReactive.set(t))}_touched=Lt(()=>this.touchedReactive());touchedReactive=zt(!1);get untouched(){return!this.touched}_events=new xe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(hr(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(hr(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(_r(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(_r(t,this._rawAsyncValidators))}hasValidator(t){return Zn(this._rawValidators,t)}hasAsyncValidator(t){return Zn(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched($(O({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new yn(!0,n))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new yn(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty($(O({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new Cn(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new Cn(!0,n))}markAsPending(t={}){this.status=qt;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new $t(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending($(O({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=bn,this.errors=null,this._forEachChild(o=>{o.disable($(O({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Jn(this.value,n)),this._events.next(new $t(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($(O({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=vn,this._forEachChild(n=>{n.enable($(O({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors($(O({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vn||this.status===qt)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Jn(this.value,e)),this._events.next(new $t(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity($(O({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bn:vn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=qt,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let n=Tr(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,o)=>n&&n._find(o),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new $t(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new F,this.statusChanges=new F}_calculateStatus(){return this._allControlsDisabled()?bn:this.errors?Gn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qt)?qt:this._anyControlsHaveStatus(Gn)?Gn:vn}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),o=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),o&&this._events.next(new Cn(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new yn(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){oi(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Va(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Na(this._rawAsyncValidators)}},Gt=class extends Wt{constructor(t,e,n){super(Io(e),Do(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Br(this,!0,t),Object.keys(t).forEach(n=>{Lr(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let o=this.controls[n];o&&o.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,o)=>{n.reset(t?t[o]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,o)=>((n.enabled||this.disabled)&&(e[o]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((o,c)=>{n=e(n,o,c)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var wo=class extends Gt{};var Sn=new tt("",{providedIn:"root",factory:()=>ri}),ri="always";function jr(i,t){return[...t.path,i]}function ei(i,t,e=ri){To(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),La(i,t),ja(i,t),Ba(i,t),Ua(i,t)}function vr(i,t,e=!0){let n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),ni(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function ti(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Ua(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function To(i,t){let e=Nr(i);t.validator!==null?i.setValidators(fr(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=Ur(i);t.asyncValidator!==null?i.setAsyncValidators(fr(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let o=()=>i.updateValueAndValidity();ti(t._rawValidators,o),ti(t._rawAsyncValidators,o)}function ni(i,t){let e=!1;if(i!==null){if(t.validator!==null){let o=Nr(i);if(Array.isArray(o)&&o.length>0){let c=o.filter(m=>m!==t.validator);c.length!==o.length&&(e=!0,i.setValidators(c))}}if(t.asyncValidator!==null){let o=Ur(i);if(Array.isArray(o)&&o.length>0){let c=o.filter(m=>m!==t.asyncValidator);c.length!==o.length&&(e=!0,i.setAsyncValidators(c))}}}let n=()=>{};return ti(t._rawValidators,n),ti(t._rawAsyncValidators,n),e}function La(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&qr(i,t)})}function Ba(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&qr(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function qr(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function ja(i,t){let e=(n,o)=>{t.valueAccessor.writeValue(n),o&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function $r(i,t){i==null,To(i,t)}function qa(i,t){return ni(i,t)}function Wr(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function $a(i){return Object.getPrototypeOf(i.constructor)===wn}function Gr(i,t){i._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function Hr(i,t){if(!t)return null;Array.isArray(t);let e,n,o;return t.forEach(c=>{c.constructor===ae?e=c:$a(c)?n=c:o=c}),o||n||e||null}function Wa(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}var Ga={provide:it,useExisting:ye(()=>Pe)},xn=Promise.resolve(),Pe=(()=>{class i extends it{callSetDisabledState;get submitted(){return nt(this.submittedReactive)}_submitted=Lt(()=>this.submittedReactive());submittedReactive=zt(!1);_directives=new Set;form;ngSubmit=new F;options;constructor(e,n,o){super(),this.callSetDisabledState=o,this.form=new Gt({},ko(e),Eo(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){xn.then(()=>{let n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),ei(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){xn.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){xn.then(()=>{let n=this._findContainer(e.path),o=new Gt({});$r(o,e),n.registerControl(e.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){xn.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){xn.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Gr(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new Qn(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new Xn(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(n){return new(n||i)(v(Ye,10),v(ii,10),v(Sn,8))};static \u0275dir=X({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,o){n&1&&u("submit",function(m){return o.onSubmit(m)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[_e([Ga]),me]})}return i})();function br(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function xr(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Mn=class extends Wt{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,n){super(Io(e),Do(n,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oi(e)&&(e.nonNullable||e.initialValueIsDefault)&&(xr(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){br(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){br(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){xr(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Ha=i=>i instanceof Mn;var Za={provide:St,useExisting:ye(()=>ee)},Cr=Promise.resolve(),ee=(()=>{class i extends St{_changeDetectorRef;callSetDisabledState;control=new Mn;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new F;constructor(e,n,o,c,m,_){super(),this._changeDetectorRef=m,this.callSetDisabledState=_,this._parent=e,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=Hr(this,c)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Wr(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ei(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Cr.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,o=n!==0&&Bn(n);Cr.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?jr(e,this._parent):[e]}static \u0275fac=function(n){return new(n||i)(v(it,9),v(Ye,10),v(ii,10),v(Pt,10),v(Ut,8),v(Sn,8))};static \u0275dir=X({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[_e([Za]),me,ke]})}return i})();var we=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=X({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return i})(),Ya={provide:Pt,useExisting:ye(()=>ot),multi:!0},ot=(()=>{class i extends wn{writeValue(e){let n=e??"";this.setProperty("value",n)}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,o){n&1&&u("input",function(m){return o.onChange(m.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[_e([Ya]),me]})}return i})();var Zr=new tt("");var Ka={provide:it,useExisting:ye(()=>Fo)},Fo=(()=>{class i extends it{callSetDisabledState;get submitted(){return nt(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Lt(()=>this._submittedReactive());_submittedReactive=zt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new F;constructor(e,n,o){super(),this.callSetDisabledState=o,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ni(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let n=this.form.get(e.path);return ei(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){vr(e.control||null,e,!1),Wa(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this._submittedReactive.set(!0),Gr(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Qn(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Xn(this.form))}_updateDomValue(){this.directives.forEach(e=>{let n=e.control,o=this.form.get(e.path);n!==o&&(vr(n||null,e),Ha(o)&&(ei(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let n=this.form.get(e.path);$r(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let n=this.form.get(e.path);n&&qa(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){To(this.form,this),this._oldForm&&ni(this._oldForm,this)}static \u0275fac=function(n){return new(n||i)(v(Ye,10),v(ii,10),v(Sn,8))};static \u0275dir=X({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,o){n&1&&u("submit",function(m){return o.onSubmit(m)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[_e([Ka]),me,ke]})}return i})();var Ja={provide:St,useExisting:ye(()=>Ro)},Ro=(()=>{class i extends St{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new F;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,n,o,c,m){super(),this._ngModelWarningConfig=m,this._parent=e,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=Hr(this,c)}ngOnChanges(e){this._added||this._setUpControl(),Wr(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return jr(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(n){return new(n||i)(v(it,13),v(Ye,10),v(ii,10),v(Pt,10),v(Zr,8))};static \u0275dir=X({type:i,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[_e([Ja]),me,ke]})}return i})();var Qa={provide:Pt,useExisting:ye(()=>mt),multi:!0};function Yr(i,t){return i==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function Xa(i){return i.split(":")[0]}var mt=(()=>{class i extends wn{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let n=this._getOptionId(e),o=Yr(n,e);this.setProperty("value",o)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){let n=Xa(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,o){n&1&&u("change",function(m){return o.onChange(m.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[_e([Qa]),me]})}return i})(),Ht=(()=>{class i{_element;_renderer;_select;id;constructor(e,n,o){this._element=e,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(Yr(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(v(rt),v(hn),v(mt,9))};static \u0275dir=X({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})(),es={provide:Pt,useExisting:ye(()=>Kr),multi:!0};function yr(i,t){return i==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function ts(i){return i.split(":")[0]}var Kr=(()=>{class i extends wn{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let n;if(Array.isArray(e)){let o=e.map(c=>this._getOptionId(c));n=(c,m)=>{c._setSelected(o.indexOf(m.toString())>-1)}}else n=(o,c)=>{o._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{let o=[],c=n.selectedOptions;if(c!==void 0){let m=c;for(let _=0;_<m.length;_++){let w=m[_],A=this._getOptionValue(w.value);o.push(A)}}else{let m=n.options;for(let _=0;_<m.length;_++){let w=m[_];if(w.selected){let A=this._getOptionValue(w.value);o.push(A)}}}this.value=o,e(o)}}_registerOption(e){let n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){let n=ts(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,o){n&1&&u("change",function(m){return o.onChange(m.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[_e([es]),me]})}return i})(),Zt=(()=>{class i{_element;_renderer;_select;id;_value;constructor(e,n,o){this._element=e,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(yr(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(yr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(v(rt),v(hn),v(Kr,9))};static \u0275dir=X({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})();function ns(i){return typeof i=="number"?i:parseInt(i,10)}function Jr(i){return typeof i=="number"?i:parseFloat(i)}var Pn=(()=>{class i{_validator=Hn;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Hn,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(n){return new(n||i)};static \u0275dir=X({type:i,features:[ke]})}return i})(),is={provide:Ye,useExisting:ye(()=>kt),multi:!0},kt=(()=>{class i extends Pn{max;inputName="max";normalizeInput=e=>Jr(e);createValidator=e=>Pr(e);static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,o){n&2&&at("max",o._enabled?o.max:null)},inputs:{max:"max"},standalone:!1,features:[_e([is]),me]})}return i})(),os={provide:Ye,useExisting:ye(()=>Et),multi:!0},Et=(()=>{class i extends Pn{min;inputName="min";normalizeInput=e=>Jr(e);createValidator=e=>Sr(e);static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,o){n&2&&at("min",o._enabled?o.min:null)},inputs:{min:"min"},standalone:!1,features:[_e([os]),me]})}return i})(),rs={provide:Ye,useExisting:ye(()=>Se),multi:!0},as={provide:Ye,useExisting:ye(()=>Ao),multi:!0},Se=(()=>{class i extends Pn{required;inputName="required";normalizeInput=Bn;createValidator=e=>Or;enabled(e){return e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,o){n&2&&at("required",o._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[_e([rs]),me]})}return i})(),Ao=(()=>{class i extends Se{createValidator=e=>kr;static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(n,o){n&2&&at("required",o._enabled?"":null)},standalone:!1,features:[_e([as]),me]})}return i})(),ss={provide:Ye,useExisting:ye(()=>zo),multi:!0},zo=(()=>{class i extends Pn{email;inputName="email";normalizeInput=Bn;createValidator=e=>Er;enabled(e){return e}static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},standalone:!1,features:[_e([ss]),me]})}return i})(),cs={provide:Ye,useExisting:ye(()=>Vo),multi:!0},Vo=(()=>{class i extends Pn{minlength;inputName="minlength";normalizeInput=e=>ns(e);createValidator=e=>Ir(e);static \u0275fac=(()=>{let e;return function(o){return(e||(e=Le(i)))(o||i)}})();static \u0275dir=X({type:i,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(n,o){n&2&&at("minlength",o._enabled?o.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[_e([cs]),me]})}return i})();var Qr=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=_n({type:i});static \u0275inj=fn({})}return i})(),So=class extends Wt{constructor(t,e,n){super(Io(e),Do(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),e&&(this.controls.splice(o,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Br(this,!1,t),t.forEach((n,o)=>{Lr(this,!1,o),this.at(o).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((n,o)=>{this.at(o)&&this.at(o).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,o)=>{n.reset(t[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,n)=>n._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Mr(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var Xr=(()=>{class i{useNonNullable=!1;get nonNullable(){let e=new i;return e.useNonNullable=!0,e}group(e,n=null){let o=this._reduceControls(e),c={};return Mr(n)?c=n:n!==null&&(c.validators=n.validator,c.asyncValidators=n.asyncValidator),new Gt(o,c)}record(e,n=null){let o=this._reduceControls(e);return new wo(o,n)}control(e,n,o){let c={};return this.useNonNullable?(Mr(n)?c=n:(c.validators=n,c.asyncValidators=o),new Mn(e,$(O({},c),{nonNullable:!0}))):new Mn(e,n,o)}array(e,n,o){let c=e.map(m=>this._createControl(m));return new So(c,n,o)}_reduceControls(e){let n={};return Object.keys(e).forEach(o=>{n[o]=this._createControl(e[o])}),n}_createControl(e){if(e instanceof Mn)return e;if(e instanceof Wt)return e;if(Array.isArray(e)){let n=e[0],o=e.length>1?e[1]:null,c=e.length>2?e[2]:null;return this.control(n,o,c)}else return this.control(e)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var W=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Sn,useValue:e.callSetDisabledState??ri}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=_n({type:i});static \u0275inj=fn({imports:[Qr]})}return i})(),ut=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Zr,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Sn,useValue:e.callSetDisabledState??ri}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=_n({type:i});static \u0275inj=fn({imports:[Qr]})}return i})();var je=class i{searchTerm="";placeholder="Caut\u0103 ...";searchChanged=new F;onSearchChanged(){this.searchChanged.emit(this.searchTerm.trim())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder"},outputs:{searchChanged:"searchChanged"},decls:4,vars:2,consts:[[1,"search-box"],["type","text",3,"ngModelChange","placeholder","ngModel"],["aria-label","Search",1,"search-icon-button",3,"click"],["src","assets/icons/search.svg","alt","Search Icon"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"input",1),I("ngModelChange",function(c){return E(n.searchTerm,c)||(n.searchTerm=c),c}),r(),a(2,"button",2),u("click",function(){return n.onSearchChanged()}),y(3,"img",3),r()()),e&2&&(l(),d("placeholder",n.placeholder||"Caut\u0103..."),k("ngModel",n.searchTerm))},dependencies:[Y,W,ae,J,ee],styles:[".search-box[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;gap:20px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px 50px 15px 20px;border:none;background:transparent;outline:none;font-family:Roboto Mono,monospace;font-size:12px}.search-icon-button[_ngcontent-%COMP%]{background:none;border:none;padding:0 16px;font-size:1.2rem;color:#444;cursor:pointer;display:flex;align-items:center;justify-content:center}.search-icon-button[_ngcontent-%COMP%]:hover{color:#000}.search-icon-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}"]})};function ls(i,t){if(i&1&&(a(0,"option",7),s(1),r()),i&2){let e=t.$implicit;d("value",e),l(),P(e)}}var Ke=class i{currentPage=1;totalItems=0;pageSize=10;pageSizeOptions=[5,10,20];pageChange=new F;pageSizeChange=new F;getTotalPages(){return Math.ceil(this.totalItems/this.pageSize)}goToPreviousPage(){this.currentPage>1&&this.pageChange.emit(this.currentPage-1)}goToNextPage(){this.currentPage<this.getTotalPages()&&this.pageChange.emit(this.currentPage+1)}onPageSizeChange(t){let e=Number(t);this.pageSizeChange.emit(e)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalItems:"totalItems",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},outputs:{pageChange:"pageChange",pageSizeChange:"pageSizeChange"},decls:13,vars:6,consts:[[1,"pagination-wrapper"],[1,"page-size-selector"],["for","pageSize"],["id","pageSize",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"pagination-controls"],[3,"click","disabled"],[3,"value"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"label",2),s(3,"Afi\u0219eaz\u0103 pe pagin\u0103:"),r(),a(4,"select",3),I("ngModelChange",function(c){return E(n.pageSize,c)||(n.pageSize=c),c}),u("change",function(){return n.onPageSizeChange(n.pageSize)}),h(5,ls,2,2,"option",4),r()(),a(6,"div",5)(7,"button",6),u("click",function(){return n.goToPreviousPage()}),s(8,"\u2190"),r(),a(9,"span"),s(10),r(),a(11,"button",6),u("click",function(){return n.goToNextPage()}),s(12,"\u2192"),r()()()),e&2&&(l(4),k("ngModel",n.pageSize),l(),d("ngForOf",n.pageSizeOptions),l(2),d("disabled",n.currentPage===1),l(3),Nt("Pagina ",n.currentPage," din ",n.getTotalPages(),""),l(),d("disabled",n.currentPage===n.getTotalPages()))},dependencies:[G,ut,Ht,Zt,mt,J,W,ee],styles:[".pagination-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:32px;flex-wrap:wrap;margin-top:24px;font-family:Roboto Mono,monospace}.page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:16px}.page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}.page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 6px;border:1px solid #aaa;border-radius:4px;font-size:15px;font-family:Roboto Mono,monospace}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:16px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border:2px solid #000;background-color:#d9c8ff;border-radius:4px;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:default}"]})};function ds(i,t){i&1&&(a(0,"div",33),s(1," Data \u0219i ora sunt obligatorii. "),r())}function ps(i,t){i&1&&(a(0,"div",33),s(1," Num\u0103rul de telefon este obligatoriu. "),r())}function ms(i,t){i&1&&(a(0,"div",33),s(1," Adresa este obligatorie. "),r())}function us(i,t){i&1&&(a(0,"div",33),s(1," Descrierea solicit\u0103rii este obligatorie. "),r())}var Yt=class i{constructor(t){this.router=t}requestForm={receiverUserId:"",day:null,month:null,year:null,startHour:null,startMinute:null,phoneNumber:"",address:"",description:""};formSubmit=new F;close=new F;formSubmitted=!1;isLoading=!1;validationErrors={};submitRequest(t){if(this.formSubmitted=!0,this.validationErrors={},this.validateForm(),t.invalid||Object.keys(this.validationErrors).length>0){Object.keys(t.controls).forEach(o=>{t.controls[o].markAsTouched()});return}this.isLoading=!0;let e=this.combineDateTime(),n=$(O({},this.requestForm),{requestedStartDate:e});setTimeout(()=>{this.formSubmit.emit(n),this.isLoading=!1,this.router.navigate(["/messages"]).then(()=>{this.closeForm()})},2e3)}validateForm(){let t={};if(this.requestForm.day&&this.requestForm.month&&this.requestForm.year&&this.requestForm.startHour!==null&&this.requestForm.startMinute!==null){let e=this.combineDateTime();e<=new Date&&(t.datetime="Data \u0219i ora trebuie s\u0103 fie \xEEn viitor.");let o=new Date;o.setFullYear(o.getFullYear()+1),e>o&&(t.datetime="Data nu poate fi mai mult de un an \xEEn viitor.");let c=this.requestForm.startHour;(c<8||c>20)&&(t.time="Ora trebuie s\u0103 fie \xEEntre 08:00 \u0219i 20:00.")}if(this.requestForm.phoneNumber&&(/^(\+40|0)(7[0-9]{8}|[23][0-9]{7})$/.test(this.requestForm.phoneNumber.replace(/\s/g,""))||(t.phoneNumber="Num\u0103rul de telefon nu este valid. Folosi\u021Bi formatul rom\xE2nesc (ex: 0723123456).")),this.requestForm.address&&this.requestForm.address.trim().length<10&&(t.address="Adresa trebuie s\u0103 con\u021Bin\u0103 cel pu\u021Bin 10 caractere."),this.requestForm.description&&this.requestForm.description.trim().length<20&&(t.description="Descrierea trebuie s\u0103 con\u021Bin\u0103 cel pu\u021Bin 20 de caractere."),this.requestForm.day!==null){let e=this.requestForm.month||1,n=this.requestForm.year||new Date().getFullYear(),o=new Date(n,e,0).getDate();(this.requestForm.day<1||this.requestForm.day>o)&&(t.day=`Ziua trebuie s\u0103 fie \xEEntre 1 \u0219i ${o} pentru luna selectat\u0103.`)}this.validationErrors=t}combineDateTime(){let t=this.requestForm.day||1,e=(this.requestForm.month||1)-1,n=this.requestForm.year||new Date().getFullYear(),o=this.requestForm.startHour||0,c=this.requestForm.startMinute||0;return new Date(n,e,t,o,c,0,0)}closeForm(){this.isLoading||this.close.emit()}getCurrentYear(){return new Date().getFullYear()}formatPhoneNumber(){if(this.requestForm.phoneNumber){let t=this.requestForm.phoneNumber.replace(/[^\d+]/g,"");t.startsWith("+40")?(t=t.slice(3),this.requestForm.phoneNumber="+40 "+this.formatDigits(t)):t.startsWith("40")?(t=t.slice(2),this.requestForm.phoneNumber="+40 "+this.formatDigits(t)):t.startsWith("0")?this.requestForm.phoneNumber=this.formatDigits(t):t.length>0&&(this.requestForm.phoneNumber="0"+this.formatDigits(t))}}formatDigits(t){return t.length<=4?t:t.length<=7?t.slice(0,4)+" "+t.slice(4):t.slice(0,4)+" "+t.slice(4,7)+" "+t.slice(7,10)}static \u0275fac=function(e){return new(e||i)(v(re))};static \u0275cmp=S({type:i,selectors:[["app-request-form"]],inputs:{requestForm:"requestForm"},outputs:{formSubmit:"formSubmit",close:"close"},decls:61,vars:13,consts:[["formRef","ngForm"],["dayCtrl","ngModel"],["monthCtrl","ngModel"],["yearCtrl","ngModel"],["hourCtrl","ngModel"],["minuteCtrl","ngModel"],["phoneCtrl","ngModel"],["addressCtrl","ngModel"],["descriptionCtrl","ngModel"],[1,"overlay"],[1,"request-form-wrapper"],[1,"close-button",3,"click"],[1,"request-form",3,"ngSubmit"],[1,"datetime-row"],[1,"date-fields"],[1,"date-field"],[1,"input-box"],["type","number","name","day","placeholder","ZZ","min","1","max","31","required","",3,"ngModelChange","ngModel"],[1,"date-separator"],["type","number","name","month","placeholder","LL","min","1","max","12","required","",3,"ngModelChange","ngModel"],["type","number","name","year","placeholder","AAAA","min","2024","max","2030","required","",3,"ngModelChange","ngModel"],[1,"time-fields"],[1,"time-field"],["type","number","name","startHour","placeholder","HH","min","0","max","23","required","",3,"ngModelChange","ngModel"],[1,"time-separator"],["type","number","name","startMinute","placeholder","MM","min","0","max","59","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["type","tel","name","phoneNumber","placeholder","ex: 0723 123 456","required","",3,"ngModelChange","ngModel"],["type","text","name","address","placeholder","ex: Str. Teiului nr. 14, Bucure\u0219ti","required","",3,"ngModelChange","ngModel"],[1,"input-box","textarea-box"],["name","description","rows","4","placeholder","Descrie\u021Bi \xEEn detaliu serviciul de care ave\u021Bi nevoie...","required","",3,"ngModelChange","ngModel"],[1,"center-button"],["type","submit",3,"disabled"],[1,"error"]],template:function(e,n){if(e&1){let o=x();a(0,"div",9)(1,"div",10)(2,"button",11),u("click",function(){return g(o),f(n.closeForm())}),s(3,"\xD7"),r(),a(4,"h2"),s(5,"Trimite o solicitare"),r(),a(6,"form",12,0),u("ngSubmit",function(){g(o);let m=L(7);return f(n.submitRequest(m))}),a(8,"label"),s(9," Data \u0219i ora dorite: "),a(10,"div",13)(11,"div",14)(12,"div",15)(13,"div",16)(14,"input",17,1),I("ngModelChange",function(m){return g(o),E(n.requestForm.day,m)||(n.requestForm.day=m),f(m)}),r()()(),a(16,"span",18),s(17,"/"),r(),a(18,"div",15)(19,"div",16)(20,"input",19,2),I("ngModelChange",function(m){return g(o),E(n.requestForm.month,m)||(n.requestForm.month=m),f(m)}),r()()(),a(22,"span",18),s(23,"/"),r(),a(24,"div",15)(25,"div",16)(26,"input",20,3),I("ngModelChange",function(m){return g(o),E(n.requestForm.year,m)||(n.requestForm.year=m),f(m)}),r()()()(),a(28,"div",21)(29,"div",22)(30,"div",16)(31,"input",23,4),I("ngModelChange",function(m){return g(o),E(n.requestForm.startHour,m)||(n.requestForm.startHour=m),f(m)}),r()()(),a(33,"span",24),s(34,":"),r(),a(35,"div",22)(36,"div",16)(37,"input",25,5),I("ngModelChange",function(m){return g(o),E(n.requestForm.startMinute,m)||(n.requestForm.startMinute=m),f(m)}),r()()()()(),h(39,ds,2,0,"div",26),r(),a(40,"label"),s(41," Num\u0103r de telefon: "),a(42,"div",16)(43,"input",27,6),I("ngModelChange",function(m){return g(o),E(n.requestForm.phoneNumber,m)||(n.requestForm.phoneNumber=m),f(m)}),r()(),h(45,ps,2,0,"div",26),r(),a(46,"label"),s(47," Adres\u0103: "),a(48,"div",16)(49,"input",28,7),I("ngModelChange",function(m){return g(o),E(n.requestForm.address,m)||(n.requestForm.address=m),f(m)}),r()(),h(51,ms,2,0,"div",26),r(),a(52,"label"),s(53," Descrierea solicit\u0103rii: "),a(54,"div",29)(55,"textarea",30,8),I("ngModelChange",function(m){return g(o),E(n.requestForm.description,m)||(n.requestForm.description=m),f(m)}),r()(),h(57,us,2,0,"div",26),r(),a(58,"div",31)(59,"button",32),s(60," Trimite solicitarea "),r()()()()()}if(e&2){let o=L(7),c=L(15),m=L(21),_=L(27),w=L(32),A=L(38),j=L(44),ge=L(50),We=L(56);l(14),k("ngModel",n.requestForm.day),l(6),k("ngModel",n.requestForm.month),l(6),k("ngModel",n.requestForm.year),l(5),k("ngModel",n.requestForm.startHour),l(6),k("ngModel",n.requestForm.startMinute),l(2),d("ngIf",(c.invalid||m.invalid||_.invalid||w.invalid||A.invalid)&&(c.dirty||c.touched||m.dirty||m.touched||_.dirty||_.touched||w.dirty||w.touched||A.dirty||A.touched||n.formSubmitted)),l(4),k("ngModel",n.requestForm.phoneNumber),l(2),d("ngIf",j.invalid&&(j.dirty||j.touched||n.formSubmitted)),l(4),k("ngModel",n.requestForm.address),l(2),d("ngIf",ge.invalid&&(ge.dirty||ge.touched||n.formSubmitted)),l(4),k("ngModel",n.requestForm.description),l(2),d("ngIf",We.invalid&&(We.dirty||We.touched||n.formSubmitted)),l(2),d("disabled",o.invalid&&n.formSubmitted)}},dependencies:[Y,T,W,we,ae,ot,J,Me,Se,Et,kt,ee,Pe,ut],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.request-form-wrapper[_ngcontent-%COMP%]{position:relative;width:600px;max-width:90vw;margin:2rem auto;background-color:#e8d9ff;border:2px solid #000;padding:2rem;font-family:Roboto Mono,monospace;border-radius:8px;box-shadow:0 4px 12px #00000026}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;background:none;border:none;font-size:24px;font-weight:700;cursor:pointer;color:#333;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-button[_ngcontent-%COMP%]:hover{color:#000;background-color:#0000001a;border-radius:50%}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:1.25rem;margin-bottom:1.5rem;margin-top:0}.request-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;font-size:.95rem;font-weight:500}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;font-family:Roboto Mono,monospace;font-size:.9rem}.input-box[_ngcontent-%COMP%]{background-color:#f8f5ff;border:2px solid #c9b7ff;border-radius:6px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s ease;margin-top:4px}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff;box-shadow:0 2px 8px #9a79ff33}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:14px;outline:none;color:#333}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#888;font-style:italic}.datetime-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-top:4px}.date-fields[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center;gap:4px}.time-fields[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:4px}.date-field[_ngcontent-%COMP%]{flex:1}.date-field[_ngcontent-%COMP%]:nth-child(5){flex:1.5}.time-field[_ngcontent-%COMP%]{flex:1}.date-separator[_ngcontent-%COMP%], .time-separator[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#666;margin:0 2px}.date-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .time-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{text-align:center;font-weight:500}.date-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .date-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .time-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .time-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.date-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][type=number][_ngcontent-%COMP%], .time-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.textarea-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;padding:8px 0;line-height:1.4}.center-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1.5rem}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border:2px solid #000;border-radius:6px;background-color:#c9b7ff;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace;font-size:14px;transition:all .3s ease}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#b8a3ff;box-shadow:0 2px 6px #0003;transform:translateY(-1px)}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 1px 3px #0003}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#dcdcdc;color:#888;cursor:not-allowed;border-color:#bbb;transform:none;box-shadow:none}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px;font-weight:400}@media (max-width: 768px){.request-form-wrapper[_ngcontent-%COMP%]{max-width:90vw;margin:1rem;padding:1.5rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem}}"]})};var gs=i=>["/specialist",i];function fs(i,t){if(i&1&&(a(0,"span",18),s(1),r()),i&2){let e=t.$implicit;l(),P(e.name)}}function hs(i,t){if(i&1){let e=x();a(0,"div",19)(1,"app-request-form",20),u("formSubmit",function(){g(e);let o=p();return f(o.submitRequest(o.requestForm))})("close",function(){g(e);let o=p();return f(o.closeRequestForm())}),r()()}if(i&2){let e=p();l(),d("requestForm",e.requestForm)}}var On=class i{constructor(t){this.router=t}specialist={id:"",fullName:"",email:"",profilePictureUrl:"",phoneNumber:"",address:"",categories:[],yearsExperience:0,description:"",createdAt:new Date,updatedAt:new Date,rating:0};isRequestFormVisible=!1;requestForm={receiverUserId:"",day:null,month:null,year:null,startHour:null,startMinute:null,phoneNumber:"",address:"",description:""};specialistId=new F;requestFormSubmit=new F;goToSendRequest(){this.requestForm.receiverUserId=this.specialist.id,this.isRequestFormVisible=!0}closeRequestForm(){this.requestForm={receiverUserId:"",day:null,month:null,year:null,startHour:null,startMinute:null,phoneNumber:"",address:"",description:""},this.isRequestFormVisible=!1}transformFormDataToRequestDTO(t){let e=this.combineDateTime(t);return{receiverUserId:t.receiverUserId,requestedStartDate:e,phoneNumber:t.phoneNumber,address:t.address,description:t.description}}combineDateTime(t){let e=t.date||1,n=(t.month||1)-1,o=t.year||new Date().getFullYear(),c=t.startHour||0,m=t.startMinute||0;return new Date(o,n,e,c,m,0,0)}submitRequest(t){let e=this.transformFormDataToRequestDTO(t);this.requestFormSubmit.emit(e),this.closeRequestForm()}static \u0275fac=function(e){return new(e||i)(v(re))};static \u0275cmp=S({type:i,selectors:[["app-specialist-card"]],inputs:{specialist:"specialist"},outputs:{specialistId:"specialistId",requestFormSubmit:"requestFormSubmit"},decls:28,vars:10,consts:[[1,"card"],[1,"avatar-wrapper"],[1,"avatar"],["alt","User avatar",3,"src"],[1,"rating-badge"],["src","assets/star-rating.svg","alt","User star"],[1,"rating-value"],[1,"info"],[1,"full-name",3,"routerLink"],[1,"details-block"],[1,"row"],[1,"categories"],[1,"label"],["class","tag",4,"ngFor","ngForOf"],[1,"experience"],[1,"description"],[1,"request-btn",3,"click"],["class","overlay",4,"ngIf"],[1,"tag"],[1,"overlay"],[3,"formSubmit","close","requestForm"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),y(3,"img",3),r(),a(4,"div",4),y(5,"img",5),a(6,"span",6),s(7),r()()(),a(8,"div",7)(9,"h2",8),s(10),r(),a(11,"div",9)(12,"div",10)(13,"div",11)(14,"span",12),s(15,"Categorii:"),r(),h(16,fs,2,1,"span",13),r(),a(17,"div",14)(18,"span",12),s(19,"Ani experien\u021B\u0103:"),r(),s(20),r()(),a(21,"div",15)(22,"span",12),s(23,"Descriere:"),r(),s(24),r()()(),a(25,"button",16),u("click",function(){return n.goToSendRequest()}),s(26,"F\u0103 o solicitare"),r()(),h(27,hs,2,1,"div",17)),e&2&&(l(3),d("src",n.specialist.profilePictureUrl||"assets/avatar.svg",de),l(4),P(n.specialist.rating),l(2),d("routerLink",Ge(8,gs,n.specialist.id)),l(),M(" ",n.specialist.fullName," "),l(6),d("ngForOf",n.specialist.categories),l(4),M(" ",n.specialist.yearsExperience," "),l(4),M(" ",n.specialist.description," "),l(3),d("ngIf",n.isRequestFormVisible))},dependencies:[Y,G,T,Yt,De],styles:[".card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#cfbdfe;padding:20px;width:100%;gap:20px;justify-content:space-between;box-sizing:border-box;font-family:Roboto Mono,monospace}.info[_ngcontent-%COMP%]{flex:1}.full-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:.25rem;margin-bottom:.5rem}.full-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.details-block[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:12px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.categories[_ngcontent-%COMP%], .experience[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-size:.95rem}.label[_ngcontent-%COMP%]{font-weight:700;margin-right:6px}.tag[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem}.request-btn[_ngcontent-%COMP%]{background-color:#9a83db;padding:32px 24px;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:100px;aspect-ratio:1/1}.avatar[_ngcontent-%COMP%]{position:relative;width:100px;height:100px;overflow:hidden}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background-color:#e6dfff;object-fit:cover;display:block}.rating-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;display:inline-flex;align-items:center;gap:.3em;background:#fff;padding:.2em .5em;border-radius:.6em;font-size:1em;box-shadow:0 1px 4px #0000001a}.rating-badge[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1em;height:1em}"]})};var gt=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/Category";addCategory(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.post(`${this.baseUrl}/Add`,t,{headers:n})}getCategoryById(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/GetById/${t}`,{headers:n})}getAllCategories(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`}),o=new He;return t&&(o=o.set("search",t)),this.http.get(`${this.baseUrl}/GetAll`,{headers:n,params:o})}getCategoriesForSpecialist(t){let e=new He;return t&&(e=e.set("search",t)),this.http.get(`${this.baseUrl}/GetAllForSpecialist`,{params:e})}getCategoriesAdminPage(t,e,n){let o=this.authService.getToken(),c=new z({Authorization:`Bearer ${o}`}),m=new He().set("search",t||"").set("page",e).set("pageSize",n);return this.http.get(`${this.baseUrl}/GetPageForAdmin`,{headers:c,params:m})}updateCategory(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Update/${t.id}`,t,{headers:n})}deleteCategory(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.delete(`${this.baseUrl}/Delete/${t}`,{headers:n})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};function _s(i,t){if(i&1&&(a(0,"span",5),s(1),r()),i&2){let e=p();l(),M("(",e.activeFiltersCount,")")}}function vs(i,t){if(i&1&&(a(0,"span",14),s(1),r()),i&2){let e=p(3);l(),M("",e.selectedCategoriesCount," selectate")}}function bs(i,t){if(i&1&&(a(0,"span",14),s(1),r()),i&2){let e=p(3);l(),P(e.getRatingLabel(e.currentFilters.minRating))}}function xs(i,t){if(i&1&&(a(0,"span",14),s(1),r()),i&2){let e=p(3);l(),P(e.getExperienceLabel(e.currentFilters.experienceRange))}}function Cs(i,t){if(i&1&&(a(0,"span",14),s(1),r()),i&2){let e=p(3);l(),P(e.getSortLabel(e.currentFilters.sortByRating))}}function ys(i,t){if(i&1){let e=x();a(0,"button",15),u("click",function(){g(e);let o=p(3);return f(o.clearAllFilters())}),a(1,"span",11),s(2,"\u{1F5D1}\uFE0F"),r(),a(3,"span"),s(4,"\u0218terge toate"),r()()}}function Ms(i,t){if(i&1){let e=x();a(0,"div",9)(1,"button",10),u("click",function(){g(e);let o=p(2);return f(o.selectFilterType("categories"))}),a(2,"span",11),s(3,"\u{1F4C2}"),r(),a(4,"span"),s(5,"Categorii"),r(),h(6,vs,2,1,"span",12),r(),a(7,"button",10),u("click",function(){g(e);let o=p(2);return f(o.selectFilterType("rating"))}),a(8,"span",11),s(9,"\u2B50"),r(),a(10,"span"),s(11,"Rating"),r(),h(12,bs,2,1,"span",12),r(),a(13,"button",10),u("click",function(){g(e);let o=p(2);return f(o.selectFilterType("experience"))}),a(14,"span",11),s(15,"\u{1F3AF}"),r(),a(16,"span"),s(17,"Experien\u021B\u0103"),r(),h(18,xs,2,1,"span",12),r(),a(19,"button",10),u("click",function(){g(e);let o=p(2);return f(o.selectFilterType("sort"))}),a(20,"span",11),s(21,"\u2195\uFE0F"),r(),a(22,"span"),s(23,"Sortare"),r(),h(24,Cs,2,1,"span",12),r(),h(25,ys,5,0,"button",13),r()}if(i&2){let e=p(2);l(6),d("ngIf",e.selectedCategoriesCount>0),l(6),d("ngIf",e.currentFilters.minRating),l(6),d("ngIf",e.currentFilters.experienceRange),l(6),d("ngIf",e.currentFilters.sortByRating),l(),d("ngIf",e.activeFiltersCount>0)}}function ws(i,t){if(i&1&&(a(0,"span",31),s(1),r()),i&2){let e=p().$implicit;l(),P(e.description)}}function Ss(i,t){if(i&1){let e=x();a(0,"div",27),u("click",function(){let o=g(e).$implicit,c=p(4);return f(c.toggleCategory(o.id))}),a(1,"input",28),u("click",function(o){return g(e),f(o.stopPropagation())})("change",function(){let o=g(e).$implicit,c=p(4);return f(c.toggleCategory(o.id))}),r(),a(2,"span",29),s(3),r(),h(4,ws,2,1,"span",30),r()}if(i&2){let e=t.$implicit,n=p(4);l(),d("checked",n.isCategorySelected(e.id)),l(2),P(e.name),l(),d("ngIf",e.description)}}function Ps(i,t){if(i&1&&(a(0,"div",25),h(1,Ss,5,3,"div",26),r()),i&2){let e=p(3);l(),d("ngForOf",e.filteredCategories)}}function Os(i,t){i&1&&(a(0,"div",32),s(1," Se \xEEncarc\u0103 categoriile... "),r())}function ks(i,t){if(i&1){let e=x();a(0,"button",33),u("click",function(){g(e);let o=p(3);return f(o.clearCategoriesFilter())}),s(1),r()}if(i&2){let e=p(3);l(),M(" \u0218terge categoriile (",e.selectedCategoriesCount,") ")}}function Es(i,t){if(i&1){let e=x();a(0,"div",16)(1,"div",17)(2,"button",18),u("click",function(){g(e);let o=p(2);return f(o.goBack())}),s(3,"\u2190 \xCEnapoi"),r(),a(4,"h3"),s(5,"Categorii"),r()(),a(6,"div",19)(7,"div",20)(8,"input",21),I("ngModelChange",function(o){g(e);let c=p(2);return E(c.categorySearchTerm,o)||(c.categorySearchTerm=o),f(o)}),u("ngModelChange",function(){g(e);let o=p(2);return f(o.searchCategories())}),r()(),h(9,Ps,2,1,"div",22)(10,Os,2,0,"div",23)(11,ks,2,1,"button",24),r()()}if(i&2){let e=p(2);l(8),k("ngModel",e.categorySearchTerm),l(),d("ngIf",!e.loadingCategories),l(),d("ngIf",e.loadingCategories),l(),d("ngIf",e.selectedCategoriesCount>0)}}function Is(i,t){if(i&1){let e=x();a(0,"button",36),u("click",function(){let o=g(e).$implicit,c=p(3);return f(c.selectRating(o.value))}),a(1,"div",37),s(2),r(),a(3,"span",38),s(4),r()()}if(i&2){let e=t.$implicit,n=p(3);H("selected",n.currentFilters.minRating===e.value),l(2),P(e.stars),l(2),P(e.label)}}function Ds(i,t){if(i&1){let e=x();a(0,"button",33),u("click",function(){g(e);let o=p(3);return f(o.clearRatingFilter())}),s(1," \u0218terge filtrul "),r()}}function Ts(i,t){if(i&1){let e=x();a(0,"div",16)(1,"div",17)(2,"button",18),u("click",function(){g(e);let o=p(2);return f(o.goBack())}),s(3,"\u2190 \xCEnapoi"),r(),a(4,"h3"),s(5,"Rating minim"),r()(),a(6,"div",19)(7,"div",34),h(8,Is,5,4,"button",35),r(),h(9,Ds,2,0,"button",24),r()()}if(i&2){let e=p(2);l(8),d("ngForOf",e.ratingOptions),l(),d("ngIf",e.currentFilters.minRating)}}function Fs(i,t){if(i&1){let e=x();a(0,"button",41),u("click",function(){let o=g(e).$implicit,c=p(3);return f(c.selectExperience(o.value))}),s(1),r()}if(i&2){let e=t.$implicit,n=p(3);H("selected",n.currentFilters.experienceRange===e.value),l(),M(" ",e.label," ")}}function Rs(i,t){if(i&1){let e=x();a(0,"button",33),u("click",function(){g(e);let o=p(3);return f(o.clearExperienceFilter())}),s(1," \u0218terge filtrul "),r()}}function As(i,t){if(i&1){let e=x();a(0,"div",16)(1,"div",17)(2,"button",18),u("click",function(){g(e);let o=p(2);return f(o.goBack())}),s(3,"\u2190 \xCEnapoi"),r(),a(4,"h3"),s(5,"Experien\u021B\u0103"),r()(),a(6,"div",19)(7,"div",39),h(8,Fs,2,3,"button",40),r(),h(9,Rs,2,0,"button",24),r()()}if(i&2){let e=p(2);l(8),d("ngForOf",e.experienceOptions),l(),d("ngIf",e.currentFilters.experienceRange)}}function zs(i,t){if(i&1){let e=x();a(0,"button",33),u("click",function(){g(e);let o=p(3);return f(o.clearSortFilter())}),s(1," \u0218terge filtrul "),r()}}function Vs(i,t){if(i&1){let e=x();a(0,"div",16)(1,"div",17)(2,"button",18),u("click",function(){g(e);let o=p(2);return f(o.goBack())}),s(3,"\u2190 \xCEnapoi"),r(),a(4,"h3"),s(5,"Sortare dup\u0103 rating"),r()(),a(6,"div",19)(7,"div",42)(8,"button",43),u("click",function(){g(e);let o=p(2);return f(o.selectSort("desc"))}),s(9," Rating descresc\u0103tor "),r(),a(10,"button",43),u("click",function(){g(e);let o=p(2);return f(o.selectSort("asc"))}),s(11," Rating cresc\u0103tor "),r()(),h(12,zs,2,0,"button",24),r()()}if(i&2){let e=p(2);l(8),H("selected",e.currentFilters.sortByRating==="desc"),l(2),H("selected",e.currentFilters.sortByRating==="asc"),l(2),d("ngIf",e.currentFilters.sortByRating)}}function Ns(i,t){if(i&1&&(a(0,"div",6),h(1,Ms,26,5,"div",7)(2,Es,12,4,"div",8)(3,Ts,10,2,"div",8)(4,As,10,2,"div",8)(5,Vs,13,5,"div",8),r()),i&2){let e=p();H("open",e.isOpen),l(),d("ngIf",!e.selectedFilterType),l(),d("ngIf",e.selectedFilterType==="categories"),l(),d("ngIf",e.selectedFilterType==="rating"),l(),d("ngIf",e.selectedFilterType==="experience"),l(),d("ngIf",e.selectedFilterType==="sort")}}var ai=class i{constructor(t){this.categoryService=t}initialFilters={};filtersChange=new F;isOpen=!1;selectedFilterType=null;currentFilters={};allCategories=[];filteredCategories=[];categorySearchTerm="";loadingCategories=!1;ratingOptions=[{value:5,stars:"\u2B50\u2B50\u2B50\u2B50\u2B50",label:"5 stele"},{value:4,stars:"\u2B50\u2B50\u2B50\u2B50",label:"4+ stele"},{value:3,stars:"\u2B50\u2B50\u2B50",label:"3+ stele"}];experienceOptions=[{value:"0-2",label:"0-2 ani"},{value:"2-5",label:"2-5 ani"},{value:"5-7",label:"5-7 ani"},{value:"7-10",label:"7-10 ani"},{value:"10+",label:"10+ ani"}];ngOnInit(){this.currentFilters=O({},this.initialFilters),this.loadCategories()}get activeFiltersCount(){let t=0;return this.currentFilters.categoryIds&&this.currentFilters.categoryIds.length>0&&t++,this.currentFilters.minRating&&t++,this.currentFilters.experienceRange&&t++,this.currentFilters.sortByRating&&t++,t}get selectedCategoriesCount(){return this.currentFilters.categoryIds?this.currentFilters.categoryIds.length:0}loadCategories(){this.loadingCategories=!0,this.categoryService.getCategoriesForSpecialist().subscribe({next:t=>{this.allCategories=t.response||[],this.filteredCategories=[...this.allCategories],this.loadingCategories=!1},error:t=>{console.error("Error loading categories:",t),this.loadingCategories=!1}})}searchCategories(){if(!this.categorySearchTerm.trim())this.filteredCategories=[...this.allCategories];else{let t=this.categorySearchTerm.toLowerCase();this.filteredCategories=this.allCategories.filter(e=>e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}}toggleFilterPanel(){this.isOpen=!this.isOpen,this.isOpen||(this.selectedFilterType=null)}selectFilterType(t){this.selectedFilterType=t}goBack(){this.selectedFilterType=null}toggleCategory(t){this.currentFilters.categoryIds||(this.currentFilters.categoryIds=[]);let e=this.currentFilters.categoryIds.indexOf(t);e>-1?this.currentFilters.categoryIds.splice(e,1):this.currentFilters.categoryIds.push(t),this.onFiltersChange()}isCategorySelected(t){return this.currentFilters.categoryIds?this.currentFilters.categoryIds.includes(t):!1}clearCategoriesFilter(){this.currentFilters.categoryIds=[],this.onFiltersChange()}selectRating(t){this.currentFilters.minRating=t,this.onFiltersChange()}clearRatingFilter(){this.currentFilters.minRating=void 0,this.onFiltersChange()}selectExperience(t){this.currentFilters.experienceRange=t,this.onFiltersChange()}clearExperienceFilter(){this.currentFilters.experienceRange=void 0,this.onFiltersChange()}selectSort(t){this.currentFilters.sortByRating=t,this.onFiltersChange()}clearSortFilter(){this.currentFilters.sortByRating=void 0,this.onFiltersChange()}clearAllFilters(){this.currentFilters={},this.onFiltersChange(),this.isOpen=!1,this.selectedFilterType=null}onFiltersChange(){let t={};this.currentFilters.categoryIds&&this.currentFilters.categoryIds.length>0&&(t.categoryIds=this.currentFilters.categoryIds),this.currentFilters.minRating&&(t.minRating=this.currentFilters.minRating),this.currentFilters.experienceRange&&(t.experienceRange=this.currentFilters.experienceRange),this.currentFilters.sortByRating&&(t.sortByRating=this.currentFilters.sortByRating),this.filtersChange.emit(t)}getRatingLabel(t){let e=this.ratingOptions.find(n=>n.value===t);return e?e.label:`${t}+ stele`}getExperienceLabel(t){let e=this.experienceOptions.find(n=>n.value===t);return e?e.label:t}getSortLabel(t){return t==="desc"?"Descresc\u0103tor":"Cresc\u0103tor"}static \u0275fac=function(e){return new(e||i)(v(gt))};static \u0275cmp=S({type:i,selectors:[["app-search-filters"]],inputs:{initialFilters:"initialFilters"},outputs:{filtersChange:"filtersChange"},decls:8,vars:4,consts:[[1,"compact-filters"],[1,"filter-toggle",3,"click"],[1,"filter-icon"],["class","filter-count",4,"ngIf"],["class","filter-panel",3,"open",4,"ngIf"],[1,"filter-count"],[1,"filter-panel"],["class","filter-options",4,"ngIf"],["class","filter-detail",4,"ngIf"],[1,"filter-options"],[1,"filter-option",3,"click"],[1,"option-icon"],["class","option-value",4,"ngIf"],["class","clear-all-btn",3,"click",4,"ngIf"],[1,"option-value"],[1,"clear-all-btn",3,"click"],[1,"filter-detail"],[1,"filter-header"],[1,"back-btn",3,"click"],[1,"filter-content"],[1,"search-categories"],["type","text","placeholder","Caut\u0103 categorii...",1,"filter-input",3,"ngModelChange","ngModel"],["class","categories-list",4,"ngIf"],["class","loading-categories",4,"ngIf"],["class","clear-filter-btn",3,"click",4,"ngIf"],[1,"categories-list"],["class","category-item",3,"click",4,"ngFor","ngForOf"],[1,"category-item",3,"click"],["type","checkbox",3,"click","change","checked"],[1,"category-name"],["class","category-description",4,"ngIf"],[1,"category-description"],[1,"loading-categories"],[1,"clear-filter-btn",3,"click"],[1,"rating-options"],["class","rating-option",3,"selected","click",4,"ngFor","ngForOf"],[1,"rating-option",3,"click"],[1,"stars"],[1,"rating-label"],[1,"experience-options"],["class","experience-option",3,"selected","click",4,"ngFor","ngForOf"],[1,"experience-option",3,"click"],[1,"sort-options"],[1,"sort-option",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"button",1),u("click",function(){return n.toggleFilterPanel()}),a(2,"span",2),s(3,"\u{1F53D}"),r(),a(4,"span"),s(5,"Filtreaz\u0103"),r(),h(6,_s,2,1,"span",3),r(),h(7,Ns,6,7,"div",4),r()),e&2&&(l(),H("active",n.isOpen),l(5),d("ngIf",n.activeFiltersCount>0),l(),d("ngIf",n.isOpen))},dependencies:[Y,G,T,W,ae,J,ee],styles:[".compact-filters[_ngcontent-%COMP%]{position:relative;display:inline-block}.filter-toggle[_ngcontent-%COMP%]{background-color:#9a83db;color:#fff;border:none;padding:10px 16px;border-radius:6px;cursor:pointer;font-family:Roboto Mono,monospace;font-weight:700;display:flex;align-items:center;gap:8px;transition:all .2s;font-size:.9rem}.filter-toggle[_ngcontent-%COMP%]:hover, .filter-toggle.active[_ngcontent-%COMP%]{background-color:#8670d1}.filter-icon[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .2s}.filter-toggle.active[_ngcontent-%COMP%]   .filter-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}.filter-count[_ngcontent-%COMP%]{background-color:#3c1a7d;color:#fff;padding:2px 6px;border-radius:12px;font-size:.75rem;font-weight:700}.filter-panel[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;background:#fff;border:2px solid #9a83db;border-radius:8px;box-shadow:0 4px 12px #9a83db4d;z-index:1000;min-width:280px;max-width:350px;max-height:400px;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .2s ease}.filter-panel.open[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.filter-options[_ngcontent-%COMP%]{padding:8px}.filter-option[_ngcontent-%COMP%], .clear-all-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:8px;padding:10px 12px;border:none;background:transparent;cursor:pointer;border-radius:4px;font-family:Roboto Mono,monospace;font-size:.85rem;transition:background-color .2s;text-align:left}.filter-option[_ngcontent-%COMP%]:hover, .clear-all-btn[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.clear-all-btn[_ngcontent-%COMP%]{margin-top:8px;border-top:1px solid #e0e0e0;padding-top:12px;color:#dc3545}.clear-all-btn[_ngcontent-%COMP%]:hover{background-color:#fff5f5}.option-icon[_ngcontent-%COMP%]{font-size:1rem;width:20px;text-align:center}.option-value[_ngcontent-%COMP%]{margin-left:auto;font-size:.75rem;color:#666;background:#e6dfff;padding:2px 6px;border-radius:4px}.filter-detail[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:column;height:100%}.filter-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;background:#f8f9fa;border-bottom:1px solid #e0e0e0}.filter-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.9rem;font-weight:600;color:#333}.back-btn[_ngcontent-%COMP%]{background:none;border:none;color:#9a83db;cursor:pointer;font-family:Roboto Mono,monospace;font-weight:700;font-size:.85rem;padding:4px 8px;border-radius:4px;transition:background-color .2s}.back-btn[_ngcontent-%COMP%]:hover{background-color:#e6dfff}.filter-content[_ngcontent-%COMP%]{padding:16px;flex:1;overflow-y:auto;max-height:300px}.filter-input[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-family:Roboto Mono,monospace;font-size:.85rem;margin-bottom:12px}.filter-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#9a83db;box-shadow:0 0 0 2px #9a83db33}.categories-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:4px;margin-bottom:12px}.category-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;padding:10px;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:background-color .2s}.category-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.category-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.category-item[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:2px;cursor:pointer}.category-item[_ngcontent-%COMP%]   .category-name[_ngcontent-%COMP%]{font-weight:500;color:#333;font-size:.85rem;flex:1}.category-item[_ngcontent-%COMP%]   .category-description[_ngcontent-%COMP%]{font-size:.75rem;color:#666;max-width:120px;text-align:right}.loading-categories[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666;font-style:italic}.rating-options[_ngcontent-%COMP%], .experience-options[_ngcontent-%COMP%], .sort-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:12px}.rating-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;border:1px solid #ddd;background:#fff;border-radius:4px;cursor:pointer;font-family:Roboto Mono,monospace;transition:all .2s}.rating-option[_ngcontent-%COMP%]:hover{border-color:#9a83db;background-color:#f8f9fa}.rating-option.selected[_ngcontent-%COMP%]{background-color:#9a83db;color:#fff;border-color:#9a83db}.rating-option[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{font-size:1.1rem;min-width:80px}.rating-option[_ngcontent-%COMP%]   .rating-label[_ngcontent-%COMP%]{font-size:.85rem}.experience-option[_ngcontent-%COMP%], .sort-option[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;background:#fff;border-radius:4px;cursor:pointer;font-family:Roboto Mono,monospace;font-size:.85rem;transition:all .2s}.experience-option[_ngcontent-%COMP%]:hover, .sort-option[_ngcontent-%COMP%]:hover{border-color:#9a83db;background-color:#f8f9fa}.experience-option.selected[_ngcontent-%COMP%], .sort-option.selected[_ngcontent-%COMP%]{background-color:#9a83db;color:#fff;border-color:#9a83db}.clear-filter-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:8px 12px;border-radius:4px;cursor:pointer;font-family:Roboto Mono,monospace;font-size:.8rem;font-weight:700;transition:background-color .2s;width:100%}.clear-filter-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}"]})};var Kt=class i{constructor(){}geocodeAddress(t){return C(this,null,function*(){if(!window.google||!window.google.maps)throw new Error("Google Maps API not loaded");let e=new google.maps.Geocoder;return new Promise((n,o)=>{e.geocode({address:t},(c,m)=>{if(m===google.maps.GeocoderStatus.OK&&c&&c[0]){let _=c[0].geometry.location;n({lat:_.lat(),lng:_.lng()})}else n(null)})})})}geocodeAddresses(t){let e=t.map(n=>this.geocodeAddress(n));return Rt(Promise.all(e))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Jt=class i{constructor(){}getCurrentPosition(){return navigator.geolocation?Rt(new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(n=>t(n),n=>e(n),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})):Zo(()=>new Error("Geolocation is not supported by this browser."))}calculateDistance(t,e,n,o){let m=this.deg2rad(n-t),_=this.deg2rad(o-e),w=Math.sin(m/2)*Math.sin(m/2)+Math.cos(this.deg2rad(t))*Math.cos(this.deg2rad(n))*Math.sin(_/2)*Math.sin(_/2);return 6371*(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)))}deg2rad(t){return t*(Math.PI/180)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var ft=class i{constructor(t,e,n,o){this.http=t;this.authService=e;this.geocodingService=n;this.geolocationService=o}baseUrl="http://localhost:5241/api/Specialist";getSpecialists(t,e){let n=this.authService.getToken(),o=new z({Authorization:`Bearer ${n}`}),c=new He().set("page",t.page.toString()).set("pageSize",t.pageSize.toString());return t.search&&(c=c.set("search",t.search)),e&&(e.categoryIds&&e.categoryIds.length>0&&e.categoryIds.forEach(m=>{c=c.append("filter.categoryIds",m)}),e.minRating!==void 0&&e.minRating!==null&&(c=c.set("filter.minRating",e.minRating.toString())),e.experienceRange&&(c=c.set("filter.experienceRange",e.experienceRange)),e.sortByRating&&(c=c.set("filter.sortByRating",e.sortByRating))),this.http.get(`${this.baseUrl}/GetPage`,{headers:o,params:c})}getSpecialistsLegacy(t,e,n){return this.getSpecialists({page:e,pageSize:n,search:t||void 0})}getSpecialistsCombined(t){return this.getSpecialists({page:t.page,pageSize:t.pageSize,search:t.search},t.filters)}searchSpecialistsByCategory(t,e=1,n=10){return this.getSpecialists({page:e,pageSize:n},{categoryIds:t})}searchSpecialistsByRating(t,e=1,n=10){return this.getSpecialists({page:e,pageSize:n},{minRating:t})}searchSpecialistsByExperienceRange(t,e=1,n=10){return this.getSpecialists({page:e,pageSize:n},{experienceRange:t})}getTopRatedSpecialists(t=1,e=10){return this.getSpecialists({page:t,pageSize:e},{sortByRating:"desc",minRating:4.5})}searchSpecialistsAdvanced(t,e,n,o,c){let m={};return e&&e.length>0&&(m.categoryIds=e),n&&(m.minRating=n),o&&(m.experienceRange=o),c&&(m.sortByRating=c),this.getSpecialists(t,m)}getHighRatedSpecialists(t=1,e=10){return this.getSpecialists({page:t,pageSize:e},{minRating:4,sortByRating:"desc"})}getExperiencedSpecialists(t=1,e=10){return this.getSpecialists({page:t,pageSize:e},{experienceRange:"7-10",sortByRating:"desc"})}getSpecialistsByCategories(t,e=1,n=10){return this.getSpecialists({page:e,pageSize:n},{categoryIds:t,sortByRating:"desc"})}searchAndFilter(t,e,n=1,o=10){return this.getSpecialists({page:n,pageSize:o,search:t},e)}getSpecialist(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/GetById/${t}`,{headers:n})}addSpecialist(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.post(`${this.baseUrl}/Add`,t,{headers:n})}updateSpecialist(t,e){let n=this.authService.getToken(),o=new z({Authorization:`Bearer ${n}`});return this.http.patch(`${this.baseUrl}/Update/${t}`,e,{headers:o})}deleteSpecialist(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.delete(`${this.baseUrl}/Delete/${t}`,{headers:n})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V),N(Kt),N(Jt))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Qt=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/Request";getRequest(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/GetById/${t}`,{headers:n})}addRequest(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return console.log("Headers:",n),this.http.post(`${this.baseUrl}/Add`,t,{headers:n})}acceptRequest(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Accept/${t}`,{},{headers:n})}rejectRequest(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Reject/${t}`,{},{headers:n})}cancelRequest(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Cancel/${t}`,{},{headers:n})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Us=()=>[5,10,20];function Ls(i,t){if(i&1){let e=x();a(0,"div",20)(1,"p"),s(2,"Nu am g\u0103sit speciali\u0219ti care s\u0103 corespund\u0103 criteriilor tale de c\u0103utare."),r(),a(3,"button",21),u("click",function(){g(e);let o=p();return f(o.clearAllFilters())}),s(4," \xCEncearc\u0103 s\u0103 \u0219tergi filtrele "),r()()}}function Bs(i,t){if(i&1&&(a(0,"div",22)(1,"p"),s(2),r()()),i&2){let e=p();l(2),P(e.error)}}function js(i,t){i&1&&y(0,"div",25)}function qs(i,t){if(i&1){let e=x();ce(0),a(1,"app-specialist-card",23),u("specialistId",function(o){let c=g(e).$implicit;return f(c.id=o)})("requestFormSubmit",function(o){g(e);let c=p();return f(c.addRequest(o))}),r(),h(2,js,1,0,"div",24),le()}if(i&2){let e=t.$implicit,n=t.index,o=p();l(),d("specialist",e),l(),d("ngIf",n<o.users.length-1)}}var si=class i{constructor(t,e,n){this.homeService=t;this.userRequestService=e;this.authService=n}searchTerm="";currentPage=1;pageSize=10;totalItems=0;entityDetails={};isUserDetailsVisible=!1;users=[];error=null;searchParams={page:1,pageSize:10};filterParams={};isRequestFormVisible=!1;requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""};dummySpecialists=[{id:"spec-001",fullName:"Andrei Popescu",email:"andrei.popescu@example.com",phoneNumber:"0721123456",address:"Strada Mihai Eminescu 45, Bucure\u0219ti",yearsExperience:5,description:"Traduc\u0103tor medical cu experien\u021B\u0103 \xEEn terminologie clinic\u0103 \u0219i farmaceutic\u0103.",createdAt:new Date("2022-03-10T10:00:00Z"),updatedAt:new Date,rating:5,categories:[{id:"cat-001",name:"Traduceri medicale"},{id:"cat-002",name:"Farmacie"}]},{id:"spec-002",fullName:"Ioana Marinescu",email:"ioana.marinescu@example.com",phoneNumber:"0733456789",address:"Bd. Revolu\u021Biei 17, Cluj-Napoca",yearsExperience:8,description:"Specialist \xEEn psihologie cu experien\u021B\u0103 \xEEn redactarea \u0219i corectarea articolelor \u0219tiin\u021Bifice.",createdAt:new Date("2020-11-20T08:30:00Z"),updatedAt:new Date,rating:4},{id:"spec-003",fullName:"Victor Ionescu",email:"victor.ionescu@example.com",phoneNumber:"0744123123",address:"Str. Libert\u0103\u021Bii 88, Ia\u0219i",yearsExperience:3,description:"T\xE2n\u0103r specialist \xEEn tehnologia informa\u021Biei, ofer servicii de consultan\u021B\u0103 \u0219i mentenan\u021B\u0103 software.",createdAt:new Date("2023-01-15T14:45:00Z"),updatedAt:new Date,rating:4.5}];ngOnInit(){this.getPage()}getPage(){this.searchParams.page=this.currentPage,this.searchParams.pageSize=this.pageSize,console.log("Searching with params:",this.searchParams,"Filters:",this.filterParams),this.homeService.getSpecialists(this.searchParams,this.filterParams).subscribe({next:t=>{this.users=t.response?.data??[],this.totalItems=t.response?.totalCount??0,this.error=null},error:t=>{this.error=t.error?.errorMessage?.message||"A ap\u0103rut o eroare.",console.error("Error loading specialists:",t)}})}addRequest(t){let e=t;console.log("Request to submit:",e),this.userRequestService.addRequest(e).subscribe({next:n=>{alert("Cererea a fost trimis\u0103 cu succes!"),this.closeRequestForm()},error:n=>{console.error("Eroare la trimiterea cererii:",n),alert("Nu s-a putut trimite cererea.")}})}onSearch(t){this.searchTerm=t,this.searchParams.search=t||void 0,this.currentPage=1,this.getPage()}onFiltersChange(t){console.log("Filters changed:",t),this.filterParams=O({},t),this.currentPage=1,this.getPage()}onPageChange(t){this.currentPage=t,this.getPage()}onPageSizeChange(t){this.pageSize=t,this.currentPage=1,this.getPage()}clearAllFilters(){this.filterParams={},this.searchParams.search=void 0,this.searchTerm="",this.currentPage=1,this.getPage()}getTopRatedSpecialists(){this.filterParams=$(O({},this.filterParams),{sortByRating:"desc",minRating:4.5}),this.currentPage=1,this.getPage()}getExperiencedSpecialists(){this.filterParams=$(O({},this.filterParams),{experienceRange:"7-10"}),this.currentPage=1,this.getPage()}getHighRatedSpecialists(){this.filterParams=$(O({},this.filterParams),{minRating:4.5,sortByRating:"desc"}),this.currentPage=1,this.getPage()}getCategoryNames(t){return t.map(e=>e.name)}closeUserDetails(){this.isUserDetailsVisible=!1,this.entityDetails={}}closeRequestForm(){this.requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""},this.isRequestFormVisible=!1}SpecialistCardComponent=On;static \u0275fac=function(e){return new(e||i)(v(ft),v(Qt),v(V))};static \u0275cmp=S({type:i,selectors:[["app-home"]],decls:39,vars:10,consts:[[1,"top-action-button"],["routerLink","/contact-us","routerLinkActive","active",1,"contact-button"],[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"search-filter-section"],[1,"search-row"],[1,"search-input-wrapper"],[3,"searchChanged","placeholder"],[1,"filter-wrapper"],[3,"filtersChange","initialFilters"],[1,"quick-actions"],[1,"quick-action-btn",3,"click"],[1,"quick-action-btn","clear-btn",3,"click"],["class","no-results",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"user-list"],[4,"ngFor","ngForOf"],[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"no-results"],[1,"clear-filters-btn",3,"click"],[1,"error-message"],[3,"specialistId","requestFormSubmit","specialist"],["class","separator",4,"ngIf"],[1,"separator"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"a",1),s(2,"Contacteaz\u0103-ne!"),r()(),a(3,"div",2)(4,"div",3)(5,"h1",4),s(6,"Ai o \u021Beav\u0103 spart\u0103?"),r(),a(7,"h1",4),s(8,"\u021Ai s-a stricat chiuveta?"),r(),a(9,"h1"),s(10,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),a(11,"strong",5),s(12,"ExpertEase"),r(),s(13,"!"),r()(),a(14,"div",6)(15,"div",7)(16,"div",8)(17,"app-search-input",9),u("searchChanged",function(c){return n.onSearch(c)}),r()(),a(18,"div",10)(19,"app-search-filters",11),u("filtersChange",function(c){return n.onFiltersChange(c)}),r()()()(),a(20,"div",12)(21,"button",13),u("click",function(){return n.getTopRatedSpecialists()}),s(22," Top Rating "),r(),a(23,"button",13),u("click",function(){return n.getExperiencedSpecialists()}),s(24," Experien\u021B\u0103 7+ ani "),r(),a(25,"button",13),u("click",function(){return n.getHighRatedSpecialists()}),s(26," Rating 4.5+ "),r(),a(27,"button",14),u("click",function(){return n.clearAllFilters()}),s(28," \u0218terge toate filtrele "),r()(),a(29,"p"),s(30,"Peste "),a(31,"strong"),s(32,"100 de speciali\u0219ti"),r(),s(33," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),r(),h(34,Ls,5,0,"div",15)(35,Bs,3,1,"div",16),r(),a(36,"div",17),h(37,qs,3,2,"ng-container",18),r(),a(38,"app-pagination",19),u("pageChange",function(c){return n.onPageChange(c)})("pageSizeChange",function(c){return n.onPageSizeChange(c)}),r()),e&2&&(l(17),d("placeholder","Caut\u0103 specialist..."),l(2),d("initialFilters",n.filterParams),l(15),d("ngIf",n.totalItems===0&&!n.error),l(),d("ngIf",n.error),l(2),d("ngForOf",n.users),l(),d("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",Ee(9,Us))("totalItems",n.totalItems))},dependencies:[On,Y,G,T,ut,W,je,Ke,De,$n,ai],styles:[".top-action-button[_ngcontent-%COMP%]{position:absolute;top:100px;right:32px;z-index:10}.contact-button[_ngcontent-%COMP%]{text-decoration:none;font-family:Roboto Mono,monospace;font-weight:700;border:1px solid transparent;transition:all .2s ease;color:#000}.contact-button[_ngcontent-%COMP%]:hover{text-decoration:underline}.user-list[_ngcontent-%COMP%]   app-specialist-card[_ngcontent-%COMP%]{border-bottom:1px solid #b7a4dd;padding-bottom:1rem;margin-bottom:1rem}.user-list[_ngcontent-%COMP%]   app-specialist-card[_ngcontent-%COMP%]:last-child{border-bottom:none}.separator[_ngcontent-%COMP%]{height:3px;background-color:#b7a4dd;width:100%}.home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:2rem}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.close-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1.2rem;font-size:1.5rem;background:none;border:none;color:#333;font-weight:700;cursor:pointer;transition:transform .2s}.close-button[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#d11a2a}.search-filter-section[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:20px 0}.search-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;justify-content:center;flex-wrap:wrap}.search-input-wrapper[_ngcontent-%COMP%]{flex:1;min-width:300px;max-width:500px}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input{width:100%}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-container{position:relative;width:100%}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-box{width:100%;border:2px solid #b7a4dd;border-radius:3px;font-size:1rem;font-family:Roboto Mono,monospace;background-color:#f6efff;transition:all .3s ease;box-sizing:border-box}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-box:focus{outline:none;border-color:#9a83db;background-color:#fff;box-shadow:0 4px 12px #9a83db33}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-box::placeholder{color:#999;font-style:italic}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-icon{position:absolute;left:18px;top:50%;transform:translateY(-50%);width:20px;height:20px;color:#9a83db;pointer-events:none;z-index:2}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-button{position:absolute;right:8px;top:50%;transform:translateY(-50%);background-color:#9a83db;border:none;border-radius:3px;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;color:#fff}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-button:hover{background-color:#8670d1;transform:translateY(-50%) scale(1.1)}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-button:active{transform:translateY(-50%) scale(.95)}.filter-wrapper[_ngcontent-%COMP%]{flex-shrink:0}.quick-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin:20px 0}.quick-action-btn[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;border:2px solid #9a83db;padding:8px 16px;border-radius:3px;cursor:pointer;font-family:Roboto Mono,monospace;font-weight:700;font-size:.85rem;transition:all .2s}.quick-action-btn[_ngcontent-%COMP%]:hover{background-color:#9a83db;color:#fff;transform:translateY(-2px)}.quick-action-btn.clear-btn[_ngcontent-%COMP%]{background-color:#f8d7da;border-color:#dc3545;color:#721c24}.quick-action-btn.clear-btn[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff}.results-summary[_ngcontent-%COMP%]{margin:15px 0;padding:10px 15px;background-color:#e6dfff;border-radius:6px;text-align:center}.results-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:700;color:#3c1a7d}.no-results[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;background-color:#f8f9fa;border-radius:8px;margin:20px 0}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;color:#666;font-size:1.1rem}.clear-filters-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:12px 24px;border-radius:6px;cursor:pointer;font-family:Roboto Mono,monospace;font-weight:700;transition:background-color .2s}.clear-filters-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:15px;border-radius:6px;border:1px solid #f5c6cb;margin:20px 0;text-align:center}.error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:700}@media (max-width: 768px){.home-wrapper[_ngcontent-%COMP%]{padding:16px}.search-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-input-wrapper[_ngcontent-%COMP%]{min-width:auto;max-width:none}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-input{padding:10px 16px 10px 45px;font-size:.9rem}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-icon{left:15px;width:18px;height:18px}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-button{width:28px;height:28px;right:6px}.filter-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.quick-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.quick-action-btn[_ngcontent-%COMP%]{min-width:200px;text-align:center}.top-action-button[_ngcontent-%COMP%]{position:relative;top:auto;right:auto;text-align:center;margin-bottom:20px}}@media (max-width: 480px){.search-filter-section[_ngcontent-%COMP%]{margin:16px 0}.search-row[_ngcontent-%COMP%]{gap:12px}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-input{padding:8px 14px 8px 40px;font-size:.85rem}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-icon{left:12px;width:16px;height:16px}.search-input-wrapper[_ngcontent-%COMP%]     app-search-input .search-button{width:24px;height:24px;right:4px}.quick-actions[_ngcontent-%COMP%]{margin:16px 0;gap:8px}.quick-action-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:6px 12px}}",".search-box[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;gap:20px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px 50px 15px 20px;border:none;background:transparent;outline:none;font-family:Roboto Mono,monospace;font-size:12px}.search-icon-button[_ngcontent-%COMP%]{background:none;border:none;padding:0 16px;font-size:1.2rem;color:#444;cursor:pointer;display:flex;align-items:center;justify-content:center}.search-icon-button[_ngcontent-%COMP%]:hover{color:#000}.search-icon-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}"]})};var ci=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-about"]],decls:142,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"about-info"],[1,"role-sections"],[1,"client-section"],[1,"specialist-section"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"Ai o \u021Beav\u0103 spart\u0103?"),r(),a(4,"h1",2),s(5,"\u021Ai s-a stricat chiuveta?"),r(),a(6,"h1"),s(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),a(8,"strong",3),s(9,"ExpertEase"),r(),s(10,"!"),r()(),a(11,"p"),s(12,"Peste "),a(13,"strong"),s(14,"100 de speciali\u0219ti"),r(),s(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),r()(),a(16,"div",4)(17,"section")(18,"h2"),s(19,"Cine suntem noi?"),r(),a(20,"p"),s(21,"Compania "),a(22,"strong"),s(23,"ExpertEase"),r(),s(24," se ocup\u0103 cu problemele tale \xEEn materie de repara\u021Bii sau instala\u021Bii."),r()(),a(25,"section")(26,"h2"),s(27,"Cum facem asta?"),r(),a(28,"p"),s(29,"\xCE\u021Bi punem la dispozi\u021Bie "),a(30,"strong"),s(31,"peste 100 de speciali\u0219ti"),r(),s(32," din domeniu, cu varii nivele de experien\u021B\u0103, care sunt preocupa\u021Bi \xEEn a \xEE\u021Bi rezolva problema."),r()(),a(33,"section")(34,"h2"),s(35,"Cum func\u021Bioneaz\u0103 platforma?"),r(),a(36,"p"),s(37,"Platforma noastr\u0103 este simplu de utilizat. Po\u021Bi c\u0103uta speciali\u0219ti dup\u0103 domeniu, po\u021Bi vedea recenziile altor clien\u021Bi \u0219i po\u021Bi contacta direct specialistul pentru a discuta detaliile repara\u021Biei sau instala\u021Biei."),r()(),a(38,"section")(39,"h2"),s(40,"De ce s\u0103 ne alegi?"),r(),a(41,"p"),s(42,"ExpertEase \xEE\u021Bi ofer\u0103 acces rapid \u0219i u\u0219or la o re\u021Bea extins\u0103 de speciali\u0219ti, asigur\xE2ndu-te c\u0103 vei g\u0103si pe cineva potrivit pentru nevoile tale. \xCEn plus, platforma noastr\u0103 este gratuit\u0103 pentru utilizatori!"),r()(),a(43,"div",5)(44,"section",6)(45,"h2"),s(46,"Ce poate face un client?"),r(),a(47,"p"),s(48,"Pe platforma ExpertEase, clien\u021Bii pot:"),r(),a(49,"ol")(50,"li")(51,"strong"),s(52,"Crea un cont"),r(),y(53,"br"),s(54," \xCE\u021Bi faci un cont rapid \u0219i ai acces la panoul t\u0103u personal."),r(),a(55,"li")(56,"strong"),s(57,"C\u0103uta speciali\u0219ti"),r(),y(58,"br"),s(59," Po\u021Bi filtra speciali\u0219tii dup\u0103: "),a(60,"ul")(61,"li"),s(62,"Categorie (ex. Psihologie, Drept, IT)"),r(),a(63,"li"),s(64,"Ani de experien\u021B\u0103"),r(),a(65,"li"),s(66,"Adres\u0103 (cu op\u021Biune de c\u0103utare pe hart\u0103)"),r()()(),a(67,"li")(68,"strong"),s(69,"Trimite o cerere"),r(),y(70,"br"),s(71," Dup\u0103 ce g\u0103se\u0219ti un specialist potrivit, po\u021Bi trimite o cerere \xEEn care descrii problema sau serviciul dorit \u0219i o dat\u0103 preferat\u0103."),r(),a(72,"li")(73,"strong"),s(74,"Comunic\u0103 prin mesaje"),r(),y(75,"br"),s(76," Vei putea: "),a(77,"ul")(78,"li"),s(79,"Primi r\u0103spunsuri de la specialist"),r(),a(80,"li"),s(81,"Vizualiza propunerea de serviciu \u0219i pre\u021Bul"),r(),a(82,"li"),s(83,"Accepta sau refuza oferta"),r()()(),a(84,"li")(85,"strong"),s(86,"Las\u0103 o recenzie"),r(),y(87,"br"),s(88," Dup\u0103 \xEEncheierea colabor\u0103rii, po\u021Bi scrie o recenzie care ajut\u0103 al\u021Bi utilizatori \u0219i sus\u021Bine calitatea pe platform\u0103."),r(),a(89,"li")(90,"strong"),s(91,"Pl\u0103te\u0219te \xEEn siguran\u021B\u0103"),r(),y(92,"br"),s(93," Pl\u0103\u021Bile se realizeaz\u0103 prin Stripe, \xEEntr-un mod securizat \u0219i transparent. Vei \u0219ti exact c\xE2t pl\u0103te\u0219ti \xEEnainte de confirmare."),r()()(),a(94,"section",7)(95,"h2"),s(96,"Ce poate face un specialist?"),r(),a(97,"p"),s(98,"Speciali\u0219tii au acces la instrumente prin care \xEE\u0219i pot gestiona cererile \u0219i construi o reputa\u021Bie solid\u0103:"),r(),a(99,"ol")(100,"li")(101,"strong"),s(102,"\xCEnregistrare \u0219i verificare profil"),r(),y(103,"br"),s(104," \xCE\u021Bi creezi un cont profesional, alegi domeniul de expertiz\u0103 \u0219i adaugi informa\u021Bii relevante."),r(),a(105,"li")(106,"strong"),s(107,"Prime\u0219ti cereri de la clien\u021Bi"),r(),y(108,"br"),s(109," Vei fi notificat atunci c\xE2nd un client te contacteaz\u0103. Po\u021Bi: "),a(110,"ul")(111,"li"),s(112,"Analiza cererea"),r(),a(113,"li"),s(114,"Accepta, refuza sau propune o ofert\u0103 alternativ\u0103"),r()()(),a(115,"li")(116,"strong"),s(117,"Trimite un r\u0103spuns detaliat"),r(),y(118,"br"),s(119," Po\u021Bi r\u0103spunde cu: "),a(120,"ul")(121,"li"),s(122,"Detalii despre serviciu"),r(),a(123,"li"),s(124,"Dat\u0103 propus\u0103"),r(),a(125,"li"),s(126,"Pre\u021B"),r()()(),a(127,"li")(128,"strong"),s(129,"Gestioneaz\u0103 conversa\u021Biile"),r(),y(130,"br"),s(131," Ai acces la un sistem de mesagerie clar \u0219i sigur, unde po\u021Bi urm\u0103ri fiecare cerere \xEEn parte."),r(),a(132,"li")(133,"strong"),s(134,"Prime\u0219te pl\u0103\u021Bi direct"),r(),y(135,"br"),s(136," Prin conectarea contului t\u0103u Stripe Express, po\u021Bi primi banii direct \xEEn contul bancar."),r(),a(137,"li")(138,"strong"),s(139,"Prime\u0219te recenzii"),r(),y(140,"br"),s(141," Dup\u0103 fiecare colaborare, clien\u021Bii pot l\u0103sa o recenzie care te va ajuta s\u0103 c\xE2\u0219tigi \xEEncrederea altor utilizatori."),r()()()()())},styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 16px;font-family:Roboto Mono,monospace}@media (max-width: 768px){.home-wrapper[_ngcontent-%COMP%]{padding:20px 12px}}@media (max-width: 480px){.home-wrapper[_ngcontent-%COMP%]{padding:16px 8px}}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;max-width:100%}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;font-size:clamp(1.5rem,4vw,2.5rem);line-height:1.2;word-wrap:break-word;hyphens:auto}@media (max-width: 768px){.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.3rem 0;font-size:clamp(1.2rem,5vw,2rem)}}@media (max-width: 480px){.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.2rem 0;font-size:clamp(1rem,6vw,1.5rem)}}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}@media (max-width: 480px){.brand-highlight[_ngcontent-%COMP%]{letter-spacing:.2px}}.about-info[_ngcontent-%COMP%]{max-width:1600px;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6}@media (max-width: 1200px){.about-info[_ngcontent-%COMP%]{max-width:100%;padding:0 20px}}@media (max-width: 768px){.about-info[_ngcontent-%COMP%]{padding:0 16px;font-size:14px}}@media (max-width: 480px){.about-info[_ngcontent-%COMP%]{padding:0 12px;font-size:13px;line-height:1.5}}.about-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d;font-size:clamp(1.2rem,3vw,1.5rem)}@media (max-width: 768px){.about-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}}@media (max-width: 480px){.about-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:8px}}.about-info[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff}@media (max-width: 768px){.about-info[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:20px;margin-bottom:24px;border-radius:6px}}@media (max-width: 480px){.about-info[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:16px;margin-bottom:20px;border-width:1px}}.role-sections[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:32px;margin-top:32px}@media (max-width: 1200px){.role-sections[_ngcontent-%COMP%]{gap:24px}}@media (max-width: 900px){.role-sections[_ngcontent-%COMP%]{flex-direction:column;gap:20px;margin-top:24px}}@media (max-width: 480px){.role-sections[_ngcontent-%COMP%]{gap:16px;margin-top:20px}}.role-sections[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{flex:1 1 45%;border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff;font-family:Roboto Mono,monospace;font-size:16px;line-height:25.6px}@media (max-width: 1200px){.role-sections[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{flex:1 1 100%;max-width:none}}@media (max-width: 900px){.role-sections[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{flex:1 1 100%;padding:20px;margin-bottom:24px;font-size:14px;line-height:22.4px}}@media (max-width: 480px){.role-sections[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:16px;margin-bottom:20px;font-size:13px;line-height:20.8px;border-width:1px;border-radius:6px}}.role-sections[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#3c1a7d;font-weight:700;margin-bottom:16px;font-size:clamp(1.1rem,2.5vw,1.3rem)}@media (max-width: 768px){.role-sections[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px}}@media (max-width: 480px){.role-sections[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}}.role-sections[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:16px}@media (max-width: 768px){.role-sections[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px}}@media (max-width: 480px){.role-sections[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}}.role-sections[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .role-sections[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-bottom:24px}@media (max-width: 768px){.role-sections[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .role-sections[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px;margin-bottom:20px}}@media (max-width: 480px){.role-sections[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .role-sections[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:16px;margin-bottom:16px}}.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:12px;line-height:25.6px}@media (max-width: 768px){.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;line-height:22.4px}}@media (max-width: 480px){.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;line-height:20.8px}}.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:8px;padding-left:20px}@media (max-width: 768px){.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:6px;padding-left:16px}}@media (max-width: 480px){.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:4px;padding-left:12px}}"]})};var Lo={firstName:"Prenume",lastName:"Nume",fullName:"Nume complet",email:"Adres\u0103 e-mail",password:"Parol\u0103",role:"Rol",phoneNumber:"Num\u0103r de telefon",address:"Adres\u0103",yearsExperience:"Ani experien\u021B\u0103",description:"Descriere",id:"ID",account:"Cont",transaction:"Tranzac\u021Bie",createdAt:"Creat la",updatedAt:"Actualizat la",categories:"Categorii",name:"Denumire",specialistsCount:"Num\u0103r speciali\u0219ti",specialistIds:"Speciali\u0219tii cu aceast\u0103 categorie"};function Oe(i,t={},e=Lo){return Object.keys(i).map(n=>{let o=t[n]||{},c=o.type||(o.options?"select":"text"),m=e[n]||$s(n);return O({key:n,label:m,type:c,placeholder:o.placeholder||`Introdu ${m.toLowerCase()}`,required:o.required??!0,class:o.class||"half-width"},o)})}function $s(i){return i.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase())}function Xt(i){if(!i)return{};let t={},e=Object.keys(i);if("id"in i){let n=Lo.id||"id";t[n]=i.id}for(let n of e){if(["id","firstName","lastName"].includes(n))continue;let o=i[n];if(o==null||typeof o=="string"&&o.trim()==="")continue;let c=Lo[n]||n,m=o;typeof o=="string"&&Ws(o)||o instanceof Date?m=ia(o):n.toLowerCase().includes("password")&&(m="********"),t[c]=m}return t}function Ws(i){return/^\d{4}-\d{2}-\d{2}T/.test(i)}function ia(i){let t=new Date(i),e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),o=t.getFullYear();return`${e}.${n}.${o}`}var Gs=i=>({"placeholder-selected":i});function Hs(i,t){if(i&1&&(a(0,"div",15),s(1),R(2,"lowercase"),r()),i&2){let e=p(2).$implicit;l(),M(" C\xE2mpul ",Z(2,1,e.label)," este obligatoriu. ")}}function Zs(i,t){if(i&1){let e=x();a(0,"div")(1,"div",12)(2,"input",13,1),I("ngModelChange",function(o){g(e);let c=p().$implicit,m=p();return E(m.formData[c.key],o)||(m.formData[c.key]=o),f(o)}),u("input",function(){g(e);let o=p().$implicit,c=p();return f(o.key==="phoneNumber"&&c.liveFormatPhoneNumber(o.key))}),r()(),h(4,Hs,3,3,"div",14),r()}if(i&2){let e=L(3),n=p().$implicit,o=p();l(2),d("id",n.key)("name",n.key),k("ngModel",o.formData[n.key]),d("placeholder",n.placeholder)("required",!!n.required),l(2),d("ngIf",n.required&&e.invalid&&(e.dirty||e.touched||o.formSubmitted))}}function Ys(i,t){if(i&1&&(a(0,"div",15),s(1),R(2,"lowercase"),r()),i&2){let e=p(2).$implicit;l(),M(" C\xE2mpul ",Z(2,1,e.label)," este obligatoriu. ")}}function Ks(i,t){if(i&1){let e=x();a(0,"div")(1,"div",12)(2,"input",16,1),I("ngModelChange",function(o){g(e);let c=p().$implicit,m=p();return E(m.formData[c.key],o)||(m.formData[c.key]=o),f(o)}),r()(),h(4,Ys,3,3,"div",14),r()}if(i&2){let e=L(3),n=p().$implicit,o=p();l(2),d("id",n.key)("name",n.key),k("ngModel",o.formData[n.key]),d("placeholder",n.placeholder)("required",!!n.required),l(2),d("ngIf",n.required&&e.invalid&&(e.dirty||e.touched||o.formSubmitted))}}function Js(i,t){if(i&1&&(a(0,"div",15),s(1),R(2,"lowercase"),r()),i&2){let e=p(2).$implicit;l(),M(" C\xE2mpul ",Z(2,1,e.label)," este obligatoriu. ")}}function Qs(i,t){if(i&1){let e=x();a(0,"div")(1,"div",12)(2,"input",17,1),I("ngModelChange",function(o){g(e);let c=p().$implicit,m=p();return E(m.formData[c.key],o)||(m.formData[c.key]=o),f(o)}),r()(),h(4,Js,3,3,"div",14),r()}if(i&2){let e=L(3),n=p().$implicit,o=p();l(2),d("id",n.key)("name",n.key),k("ngModel",o.formData[n.key]),d("placeholder",n.placeholder)("required",!!n.required),l(2),d("ngIf",n.required&&e.invalid&&(e.dirty||e.touched||o.formSubmitted))}}function Xs(i,t){if(i&1&&(a(0,"div",15),s(1),R(2,"lowercase"),r()),i&2){let e=p(2).$implicit;l(),M(" C\xE2mpul ",Z(2,1,e.label)," este obligatoriu. ")}}function ec(i,t){if(i&1){let e=x();a(0,"div")(1,"div",12)(2,"input",18,1),I("ngModelChange",function(o){g(e);let c=p().$implicit,m=p();return E(m.formData[c.key],o)||(m.formData[c.key]=o),f(o)}),r()(),h(4,Xs,3,3,"div",14),r()}if(i&2){let e=L(3),n=p().$implicit,o=p();l(2),d("id",n.key)("name",n.key),k("ngModel",o.formData[n.key]),d("placeholder",n.placeholder)("required",!!n.required),l(2),d("ngIf",n.required&&e.invalid&&(e.dirty||e.touched||o.formSubmitted))}}function tc(i,t){if(i&1&&(a(0,"option",23),s(1),r()),i&2){let e=t.$implicit;d("value",e),l(),P(e)}}function nc(i,t){if(i&1&&(a(0,"div",15),s(1),R(2,"lowercase"),r()),i&2){let e=p(2).$implicit;l(),M(" C\xE2mpul ",Z(2,1,e.label)," este obligatoriu. ")}}function ic(i,t){if(i&1){let e=x();a(0,"div")(1,"div",19)(2,"select",20,1),I("ngModelChange",function(o){g(e);let c=p().$implicit,m=p();return E(m.formData[c.key],o)||(m.formData[c.key]=o),f(o)}),a(4,"option",21),s(5),r(),h(6,tc,2,2,"option",22),r()(),h(7,nc,3,3,"div",14),r()}if(i&2){let e=L(3),n=p().$implicit,o=p();l(2),d("id",n.key)("name",n.key),k("ngModel",o.formData[n.key]),d("required",!!n.required)("ngClass",Ge(8,Gs,o.formData[n.key]==="")),l(3),P(n.placeholder||"Selecteaz\u0103 o op\u021Biune"),l(),d("ngForOf",n.options),l(),d("ngIf",n.required&&e.invalid&&(e.dirty||e.touched||o.formSubmitted))}}function oc(i,t){if(i&1&&(a(0,"div",15),s(1),R(2,"lowercase"),r()),i&2){let e=p(2).$implicit;l(),M(" C\xE2mpul ",Z(2,1,e.label)," este obligatoriu. ")}}function rc(i,t){if(i&1){let e=x();a(0,"div")(1,"div",12)(2,"textarea",24,1),I("ngModelChange",function(o){g(e);let c=p().$implicit,m=p();return E(m.formData[c.key],o)||(m.formData[c.key]=o),f(o)}),s(4,"          "),r()(),h(5,oc,3,3,"div",14),r()}if(i&2){let e=L(3),n=p().$implicit,o=p();l(2),d("id",n.key)("name",n.key),k("ngModel",o.formData[n.key]),d("placeholder",n.placeholder)("required",!!n.required),l(3),d("ngIf",n.required&&e.invalid&&(e.dirty||e.touched||o.formSubmitted))}}function ac(i,t){if(i&1&&(a(0,"div",15),s(1),R(2,"lowercase"),r()),i&2){let e=p(2).$implicit;l(),M(" C\xE2mpul ",Z(2,1,e.label)," este obligatoriu. ")}}function sc(i,t){if(i&1){let e=x();a(0,"div")(1,"div",12)(2,"input",25,1),I("ngModelChange",function(o){g(e);let c=p().$implicit,m=p();return E(m.formData[c.key],o)||(m.formData[c.key]=o),f(o)}),r()(),h(4,ac,3,3,"div",14),r()}if(i&2){let e=L(3),n=p().$implicit,o=p();l(2),d("type",n.type)("id",n.key)("name",n.key),k("ngModel",o.formData[n.key]),d("placeholder",n.placeholder)("required",!!n.required),l(2),d("ngIf",n.required&&e.invalid&&(e.dirty||e.touched||o.formSubmitted))}}function cc(i,t){if(i&1&&(a(0,"div",6)(1,"label",7),s(2),r(),a(3,"div",8),ce(4,9),h(5,Zs,5,6,"div",10)(6,Ks,5,6,"div",10)(7,Qs,5,6,"div",10)(8,ec,5,6,"div",10)(9,ic,8,10,"div",10)(10,rc,6,6,"div",10)(11,sc,5,7,"div",11),le(),r()()),i&2){let e=t.$implicit;d("ngClass",e.class),l(),d("for",e.key),l(),P(e.label),l(2),d("ngSwitch",e.type),l(),d("ngSwitchCase","text"),l(),d("ngSwitchCase","email"),l(),d("ngSwitchCase","password"),l(),d("ngSwitchCase","number"),l(),d("ngSwitchCase","select"),l(),d("ngSwitchCase","textarea")}}var Re=class i{fields=[];initialData={};submitText="Submit";formSubmit=new F;formData={};formSubmitted=!1;ngOnChanges(t){t.initialData&&t.initialData.currentValue&&(this.formData=O({},t.initialData.currentValue),this.fields.forEach(e=>{e.key in this.formData||(this.formData[e.key]="")}))}onSubmit(t){this.formSubmitted=!0,console.log(this.formSubmitted),!t.invalid&&this.formSubmit.emit(this.formData)}liveFormatPhoneNumber(t){let e=this.formData[t]||"",n=e.startsWith("+"),o=e.replace(/\D/g,""),c=o;o.length===11&&o.startsWith("40")?c=o.replace(/(\d{2})(\d{3})(\d{3})(\d{3})/,"$1 $2 $3 $4"):o.length===10&&o.startsWith("0")?c=o.replace(/(\d{3})(\d{3})(\d{4})/,"$1 $2 $3"):o.length===9&&(c=o.replace(/(\d{3})(\d{3})(\d{3})/,"$1 $2 $3")),this.formData[t]=n?`+${c}`:c}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-dynamic-form"]],inputs:{fields:"fields",initialData:"initialData",submitText:"submitText"},outputs:{formSubmit:"formSubmit"},features:[ke],decls:6,vars:2,consts:[["formRef","ngForm"],["ctrl","ngModel"],[1,"form-layout",3,"ngSubmit"],["class","form-group",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-group","full-width"],["type","submit",1,"send-button"],[1,"form-group",3,"ngClass"],[3,"for"],[1,"field-wrapper"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"input-box"],["type","text",3,"ngModelChange","input","id","name","ngModel","placeholder","required"],["class","error",4,"ngIf"],[1,"error"],["type","email",3,"ngModelChange","id","name","ngModel","placeholder","required"],["type","password",3,"ngModelChange","id","name","ngModel","placeholder","required"],["type","number",3,"ngModelChange","id","name","ngModel","placeholder","required"],[1,"select-box"],[3,"ngModelChange","id","name","ngModel","required","ngClass"],["value","","disabled","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","4",3,"ngModelChange","id","name","ngModel","placeholder","required"],[3,"ngModelChange","type","id","name","ngModel","placeholder","required"]],template:function(e,n){if(e&1){let o=x();a(0,"form",2,0),u("ngSubmit",function(){g(o);let m=L(1);return f(n.onSubmit(m))}),h(2,cc,12,10,"div",3),a(3,"div",4)(4,"button",5),s(5),r()()()}e&2&&(l(2),d("ngForOf",n.fields),l(3),M(" ",n.submitText," "))},dependencies:[Y,ie,G,T,ct,lt,jn,cr,W,we,Ht,Zt,ae,ot,mt,J,Me,Se,ee,Pe],styles:[".grid-form[_ngcontent-%COMP%]{gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto;font-family:Roboto Mono,monospace;border:2px solid #c9b7ff;border-radius:6px;box-shadow:0 4px 12px #0000001a}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:12px 16px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.form-group.half-width[_ngcontent-%COMP%]{flex:1 1 48%}label[_ngcontent-%COMP%]{margin-bottom:8px}.input-box[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:16px;outline:none}.input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-family:inherit;font-size:1rem;border:none;border-radius:6px;box-sizing:border-box;resize:vertical;background:#e6dfff}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;font-size:16px;outline:none;appearance:auto;font-family:inherit;width:100%}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#a388ff;box-shadow:0 0 3px #a388ff}.placeholder-selected[_ngcontent-%COMP%]{color:#7d7d7f!important}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.field-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px}"]})};var en={production:!0,googleMapsApiKey:"AIzaSyBXerFhvItMF0h6co9iMDsMuyM_1JvlPH8",googleClientId:"760852864614-0l1qdais39snht0oo3511r0tpbjdj09f.apps.googleusercontent.com",facebookAppId:"734399149543740"};function lc(i,t){i&1&&(a(0,"div",25),s(1," Trebuie s\u0103 accep\u021Bi termenii \u0219i condi\u021Biile pentru a continua. "),r())}function dc(i,t){i&1&&(At(),a(0,"svg",26),y(1,"path",27)(2,"path",28)(3,"path",29)(4,"path",30),r())}function pc(i,t){i&1&&y(0,"div",31)}function mc(i,t){i&1&&(a(0,"span"),s(1,"\xCEnregistreaz\u0103-te cu Google"),r())}function uc(i,t){i&1&&(a(0,"span"),s(1,"Se \xEEncarc\u0103..."),r())}function gc(i,t){i&1&&(At(),a(0,"svg",26),y(1,"path",32),r())}function fc(i,t){i&1&&y(0,"div",31)}function hc(i,t){i&1&&(a(0,"span"),s(1,"\xCEnregistreaz\u0103-te cu Facebook"),r())}function _c(i,t){i&1&&(a(0,"span"),s(1,"Se \xEEncarc\u0103..."),r())}function vc(i,t){i&1&&(a(0,"div",33),s(1," Accepta\u021Bi termenii \u0219i condi\u021Biile pentru a v\u0103 \xEEnregistra cu Google sau Facebook. "),r())}function bc(i,t){if(i&1){let e=x();a(0,"div",38)(1,"button",39),u("click",function(){g(e);let o=p(2);return f(o.retryGoogleSignUp())}),s(2," \xCEncearc\u0103 din nou cu Google "),r()()}}function xc(i,t){if(i&1){let e=x();a(0,"div",38)(1,"button",39),u("click",function(){g(e);let o=p(2);return f(o.retryFacebookSignUp())}),s(2," \xCEncearc\u0103 din nou cu Facebook "),r()()}}function Cc(i,t){i&1&&(a(0,"li"),s(1,"Asigura\u021Bi-v\u0103 c\u0103 sunte\u021Bi conectat la Google \xEEn browser"),r())}function yc(i,t){i&1&&(a(0,"li"),s(1,"Verifica\u021Bi dac\u0103 sunte\u021Bi conectat la Facebook"),r())}function Mc(i,t){i&1&&(a(0,"li"),s(1,"Verifica\u021Bi dac\u0103 a\u021Bi acordat permisiunea pentru email"),r())}function wc(i,t){i&1&&(a(0,"li"),s(1,"\xCEncerca\u021Bi s\u0103 v\u0103 autentifica\u021Bi \xEEn loc s\u0103 v\u0103 \xEEnregistra\u021Bi"),r())}function Sc(i,t){if(i&1&&(a(0,"div",40)(1,"details")(2,"summary"),s(3,"Sfaturi pentru rezolvarea problemei"),r(),a(4,"ul"),h(5,Cc,2,0,"li",19)(6,yc,2,0,"li",19)(7,Mc,2,0,"li",19)(8,wc,2,0,"li",19),a(9,"li"),s(10,"\xCEncerca\u021Bi s\u0103 re\xEEnc\u0103rca\u021Bi pagina"),r(),a(11,"li"),s(12,"Verifica\u021Bi conexiunea la internet"),r(),a(13,"li"),s(14,"\xCEncerca\u021Bi cu un alt browser"),r()()()()),i&2){let e=p(2);l(5),d("ngIf",e.errorMessage.includes("Google")),l(),d("ngIf",e.errorMessage.includes("Facebook")),l(),d("ngIf",e.errorMessage.includes("email")),l(),d("ngIf",e.errorMessage.includes("exist\u0103"))}}function Pc(i,t){if(i&1&&(a(0,"div",34)(1,"div",35)(2,"strong"),s(3,"Eroare:"),r(),s(4),r(),h(5,bc,3,0,"div",36)(6,xc,3,0,"div",36)(7,Sc,15,4,"div",37),r()),i&2){let e=p();l(4),M(" ",e.errorMessage," "),l(),d("ngIf",e.errorMessage.includes("Google")),l(),d("ngIf",e.errorMessage.includes("Facebook")),l(),d("ngIf",e.errorMessage)}}var li=class i{constructor(t,e,n,o){this.authService=t;this.router=e;this.route=n;this.ngZone=o;let c={firstName:"",lastName:"",email:"",password:""};this.formFields=Oe(c,{email:{type:"email"},password:{type:"password"}}),console.log("Registration form fields:",this.formFields)}formFields=[];errorMessage=null;acceptedPolicies=!1;showPolicyError=!1;isGoogleLoading=!1;isFacebookLoading=!1;GOOGLE_CLIENT_ID=en.googleClientId||"760852864614-0l1qdais39snht0oo3511r0tpbjdj09f.apps.googleusercontent.com";FACEBOOK_APP_ID=en.facebookAppId||"734399149543740";ngOnInit(){this.checkForOAuthError(),this.loadFacebookSDK(),console.log("Register component initialized"),console.log("Google Client ID:",this.GOOGLE_CLIENT_ID),console.log("Current origin:",window.location.origin)}checkForOAuthError(){this.route.queryParams.subscribe(t=>{t.error&&(this.errorMessage=t.error,this.router.navigate([],{relativeTo:this.route,queryParams:{},replaceUrl:!0}))})}registerUser(t){if(!this.acceptedPolicies){this.showPolicyError=!0;return}this.showPolicyError=!1;let e=t;this.authService.registerUser(e).subscribe({next:()=>{let n={email:e.email,password:e.password};this.authService.loginUser(n).subscribe({next:()=>{this.router.navigate(["/home"])},error:o=>{console.error("Auto-login after registration failed:",o),this.errorMessage="\xCEnregistrare reu\u0219it\u0103, dar autentificarea automat\u0103 a e\u0219uat. V\u0103 rug\u0103m s\u0103 v\u0103 autentifica\u021Bi manual."}})},error:n=>{console.error("Registration failed:",n),this.errorMessage=n.error?.errorMessage?.message||"Eroare la \xEEnregistrare."}})}signUpWithGoogle(){if(console.log("Starting Google OAuth registration redirect flow"),!this.acceptedPolicies){this.showPolicyError=!0,this.errorMessage="Trebuie s\u0103 accepta\u021Bi termenii \u0219i condi\u021Biile pentru a continua.";return}if(this.showPolicyError=!1,!this.isGoogleLoading){this.isGoogleLoading=!0,this.errorMessage=null;try{let t=window.location.origin+"/auth/google/callback",e="email profile",n="code",o=this.generateRandomState();console.log("=== OAUTH REGISTRATION REDIRECT DEBUG ==="),console.log("Client ID:",this.GOOGLE_CLIENT_ID),console.log("Redirect URI:",t),console.log("State:",o),console.log("Policies accepted:",this.acceptedPolicies),console.log("========================================"),sessionStorage.setItem("google_oauth_state",o),sessionStorage.setItem("google_oauth_redirect","/home"),sessionStorage.setItem("google_oauth_type","register"),sessionStorage.setItem("google_oauth_source","register");let m=`https://accounts.google.com/oauth/authorize?${new URLSearchParams({client_id:this.GOOGLE_CLIENT_ID,redirect_uri:t,scope:e,response_type:n,state:o,access_type:"offline",prompt:"select_account",include_granted_scopes:"true"}).toString()}`;console.log("Redirecting to Google OAuth URL:",m),window.location.href=m}catch(t){this.isGoogleLoading=!1,console.error("Error starting Google OAuth registration:",t),this.errorMessage="Eroare la ini\u021Bializarea \xEEnregistr\u0103rii Google."}}}openGooglePopup(t){console.log("Opening Google registration popup...");let e=window.open(t,"google-signup","width=500,height=600,scrollbars=yes,resizable=yes,toolbar=no,menubar=no,location=no,directories=no,status=no");if(!e){console.log("Popup blocked, trying redirect method"),this.fallbackToRedirect(t);return}let n=setInterval(()=>{try{e.closed&&(clearInterval(n),this.handlePopupClosed())}catch{}},1e3);setTimeout(()=>{e.closed||(e.close(),clearInterval(n),this.ngZone.run(()=>{this.isGoogleLoading=!1,this.errorMessage="Timp expirat pentru \xEEnregistrarea Google."}))},3e5)}handlePopupClosed(){this.ngZone.run(()=>{console.log("Google registration popup closed, checking for auth code...");let t=localStorage.getItem("google_auth_code"),e=localStorage.getItem("google_auth_state"),n=localStorage.getItem("google_auth_error"),o=sessionStorage.getItem("google_oauth_state");if(n){localStorage.removeItem("google_auth_error"),this.isGoogleLoading=!1,this.errorMessage=n;return}t&&e===o?(console.log("Auth code received, exchanging for token..."),localStorage.removeItem("google_auth_code"),localStorage.removeItem("google_auth_state"),sessionStorage.removeItem("google_oauth_state"),this.exchangeGoogleCode(t)):(this.isGoogleLoading=!1,t?this.errorMessage="Eroare de securitate \xEEn \xEEnregistrarea Google.":this.errorMessage="\xCEnregistrarea Google a fost anulat\u0103.")})}fallbackToRedirect(t){console.log("Using redirect method for Google OAuth registration"),window.location.href=t}exchangeGoogleCode(t){console.log("Exchanging Google code for user registration");let e={code:t,provider:"google",redirectUri:window.location.origin+"/auth/google/callback"};this.authService.exchangeOAuthCode(e).subscribe({next:n=>{console.log("Google OAuth registration exchange successful:",n),this.isGoogleLoading=!1,this.router.navigate(["/home"])},error:n=>{console.error("Google OAuth registration exchange failed:",n),this.isGoogleLoading=!1;let o="Eroare la procesarea \xEEnregistr\u0103rii Google.";if(n.status===400&&n.error?.errorMessage?.message){let c=n.error.errorMessage.message;c.includes("already exists")?o="Un cont cu acest email exist\u0103 deja. \xCEncerca\u021Bi s\u0103 v\u0103 autentifica\u021Bi \xEEn loc s\u0103 v\u0103 \xEEnregistra\u021Bi.":o=c}this.errorMessage=o}})}loadFacebookSDK(){if(typeof window>"u")return;if(window.FB){console.log("Facebook SDK already available");return}console.log("Loading Facebook SDK..."),window.fbAsyncInit=()=>{window.FB.init({appId:this.FACEBOOK_APP_ID,cookie:!0,xfbml:!0,version:"v18.0"}),console.log("Facebook SDK initialized successfully")};let t=document.createElement("script");t.async=!0,t.defer=!0,t.crossOrigin="anonymous",t.src="https://connect.facebook.net/en_US/sdk.js",t.onerror=e=>{console.error("Failed to load Facebook SDK:",e)},document.head.appendChild(t)}signUpWithFacebook(){if(!this.acceptedPolicies){this.showPolicyError=!0,this.errorMessage="Trebuie s\u0103 accepta\u021Bi termenii \u0219i condi\u021Biile pentru a continua.";return}if(this.showPolicyError=!1,!window.FB){this.errorMessage="Facebook SDK nu este disponibil. Re\xEEnc\u0103rca\u021Bi pagina.";return}this.isFacebookLoading||(this.isFacebookLoading=!0,this.errorMessage=null,window.FB.getLoginStatus(t=>{this.ngZone.run(()=>{console.log("Facebook status:",t),t.status==="connected"?this.handleFacebookResponse(t.authResponse.accessToken):window.FB.login(e=>{this.ngZone.run(()=>{this.isFacebookLoading=!1,console.log("Facebook login response:",e),e.authResponse?this.handleFacebookResponse(e.authResponse.accessToken):(console.error("Facebook login failed or cancelled:",e),this.errorMessage="\xCEnregistrarea Facebook a fost anulat\u0103 sau a e\u0219uat.")})},{scope:"email,public_profile",return_scopes:!0,auth_type:"rerequest"})})}))}handleFacebookResponse(t){if(console.log("Facebook token received for registration"),!t){this.isFacebookLoading=!1,this.errorMessage="Nu s-a primit token-ul de la Facebook.";return}let e={token:t,provider:"facebook"};this.authService.socialLogin(e).subscribe({next:n=>{console.log("Facebook social registration successful:",n),this.isFacebookLoading=!1,this.router.navigate(["/home"])},error:n=>{console.error("Facebook social registration failed:",n),this.isFacebookLoading=!1;let o="Eroare la \xEEnregistrarea cu Facebook.";if(n.status===400&&n.error?.errorMessage?.message){let c=n.error.errorMessage.message;c.includes("already exists")?o="Un cont cu acest email exist\u0103 deja. \xCEncerca\u021Bi s\u0103 v\u0103 autentifica\u021Bi \xEEn loc s\u0103 v\u0103 \xEEnregistra\u021Bi.":o=c}this.errorMessage=o}})}generateRandomState(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}retryGoogleSignUp(){this.isGoogleLoading=!1,this.errorMessage=null,setTimeout(()=>{this.signUpWithGoogle()},100)}retryFacebookSignUp(){this.isFacebookLoading=!1,this.errorMessage=null,window.FB?window.FB.logout(()=>{setTimeout(()=>{this.signUpWithFacebook()},100)}):setTimeout(()=>{this.signUpWithFacebook()},100)}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||i)(v(V),v(re),v(jt),v(ze))};static \u0275cmp=S({type:i,selectors:[["app-register"]],decls:39,vars:20,consts:[[1,"register-form"],[1,"form-wrapper"],[1,"form-box"],[3,"formSubmit","fields","submitText"],[1,"policy-acceptance"],[1,"checkbox-container"],["type","checkbox","required","",1,"policy-checkbox",3,"ngModelChange","ngModel"],[1,"checkmark"],[1,"policy-text"],["routerLink","/terms","routerLinkActive","active","target","_blank",1,"policy-link"],["routerLink","/privacy","routerLinkActive","active","target","_blank",1,"policy-link"],["class","error",4,"ngIf"],[1,"social-login-section"],[1,"divider"],[1,"divider-text"],[1,"social-buttons"],["type","button",1,"social-button","google-button",3,"click","disabled"],["class","social-icon","viewBox","0 0 24 24",4,"ngIf"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],["type","button",1,"social-button","facebook-button",3,"click","disabled"],["class","social-policy-note",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"auth-switch"],[1,"auth-button",3,"click"],[1,"error"],["viewBox","0 0 24 24",1,"social-icon"],["fill","#4285F4","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","#34A853","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","#FBBC05","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","#EA4335","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],[1,"loading-spinner"],["fill","#1877F2","d","M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"],[1,"social-policy-note"],[1,"error-message"],[1,"error-content"],["class","error-actions",4,"ngIf"],["class","error-tips",4,"ngIf"],[1,"error-actions"],[1,"retry-button",3,"click"],[1,"error-tips"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h2"),s(2,"\xCEnregistrare"),r(),a(3,"div",1)(4,"div",2)(5,"app-dynamic-form",3),u("formSubmit",function(c){return n.registerUser(c)}),r(),a(6,"div",4)(7,"label",5)(8,"input",6),I("ngModelChange",function(c){return E(n.acceptedPolicies,c)||(n.acceptedPolicies=c),c}),r(),y(9,"span",7),a(10,"span",8),s(11," Sunt de acord cu "),a(12,"a",9),s(13,"Termenii \u0219i condi\u021Biile"),r(),s(14," \u0219i "),a(15,"a",10),s(16,"Politica de confiden\u021Bialitate"),r()()(),h(17,lc,2,0,"div",11),r(),a(18,"div",12)(19,"div",13)(20,"span",14),s(21,"sau"),r()(),a(22,"div",15)(23,"button",16),u("click",function(){return n.signUpWithGoogle()}),h(24,dc,5,0,"svg",17)(25,pc,1,0,"div",18)(26,mc,2,0,"span",19)(27,uc,2,0,"span",19),r(),a(28,"button",20),u("click",function(){return n.signUpWithFacebook()}),h(29,gc,2,0,"svg",17)(30,fc,1,0,"div",18)(31,hc,2,0,"span",19)(32,_c,2,0,"span",19),r()(),h(33,vc,2,0,"div",21),r()()(),h(34,Pc,8,4,"div",22),a(35,"p",23),s(36," Deja ai un cont? "),a(37,"button",24),u("click",function(){return n.goToLogin()}),s(38,"Autentific\u0103-te"),r()()()),e&2&&(l(5),d("fields",n.formFields)("submitText","Trimite"),l(3),k("ngModel",n.acceptedPolicies),l(9),d("ngIf",n.showPolicyError),l(6),H("loading",n.isGoogleLoading),d("disabled",n.isGoogleLoading||!n.acceptedPolicies),l(),d("ngIf",!n.isGoogleLoading),l(),d("ngIf",n.isGoogleLoading),l(),d("ngIf",!n.isGoogleLoading),l(),d("ngIf",n.isGoogleLoading),l(),H("loading",n.isFacebookLoading),d("disabled",n.isFacebookLoading||!n.acceptedPolicies),l(),d("ngIf",!n.isFacebookLoading),l(),d("ngIf",n.isFacebookLoading),l(),d("ngIf",!n.isFacebookLoading),l(),d("ngIf",n.isFacebookLoading),l(),d("ngIf",!n.acceptedPolicies),l(),d("ngIf",n.errorMessage))},dependencies:[Y,T,W,Ot,J,Ao,ee,Re,De,$n],styles:['p[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:16px}h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.auth-button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;cursor:pointer;transition:color .3s ease}.auth-button[_ngcontent-%COMP%]:hover{color:#6a5799}.policy-acceptance[_ngcontent-%COMP%]{margin:20px 0;padding:16px;background-color:#f8f9fa;border:1px solid #e9ecef;border-radius:6px}.checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;cursor:pointer;font-family:Roboto Mono,monospace;font-size:14px;line-height:1.5}.checkbox-container[_ngcontent-%COMP%]   .policy-checkbox[_ngcontent-%COMP%]{margin:2px 0 0;width:18px;height:18px;flex-shrink:0;cursor:pointer}.checkbox-container[_ngcontent-%COMP%]   .policy-text[_ngcontent-%COMP%]{flex:1;color:#333}.checkbox-container[_ngcontent-%COMP%]   .policy-link[_ngcontent-%COMP%]{color:#3c1a7d;text-decoration:underline;font-weight:600;transition:color .3s ease}.checkbox-container[_ngcontent-%COMP%]   .policy-link[_ngcontent-%COMP%]:hover{color:#6a5799}.social-login-section[_ngcontent-%COMP%]{max-width:650px;margin:20px auto;padding:0 16px}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:24px 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:#ccc}.divider[_ngcontent-%COMP%]:before{margin-right:16px}.divider[_ngcontent-%COMP%]:after{margin-left:16px}.divider-text[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:14px;color:#666;font-weight:500}.social-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-width:400px;margin:0 auto}.social-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:12px 16px;border:2px solid #ddd;border-radius:8px;background-color:#fff;font-family:Roboto Mono,monospace;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;min-height:48px;position:relative}.social-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;background-color:#f5f5f5}.social-button[_ngcontent-%COMP%]:disabled:hover{transform:none;box-shadow:none}.social-button[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.social-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.social-button.loading[_ngcontent-%COMP%]{pointer-events:none}.google-button[_ngcontent-%COMP%]{border-color:#dadce0;color:#3c4043}.google-button[_ngcontent-%COMP%]:not(:disabled):hover{border-color:#9aa0a6;background-color:#f8f9fa}.facebook-button[_ngcontent-%COMP%]{border-color:#1877f2;color:#1877f2}.facebook-button[_ngcontent-%COMP%]:not(:disabled):hover{background-color:#1877f2;color:#fff}.facebook-button[_ngcontent-%COMP%]:not(:disabled):hover   .social-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.social-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #f3f3f3;border-top:2px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.social-policy-note[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:#666;margin-top:12px;font-family:Roboto Mono,monospace;font-style:italic;padding:8px;background-color:#f0f0f0;border-radius:4px}.error-message[_ngcontent-%COMP%]{background-color:#fee;border:1px solid #fcc;color:#c33;padding:16px;border-radius:8px;margin:16px auto;max-width:650px;font-family:Roboto Mono,monospace;font-size:14px}.error-content[_ngcontent-%COMP%]{margin-bottom:12px;line-height:1.4}.error-actions[_ngcontent-%COMP%]{margin:12px 0;text-align:center}.retry-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:8px 16px;border-radius:4px;font-family:Roboto Mono,monospace;font-size:12px;cursor:pointer;transition:background-color .3s ease}.retry-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.retry-button[_ngcontent-%COMP%]:active{transform:translateY(1px)}.error-tips[_ngcontent-%COMP%]{margin-top:12px;border-top:1px solid #fcc;padding-top:12px}.error-tips[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]{cursor:pointer}.error-tips[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;outline:none}.error-tips[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]:hover{color:#a00}.error-tips[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.error-tips[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:4px 0;font-size:13px;line-height:1.3}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px;font-family:Roboto Mono,monospace}@media (max-width: 768px){.social-login-section[_ngcontent-%COMP%]{padding:0 12px}.social-buttons[_ngcontent-%COMP%]{max-width:100%}.social-button[_ngcontent-%COMP%]{font-size:13px;padding:10px 12px}.divider-text[_ngcontent-%COMP%]{font-size:13px}.policy-acceptance[_ngcontent-%COMP%]{margin:16px 0;padding:12px}.checkbox-container[_ngcontent-%COMP%]{font-size:13px}.error-message[_ngcontent-%COMP%]{margin:12px;padding:12px}.retry-button[_ngcontent-%COMP%]{font-size:11px;padding:6px 12px}}@media (max-width: 480px){.social-button[_ngcontent-%COMP%]{font-size:12px;padding:8px 10px;min-height:44px}.social-icon[_ngcontent-%COMP%], .loading-spinner[_ngcontent-%COMP%]{width:18px;height:18px}.checkbox-container[_ngcontent-%COMP%]{font-size:12px}.policy-acceptance[_ngcontent-%COMP%]{padding:10px}.error-message[_ngcontent-%COMP%]{font-size:13px}.retry-button[_ngcontent-%COMP%]{font-size:10px;padding:5px 10px}}']})};function Oc(i,t){if(i&1&&(a(0,"div",19),s(1),r()),i&2){let e=p();l(),M(" ",e.errorMessage," ")}}var di=class i{constructor(t,e,n,o){this.authService=t;this.router=e;this.route=n;this.ngZone=o;let c={email:"",password:""};this.formFields=Oe(c,{email:{type:"email"},password:{type:"password"}})}formFields=[];errorMessage=null;isGoogleLoading=!1;isFacebookLoading=!1;GOOGLE_CLIENT_ID=en.googleClientId||"760852864614-0l1qdais39snht0oo3511r0tpbjdj09f.apps.googleusercontent.com";FACEBOOK_APP_ID=en.facebookAppId||"734399149543740";ngOnInit(){this.checkForOAuthError(),this.loadFacebookSDK(),console.log("Login component initialized"),console.log("Google Client ID:",this.GOOGLE_CLIENT_ID),console.log("Current origin:",window.location.origin)}checkForOAuthError(){this.route.queryParams.subscribe(t=>{t.error&&(this.errorMessage=t.error,this.router.navigate([],{relativeTo:this.route,queryParams:{},replaceUrl:!0}))})}loginUser(t){let e=t;this.authService.loginUser(e).subscribe({next:n=>{console.log("Login successful:",n),this.router.navigate(["/home"])},error:n=>{console.error("Login failed:",n),this.errorMessage=n.error?.errorMessage?.message||"Eroare necunoscut\u0103."}})}signInWithGoogle(){if(console.log("Starting Google OAuth redirect flow"),!this.isGoogleLoading){this.isGoogleLoading=!0,this.errorMessage=null;try{let t=window.location.origin+"/auth/google/callback",e="email profile",n="code",o=this.generateRandomState();console.log("=== OAUTH REDIRECT DEBUG ==="),console.log("Client ID:",this.GOOGLE_CLIENT_ID),console.log("Redirect URI:",t),console.log("State:",o),console.log("============================"),sessionStorage.setItem("google_oauth_state",o),sessionStorage.setItem("google_oauth_redirect","/home"),sessionStorage.setItem("google_oauth_type","login"),sessionStorage.setItem("google_oauth_source","login");let m=`https://accounts.google.com/oauth/authorize?${new URLSearchParams({client_id:this.GOOGLE_CLIENT_ID,redirect_uri:t,scope:e,response_type:n,state:o,access_type:"offline",prompt:"select_account",include_granted_scopes:"true"}).toString()}`;console.log("Redirecting to Google OAuth URL:",m),window.location.href=m}catch(t){this.isGoogleLoading=!1,console.error("Error starting Google OAuth:",t),this.errorMessage="Eroare la ini\u021Bializarea autentific\u0103rii Google."}}}openGooglePopup(t){console.log("Opening Google popup...");let e=window.open(t,"google-signin","width=500,height=600,scrollbars=yes,resizable=yes,toolbar=no,menubar=no,location=no,directories=no,status=no");if(!e){console.log("Popup blocked, trying redirect method"),this.fallbackToRedirect(t);return}let n=setInterval(()=>{try{e.closed&&(clearInterval(n),this.handlePopupClosed())}catch{}},1e3);setTimeout(()=>{e.closed||(e.close(),clearInterval(n),this.ngZone.run(()=>{this.isGoogleLoading=!1,this.errorMessage="Timp expirat pentru autentificarea Google."}))},3e5)}handlePopupClosed(){this.ngZone.run(()=>{console.log("Google popup closed, checking for auth code...");let t=localStorage.getItem("google_auth_code"),e=localStorage.getItem("google_auth_state"),n=localStorage.getItem("google_auth_error"),o=sessionStorage.getItem("google_oauth_state");if(n){localStorage.removeItem("google_auth_error"),this.isGoogleLoading=!1,this.errorMessage=n;return}t&&e===o?(console.log("Auth code received, exchanging for token..."),localStorage.removeItem("google_auth_code"),localStorage.removeItem("google_auth_state"),sessionStorage.removeItem("google_oauth_state"),this.exchangeGoogleCode(t)):(this.isGoogleLoading=!1,t?this.errorMessage="Eroare de securitate \xEEn autentificarea Google.":this.errorMessage="Autentificarea Google a fost anulat\u0103.")})}fallbackToRedirect(t){console.log("Using redirect method for Google OAuth"),window.location.href=t}exchangeGoogleCode(t){console.log("Exchanging Google code for user info");let e={code:t,provider:"google",redirectUri:window.location.origin+"/auth/google/callback"};this.authService.exchangeOAuthCode(e).subscribe({next:n=>{console.log("Google OAuth exchange successful:",n),this.isGoogleLoading=!1,this.router.navigate(["/home"])},error:n=>{console.error("Google OAuth exchange failed:",n),this.isGoogleLoading=!1,this.errorMessage=n.error?.errorMessage?.message||"Eroare la procesarea autentific\u0103rii Google."}})}loadFacebookSDK(){if(typeof window>"u")return;if(window.FB){console.log("Facebook SDK already available");return}console.log("Loading Facebook SDK..."),window.fbAsyncInit=()=>{window.FB.init({appId:this.FACEBOOK_APP_ID,cookie:!0,xfbml:!0,version:"v18.0"}),console.log("Facebook SDK initialized successfully")};let t=document.createElement("script");t.async=!0,t.defer=!0,t.crossOrigin="anonymous",t.src="https://connect.facebook.net/en_US/sdk.js",t.onerror=e=>{console.error("Failed to load Facebook SDK:",e)},document.head.appendChild(t)}signInWithFacebook(){if(!window.FB){this.errorMessage="Facebook SDK nu este disponibil. Re\xEEnc\u0103rca\u021Bi pagina.";return}this.isFacebookLoading||(this.isFacebookLoading=!0,this.errorMessage=null,window.FB.getLoginStatus(t=>{this.ngZone.run(()=>{console.log("Facebook status:",t),t.status==="connected"?this.handleFacebookResponse(t.authResponse.accessToken):window.FB.login(e=>{this.ngZone.run(()=>{this.isFacebookLoading=!1,console.log("Facebook login response:",e),e.authResponse?this.handleFacebookResponse(e.authResponse.accessToken):(console.error("Facebook login failed or cancelled:",e),this.errorMessage="Autentificarea Facebook a fost anulat\u0103 sau a e\u0219uat.")})},{scope:"email,public_profile",return_scopes:!0,auth_type:"rerequest"})})}))}handleFacebookResponse(t){if(console.log("Facebook token received"),!t){this.isFacebookLoading=!1,this.errorMessage="Nu s-a primit token-ul de la Facebook.";return}let e={token:t,provider:"facebook"};this.authService.socialLogin(e).subscribe({next:n=>{console.log("Facebook social login successful:",n),this.isFacebookLoading=!1,this.router.navigate(["/home"])},error:n=>{console.error("Facebook social login failed:",n),this.isFacebookLoading=!1,this.errorMessage=n.error?.errorMessage?.message||"Eroare la autentificarea cu Facebook."}})}generateRandomState(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}retryGoogleSignIn(){this.isGoogleLoading=!1,this.errorMessage=null,setTimeout(()=>{this.signInWithGoogle()},100)}retryFacebookSignIn(){this.isFacebookLoading=!1,this.errorMessage=null,window.FB?window.FB.logout(()=>{setTimeout(()=>{this.signInWithFacebook()},100)}):setTimeout(()=>{this.signInWithFacebook()},100)}goToRegister(){this.router.navigate(["/register"])}static \u0275fac=function(e){return new(e||i)(v(V),v(re),v(jt),v(ze))};static \u0275cmp=S({type:i,selectors:[["app-login"]],decls:27,vars:3,consts:[[1,"register-form"],[1,"form-wrapper"],[1,"form-box"],[3,"formSubmit","fields","submitText"],[1,"social-login-section"],[1,"divider"],[1,"divider-text"],[1,"social-buttons"],["type","button",1,"social-button","google-button",3,"click"],["viewBox","0 0 24 24",1,"social-icon"],["fill","#4285F4","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","#34A853","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","#FBBC05","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","#EA4335","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],["type","button",1,"social-button","facebook-button",3,"click"],["fill","#1877F2","d","M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"],["class","error-message",4,"ngIf"],[1,"auth-switch"],[1,"auth-button",3,"click"],[1,"error-message"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h2"),s(2,"Autentificare"),r(),a(3,"div",1)(4,"div",2)(5,"app-dynamic-form",3),u("formSubmit",function(c){return n.loginUser(c)}),r(),a(6,"div",4)(7,"div",5)(8,"span",6),s(9,"sau"),r()(),a(10,"div",7)(11,"button",8),u("click",function(){return n.signInWithGoogle()}),At(),a(12,"svg",9),y(13,"path",10)(14,"path",11)(15,"path",12)(16,"path",13),r(),s(17," Autentific\u0103-te cu Google "),r(),xo(),a(18,"button",14),u("click",function(){return n.signInWithFacebook()}),At(),a(19,"svg",9),y(20,"path",15),r(),s(21," Autentific\u0103-te cu Facebook "),r()()()()(),h(22,Oc,2,1,"div",16),xo(),a(23,"p",17),s(24," Nu ai cont? "),a(25,"button",18),u("click",function(){return n.goToRegister()}),s(26,"\xCEnregistreaz\u0103-te"),r()()()),e&2&&(l(5),d("fields",n.formFields)("submitText","Trimite"),l(17),d("ngIf",n.errorMessage))},dependencies:[Y,T,W,Re],styles:['p[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:16px}h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.auth-button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700}.auth-button[_ngcontent-%COMP%]:hover{color:#6a5799}.social-login-section[_ngcontent-%COMP%]{max-width:650px;margin:20px auto;padding:0 16px}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:24px 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;height:1px;background:#ccc}.divider[_ngcontent-%COMP%]:before{margin-right:16px}.divider[_ngcontent-%COMP%]:after{margin-left:16px}.divider-text[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:14px;color:#666;font-weight:500}.social-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;max-width:400px;margin:0 auto}.social-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:12px 16px;border:2px solid #ddd;border-radius:8px;background-color:#fff;font-family:Roboto Mono,monospace;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;min-height:48px}.social-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.social-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.google-button[_ngcontent-%COMP%]{border-color:#dadce0;color:#3c4043}.google-button[_ngcontent-%COMP%]:hover{border-color:#9aa0a6;background-color:#f8f9fa}.facebook-button[_ngcontent-%COMP%]{border-color:#1877f2;color:#1877f2}.facebook-button[_ngcontent-%COMP%]:hover{background-color:#1877f2;color:#fff}.facebook-button[_ngcontent-%COMP%]:hover   .social-icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.social-icon[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.error-message[_ngcontent-%COMP%]{background-color:#fee;border:1px solid #fcc;color:#c33;padding:12px;border-radius:4px;margin:16px auto;max-width:650px;font-family:Roboto Mono,monospace;font-size:14px;text-align:center}@media (max-width: 768px){.social-login-section[_ngcontent-%COMP%]{padding:0 12px}.social-buttons[_ngcontent-%COMP%]{max-width:100%}.social-button[_ngcontent-%COMP%]{font-size:13px;padding:10px 12px}.divider-text[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 480px){.social-button[_ngcontent-%COMP%]{font-size:12px;padding:8px 10px;min-height:44px}.social-icon[_ngcontent-%COMP%]{width:18px;height:18px}}']})};var pi=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-admin"]],decls:15,vars:0,consts:[[1,"grid-form"],[1,"button-group"],["routerLink","/admin/users","routerLinkActive","active",1,"admin-button"],["routerLink","/admin/specialists","routerLinkActive","active",1,"admin-button"],["routerLink","/admin/categories","routerLinkActive","active",1,"admin-button"],[1,"admin-button"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),s(3,"Utilizatori"),r(),a(4,"button",3),s(5,"Speciali\u0219ti"),r(),a(6,"button",4),s(7,"Categorii"),r(),a(8,"button",5),s(9,"Servicii"),r(),a(10,"button",5),s(11,"Tranzac\u021Bii"),r(),a(12,"button",5),s(13,"Recenzii"),r()()(),y(14,"router-outlet"))},dependencies:[qn,De],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px;box-sizing:border-box}.grid-form[_ngcontent-%COMP%]{width:800px;height:500px;max-width:100%;display:flex;flex-direction:column;padding:40px 60px;border:3px solid black;border-radius:4px;box-shadow:0 4px 12px #0000001a;background-color:#cfbdfe;box-sizing:border-box}.button-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:32px;width:100%;justify-items:center;margin-top:24px}.admin-button[_ngcontent-%COMP%]{width:100%;height:5vw;background-color:#e6dfff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;border:3px solid #4b358e;border-radius:5px;cursor:pointer;box-shadow:0 2px 6px #0000001a;transition:background-color .3s ease,text-decoration .2s ease;display:flex;align-items:center;justify-content:center;text-align:center}.admin-button[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 900px){.grid-form[_ngcontent-%COMP%]{width:90%;padding:30px 40px}}@media (max-width: 600px){.grid-form[_ngcontent-%COMP%]{padding:20px 30px;height:auto}.button-group[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:20px}.admin-button[_ngcontent-%COMP%]{height:60px}}"]})};var Bo=(o=>(o.Confirmed="Confirmed",o.Completed="Completed",o.Cancelled="Cancelled",o.Reviewed="Reviewed",o))(Bo||{});var tn=(n=>(n.Admin="Admin",n.Specialist="Specialist",n.Client="Client",n))(tn||{});function kc(i,t){if(i&1&&(a(0,"th"),s(1),r()),i&2){let e=t.$implicit;l(),P(e.header)}}function Ec(i,t){if(i&1&&(ce(0),s(1),le()),i&2){let e=p(2).$implicit,n=p().$implicit;l(),M(" ",e.compute(n)," ")}}function Ic(i,t){if(i&1&&s(0),i&2){let e=p(2).$implicit,n=p().$implicit;M(" ",n[e.key]," ")}}function Dc(i,t){if(i&1&&(ce(0),h(1,Ec,2,1,"ng-container",11)(2,Ic,1,1,"ng-template",null,1,wt),le()),i&2){let e=L(3),n=p().$implicit;l(),d("ngIf",n.compute)("ngIfElse",e)}}function Tc(i,t){if(i&1){let e=x();a(0,"button",14),u("click",function(){let o=g(e).$implicit,c=p(3).$implicit;return f(o.callback(c))}),s(1),r()}if(i&2){let e=t.$implicit;d("ngClass",e.class),l(),M(" ",e.label," ")}}function Fc(i,t){if(i&1&&(a(0,"div",12),h(1,Tc,2,2,"button",13),r()),i&2){let e=p().$implicit;l(),d("ngForOf",e.actions)}}function Rc(i,t){if(i&1&&(a(0,"td"),h(1,Dc,4,2,"ng-container",11)(2,Fc,2,1,"ng-template",null,0,wt),r()),i&2){let e=t.$implicit,n=L(3);l(),d("ngIf",e.type!=="action")("ngIfElse",n)}}function Ac(i,t){if(i&1&&(a(0,"tr"),h(1,Rc,4,2,"td",7),r()),i&2){let e=p();l(),d("ngForOf",e.columns)}}function zc(i,t){if(i&1&&(ce(0),s(1),le()),i&2){let e,n=p().$implicit,o=p();l(),M(" ",(e=o.getPrimaryColumn())==null?null:e.compute(n)," ")}}function Vc(i,t){if(i&1&&s(0),i&2){let e,n=p().$implicit,o=p();M(" ",n[((e=o.getPrimaryColumn())==null?null:e.key)||""]," ")}}function Nc(i,t){if(i&1){let e=x();a(0,"button",23),u("click",function(){let o=g(e).$implicit,c=p(2).$implicit;return f(o.callback(c))}),s(1),r()}if(i&2){let e=t.$implicit;d("ngClass",e.class),l(),M(" ",e.label," ")}}function Uc(i,t){if(i&1&&(a(0,"div",21),h(1,Nc,2,2,"button",22),r()),i&2){let e=p(2);l(),d("ngForOf",e.getActionColumn().actions)}}function Lc(i,t){if(i&1&&(ce(0),s(1),le()),i&2){let e=p().$implicit,n=p().$implicit;l(),M(" ",e.compute(n)," ")}}function Bc(i,t){if(i&1&&s(0),i&2){let e=p().$implicit,n=p().$implicit;M(" ",n[e.key]," ")}}function jc(i,t){if(i&1&&(a(0,"div",24)(1,"span",25),s(2),r(),a(3,"span",26),h(4,Lc,2,1,"ng-container",11)(5,Bc,1,1,"ng-template",null,3,wt),r()()),i&2){let e=t.$implicit,n=t.index,o=L(6);H("primary",n===0),l(2),M("",e.header,":"),l(2),d("ngIf",e.compute)("ngIfElse",o)}}function qc(i,t){if(i&1&&(a(0,"div",15)(1,"div",16)(2,"h3",17),h(3,zc,2,1,"ng-container",11)(4,Vc,1,1,"ng-template",null,2,wt),r(),h(6,Uc,2,1,"div",18),r(),a(7,"div",19),h(8,jc,7,5,"div",20),r()()),i&2){let e,n=L(5),o=p();l(3),d("ngIf",(e=o.getPrimaryColumn())==null?null:e.compute)("ngIfElse",n),l(3),d("ngIf",o.getActionColumn()),l(2),d("ngForOf",o.getNonActionColumns())}}function $c(i,t){i&1&&(a(0,"div",27)(1,"div",28),s(2,"\u{1F4CB}"),r(),a(3,"h3"),s(4,"Nu exist\u0103 date"),r(),a(5,"p"),s(6,"Nu au fost g\u0103site \xEEnregistr\u0103ri pentru afi\u0219are."),r()())}var ht=class i{columns=[];data=[];getPrimaryColumn(){return this.columns.find(t=>t.type!=="action")}getActionColumn(){return this.columns.find(t=>t.type==="action")}getNonActionColumns(){return this.columns.filter(t=>t.type!=="action")}getDisplayValue(t,e){return t.compute?t.compute(e):e[t.key]||""}truncateText(t,e=50){return t?t.length>e?t.substring(0,e)+"...":t:""}isMobile(){return window.innerWidth<=768}getVisibleColumns(){let t=window.innerWidth;if(t<=900){let e=this.columns.filter(o=>o.type!=="action").slice(0,3),n=this.columns.find(o=>o.type==="action");return n?[...e,n]:e}else if(t<=1024){let e=this.columns.filter(o=>o.type!=="action").slice(0,4),n=this.columns.find(o=>o.type==="action");return n?[...e,n]:e}else if(t<=1200){let e=this.columns.filter(o=>o.type!=="action").slice(0,5),n=this.columns.find(o=>o.type==="action");return n?[...e,n]:e}return this.columns}onWindowResize(){}getColumnPriority(t){return t.type==="action"?0:t.key?.toLowerCase().includes("name")||t.key?.toLowerCase().includes("id")||t.key?.toLowerCase().includes("title")?1:t.key?.toLowerCase().includes("status")||t.key?.toLowerCase().includes("date")||t.key?.toLowerCase().includes("email")?2:3}getSortedColumnsByPriority(){return[...this.columns].sort((t,e)=>this.getColumnPriority(t)-this.getColumnPriority(e))}isColumnHidden(t){let e=window.innerWidth;return e<=900?t>=4:e<=1024?t>=5:e<=1200?t>=6:!1}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-dynamic-table"]],inputs:{columns:"columns",data:"data"},decls:11,vars:4,consts:[["actionCell",""],["directValue",""],["primaryDirectValue",""],["cardDirectValue",""],[1,"table-wrapper"],[1,"desktop-table"],[1,"admin-table"],[4,"ngFor","ngForOf"],[1,"mobile-cards"],["class","card",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"action-buttons"],["class","action-btn",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"action-btn",3,"click","ngClass"],[1,"card"],[1,"card-header"],[1,"card-title"],["class","card-actions",4,"ngIf"],[1,"card-body"],["class","field",3,"primary",4,"ngFor","ngForOf"],[1,"card-actions"],["class","action-btn mobile",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"action-btn","mobile",3,"click","ngClass"],[1,"field"],[1,"field-label"],[1,"field-value"],[1,"empty-state"],[1,"empty-icon"]],template:function(e,n){e&1&&(a(0,"div",4)(1,"div",5)(2,"table",6)(3,"thead")(4,"tr"),h(5,kc,2,1,"th",7),r()(),a(6,"tbody"),h(7,Ac,2,1,"tr",7),r()()(),a(8,"div",8),h(9,qc,9,4,"div",9),r(),h(10,$c,7,0,"div",10),r()),e&2&&(l(5),d("ngForOf",n.columns),l(2),d("ngForOf",n.data),l(2),d("ngForOf",n.data),l(),d("ngIf",n.data.length===0))},dependencies:[Y,ie,G,T,W],styles:[".table-wrapper[_ngcontent-%COMP%]{width:100%;font-family:Roboto Mono,monospace}.desktop-table[_ngcontent-%COMP%]{display:block;overflow-x:auto;background-color:#f8f4ff;border-radius:8px;box-shadow:0 4px 12px #0000001a;border:2px solid #4b358e}@media (max-width: 768px){.desktop-table[_ngcontent-%COMP%]{display:none}}.admin-table[_ngcontent-%COMP%]{width:100%;min-width:600px;border-collapse:collapse;background-color:#f8f4ff;margin:0}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;vertical-align:middle}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700;position:sticky;top:0;z-index:10;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:150px}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:120px}}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid transparent;border-radius:4px;cursor:pointer;font-weight:700;font-size:12px;font-family:Roboto Mono,monospace;transition:all .3s ease;text-decoration:none;display:inline-block}.action-btn.view[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0;border-color:#1565c0}.action-btn.view[_ngcontent-%COMP%]:hover{background-color:#1565c0;color:#fff}.action-btn.edit[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32;border-color:#2e7d32}.action-btn.edit[_ngcontent-%COMP%]:hover{background-color:#2e7d32;color:#fff}.action-btn.delete[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;border-color:#c62828}.action-btn.delete[_ngcontent-%COMP%]:hover{background-color:#c62828;color:#fff}.action-btn.mobile[_ngcontent-%COMP%]{padding:8px 12px;font-size:11px}@media (max-width: 900px){.action-btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:11px}}.mobile-cards[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.mobile-cards[_ngcontent-%COMP%]{display:block;padding:16px}}.card[_ngcontent-%COMP%]{background-color:#f8f4ff;border:2px solid #cfbdfe;border-radius:8px;margin-bottom:16px;box-shadow:0 2px 8px #0000001a;transition:all .3s ease}.card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:16px;background-color:#cfbdfe;border-bottom:1px solid #ddd;border-radius:6px 6px 0 0;gap:12px}.card-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:700;color:#333;flex:1;word-break:break-word}@media (max-width: 480px){.card-title[_ngcontent-%COMP%]{font-size:14px}}.card-actions[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap;flex-shrink:0}.card-body[_ngcontent-%COMP%]{padding:16px}.field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;gap:12px}.field[_ngcontent-%COMP%]:last-child{margin-bottom:0}.field.primary[_ngcontent-%COMP%]{display:none}.field-label[_ngcontent-%COMP%]{font-weight:700;color:#666;font-size:13px;flex-shrink:0;min-width:80px}@media (max-width: 480px){.field-label[_ngcontent-%COMP%]{font-size:12px;min-width:70px}}.field-value[_ngcontent-%COMP%]{color:#333;font-size:13px;text-align:right;word-break:break-word;flex:1}@media (max-width: 480px){.field-value[_ngcontent-%COMP%]{font-size:12px}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;background-color:#f8f4ff;border:2px dashed #cfbdfe;border-radius:8px;color:#666}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]{margin:16px;padding:32px 16px}}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.7}@media (max-width: 768px){.empty-icon[_ngcontent-%COMP%]{font-size:36px;margin-bottom:12px}}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;color:#333}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 1200px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+6), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+6){display:none}}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+5), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+5){display:none}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+4), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+4){display:none}}@media (min-width: 769px) and (max-width: 1024px){.desktop-table[_ngcontent-%COMP%]{margin:0 16px}.admin-table[_ngcontent-%COMP%]{min-width:500px}}@media print{.table-wrapper[_ngcontent-%COMP%]{overflow:visible!important}.desktop-table[_ngcontent-%COMP%]{display:block!important;overflow:visible!important}.mobile-cards[_ngcontent-%COMP%]{display:none!important}.admin-table[_ngcontent-%COMP%]{min-width:auto!important;width:100%!important}.action-btn[_ngcontent-%COMP%]{display:none!important}}"]})};function Wc(i,t){if(i&1&&(ce(0),a(1,"p")(2,"strong"),s(3),r(),s(4),r(),le()),i&2){let e=p().$implicit,n=p();l(3),M("",n.formatKey(e),":"),l(),M(" ",n.formatValue(n.entity[e])," ")}}function Gc(i,t){if(i&1&&(ce(0),h(1,Wc,5,2,"ng-container",5),le()),i&2){let e=t.$implicit;l(),d("ngIf",e!=="ID")}}var _t=class i{entity={};title="";close=new F;onClose(){this.close.emit()}objectKeys=Object.keys;formatKey(t){return t.includes(" ")||t.includes("-")?t:t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}formatValue(t){return typeof t=="boolean"?t?"Da":"Nu":t instanceof Date?t.toLocaleDateString():typeof t=="string"&&t.toLowerCase().includes("password")?"********":t}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-admin-details"]],inputs:{entity:"entity",title:"title"},outputs:{close:"close"},decls:10,vars:3,consts:[[1,"admin-wrapper"],[1,"page-title"],[1,"card"],[1,"divider"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h2",1),s(2),r(),a(3,"div",2)(4,"p")(5,"strong"),s(6,"ID:"),r(),s(7),r(),y(8,"hr",3),h(9,Gc,2,1,"ng-container",4),r()()),e&2&&(l(2),P(n.title),l(5),M(" ",n.entity.ID,""),l(2),d("ngForOf",n.objectKeys(n.entity)))},dependencies:[Y,G,T],styles:[".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var Hc=()=>[5,10,20];function Zc(i,t){if(i&1){let e=x();a(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),u("click",function(){g(e);let o=p();return f(o.closeAddUserForm())}),s(4,"\xD7"),r()(),a(5,"app-dynamic-form",13),u("formSubmit",function(o){g(e);let c=p();return f(c.addEntity(o))}),r()()()}if(i&2){let e=p();l(5),d("fields",e.addEntityFormFields)("submitText","Trimite")}}function Yc(i,t){if(i&1){let e=x();a(0,"div",9)(1,"div",10)(2,"button",12),u("click",function(){g(e);let o=p();return f(o.closeUpdateUserForm())}),s(3,"\xD7"),r(),a(4,"app-dynamic-form",14),u("formSubmit",function(o){g(e);let c=p();return f(c.updateEntity(o))}),r()()()}if(i&2){let e=p();l(4),d("fields",e.updateEntityFormFields)("initialData",e.formData)("submitText","Actualizeaz\u0103")}}function Kc(i,t){if(i&1){let e=x();a(0,"app-admin-details",18),u("close",function(){g(e);let o=p(2);return f(o.closeUserDetails())}),r()}if(i&2){let e=p(2);d("entity",e.entityDetails)("title","Detalii utilizator")}}function Jc(i,t){if(i&1){let e=x();a(0,"div",15)(1,"div",16)(2,"button",12),u("click",function(){g(e);let o=p();return f(o.closeUserDetails())}),s(3,"\xD7"),r(),h(4,Kc,1,2,"app-admin-details",17),r()()}if(i&2){let e=p();l(4),d("ngIf",e.isUserDetailsVisible)}}var mi=class i{constructor(t){this.adminService=t}dummy_users=[{id:"m3n4o5p6",fullName:"Ana Georgescu",email:"ana.georgescu@example.com",role:"Admin",createdAt:new Date("2024-09-01T11:30:00Z"),updatedAt:new Date("2025-01-12T13:00:00Z"),rating:4.5},{id:"q7r8s9t0",fullName:"Radu Enache",email:"radu.enache@example.com",role:"Client",createdAt:new Date("2024-08-20T15:45:00Z"),updatedAt:new Date("2025-01-08T11:15:00Z"),rating:4}];searchTerm="";users=[];selectedUser=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddUserFormVisible=!1;isUpdateUserFormVisible=!1;isUserDetailsVisible=!1;selectedUserId=null;placeholder="Caut\u0103 un utilizator...";columns=[{key:"id",header:"ID"},{key:"fullName",header:"Nume"},{key:"email",header:"Email"},{key:"role",header:"Rol"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:t=>this.getEntity(t.id)},{label:"Modific\u0103",class:"edit",callback:t=>this.editUser(t)},{label:"\u0218terge",class:"delete",callback:t=>this.deleteEntity(t)}]}];defaultUser={fullName:"",email:"",password:"",role:"Client"};formData={};error=null;addEntityFormFields=Oe(this.defaultUser,{email:{type:"email"},password:{type:"password"},role:{type:"select",options:Object.values(tn)}});updateEntityFormFields=Oe({fullName:this.selectedUser?.fullName||"",role:this.selectedUser?.role||""},{role:{type:"select",options:Object.values(tn)}});ngOnInit(){let t={fullName:"",email:"",password:"",role:"Client"};this.formData=O({},t),this.getPage()}onSearch(t){this.searchTerm=t,this.currentPage=1,this.getPage()}getEntity(t){console.log(t),this.adminService.getUser(t).subscribe({next:e=>{this.entityDetailsId=e.response?.id,this.entityDetails=Xt(e.response??{}),this.isUserDetailsVisible=!0},error:e=>{console.error("Eroare la preluarea utilizatorului:",e),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getUsers(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:t=>{console.log(t.response),this.users=t.response?.data??[],this.totalItems=t.response?.totalCount??0},error:t=>{this.error=t.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(t){let e=t;this.adminService.addUser(e).subscribe({next:()=>{this.closeAddUserForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editUser(t){this.selectedUserId=t.id,this.formData={fullName:t.fullName,role:t.role},this.isUpdateUserFormVisible=!0}updateEntity(t){if(!this.selectedUserId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let e=t.fullName??[t.firstName,t.lastName].filter(Boolean).join(" ").trim(),n={id:this.selectedUserId,fullName:e,role:t.role};this.adminService.updateUser(this.selectedUserId,n).subscribe({next:()=>{this.closeUpdateUserForm(),this.getPage()},error:o=>{console.error("Eroare la actualizare:",o)}})}showUserDetails(t){this.isUserDetailsVisible=!0}closeUserDetails(){this.isUserDetailsVisible=!1,this.selectedUser=null}closeUpdateUserForm(){this.selectedUserId=null,this.resetForm(),this.isUpdateUserFormVisible=!1}openAddUserForm(){this.selectedUserId=null,this.resetForm(),this.isAddUserFormVisible=!0}viewUser(t){this.isUserDetailsVisible=!0}deleteEntity(t){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi utilizatorul ${t.fullName}?`)&&this.adminService.deleteUser(t.id).subscribe({next:()=>{this.getPage()},error:e=>{console.error("Eroare la \u0219tergerea utilizatorului:",e)}})}closeAddUserForm(){this.isAddUserFormVisible=!1,this.resetForm()}resetForm(){this.formData={firstName:"",lastName:"",email:"",password:"",role:"Client"}}onPageChange(t){this.currentPage=t,this.getPage()}onPageSizeChange(t){this.pageSize=t,this.currentPage=1,this.getPage()}static \u0275fac=function(e){return new(e||i)(v(Be))};static \u0275cmp=S({type:i,selectors:[["app-admin-users"]],decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[1,"admin-modal"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(e,n){e&1&&(a(0,"app-pagination",0),u("pageChange",function(c){return n.onPageChange(c)})("pageSizeChange",function(c){return n.onPageSizeChange(c)}),r(),a(1,"div",1)(2,"div",2)(3,"h2"),s(4,"Administreaz\u0103 to\u021Bi utilizatorii"),r(),a(5,"div",3)(6,"app-search-input",4),u("searchChanged",function(c){return n.onSearch(c)}),r()(),a(7,"button",5),u("click",function(){return n.openAddUserForm()}),s(8,"Adaug\u0103 utilizator"),r(),y(9,"app-dynamic-table",6),r()(),h(10,Zc,6,2,"div",7)(11,Yc,5,3,"div",7)(12,Jc,5,1,"div",8)),e&2&&(d("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",Ee(10,Hc))("totalItems",n.totalItems),l(6),d("placeholder",n.placeholder),l(3),d("columns",n.columns)("data",n.users),l(),d("ngIf",n.isAddUserFormVisible),l(),d("ngIf",n.isUpdateUserFormVisible),l(),d("ngIf",n.isUserDetailsVisible))},dependencies:[Y,T,W,Re,ht,_t,je,Ke],styles:[".table-wrapper[_ngcontent-%COMP%]{width:100%;font-family:Roboto Mono,monospace}.desktop-table[_ngcontent-%COMP%]{display:block;overflow-x:auto;background-color:#f8f4ff;border-radius:8px;box-shadow:0 4px 12px #0000001a;border:2px solid #4b358e}@media (max-width: 768px){.desktop-table[_ngcontent-%COMP%]{display:none}}.admin-table[_ngcontent-%COMP%]{width:100%;min-width:600px;border-collapse:collapse;background-color:#f8f4ff;margin:0}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;vertical-align:middle}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700;position:sticky;top:0;z-index:10;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:150px}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:120px}}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid transparent;border-radius:4px;cursor:pointer;font-weight:700;font-size:12px;font-family:Roboto Mono,monospace;transition:all .3s ease;text-decoration:none;display:inline-block}.action-btn.view[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0;border-color:#1565c0}.action-btn.view[_ngcontent-%COMP%]:hover{background-color:#1565c0;color:#fff}.action-btn.edit[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32;border-color:#2e7d32}.action-btn.edit[_ngcontent-%COMP%]:hover{background-color:#2e7d32;color:#fff}.action-btn.delete[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;border-color:#c62828}.action-btn.delete[_ngcontent-%COMP%]:hover{background-color:#c62828;color:#fff}.action-btn.mobile[_ngcontent-%COMP%]{padding:8px 12px;font-size:11px}@media (max-width: 900px){.action-btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:11px}}.mobile-cards[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.mobile-cards[_ngcontent-%COMP%]{display:block;padding:16px}}.card[_ngcontent-%COMP%]{background-color:#f8f4ff;border:2px solid #cfbdfe;border-radius:8px;margin-bottom:16px;box-shadow:0 2px 8px #0000001a;transition:all .3s ease}.card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:16px;background-color:#cfbdfe;border-bottom:1px solid #ddd;border-radius:6px 6px 0 0;gap:12px}.card-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:700;color:#333;flex:1;word-break:break-word}@media (max-width: 480px){.card-title[_ngcontent-%COMP%]{font-size:14px}}.card-actions[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap;flex-shrink:0}.card-body[_ngcontent-%COMP%]{padding:16px}.field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;gap:12px}.field[_ngcontent-%COMP%]:last-child{margin-bottom:0}.field.primary[_ngcontent-%COMP%]{display:none}.field-label[_ngcontent-%COMP%]{font-weight:700;color:#666;font-size:13px;flex-shrink:0;min-width:80px}@media (max-width: 480px){.field-label[_ngcontent-%COMP%]{font-size:12px;min-width:70px}}.field-value[_ngcontent-%COMP%]{color:#333;font-size:13px;text-align:right;word-break:break-word;flex:1}@media (max-width: 480px){.field-value[_ngcontent-%COMP%]{font-size:12px}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;background-color:#f8f4ff;border:2px dashed #cfbdfe;border-radius:8px;color:#666}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]{margin:16px;padding:32px 16px}}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.7}@media (max-width: 768px){.empty-icon[_ngcontent-%COMP%]{font-size:36px;margin-bottom:12px}}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;color:#333}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 1200px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+6), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+6){display:none}}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+5), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+5){display:none}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+4), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+4){display:none}}@media (min-width: 769px) and (max-width: 1024px){.desktop-table[_ngcontent-%COMP%]{margin:0 16px}.admin-table[_ngcontent-%COMP%]{min-width:500px}}@media print{.table-wrapper[_ngcontent-%COMP%]{overflow:visible!important}.desktop-table[_ngcontent-%COMP%]{display:block!important;overflow:visible!important}.mobile-cards[_ngcontent-%COMP%]{display:none!important}.admin-table[_ngcontent-%COMP%]{min-width:auto!important;width:100%!important}.action-btn[_ngcontent-%COMP%]{display:none!important}}",".grid-form[_ngcontent-%COMP%]{gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto;font-family:Roboto Mono,monospace;border:2px solid #c9b7ff;border-radius:6px;box-shadow:0 4px 12px #0000001a}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:12px 16px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.form-group.half-width[_ngcontent-%COMP%]{flex:1 1 48%}label[_ngcontent-%COMP%]{margin-bottom:8px}.input-box[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:16px;outline:none}.input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-family:inherit;font-size:1rem;border:none;border-radius:6px;box-sizing:border-box;resize:vertical;background:#e6dfff}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;font-size:16px;outline:none;appearance:auto;font-family:inherit;width:100%}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#a388ff;box-shadow:0 0 3px #a388ff}.placeholder-selected[_ngcontent-%COMP%]{color:#7d7d7f!important}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.field-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var Qc=["class","users"],Xc=()=>[5,10,20];function el(i,t){if(i&1){let e=x();a(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),u("click",function(){g(e);let o=p();return f(o.closeAddUserForm())}),s(4,"\xD7"),r()(),a(5,"app-dynamic-form",13),u("formSubmit",function(o){g(e);let c=p();return f(c.addEntity(o))}),r()()()}if(i&2){let e=p();l(5),d("fields",e.addEntityFormFields)("submitText","Adaug\u0103")}}function tl(i,t){if(i&1){let e=x();a(0,"div",9)(1,"div",10)(2,"button",12),u("click",function(){g(e);let o=p();return f(o.closeUpdateUserForm())}),s(3,"\xD7"),r(),a(4,"app-dynamic-form",14),u("formSubmit",function(o){g(e);let c=p();return f(c.updateEntity(o))}),r()()()}if(i&2){let e=p();l(4),d("fields",e.updateEntityFormFields)("initialData",e.formData)("submitText","Actualizeaz\u0103")}}function nl(i,t){if(i&1){let e=x();a(0,"app-admin-details",17),u("close",function(){g(e);let o=p(2);return f(o.closeUserDetails())}),r()}if(i&2){let e=p(2);d("entity",e.entityDetails)("title","Detalii specialist")}}function il(i,t){if(i&1){let e=x();a(0,"div",15)(1,"div",10)(2,"button",12),u("click",function(){g(e);let o=p();return f(o.closeUserDetails())}),s(3,"\xD7"),r(),h(4,nl,1,2,"app-admin-details",16),r()()}if(i&2){let e=p();l(4),d("ngIf",e.isUserDetailsVisible)}}var ui=class i{constructor(t){this.adminService=t;let e={fullName:"",email:"",password:"",phoneNumber:"",address:"",yearsExperience:0,description:""};this.formData=O({},e),this.getPage()}searchTerm="";users=[];selectedUser=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddUserFormVisible=!1;isUpdateUserFormVisible=!1;isUserDetailsVisible=!1;selectedUserId=null;placeholder="Caut\u0103 un specialist...";columns=[{key:"id",header:"ID"},{key:"fullName",header:"Nume"},{key:"email",header:"Email"},{key:"phoneNumber",header:"Num\u0103r de telefon"},{key:"address",header:"Adres\u0103"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:t=>this.getEntity(t.id)},{label:"Modific\u0103",class:"edit",callback:t=>this.editUser(t)},{label:"\u0218terge",class:"delete",callback:t=>this.deleteUser(t)}]}];defaultUser={fullName:"",email:"",password:"",phoneNumber:"",address:"",yearsExperience:0,description:""};formData={};error=null;addEntityFormFields=Oe(this.defaultUser,{email:{type:"email"},password:{type:"password"},yearsExperience:{type:"number",placeholder:"Ex: 5"},description:{type:"textarea",placeholder:"Descrie serviciile oferite",class:"full-width"}});updateEntityFormFields=Oe({fullName:this.selectedUser?.fullName||"",phoneNumber:this.selectedUser?.phoneNumber||"",address:this.selectedUser?.address||"",yearsExperience:this.selectedUser?.yearsExperience||"",description:this.selectedUser?.description||""});onSearch(t){this.searchTerm=t,this.currentPage=1,this.getPage()}getEntity(t){this.adminService.getSpecialist(t).subscribe({next:e=>{this.entityDetailsId=e.response?.id,console.log(e.response),this.entityDetails=Xt(e.response??{}),this.isUserDetailsVisible=!0},error:e=>{console.error("Eroare la preluarea utilizatorului:",e),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getSpecialistsLegacy(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:t=>{this.users=t.response?.data??[],this.totalItems=t.response?.totalCount??0},error:t=>{this.error=t.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(t){let e=t;this.adminService.addSpecialist(e).subscribe({next:()=>{this.closeAddUserForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editUser(t){this.selectedUserId=t.id,this.formData={fullName:t.fullName,phoneNumber:t.phoneNumber,address:t.address,yearsExperience:t.yearsExperience,description:t.description},this.isUpdateUserFormVisible=!0}updateEntity(t){if(console.log("Form data submitted:",t),!this.selectedUserId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let e={id:this.selectedUserId,fullName:t.fullName,phoneNumber:t.phoneNumber,address:t.address,yearsExperience:t.yearsExperience,description:t.description};console.log("Update payload:",e),this.adminService.updateSpecialist(this.selectedUserId,e).subscribe({next:()=>{console.log(),this.closeUpdateUserForm(),this.getPage()},error:n=>{console.error("Eroare la actualizare:",n)}})}closeUserDetails(){this.isUserDetailsVisible=!1,this.entityDetails={}}closeUpdateUserForm(){this.selectedUserId=null,this.resetForm(),this.isUpdateUserFormVisible=!1}openAddUserForm(){this.selectedUserId=null,this.resetForm(),this.isAddUserFormVisible=!0}viewUser(t){this.isUserDetailsVisible=!0}deleteUser(t){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi utilizatorul ${t.fullName}?`)&&this.adminService.deleteSpecialist(t.id).subscribe({next:()=>{this.getPage()},error:e=>{console.error("Eroare la \u0219tergerea utilizatorului:",e)}})}closeAddUserForm(){this.isAddUserFormVisible=!1,this.resetForm()}resetForm(){this.formData={firstName:"",lastName:"",email:"",password:"",role:"Client"}}getTotalPages(){return Math.ceil(this.totalItems/this.pageSize)}onPageSizeChange(t){this.pageSize=t,this.currentPage=1,this.getPage()}onPageChange(t){this.currentPage=t,this.getPage()}static \u0275fac=function(e){return new(e||i)(v(ft))};static \u0275cmp=S({type:i,selectors:[["app-admin",8,"users"]],attrs:Qc,decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(e,n){e&1&&(a(0,"app-pagination",0),u("pageChange",function(c){return n.onPageChange(c)})("pageSizeChange",function(c){return n.onPageSizeChange(c)}),r(),a(1,"div",1)(2,"div",2)(3,"h2"),s(4,"Administreaz\u0103 to\u021Bi speciali\u0219tii"),r(),a(5,"div",3)(6,"app-search-input",4),u("searchChanged",function(c){return n.onSearch(c)}),r()(),a(7,"button",5),u("click",function(){return n.openAddUserForm()}),s(8,"Adaug\u0103 specialist"),r(),y(9,"app-dynamic-table",6),r()(),h(10,el,6,2,"div",7)(11,tl,5,3,"div",7)(12,il,5,1,"div",8)),e&2&&(d("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",Ee(10,Xc))("totalItems",n.totalItems),l(6),d("placeholder",n.placeholder),l(3),d("columns",n.columns)("data",n.users),l(),d("ngIf",n.isAddUserFormVisible),l(),d("ngIf",n.isUpdateUserFormVisible),l(),d("ngIf",n.isUserDetailsVisible))},dependencies:[W,_t,Re,ht,T,je,Ke],styles:[".table-wrapper[_ngcontent-%COMP%]{width:100%;font-family:Roboto Mono,monospace}.desktop-table[_ngcontent-%COMP%]{display:block;overflow-x:auto;background-color:#f8f4ff;border-radius:8px;box-shadow:0 4px 12px #0000001a;border:2px solid #4b358e}@media (max-width: 768px){.desktop-table[_ngcontent-%COMP%]{display:none}}.admin-table[_ngcontent-%COMP%]{width:100%;min-width:600px;border-collapse:collapse;background-color:#f8f4ff;margin:0}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;vertical-align:middle}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700;position:sticky;top:0;z-index:10;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:150px}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:120px}}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid transparent;border-radius:4px;cursor:pointer;font-weight:700;font-size:12px;font-family:Roboto Mono,monospace;transition:all .3s ease;text-decoration:none;display:inline-block}.action-btn.view[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0;border-color:#1565c0}.action-btn.view[_ngcontent-%COMP%]:hover{background-color:#1565c0;color:#fff}.action-btn.edit[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32;border-color:#2e7d32}.action-btn.edit[_ngcontent-%COMP%]:hover{background-color:#2e7d32;color:#fff}.action-btn.delete[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;border-color:#c62828}.action-btn.delete[_ngcontent-%COMP%]:hover{background-color:#c62828;color:#fff}.action-btn.mobile[_ngcontent-%COMP%]{padding:8px 12px;font-size:11px}@media (max-width: 900px){.action-btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:11px}}.mobile-cards[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.mobile-cards[_ngcontent-%COMP%]{display:block;padding:16px}}.card[_ngcontent-%COMP%]{background-color:#f8f4ff;border:2px solid #cfbdfe;border-radius:8px;margin-bottom:16px;box-shadow:0 2px 8px #0000001a;transition:all .3s ease}.card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:16px;background-color:#cfbdfe;border-bottom:1px solid #ddd;border-radius:6px 6px 0 0;gap:12px}.card-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:700;color:#333;flex:1;word-break:break-word}@media (max-width: 480px){.card-title[_ngcontent-%COMP%]{font-size:14px}}.card-actions[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap;flex-shrink:0}.card-body[_ngcontent-%COMP%]{padding:16px}.field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;gap:12px}.field[_ngcontent-%COMP%]:last-child{margin-bottom:0}.field.primary[_ngcontent-%COMP%]{display:none}.field-label[_ngcontent-%COMP%]{font-weight:700;color:#666;font-size:13px;flex-shrink:0;min-width:80px}@media (max-width: 480px){.field-label[_ngcontent-%COMP%]{font-size:12px;min-width:70px}}.field-value[_ngcontent-%COMP%]{color:#333;font-size:13px;text-align:right;word-break:break-word;flex:1}@media (max-width: 480px){.field-value[_ngcontent-%COMP%]{font-size:12px}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;background-color:#f8f4ff;border:2px dashed #cfbdfe;border-radius:8px;color:#666}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]{margin:16px;padding:32px 16px}}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.7}@media (max-width: 768px){.empty-icon[_ngcontent-%COMP%]{font-size:36px;margin-bottom:12px}}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;color:#333}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 1200px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+6), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+6){display:none}}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+5), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+5){display:none}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+4), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+4){display:none}}@media (min-width: 769px) and (max-width: 1024px){.desktop-table[_ngcontent-%COMP%]{margin:0 16px}.admin-table[_ngcontent-%COMP%]{min-width:500px}}@media print{.table-wrapper[_ngcontent-%COMP%]{overflow:visible!important}.desktop-table[_ngcontent-%COMP%]{display:block!important;overflow:visible!important}.mobile-cards[_ngcontent-%COMP%]{display:none!important}.admin-table[_ngcontent-%COMP%]{min-width:auto!important;width:100%!important}.action-btn[_ngcontent-%COMP%]{display:none!important}}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var It=class i{constructor(t,e){this.authService=t;this.router=e}canActivate(t,e){let n=t.data.roles,o=this.authService.getUserRole();return n.includes(o??"")?!0:(this.router.navigate(["/unauthorized"]),!1)}static \u0275fac=function(e){return new(e||i)(N(V),N(re))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var gi=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-unauthorized"]],decls:6,vars:0,consts:[["routerLink","/home"]],template:function(e,n){e&1&&(a(0,"h2"),s(1,"Acces restric\u021Bionat"),r(),a(2,"p"),s(3,"Nu ai permisiunea necesar\u0103 pentru a accesa aceast\u0103 pagin\u0103."),r(),a(4,"a",0),s(5,"\xCEnapoi la pagina principal\u0103"),r())},encapsulation:2})};var Ve=class i{constructor(t,e){this.authService=t;this.router=e}canActivate(){return this.authService.getToken()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(e){return new(e||i)(N(V),N(re))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};function ol(i,t){if(i&1&&y(0,"img",2),i&2){let e=p();d("src",e.icon,de)}}var fi=class i{label;icon;onClick=new F;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-icon-button"]],inputs:{label:"label",icon:"icon"},outputs:{onClick:"onClick"},decls:4,vars:2,consts:[[1,"icon-button",3,"click"],["alt","icon","class","button-icon",3,"src",4,"ngIf"],["alt","icon",1,"button-icon",3,"src"]],template:function(e,n){e&1&&(a(0,"button",0),u("click",function(){return n.onClick.emit()}),h(1,ol,1,1,"img",1),a(2,"span"),s(3),r()()),e&2&&(l(),d("ngIf",n.icon),l(2),P(n.label))},dependencies:[Y,T],styles:[".icon-button[_ngcontent-%COMP%]{width:260px;height:55px;display:flex;align-items:center;gap:12px;padding:12px 24px;font-size:16px;font-weight:500;border:3px solid #4f378a;background-color:#f3e6ff;border-radius:10px;cursor:pointer;transition:background .2s ease;font-family:Roboto Mono,monospace}.icon-button[_ngcontent-%COMP%]:hover{background-color:#a197be}.icon-button[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain}"]})};function rl(i,t){if(i&1){let e=x();a(0,"span",8),u("click",function(){let o=g(e).$implicit,c=p();return f(c.toggle(o.id))}),s(1),r()}if(i&2){let e=t.$implicit,n=p();H("disabled",n.selectedCategoryIds.includes(e.id)),l(),M(" ",e.name," ")}}function al(i,t){if(i&1){let e=x();a(0,"span",11),s(1),a(2,"button",12),u("click",function(){let o=g(e).$implicit,c=p(2);return f(c.remove(o))}),s(3,"\xD7"),r()()}if(i&2){let e=t.$implicit,n=p(2);l(),M(" ",n.getCategoryName(e)," ")}}function sl(i,t){if(i&1&&(ce(0),a(1,"div",9),h(2,al,4,1,"span",10),r(),le()),i&2){let e=p();l(2),d("ngForOf",e.selectedCategoryIds)}}var nn=class i{constructor(t){this.categoryService=t}category=null;allCategories=[];searchTerm="";dummyCategories=[{id:"cat-001",name:"Traduceri medicale",description:"Traducerea documentelor medicale de specialitate."},{id:"cat-002",name:"Logopedie",description:"Servicii de diagnostic \u0219i terapie pentru tulbur\u0103ri de vorbire."},{id:"cat-003",name:"Psihoterapie",description:"Sesiuni individuale sau de grup pentru s\u0103n\u0103tatea mintal\u0103."},{id:"cat-004",name:"Nutri\u021Bie clinic\u0103",description:"Planuri alimentare personalizate pentru afec\u021Biuni cronice."},{id:"cat-005",name:"Fizioterapie",description:"Reabilitare fizic\u0103 post-traumatic\u0103 sau post-operatorie."}];placeholder="Caut\u0103 o categorie...";selectedCategoryIds=[];categoryChange=new F;ngOnInit(){this.getCategories()}getCategories(){this.categoryService.getAllCategories().subscribe({next:t=>{let e=this.removeDiacritics(this.searchTerm);this.allCategories=t.response.filter(n=>this.removeDiacritics(n.name).includes(e))},error:t=>{console.error("Eroare la ob\u021Binerea categoriilor:",t.errorMessage)}})}toggle(t){this.selectedCategoryIds.includes(t)||(this.selectedCategoryIds.push(t),this.categoryChange.emit(this.selectedCategoryIds))}remove(t){this.selectedCategoryIds=this.selectedCategoryIds.filter(e=>e!==t),this.categoryChange.emit(this.selectedCategoryIds)}getCategoryName(t){return this.allCategories?.find(e=>e.id===t)?.name||"Categorie necunoscut\u0103"}onSearch(t){this.searchTerm=t,this.getCategories()}removeDiacritics(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}static \u0275fac=function(e){return new(e||i)(v(gt))};static \u0275cmp=S({type:i,selectors:[["app-category-selector"]],inputs:{selectedCategoryIds:"selectedCategoryIds"},outputs:{categoryChange:"categoryChange"},decls:11,vars:3,consts:[[1,"tag-selector"],[1,"section-title"],[1,"category-box"],[1,"search-category-wrapper"],[3,"searchChanged","placeholder"],[1,"category-options"],["class","tag option",3,"disabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"tag","option",3,"click"],[1,"category-box","category-options"],["class","tag selected",4,"ngFor","ngForOf"],[1,"tag","selected"],["type","button",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h3",1),s(2,"Alege din lista de categorii:"),r(),a(3,"div",2)(4,"div",3)(5,"app-search-input",4),u("searchChanged",function(c){return n.onSearch(c)}),r()(),a(6,"div",5),h(7,rl,2,3,"span",6),r()(),a(8,"h3",1),s(9,"Categoriile selectate:"),r(),h(10,sl,3,1,"ng-container",7),r()),e&2&&(l(5),d("placeholder",n.placeholder),l(2),d("ngForOf",n.allCategories),l(3),d("ngIf",n.selectedCategoryIds.length>0))},dependencies:[W,G,T,je],styles:[".tag-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.category-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:1.5rem;padding:1rem;background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:8px;box-shadow:0 0 4px #0000001a;flex-wrap:wrap}.category-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;align-items:flex-start}.tag.option[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem;font-family:Roboto Mono,monospace}.tag.option[_ngcontent-%COMP%]:hover{background-color:#333}.tag.option.disabled[_ngcontent-%COMP%]{background-color:#a1a1a1;cursor:not-allowed;opacity:.6}.tag.selected[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem;font-family:Roboto Mono,monospace}button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff}.section-title[_ngcontent-%COMP%]{margin-bottom:8px;font-family:Roboto Mono,monospace}.search-category-wrapper[_ngcontent-%COMP%]{background-color:#f6efff;border-radius:5px;width:300px;margin:auto;border:2px solid #c9b7ff}"]})};var vt=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/SpecialistProfile";becomeSpecialist(t,e){let n=this.authService.getToken(),o=new z({Authorization:`Bearer ${n}`}),c=new FormData;return c.append("UserId",t.userId),c.append("PhoneNumber",t.phoneNumber),c.append("Address",t.address),c.append("YearsExperience",t.yearsExperience.toString()),c.append("Description",t.description),t.categories&&t.categories.length>0&&t.categories.forEach((m,_)=>{c.append(`Categories[${_}]`,m)}),e&&e.length>0&&e.forEach(m=>{c.append("PortfolioPhotos",m,m.name)}),this.http.put(`${this.baseUrl}/BecomeSpecialist`,t,{headers:o}).pipe(Xo(m=>{m.response?.token&&localStorage.setItem("access_token",m.response.token)}))}getSpecialistProfile(){let t=this.authService.getToken(),e=new z({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/Get`,{headers:e})}updateSpecialistProfile(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Update`,t,{headers:n})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var cl=(i,t)=>({"existing-image":i,"new-image":t});function ll(i,t){i&1&&(a(0,"div",33),s(1," Num\u0103rul de telefon este obligatoriu "),r())}function dl(i,t){i&1&&(a(0,"div",33),s(1," Adresa este obligatorie "),r())}function pl(i,t){i&1&&(a(0,"div",33),s(1," Experien\u021Ba este obligatorie "),r())}function ml(i,t){i&1&&(a(0,"div",33),s(1," Descrierea este obligatorie "),r())}function ul(i,t){i&1&&(a(0,"span",42),s(1,"Nou"),r())}function gl(i,t){i&1&&(a(0,"span",43),s(1,"Existent"),r())}function fl(i,t){if(i&1){let e=x();a(0,"div",36),y(1,"img",37),a(2,"div",38),h(3,ul,2,0,"span",39)(4,gl,2,0,"span",40),a(5,"button",41),u("click",function(){let o=g(e).index,c=p(3);return f(c.removeImage(o))}),s(6,"\xD7"),r()()()}if(i&2){let e=t.$implicit;d("ngClass",Ie(4,cl,e.isExisting,e.isNew)),l(),d("src",e.url,de),l(2),d("ngIf",e.isNew),l(),d("ngIf",e.isExisting)}}function hl(i,t){if(i&1&&(a(0,"div",34),h(1,fl,7,7,"div",35),r()),i&2){let e=p(2);l(),d("ngForOf",e.portfolioImages)}}function _l(i,t){i&1&&(a(0,"div",44)(1,"p"),s(2,"Nu ai \xEEnc\u0103 imagini \xEEn portofoliu"),r()())}function vl(i,t){if(i&1&&(a(0,"div",47)(1,"span",48),s(2,"\u{1F5D1}\uFE0F"),r(),a(3,"span")(4,"strong"),s(5),r(),s(6," imagine(i) vor fi \u0219terse"),r()()),i&2){let e=p(3);l(5),P(e.photosToRemove.length)}}function bl(i,t){if(i&1&&(a(0,"div",47)(1,"span",48),s(2,"\u{1F4E4}"),r(),a(3,"span")(4,"strong"),s(5),r(),s(6," imagine(i) noi vor fi \xEEnc\u0103rcate"),r()()),i&2){let e=p(3);l(5),P(e.newPortfolioFiles.length)}}function xl(i,t){if(i&1&&(a(0,"div",45),h(1,vl,7,1,"div",46)(2,bl,7,1,"div",46),r()),i&2){let e=p(2);l(),d("ngIf",e.photosToRemove.length>0),l(),d("ngIf",e.newPortfolioFiles.length>0)}}function Cl(i,t){i&1&&(a(0,"span"),s(1,"Se salveaz\u0103..."),r())}function yl(i,t){i&1&&(a(0,"span"),s(1,"Salveaz\u0103 modific\u0103rile"),r())}function Ml(i,t){if(i&1){let e=x();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"h2"),s(4,"Editeaz\u0103 informa\u021Biile de specialist"),r(),a(5,"button",9),u("click",function(){g(e);let o=p();return f(o.onClose())}),s(6,"\xD7"),r()(),a(7,"form",10,0),u("ngSubmit",function(){g(e);let o=p();return f(o.onSubmit())}),a(9,"div",11)(10,"h3"),s(11,"Informa\u021Bii de contact"),r(),a(12,"div",12)(13,"label",13),s(14,"Num\u0103r de telefon"),r(),a(15,"input",14,1),I("ngModelChange",function(o){g(e);let c=p();return E(c.specialistInfo.phoneNumber,o)||(c.specialistInfo.phoneNumber=o),f(o)}),r(),h(17,ll,2,0,"div",15),r(),a(18,"div",12)(19,"label",16),s(20,"Adresa"),r(),a(21,"input",17,2),I("ngModelChange",function(o){g(e);let c=p();return E(c.specialistInfo.address,o)||(c.specialistInfo.address=o),f(o)}),r(),h(23,dl,2,0,"div",15),r()(),a(24,"div",11)(25,"h3"),s(26,"Categorii de servicii"),r(),a(27,"app-category-selector",18),u("categoryChange",function(o){g(e);let c=p();return f(c.updateCategories(o))}),r()(),a(28,"div",12)(29,"label",19),s(30,"Ani de experien\u021B\u0103"),r(),a(31,"input",20,3),I("ngModelChange",function(o){g(e);let c=p();return E(c.specialistInfo.yearsExperience,o)||(c.specialistInfo.yearsExperience=o),f(o)}),r(),h(33,pl,2,0,"div",15),r(),a(34,"div",12)(35,"label",21),s(36,"Descrierea serviciilor"),r(),a(37,"textarea",22,4),I("ngModelChange",function(o){g(e);let c=p();return E(c.specialistInfo.description,o)||(c.specialistInfo.description=o),f(o)}),r(),h(39,ml,2,0,"div",15),r(),a(40,"div",11)(41,"h3"),s(42,"Portofoliu imagini"),r(),a(43,"div",23),h(44,hl,2,1,"div",24)(45,_l,3,0,"div",25),a(46,"label",26),s(47," \u{1F4F8} Adaug\u0103 imagini noi "),a(48,"input",27),u("change",function(o){g(e);let c=p();return f(c.onPortfolioImagesSelected(o))}),r()(),h(49,xl,3,2,"div",28),r()(),a(50,"div",29)(51,"button",30),u("click",function(){g(e);let o=p();return f(o.onClose())}),s(52,"Anuleaz\u0103"),r(),a(53,"button",31),h(54,Cl,2,0,"span",32)(55,yl,2,0,"span",32),r()()()()()}if(i&2){let e=L(8),n=L(16),o=L(22),c=L(32),m=L(38),_=p();l(15),k("ngModel",_.specialistInfo.phoneNumber),l(2),d("ngIf",n.invalid&&n.touched),l(4),k("ngModel",_.specialistInfo.address),l(2),d("ngIf",o.invalid&&o.touched),l(4),d("selectedCategoryIds",_.specialistInfo.categories),l(4),k("ngModel",_.specialistInfo.yearsExperience),l(2),d("ngIf",c.invalid&&c.touched),l(4),k("ngModel",_.specialistInfo.description),l(2),d("ngIf",m.invalid&&m.touched),l(5),d("ngIf",_.portfolioImages.length>0),l(),d("ngIf",_.portfolioImages.length===0),l(4),d("ngIf",_.photosToRemove.length>0||_.newPortfolioFiles.length>0),l(4),d("disabled",e.invalid||_.isLoading),l(),d("ngIf",_.isLoading),l(),d("ngIf",!_.isLoading)}}var hi=class i{constructor(t){this.specialistService=t}isVisible=!1;user=null;userRole=null;close=new F;specialistUpdated=new F;specialistInfo={phoneNumber:"",address:"",categories:[],yearsExperience:0,description:""};existingPortfolioImages=[];newPortfolioFiles=[];photosToRemove=[];isLoading=!1;ngOnInit(){this.user&&this.loadSpecialistData()}ngOnChanges(){this.user&&this.isVisible&&this.loadSpecialistData()}loadSpecialistData(){this.user&&(this.specialistInfo={phoneNumber:this.user.phoneNumber||"",address:this.user.address||"",categories:this.user.categories||[],yearsExperience:this.user.yearsExperience||0,description:this.user.description||""},this.existingPortfolioImages=[],this.photosToRemove=[],this.newPortfolioFiles=[],this.user.portfolio&&this.user.portfolio.length>0&&(this.existingPortfolioImages=this.user.portfolio.map((t,e)=>({id:`existing_${e}`,url:t,isExisting:!0}))))}get portfolioImages(){let t=this.existingPortfolioImages.filter(n=>!this.photosToRemove.includes(n.id)),e=this.newPortfolioFiles.map((n,o)=>({id:`new_${o}`,url:URL.createObjectURL(n),file:n,isNew:!0}));return[...t,...e]}updateCategories(t){this.specialistInfo.categories=t}onPortfolioImagesSelected(t){let e=t.target;if(e.files){for(let n=0;n<e.files.length;n++){let o=e.files[n];this.newPortfolioFiles.push(o)}e.value=""}}removeImage(t){let n=this.portfolioImages[t];if(n.isNew){let o=this.newPortfolioFiles.findIndex((c,m)=>`new_${m}`===n.id);o>-1&&(URL.revokeObjectURL(n.url),this.newPortfolioFiles.splice(o,1))}else n.isExisting&&n.id&&this.photosToRemove.push(n.id)}onClose(){this.close.emit(),this.resetForm()}resetForm(){this.newPortfolioFiles.forEach((t,e)=>{let n=URL.createObjectURL(this.newPortfolioFiles[e]);URL.revokeObjectURL(n)}),this.loadSpecialistData()}onSubmit(){return C(this,null,function*(){if(!this.isLoading){this.isLoading=!0;try{let t=new FormData;t.append("UserId",this.user.id),this.specialistInfo.phoneNumber&&t.append("PhoneNumber",this.specialistInfo.phoneNumber),this.specialistInfo.address&&t.append("Address",this.specialistInfo.address),this.specialistInfo.yearsExperience!==void 0&&t.append("YearsExperience",this.specialistInfo.yearsExperience.toString()),this.specialistInfo.description&&t.append("Description",this.specialistInfo.description),this.existingPortfolioImages.filter(n=>!this.photosToRemove.includes(n.id)).map(n=>n.url).forEach((n,o)=>{t.append(`ExistingPortfolioPhotoUrls[${o}]`,n)}),this.photosToRemove.forEach((n,o)=>{t.append(`PhotoIdsToRemove[${o}]`,n)}),this.newPortfolioFiles.forEach(n=>{t.append("NewPortfolioPhotos",n,n.name)}),this.specialistService.updateSpecialistProfile(t).subscribe({next:n=>{console.log("Specialist updated successfully",n),this.handleSuccess()},error:n=>{console.error("Error updating specialist:",n),this.isLoading=!1,alert("Eroare la actualizarea profilului. Te rug\u0103m s\u0103 \xEEncerci din nou.")}})}catch(t){console.error("Error during update:",t),this.isLoading=!1,alert("Eroare nea\u0219teptat\u0103. Te rug\u0103m s\u0103 \xEEncerci din nou.")}}})}handleSuccess(){this.isLoading=!1,this.specialistUpdated.emit(this.user),this.onClose(),alert("Profilul a fost actualizat cu succes!")}getFilePreview(t){return URL.createObjectURL(t)}formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,n=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,o)).toFixed(2))+" "+n[o]}ngOnDestroy(){this.newPortfolioFiles.forEach((t,e)=>{let n=URL.createObjectURL(this.newPortfolioFiles[e]);URL.revokeObjectURL(n)})}static \u0275fac=function(e){return new(e||i)(v(vt))};static \u0275cmp=S({type:i,selectors:[["app-edit-specialist-info"]],inputs:{isVisible:"isVisible",user:"user",userRole:"userRole"},outputs:{close:"close",specialistUpdated:"specialistUpdated"},features:[ke],decls:1,vars:1,consts:[["editForm","ngForm"],["phoneControl","ngModel"],["addressControl","ngModel"],["experienceControl","ngModel"],["descriptionControl","ngModel"],["class","edit-overlay",4,"ngIf"],[1,"edit-overlay"],[1,"edit-modal"],[1,"edit-header"],[1,"close-button",3,"click"],[1,"edit-form",3,"ngSubmit"],[1,"form-section"],[1,"form-group"],["for","phoneNumber"],["id","phoneNumber","type","tel","name","phoneNumber","placeholder","Ex: 0712345678","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","address"],["id","address","type","text","name","address","placeholder","Ex: Strada Florilor 12, Bucure\u0219ti","required","",3,"ngModelChange","ngModel"],[3,"categoryChange","selectedCategoryIds"],["for","yearsExperience"],["id","yearsExperience","type","number","name","yearsExperience","min","0","max","50","required","",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","rows","4","placeholder","Descrie serviciile pe care le oferi...","required","",3,"ngModelChange","ngModel"],[1,"portfolio-section"],["class","portfolio-images",4,"ngIf"],["class","portfolio-empty",4,"ngIf"],[1,"upload-portfolio-btn"],["type","file","multiple","","accept","image/*","hidden","",3,"change"],["class","changes-summary",4,"ngIf"],[1,"form-actions"],["type","button",1,"cancel-button",3,"click"],["type","submit",1,"save-button",3,"disabled"],[4,"ngIf"],[1,"error-message"],[1,"portfolio-images"],["class","image-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"image-item",3,"ngClass"],["alt","Portfolio image",3,"src"],[1,"image-overlay"],["class","image-status",4,"ngIf"],["class","image-status existing",4,"ngIf"],["type","button","title","\u0218terge imaginea",1,"delete-image-btn",3,"click"],[1,"image-status"],[1,"image-status","existing"],[1,"portfolio-empty"],[1,"changes-summary"],["class","summary-item",4,"ngIf"],[1,"summary-item"],[1,"summary-icon"]],template:function(e,n){e&1&&h(0,Ml,56,15,"div",5),e&2&&d("ngIf",n.isVisible)},dependencies:[Y,ie,G,T,W,we,ae,ot,J,Me,Se,Et,kt,ee,Pe,nn],styles:[".edit-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.edit-modal[_ngcontent-%COMP%]{background:#fff;box-shadow:0 8px 32px #0003;max-width:800px;width:90%;max-height:90vh;overflow-y:auto;font-family:Roboto Mono,monospace;border:2px solid #c9b7ff}.edit-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 32px 16px;border-bottom:2px solid #e0caff;background-color:#f8f5ff}.edit-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333;font-weight:700}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;cursor:pointer;color:#666;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.close-button[_ngcontent-%COMP%]:hover{color:#333;background-color:#f0f0f0}.edit-form[_ngcontent-%COMP%]{padding:24px 32px 32px}.form-section[_ngcontent-%COMP%]{margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #eee}.form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none;margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;color:#333;font-weight:700;border-left:4px solid #d9c8ff;padding-left:12px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:700;color:#333;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #c9b7ff;border-radius:6px;font-family:Roboto Mono,monospace;font-size:14px;transition:border-color .3s ease;box-sizing:border-box;resize:vertical}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#a087ff;box-shadow:0 0 0 3px #a087ff1a}.form-group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}.form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{appearance:textfield}.form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px;font-weight:500}.portfolio-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.portfolio-images[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;min-height:60px;padding:16px;border:2px dashed #c9b7ff;border-radius:8px;background-color:#fafafa}.portfolio-empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:120px;padding:16px;border:2px dashed #c9b7ff;border-radius:8px;background-color:#fafafa;color:#666;font-style:italic}.image-item[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a;border:2px solid #e0e0e0}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.delete-image-btn[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background-color:#000000b3;color:#fff;border:none;border-radius:50%;font-size:16px;cursor:pointer;width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease;font-weight:700}.delete-image-btn[_ngcontent-%COMP%]:hover{background-color:#dc3545cc}.upload-portfolio-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;background-color:#d9c8ff;color:#000;border:2px solid black;border-radius:5px;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;cursor:pointer;transition:background-color .3s ease;align-self:flex-start;margin-bottom:40px}.upload-portfolio-btn[_ngcontent-%COMP%]:hover{background-color:#cbb6ff;transform:translateY(-1px)}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:32px;padding-top:24px;border-top:2px solid #e0caff}.cancel-button[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;border:2px solid black;border-radius:6px;padding:12px 24px;cursor:pointer;transition:all .3s ease}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#e8e8e8;transform:translateY(-1px)}.save-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;border:2px solid black;border-radius:6px;padding:12px 24px;cursor:pointer;transition:all .3s ease;min-width:180px}.save-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#cbb6ff;transform:translateY(-1px)}.save-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}@media (max-width: 768px){.edit-modal[_ngcontent-%COMP%]{width:95%;margin:10px}.edit-form[_ngcontent-%COMP%]{padding:16px 20px 24px}.edit-header[_ngcontent-%COMP%]{padding:16px 20px 12px}.portfolio-images[_ngcontent-%COMP%]{justify-content:center}.image-item[_ngcontent-%COMP%]{width:100px;height:100px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.save-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{width:100%}}"]})};function wl(i,t){i&1&&(a(0,"div",40),s(1," Prenumele este obligatoriu "),r())}function Sl(i,t){i&1&&(a(0,"div",40),s(1," Numele este obligatoriu "),r())}function Pl(i,t){i&1&&(a(0,"div",40),s(1," Introduce\u021Bi un num\u0103r de telefon valid "),r())}function Ol(i,t){i&1&&(a(0,"div",40),s(1," Parola trebuie s\u0103 aib\u0103 cel pu\u021Bin 6 caractere "),r())}function kl(i,t){i&1&&(a(0,"div",40),s(1," Parolele nu coincid "),r())}function El(i,t){i&1&&(a(0,"span"),s(1,"Se salveaz\u0103..."),r())}function Il(i,t){i&1&&(a(0,"span"),s(1,"Salveaz\u0103 modific\u0103rile"),r())}function Dl(i,t){if(i&1){let e=x();a(0,"div",8)(1,"div",9)(2,"div",10)(3,"h2"),s(4,"Editeaz\u0103 informa\u021Biile personale"),r(),a(5,"button",11),u("click",function(){g(e);let o=p();return f(o.onClose())}),s(6,"\xD7"),r()(),a(7,"form",12,0),u("ngSubmit",function(){g(e);let o=p();return f(o.onSubmit())}),a(9,"div",13)(10,"h3"),s(11,"Informa\u021Bii personale"),r(),a(12,"div",14)(13,"div",15)(14,"label",16),s(15,"Prenume"),r(),a(16,"input",17,1),I("ngModelChange",function(o){g(e);let c=p();return E(c.userInfo.firstName,o)||(c.userInfo.firstName=o),f(o)}),r(),h(18,wl,2,0,"div",18),r(),a(19,"div",15)(20,"label",19),s(21,"Nume"),r(),a(22,"input",20,2),I("ngModelChange",function(o){g(e);let c=p();return E(c.userInfo.lastName,o)||(c.userInfo.lastName=o),f(o)}),r(),h(24,Sl,2,0,"div",18),r()(),a(25,"div",15)(26,"label",21),s(27,"Adresa de email"),r(),a(28,"input",22,3),I("ngModelChange",function(o){g(e);let c=p();return E(c.userInfo.email,o)||(c.userInfo.email=o),f(o)}),r(),a(30,"small",23),s(31,"Email-ul nu poate fi modificat din aceast\u0103 sec\u021Biune"),r()()(),a(32,"div",13)(33,"h3"),s(34,"Informa\u021Bii de contact"),r(),a(35,"div",15)(36,"label",24),s(37,"Num\u0103r de telefon"),r(),a(38,"input",25,4),I("ngModelChange",function(o){g(e);let c=p();return E(c.userInfo.phoneNumber,o)||(c.userInfo.phoneNumber=o),f(o)}),r(),h(40,Pl,2,0,"div",18),r(),a(41,"div",15)(42,"label",26),s(43,"Adresa"),r(),a(44,"textarea",27,5),I("ngModelChange",function(o){g(e);let c=p();return E(c.userInfo.address,o)||(c.userInfo.address=o),f(o)}),r(),a(46,"small",23),s(47,"Adresa va fi folosit\u0103 pentru serviciile la domiciliu"),r()()(),a(48,"div",28)(49,"h3"),s(50,"Schimb\u0103 parola"),r(),a(51,"small",29),s(52,"Completeaz\u0103 doar dac\u0103 dore\u0219ti s\u0103 \xEE\u021Bi schimbi parola"),r(),a(53,"div",15)(54,"label",30),s(55,"Parola actual\u0103"),r(),a(56,"input",31),I("ngModelChange",function(o){g(e);let c=p();return E(c.passwordData.currentPassword,o)||(c.passwordData.currentPassword=o),f(o)}),r()(),a(57,"div",15)(58,"label",32),s(59,"Parola nou\u0103"),r(),a(60,"input",33,6),I("ngModelChange",function(o){g(e);let c=p();return E(c.passwordData.newPassword,o)||(c.passwordData.newPassword=o),f(o)}),r(),h(62,Ol,2,0,"div",18),r(),a(63,"div",15)(64,"label",34),s(65,"Confirm\u0103 parola nou\u0103"),r(),a(66,"input",35),I("ngModelChange",function(o){g(e);let c=p();return E(c.passwordData.confirmPassword,o)||(c.passwordData.confirmPassword=o),f(o)}),r(),h(67,kl,2,0,"div",18),r()(),a(68,"div",36)(69,"button",37),u("click",function(){g(e);let o=p();return f(o.onClose())}),s(70,"Anuleaz\u0103"),r(),a(71,"button",38),h(72,El,2,0,"span",39)(73,Il,2,0,"span",39),r()()()()()}if(i&2){let e=L(8),n=L(17),o=L(23),c=L(39),m=L(61),_=p();l(16),k("ngModel",_.userInfo.firstName),l(2),d("ngIf",n.invalid&&n.touched),l(4),k("ngModel",_.userInfo.lastName),l(2),d("ngIf",o.invalid&&o.touched),l(4),k("ngModel",_.userInfo.email),l(10),k("ngModel",_.userInfo.phoneNumber),l(2),d("ngIf",c.invalid&&c.touched),l(4),k("ngModel",_.userInfo.address),l(12),k("ngModel",_.passwordData.currentPassword),l(4),k("ngModel",_.passwordData.newPassword),l(2),d("ngIf",m.invalid&&m.touched),l(4),k("ngModel",_.passwordData.confirmPassword),l(),d("ngIf",_.passwordData.newPassword&&_.passwordData.confirmPassword&&_.passwordData.newPassword!==_.passwordData.confirmPassword),l(4),d("disabled",e.invalid||_.isLoading),l(),d("ngIf",_.isLoading),l(),d("ngIf",!_.isLoading)}}var _i=class i{constructor(t,e){this.userService=t;this.authService=e}isVisible=!1;user=null;close=new F;userUpdated=new F;userInfo={firstName:"",lastName:"",email:"",phoneNumber:"",address:""};passwordData={currentPassword:"",newPassword:"",confirmPassword:""};isLoading=!1;ngOnInit(){this.user&&this.loadUserData()}ngOnChanges(){this.user&&this.isVisible&&this.loadUserData()}loadUserData(){if(this.user){let[t="",e=""]=(this.user.fullName||"").split(" ");this.userInfo={firstName:t,lastName:e,email:this.user.email||"",phoneNumber:this.user.phoneNumber||"",address:this.user.address||""}}}onClose(){this.close.emit(),this.resetForm()}resetForm(){this.loadUserData(),this.passwordData={currentPassword:"",newPassword:"",confirmPassword:""}}onSubmit(){return C(this,null,function*(){if(!this.isLoading){this.isLoading=!0;try{let t={id:this.user.id,firstName:this.userInfo.firstName,lastName:this.userInfo.lastName};if(this.passwordData.currentPassword&&this.passwordData.newPassword){if(this.passwordData.newPassword!==this.passwordData.confirmPassword){console.error("Passwords do not match"),this.isLoading=!1;return}t.password=this.passwordData.newPassword}this.userService.updateUserProfile(t).subscribe({next:e=>{console.log("User updated successfully",e),this.handleSuccess(e.response)},error:e=>{console.error("Error updating user:",e),this.isLoading=!1}})}catch(t){console.error("Error during update:",t),this.isLoading=!1}}})}handleSuccess(t){if(this.isLoading=!1,t){t.token&&(this.authService.setToken(t.token),console.log("\u2705 New token stored successfully"));let e=$(O({},this.user),{fullName:`${this.userInfo.firstName} ${this.userInfo.lastName}`.trim(),phoneNumber:this.userInfo.phoneNumber,address:this.userInfo.address});this.userUpdated.emit(e),console.log("\u2705 User profile updated successfully")}this.onClose(),console.log("\u{1F389} Profile update completed")}static \u0275fac=function(e){return new(e||i)(v(Be),v(V))};static \u0275cmp=S({type:i,selectors:[["app-edit-user-info"]],inputs:{isVisible:"isVisible",user:"user"},outputs:{close:"close",userUpdated:"userUpdated"},features:[ke],decls:1,vars:1,consts:[["editForm","ngForm"],["firstNameControl","ngModel"],["lastNameControl","ngModel"],["emailControl","ngModel"],["phoneControl","ngModel"],["addressControl","ngModel"],["newPasswordControl","ngModel"],["class","edit-overlay",4,"ngIf"],[1,"edit-overlay"],[1,"edit-modal"],[1,"edit-header"],[1,"close-button",3,"click"],[1,"edit-form",3,"ngSubmit"],[1,"form-section"],[1,"form-group-row"],[1,"form-group"],["for","firstName"],["id","firstName","type","text","name","firstName","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","lastName"],["id","lastName","type","text","name","lastName","required","",3,"ngModelChange","ngModel"],["for","email"],["id","email","type","email","name","email","required","","email","","readonly","",3,"ngModelChange","ngModel"],[1,"info-text"],["for","phoneNumber"],["id","phoneNumber","type","tel","name","phoneNumber","placeholder","Ex: +40 123 456 789",3,"ngModelChange","ngModel"],["for","address"],["id","address","name","address","placeholder","Ex: Strada Exemplu nr. 123, Bucure\u0219ti","rows","3",3,"ngModelChange","ngModel"],[1,"form-section","password-section"],[1,"section-info"],["for","currentPassword"],["id","currentPassword","type","password","name","currentPassword","autocomplete","current-password",3,"ngModelChange","ngModel"],["for","newPassword"],["id","newPassword","type","password","name","newPassword","minlength","6","autocomplete","new-password",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword","autocomplete","new-password",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"cancel-button",3,"click"],["type","submit",1,"save-button",3,"disabled"],[4,"ngIf"],[1,"error-message"]],template:function(e,n){e&1&&h(0,Dl,74,16,"div",7),e&2&&d("ngIf",n.isVisible)},dependencies:[Y,T,W,we,ae,J,Me,Se,Vo,zo,ee,Pe],styles:[".edit-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.edit-modal[_ngcontent-%COMP%]{background:#fff;box-shadow:0 8px 32px #0003;max-width:700px;width:90%;max-height:90vh;overflow-y:auto;font-family:Roboto Mono,monospace}.edit-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 32px 16px;border-bottom:2px solid #e0caff}.edit-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;cursor:pointer;color:#666;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.close-button[_ngcontent-%COMP%]:hover{color:#333}.edit-form[_ngcontent-%COMP%]{padding:24px 32px 32px}.form-section[_ngcontent-%COMP%]{margin-bottom:32px}.form-section[_ngcontent-%COMP%]:not(:last-child){padding-bottom:24px;border-bottom:2px solid #f0f0f0}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;color:#333;font-weight:700}.section-info[_ngcontent-%COMP%]{color:#666;font-size:12px;margin-top:-8px;margin-bottom:20px;font-style:italic}.form-group-row[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;flex:1;min-width:200px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:700;color:#333;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #c9b7ff;border-radius:6px;font-family:Roboto Mono,monospace;font-size:14px;transition:border-color .3s ease;box-sizing:border-box;resize:vertical}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#a087ff}.form-group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}.form-group[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{background-color:#f8f8f8;color:#666;cursor:not-allowed}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:80px;line-height:1.5}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px}.info-text[_ngcontent-%COMP%]{color:#666;font-size:12px;margin-top:4px;font-style:italic}.password-section[_ngcontent-%COMP%]{margin-top:32px;padding-top:24px;border-top:2px solid #e0caff}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:32px;padding-top:24px;border-top:1px solid #eee}.cancel-button[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;border:2px solid black;border-radius:6px;padding:12px 24px;cursor:pointer;transition:background-color .3s ease}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.save-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;border:2px solid black;border-radius:6px;padding:12px 24px;cursor:pointer;transition:background-color .3s ease}.save-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#cbb6ff}.save-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 768px){.edit-modal[_ngcontent-%COMP%]{width:95%;margin:10px}.edit-header[_ngcontent-%COMP%], .edit-form[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.form-group-row[_ngcontent-%COMP%]{flex-direction:column}.form-group[_ngcontent-%COMP%]{min-width:auto}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};var Je=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/Photo";addProfilePicture(t){new FormData().append("file",t);let n=this.authService.getToken(),o=new z({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/AddProfilePicture`,{file:t},{headers:o})}updateProfilePicture(t){let e=new FormData;e.append("file",t);let n=this.authService.getToken(),o=new z({Authorization:`Bearer ${n}`});return this.http.patch(`${this.baseUrl}/UpdateProfilePicture`,e,{headers:o})}addPortfolioPicture(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.post(`${this.baseUrl}/AddPortfolioPicture`,t,{headers:n})}deletePortfolioPicture(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.delete(`${this.baseUrl}/DeletePortfolioPicture/${t}`,{headers:n})}uploadPhotoToConversation(t,e){if(console.log("\u{1F4F8} Before FormData creation:",{file:e,fileName:e?.name,fileSize:e?.size,fileType:e?.type,fileConstructor:e?.constructor?.name,isFileInstance:e instanceof File,isBlob:e instanceof Blob}),!e||!(e instanceof File))throw console.error("\u274C Invalid file object:",e),new Error("Invalid file object");if(e.size===0)throw console.error("\u274C File is empty (0 bytes)"),new Error("File is empty");let n=new FormData;try{n.append("file",e,e.name),console.log("\u2705 File appended to FormData successfully"),console.log("\u{1F4CB} FormData verification:"),console.log("  FormData has entries:",n.has("file")),console.log("  FormData get file:",n.get("file")," and media type");let m=Array.from(n.entries());console.log("  FormData entries count:",m.length),m.forEach(([_,w])=>{console.log(`    ${_}:`,w instanceof File?`File(${w.name}, ${w.size} bytes)`:w)})}catch(m){throw console.error("\u274C Error appending file to FormData:",m),m}let o=this.authService.getToken(),c=new z({Authorization:`Bearer ${o}`});return this.http.post(`${this.baseUrl}/AddConversationPhoto/${t}`,n,{headers:c})}validatePhotoFile(t){if(console.log("\u{1F50D} Validating file:",{name:t?.name,size:t?.size,type:t?.type}),!t)return{isValid:!1,error:"No file selected"};if(t.size===0)return{isValid:!1,error:"File is empty (0 bytes)"};let e=10*1024*1024;return["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type.toLowerCase())?t.size>e?{isValid:!1,error:`File size too large: ${(t.size/1024/1024).toFixed(2)}MB. Maximum size is 10MB.`}:{isValid:!0}:{isValid:!1,error:`Invalid file type: ${t.type}. Please select a JPEG, PNG, GIF, or WebP image.`}}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};function Tl(i,t){if(i&1){let e=x();a(0,"app-edit-specialist-info",15),u("close",function(){g(e);let o=p();return f(o.onCloseEditSpecialistModal())})("specialistUpdated",function(o){g(e);let c=p();return f(c.onSpecialistUpdated(o))}),r()}if(i&2){let e=p();d("isVisible",e.showEditSpecialistModal)("user",e.user)("userRole",e.userRole)}}function Fl(i,t){if(i&1&&(a(0,"span",26),s(1),r()),i&2){let e=t.$implicit;l(),P(e)}}function Rl(i,t){if(i&1){let e=x();a(0,"div",16)(1,"div",17)(2,"h2",18),s(3,"Anun\u021Bul t\u0103u"),r(),a(4,"div",19)(5,"div",20)(6,"div",21)(7,"span",22),s(8,"Categorii:"),r(),h(9,Fl,2,1,"span",23),r(),a(10,"div",24)(11,"span",22),s(12,"Ani experien\u021B\u0103:"),r(),s(13),r()(),a(14,"div",25)(15,"span",22),s(16,"Descriere:"),r(),s(17),r()()(),a(18,"app-icon-button",11),u("onClick",function(){g(e);let o=p();return f(o.openEditSpecialistModal())}),r()()}if(i&2){let e=p();l(9),d("ngForOf",e.user==null?null:e.user.categories),l(4),M(" ",e.user==null?null:e.user.yearsExperience," "),l(4),M(" ",e.user==null?null:e.user.description," "),l(),d("label","Editeaz\u0103 anun\u021Bul")("icon","assets/icons/edit.svg")}}function Al(i,t){if(i&1){let e=x();a(0,"div")(1,"app-icon-button",11),u("onClick",function(){g(e);let o=p();return f(o.goToBankAccount())}),r()()}i&2&&(l(),d("label","Contul ExpertEase")("icon","assets/icons/account.svg"))}var bi=class i{constructor(t,e,n,o){this.profileService=t;this.authService=e;this.photoService=n;this.route=o}user;userRole;showEditUserModal=!1;showEditSpecialistModal=!1;ngOnInit(){this.userRole=this.authService.getUserRole(),this.loadUserProfile()}loadUserProfile(){this.profileService.getUserProfile().subscribe({next:t=>{this.user=t.response,console.log(this.user)},error:t=>{console.error(t)}})}onFileSelected(t){let e=t.target.files[0];e&&this.photoService.addProfilePicture(e).subscribe({next:n=>{console.log("Upload success:",n),this.loadUserProfile()},error:n=>{console.error("Upload error:",n)}})}openEditUserModal(){this.showEditUserModal=!0}onCloseEditUserModal(){this.showEditUserModal=!1}onUserUpdated(t){this.user=t,console.log("User profile updated:",t)}openEditSpecialistModal(){this.showEditSpecialistModal=!0}onCloseEditSpecialistModal(){this.showEditSpecialistModal=!1}onSpecialistUpdated(t){this.user=t,console.log("Specialist profile updated:",t),this.loadUserProfile()}goToReviews(){this.route.navigate(["profile/user-reviews"])}goToBankAccount(){this.route.navigate(["profile/stripe-account"])}goToHistory(){}goToSettings(){this.route.navigate(["profile/user-settings"])}logout(){window.confirm("Sigur vrei s\u0103 te deloghezi?")&&(this.authService.logout(),this.route.navigate(["/home"]))}static \u0275fac=function(e){return new(e||i)(v(Be),v(V),v(Je),v(re))};static \u0275cmp=S({type:i,selectors:[["app-profile"]],decls:36,vars:22,consts:[[3,"close","userUpdated","isVisible","user"],[3,"isVisible","user","userRole","close","specialistUpdated",4,"ngIf"],[1,"account-card"],[1,"account-header"],[1,"avatar-wrapper"],[1,"avatar"],["alt","User avatar",3,"src"],[1,"upload-btn"],["type","file","accept","image/*","hidden","",3,"change"],["src","assets/icons/photo_media.svg","alt","Upload icon"],[1,"account-info"],[3,"onClick","label","icon"],["class","card",4,"ngIf"],[1,"account-actions"],[4,"ngIf"],[3,"close","specialistUpdated","isVisible","user","userRole"],[1,"card"],[1,"info"],[1,"full-name"],[1,"details-block"],[1,"row"],[1,"categories"],[1,"label"],["class","tag",4,"ngFor","ngForOf"],[1,"experience"],[1,"description"],[1,"tag"]],template:function(e,n){if(e&1&&(a(0,"app-edit-user-info",0),u("close",function(){return n.onCloseEditUserModal()})("userUpdated",function(c){return n.onUserUpdated(c)}),r(),h(1,Tl,1,3,"app-edit-specialist-info",1),a(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),y(6,"img",6),a(7,"label",7)(8,"input",8),u("change",function(c){return n.onFileSelected(c)}),r(),y(9,"img",9),r()()(),a(10,"div",10)(11,"p")(12,"strong"),s(13,"Nume:"),r(),s(14),r(),a(15,"p")(16,"strong"),s(17,"Adresa mail:"),r(),s(18),r(),a(19,"p")(20,"strong"),s(21,"Parol\u0103:"),r(),s(22," ********"),r(),a(23,"p")(24,"strong"),s(25,"Creat la data de:"),r(),s(26),R(27,"date"),r()(),a(28,"app-icon-button",11),u("onClick",function(){return n.openEditUserModal()}),r()(),h(29,Rl,19,5,"div",12),a(30,"div",13)(31,"app-icon-button",11),u("onClick",function(){return n.goToReviews()}),r(),a(32,"app-icon-button",11),u("onClick",function(){return n.goToHistory()}),r(),h(33,Al,2,2,"div",14),a(34,"app-icon-button",11),u("onClick",function(){return n.goToSettings()}),r(),a(35,"app-icon-button",11),u("onClick",function(){return n.logout()}),r()()()),e&2){let o;d("isVisible",n.showEditUserModal)("user",(o=n.user)!==null&&o!==void 0?o:null),l(),d("ngIf",n.userRole==="Specialist"),l(5),d("src",(n.user==null?null:n.user.profilePictureUrl)||"assets/avatar.svg",de),l(8),M(" ",n.user==null?null:n.user.fullName," "),l(4),M(" ",n.user==null?null:n.user.email,""),l(8),M(" ",se(27,19,n.user==null?null:n.user.createdAt,"dd.MM.yyyy"),""),l(2),d("label","Editeaz\u0103 profilul")("icon","assets/icons/edit.svg"),l(),d("ngIf",n.userRole==="Specialist"),l(2),d("label","Recenziile tale")("icon","assets/icons/reviews.svg"),l(),d("label","Istoric servicii")("icon","assets/icons/history.svg"),l(),d("ngIf",n.userRole==="Specialist"),l(),d("label","Set\u0103rile contului")("icon","assets/icons/settings.svg"),l(),d("label","Deconecteaz\u0103-te")("icon","assets/icons/logout.svg")}},dependencies:[ve,fi,G,T,hi,_i],styles:[".account-card[_ngcontent-%COMP%]{background:#e0caff;max-width:1000px;margin:32px auto;box-shadow:0 4px 16px #0000001a;font-family:Roboto Mono,monospace;border:3px solid black}.account-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:32px;gap:32px}.account-info[_ngcontent-%COMP%]{flex:1;margin-left:32px;font-size:16px}.account-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px 78px;padding:32px}.card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#a08ad2;padding:20px 32px;width:100%;gap:20px;justify-content:space-between;box-sizing:border-box;border-top:3px solid black;border-bottom:3px solid black;font-family:Roboto Mono,monospace}.info[_ngcontent-%COMP%]{flex:1}.full-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:.25rem;margin-bottom:.5rem}.full-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.details-block[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:12px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.categories[_ngcontent-%COMP%], .experience[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-size:.95rem}.label[_ngcontent-%COMP%]{font-weight:700;margin-right:6px}.tag[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:160px;aspect-ratio:1/1}.avatar[_ngcontent-%COMP%]{position:relative;width:160px;height:160px;overflow:hidden}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;display:block}.rating-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;display:inline-flex;align-items:center;gap:.3em;background:#fff;padding:.2em .5em;border-radius:.6em;font-size:1.2em;box-shadow:0 1px 4px #0000001a}.rating-badge[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1em;height:1em}.upload-btn[_ngcontent-%COMP%]{position:absolute;bottom:4px;right:4px;background:#fff;border-radius:50%;padding:6px;cursor:pointer;font-size:18px}.upload-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.upload-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}"]})};var zl=(i,t)=>({"bubble-left":i,"bubble-right":t}),Vl=(i,t)=>({left:i,right:t}),xi=class i{message;currentUserId;get isOwnMessage(){return this.message.senderId===this.currentUserId}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-message-bubble"]],inputs:{message:"message",currentUserId:"currentUserId"},decls:6,vars:13,consts:[[1,"bubble",3,"ngClass"],[1,"bubble-content",3,"ngClass"],[1,"timestamp"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1),s(2),a(3,"div",2),s(4),R(5,"date"),r()()()),e&2&&(d("ngClass",Ie(7,zl,!n.isOwnMessage,n.isOwnMessage)),l(),d("ngClass",Ie(10,Vl,!n.isOwnMessage,n.isOwnMessage)),l(),M(" ",n.message.content," "),l(2),P(se(5,4,n.message.createdAt,"shortTime")))},dependencies:[ve,ie],styles:[".bubble[_ngcontent-%COMP%]{display:flex;width:100%;margin:8px 0}.bubble-left[_ngcontent-%COMP%]{justify-content:flex-start}.bubble-right[_ngcontent-%COMP%]{justify-content:flex-end}.bubble-content[_ngcontent-%COMP%]{display:inline-block;padding:10px 14px;border-radius:12px;font-size:12px;word-wrap:break-word;min-width:80px;max-width:70%;text-align:left}.bubble-content.left[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #514c70;color:#000;border-top-left-radius:4px}.bubble-content.right[_ngcontent-%COMP%]{background-color:#a79ed7;border:1px solid #514c70;color:#000;border-top-right-radius:4px}.bubble-content[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{font-size:10px;opacity:.6;margin-top:4px;text-align:right}"]})};var Ul=(i,t)=>({"request-left":i,"request-right":t}),Ll=(i,t)=>({"rejected-bg":i,"accepted-bg":t});function Bl(i,t){i&1&&(a(0,"p",5),s(1,"\xCEn a\u0219teptare..."),r())}function jl(i,t){if(i&1){let e=x();a(0,"div",6)(1,"button",7),u("click",function(){g(e);let o=p(2);return f(o.acceptRequest())}),s(2," Accept\u0103 "),r(),a(3,"button",8),u("click",function(){g(e);let o=p(2);return f(o.rejectRequest())}),s(4," Respinge "),r()()}}function ql(i,t){if(i&1&&(a(0,"div"),h(1,Bl,2,0,"p",4)(2,jl,5,0,"div",3),r()),i&2){let e=p();l(),d("ngIf",e.userRole==="Client"),l(),d("ngIf",e.userRole==="Specialist")}}function $l(i,t){if(i&1){let e=x();a(0,"div",6)(1,"button",9),u("click",function(){g(e);let o=p();return f(o.triggerOffer())}),s(2,"F\u0103 o ofert\u0103"),r()()}}var Ci=class i{constructor(t){this.authService=t}request={id:"",senderId:"",requestedStartDate:new Date,description:"",status:"Pending",senderPhoneNumber:"",senderAddress:""};currentUserId;userRole="";requestAccepted=new F;requestRejected=new F;makeOffer=new F;ngOnInit(){this.userRole=this.authService.getUserRole(),console.log(this.request)}acceptRequest(){this.requestAccepted.emit(this.request.id)}rejectRequest(){this.requestRejected.emit(this.request.id)}showOfferButton(){return this.request.status==="Accepted"&&this.userRole==="Specialist"}triggerOffer(){console.log("Fac o oferta pentru cererea:",this.request.id),this.makeOffer.emit(this.request.id)}get isOwnMessage(){return this.request.senderId===this.currentUserId}static \u0275fac=function(e){return new(e||i)(v(V))};static \u0275cmp=S({type:i,selectors:[["app-request-message"]],inputs:{request:"request",currentUserId:"currentUserId"},outputs:{requestAccepted:"requestAccepted",requestRejected:"requestRejected",makeOffer:"makeOffer"},decls:23,vars:17,consts:[[1,"request",3,"ngClass"],[1,"request-summary",3,"ngClass"],[4,"ngIf"],["class","action-buttons",4,"ngIf"],["class","status-button",4,"ngIf"],[1,"status-button"],[1,"action-buttons"],[1,"accept-btn",3,"click"],[1,"reject-btn",3,"click"],[1,"offer-btn",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h3"),s(3,"Solicitare"),r(),a(4,"p")(5,"strong"),s(6,"Data \u0219i ora:"),r(),s(7),R(8,"date"),r(),a(9,"p")(10,"strong"),s(11,"Descriere:"),r(),s(12),r(),a(13,"p")(14,"strong"),s(15,"Adres\u0103:"),r(),s(16),r(),a(17,"p")(18,"strong"),s(19,"Telefon:"),r(),s(20),r(),h(21,ql,3,2,"div",2)(22,$l,3,0,"div",3),r()()),e&2&&(d("ngClass",Ie(11,Ul,!n.isOwnMessage,n.isOwnMessage)),l(),d("ngClass",Ie(14,Ll,n.request.status==="Rejected",n.request.status==="Accepted"||n.request.status==="Completed")),l(6),M(" ",se(8,8,n.request.requestedStartDate,"short"),""),l(5),M(" ",n.request.description,""),l(4),M(" ",n.request.senderAddress,""),l(4),M(" ",n.request.senderPhoneNumber,""),l(),d("ngIf",n.request.status==="Pending"),l(),d("ngIf",n.showOfferButton()))},dependencies:[ve,T,ie],styles:['@charset "UTF-8";.request[_ngcontent-%COMP%]{display:flex;width:100%}.request-left[_ngcontent-%COMP%]{justify-content:flex-start}.request-right[_ngcontent-%COMP%]{justify-content:flex-end}.request-center[_ngcontent-%COMP%]{justify-content:center}.request-summary[_ngcontent-%COMP%]{max-width:300px;margin:8px;padding:12px;border:2px solid black;background-color:#f8faff;font-size:.8rem;line-height:1.4;border-radius:6px;font-family:Roboto Mono,monospace}.request-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.request-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1rem;text-align:center}.request-status[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;padding:.25rem .5rem;font-weight:700;border-radius:4px}.status-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.status-pending[_ngcontent-%COMP%]{background-color:#fff5c4;color:#856404}.status-accepted[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-rejected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.accepted-bg[_ngcontent-%COMP%]{background-color:#d4edda;border:4px solid #155724}.rejected-bg[_ngcontent-%COMP%]{background-color:#f8d7da;border:4px solid #721c24}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .offer-btn[_ngcontent-%COMP%]{background-color:#d4e2ed;color:#001b3f}.action-buttons[_ngcontent-%COMP%]   .offer-btn[_ngcontent-%COMP%]:hover{background-color:#78a2c4;box-shadow:0 2px 6px #0003}']})};var Wl=(i,t)=>({"reply-left":i,"reply-right":t}),Gl=(i,t)=>({"rejected-bg":i,"accepted-bg":t});function Hl(i,t){i&1&&(a(0,"p"),s(1,"\xCEn a\u0219teptare..."),r())}function Zl(i,t){if(i&1){let e=x();a(0,"div",5)(1,"button",6),u("click",function(){g(e);let o=p(2);return f(o.acceptReply())}),s(2," Accept\u0103 "),r(),a(3,"button",7),u("click",function(){g(e);let o=p(2);return f(o.rejectReply())}),s(4," Respinge "),r()()}}function Yl(i,t){if(i&1&&(a(0,"div"),h(1,Hl,2,0,"p",3)(2,Zl,5,0,"div",4),r()),i&2){let e=p();l(),d("ngIf",e.userRole==="Specialist"),l(),d("ngIf",e.userRole==="Client")}}var yi=class i{constructor(t){this.authService=t}reply={id:"",senderId:"",startDate:new Date,endDate:new Date,price:0,status:"Pending",requestId:""};userRole="";requestId="";currentUserId;replyAccepted=new F;replyRejected=new F;ngOnInit(){this.userRole=this.authService.getUserRole(),console.log("Reply info:",this.reply)}acceptReply(){this.replyAccepted.emit({requestId:this.requestId,replyId:this.reply.id})}rejectReply(){this.replyRejected.emit({requestId:this.requestId,replyId:this.reply.id})}get isOwnMessage(){return this.reply.senderId===this.currentUserId}static \u0275fac=function(e){return new(e||i)(v(V))};static \u0275cmp=S({type:i,selectors:[["app-reply-message"]],inputs:{reply:"reply",requestId:"requestId",currentUserId:"currentUserId"},outputs:{replyAccepted:"replyAccepted",replyRejected:"replyRejected"},decls:22,vars:27,consts:[[1,"reply",3,"ngClass"],[1,"request-summary",3,"ngClass"],[1,"big-price"],[4,"ngIf"],["class","action-buttons",4,"ngIf"],[1,"action-buttons"],[1,"accept-btn",3,"click"],[1,"reject-btn",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h3"),s(3,"Ofert\u0103"),r(),a(4,"p")(5,"strong"),s(6,"Data:"),r(),s(7),R(8,"date"),r(),a(9,"p")(10,"strong"),s(11,"De la ora:"),r(),s(12),R(13,"date"),a(14,"strong"),s(15,"P\xE2n\u0103 la ora:"),r(),s(16),R(17,"date"),r(),a(18,"div",2),s(19),R(20,"currency"),r(),h(21,Yl,3,2,"div",3),r()()),e&2&&(d("ngClass",Ie(21,Wl,!n.isOwnMessage,n.isOwnMessage)),l(),d("ngClass",Ie(24,Gl,n.reply.status==="Rejected",n.reply.status==="Accepted")),l(6),M(" ",se(8,7,n.reply.startDate,"dd MMMM yyyy"),""),l(5),M(" ",se(13,10,n.reply.startDate,"HH:mm")," \xA0\u2014\xA0 "),l(4),M(" ",se(17,13,n.reply.endDate,"HH:mm")," "),l(3),M(" ",st(20,16,n.reply.price,"RON","symbol","1.2-2")," "),l(2),d("ngIf",n.reply.status==="Pending"))},dependencies:[ve,T,Bt,ie],styles:['@charset "UTF-8";.reply[_ngcontent-%COMP%]{display:flex;width:100%}.reply-left[_ngcontent-%COMP%]{justify-content:flex-start}.reply-right[_ngcontent-%COMP%]{justify-content:flex-end}.reply-center[_ngcontent-%COMP%]{justify-content:center}.request-summary[_ngcontent-%COMP%]{max-width:300px;margin:8px;padding:12px;border:2px solid black;background-color:#f8faff;font-size:.8rem;line-height:1.4;border-radius:6px;font-family:Roboto Mono,monospace}.request-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.request-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1rem;text-align:center}.request-status[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;padding:.25rem .5rem;font-weight:700;border-radius:4px}.status-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.status-pending[_ngcontent-%COMP%]{background-color:#fff5c4;color:#856404}.status-accepted[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-rejected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.accepted-bg[_ngcontent-%COMP%]{background-color:#d4edda;border:4px solid #155724}.rejected-bg[_ngcontent-%COMP%]{background-color:#f8d7da;border:4px solid #721c24}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.big-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1a202c;margin-top:.5rem;margin-bottom:.5rem}']})};var Kl=(i,t,e)=>({"rejected-bg":i,"accepted-bg":t,"reviewed-bg":e});function Jl(i,t){if(i&1&&(a(0,"p",9),s(1),r()),i&2){let e=p();l(),M(" ",e.getPaymentMessage()," ")}}function Ql(i,t){if(i&1){let e=x();a(0,"div",10)(1,"button",11),u("click",function(){g(e);let o=p();return f(o.completeTask())}),s(2," Finalizeaz\u0103 "),r(),a(3,"button",12),u("click",function(){g(e);let o=p();return f(o.cancelTask())}),s(4," Anuleaz\u0103 "),r()()}}function Xl(i,t){if(i&1){let e=x();a(0,"div",13)(1,"p",14),s(2,"Cum a fost experien\u021Ba ta?"),r(),a(3,"button",15),u("click",function(){g(e);let o=p();return f(o.openReview())}),s(4," Las\u0103 o Recenzie "),r()()}}function ed(i,t){i&1&&(a(0,"div",16)(1,"p",17),s(2,"Procesul de evaluare a fost finalizat"),r(),a(3,"p",18),s(4,"Mul\u021Bumim pentru feedback-ul t\u0103u!"),r()())}var Mi=class i{constructor(t){this.authService=t}serviceTask={id:"",replyId:"",userId:"",specialistId:"",specialistFullName:"",startDate:new Date,endDate:new Date,description:"",address:"",price:0,status:"Confirmed",completedAt:new Date,cancelledAt:new Date};userRole="";userId="";replyId="";taskCompleted=new F;taskCancelled=new F;openReviewForm=new F;ngOnInit(){this.userRole=this.authService.getUserRole(),this.userId=this.authService.getUserId(),console.log("User role:",this.userRole),console.log("User ID:",this.userId)}completeTask(){this.taskCompleted.emit({replyId:this.replyId,taskId:this.serviceTask.id})}cancelTask(){this.taskCancelled.emit({replyId:this.replyId,taskId:this.serviceTask.id})}openReview(){console.log("\u{1F4DD} Opening review form for service task:",this.serviceTask.id),this.openReviewForm.emit()}isSpecialist(){return this.userId===this.serviceTask.specialistId}isClient(){return this.userId===this.serviceTask.userId}getStatusMessage(){switch(this.serviceTask.status){case"Confirmed":return this.isClient()?"Asteapt\u0103, specialistul va ajunge imediat!":this.isSpecialist()?"Serviciul este \xEEn desf\u0103\u0219urare":"Serviciul este confirmat";case"Completed":return"Serviciul a fost finalizat cu succes!";case"Cancelled":return"Serviciul a fost anulat";case"Reviewed":return"Serviciul a fost evaluat";default:return"Status necunoscut"}}getPaymentMessage(){return this.serviceTask.status!=="Completed"?"":this.isSpecialist()?"\u{1F4B0} Plata a fost transferat\u0103 \xEEn contul t\u0103u Stripe.":this.isClient()?"\u{1F4B3} Plata a fost procesat\u0103 \u0219i transferat\u0103 specialistului.":""}canShowActions(){return this.serviceTask.status==="Confirmed"&&this.isSpecialist()}canShowReviewButton(){return this.serviceTask.status==="Completed"}JobStatusEnum=Bo;static \u0275fac=function(e){return new(e||i)(v(V))};static \u0275cmp=S({type:i,selectors:[["app-service-message"]],inputs:{serviceTask:"serviceTask",replyId:"replyId"},outputs:{taskCompleted:"taskCompleted",taskCancelled:"taskCancelled",openReviewForm:"openReviewForm"},decls:36,vars:30,consts:[[1,"request-wrapper"],[1,"request-summary",3,"ngClass"],[1,"big-price"],[1,"status-message"],[1,"status-text"],["class","payment-message",4,"ngIf"],["class","action-buttons",4,"ngIf"],["class","review-section",4,"ngIf"],["class","reviewed-section",4,"ngIf"],[1,"payment-message"],[1,"action-buttons"],[1,"accept-btn",3,"click"],[1,"reject-btn",3,"click"],[1,"review-section"],[1,"review-prompt"],[1,"review-btn",3,"click"],[1,"reviewed-section"],[1,"reviewed-message"],[1,"thank-you"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h3"),s(3,"Serviciu"),r(),a(4,"p")(5,"strong"),s(6,"Descriere:"),r(),s(7),r(),a(8,"p")(9,"strong"),s(10,"Data:"),r(),s(11),R(12,"date"),r(),a(13,"p")(14,"strong"),s(15,"De la ora:"),r(),s(16),R(17,"date"),a(18,"strong"),s(19,"P\xE2n\u0103 la ora:"),r(),s(20),R(21,"date"),r(),a(22,"p")(23,"strong"),s(24,"Adres\u0103:"),r(),s(25),r(),a(26,"div",2),s(27),R(28,"currency"),r(),a(29,"div",3)(30,"p",4),s(31),r(),h(32,Jl,2,1,"p",5),r(),h(33,Ql,5,0,"div",6)(34,Xl,5,0,"div",7)(35,ed,5,0,"div",8),r()()),e&2&&(l(),d("ngClass",or(26,Kl,n.serviceTask.status===n.JobStatusEnum.Cancelled,n.serviceTask.status===n.JobStatusEnum.Completed,n.serviceTask.status===n.JobStatusEnum.Reviewed)),l(6),M(" ",n.serviceTask.description,""),l(4),M(" ",se(12,12,n.serviceTask.startDate,"dd MMMM yyyy"),""),l(5),M(" ",se(17,15,n.serviceTask.startDate,"HH:mm")," \xA0\u2014\xA0 "),l(4),M(" ",se(21,18,n.serviceTask.endDate,"HH:mm")," "),l(5),M(" ",n.serviceTask.address,""),l(2),M(" ",st(28,21,n.serviceTask.price,"RON","symbol","1.2-2")," "),l(4),P(n.getStatusMessage()),l(),d("ngIf",n.serviceTask.status===n.JobStatusEnum.Completed),l(),d("ngIf",n.canShowActions()),l(),d("ngIf",n.canShowReviewButton()),l(),d("ngIf",n.serviceTask.status===n.JobStatusEnum.Reviewed))},dependencies:[Bt,ve,ie,T],styles:[".request-summary[_ngcontent-%COMP%]{max-width:300px;margin:8px auto;padding:12px;border:2px solid black;background-color:#f8faff;font-size:.8rem;line-height:1.4;border-radius:6px;font-family:Roboto Mono,monospace}.request-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.request-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1rem;text-align:center}.request-status[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;padding:.25rem .5rem;font-weight:700;border-radius:4px}.status-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.accepted-bg[_ngcontent-%COMP%]{background-color:#d4edda;border:4px solid #155724}.rejected-bg[_ngcontent-%COMP%]{background-color:#f8d7da;border:4px solid #721c24}.reviewed-bg[_ngcontent-%COMP%]{background-color:#fff3cd;border:4px solid #ffc107}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:2px solid transparent;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border-color:#28a745}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-color:#dc3545}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.big-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1a202c;margin-top:.5rem;margin-bottom:.5rem;text-align:center}.status-message[_ngcontent-%COMP%]{text-align:center;margin:10px 0}.status-message[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{font-weight:600;color:#4a5568;margin-bottom:5px}.status-message[_ngcontent-%COMP%]   .payment-message[_ngcontent-%COMP%]{font-size:.75rem;color:#2d3748;font-style:italic;margin-top:5px}.review-section[_ngcontent-%COMP%]{text-align:center;margin-top:15px;padding:10px;background-color:#f7fafc;border-radius:6px;border:1px solid #e2e8f0}.review-section[_ngcontent-%COMP%]   .review-prompt[_ngcontent-%COMP%]{font-weight:600;color:#4a5568;margin-bottom:10px;font-size:.85rem}.review-section[_ngcontent-%COMP%]   .review-btn[_ngcontent-%COMP%]{background-color:gold;color:#2d3748;border:2px solid #f6c90e;padding:8px 16px;border-radius:6px;font-weight:600;cursor:pointer;transition:all .2s ease;font-family:Roboto Mono,monospace;font-size:.8rem}.review-section[_ngcontent-%COMP%]   .review-btn[_ngcontent-%COMP%]:hover{background-color:#f6c90e;transform:translateY(-1px);box-shadow:0 2px 6px #00000026}.review-section[_ngcontent-%COMP%]   .review-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.reviewed-section[_ngcontent-%COMP%]{text-align:center;margin-top:15px;padding:10px;background-color:#fffbeb;border-radius:6px;border:1px solid #fbbf24}.reviewed-section[_ngcontent-%COMP%]   .reviewed-message[_ngcontent-%COMP%]{font-weight:600;color:#92400e;margin-bottom:5px;font-size:.85rem}.reviewed-section[_ngcontent-%COMP%]   .thank-you[_ngcontent-%COMP%]{font-size:.75rem;color:#a16207;font-style:italic;margin:0}"]})};function td(i,t){i&1&&(a(0,"div",34),s(1," Data este obligatorie. "),r())}function nd(i,t){i&1&&(a(0,"div",34),s(1," Ora de \xEEnceput este obligatorie. "),r())}function id(i,t){i&1&&(a(0,"div",34),s(1," Ora de sf\xE2r\u0219it este obligatorie. "),r())}function od(i,t){i&1&&(a(0,"div",34),s(1," Pre\u021Bul este obligatoriu. "),r())}var wi=class i{constructor(t){this.router=t}replyForm={day:null,month:null,year:null,startHour:null,startMinute:null,endHour:null,endMinute:null,price:null};formSubmit=new F;close=new F;formSubmitted=!1;submitReply(t){if(this.formSubmitted=!0,t.invalid){Object.keys(t.controls).forEach(c=>{t.controls[c].markAsTouched()});return}let e=this.combineDateTime("start"),n=this.combineDateTime("end"),o={startDate:e,endDate:n,price:this.replyForm.price};this.formSubmit.emit(o)}combineDateTime(t){let e=this.replyForm.day||1,n=(this.replyForm.month||1)-1,o=this.replyForm.year||new Date().getFullYear(),c=t==="start"?this.replyForm.startHour||0:this.replyForm.endHour||0,m=t==="start"?this.replyForm.startMinute||0:this.replyForm.endMinute||0;return new Date(o,n,e,c,m,0,0)}closeForm(){this.close.emit()}static \u0275fac=function(e){return new(e||i)(v(re))};static \u0275cmp=S({type:i,selectors:[["app-reply-form"]],inputs:{replyForm:"replyForm"},outputs:{formSubmit:"formSubmit",close:"close"},decls:68,vars:13,consts:[["formRef","ngForm"],["dayCtrl","ngModel"],["monthCtrl","ngModel"],["yearCtrl","ngModel"],["startHourCtrl","ngModel"],["startMinuteCtrl","ngModel"],["endHourCtrl","ngModel"],["endMinuteCtrl","ngModel"],["priceCtrl","ngModel"],[1,"request-form-wrapper"],[1,"close-button",3,"click"],[1,"request-form",3,"ngSubmit"],[1,"datetime-row"],[1,"date-fields"],[1,"date-field"],[1,"input-box"],["type","number","name","day","placeholder","ZZ","min","1","max","31","required","",3,"ngModelChange","ngModel"],[1,"date-separator"],["type","number","name","month","placeholder","LL","min","1","max","12","required","",3,"ngModelChange","ngModel"],["type","number","name","year","placeholder","AAAA","min","2024","max","2030","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"time-row"],[1,"time-fields"],[1,"time-field"],["type","number","name","startHour","placeholder","HH","min","0","max","23","required","",3,"ngModelChange","ngModel"],[1,"time-separator"],["type","number","name","startMinute","placeholder","MM","min","0","max","59","required","",3,"ngModelChange","ngModel"],["type","number","name","endHour","placeholder","HH","min","0","max","23","required","",3,"ngModelChange","ngModel"],["type","number","name","endMinute","placeholder","MM","min","0","max","59","required","",3,"ngModelChange","ngModel"],[1,"input-box","price-input"],["type","number","name","price","placeholder","ex: 150.00","step","0.01","min","0","required","",3,"ngModelChange","ngModel"],[1,"currency"],[1,"center-button"],["type","submit",3,"disabled"],[1,"error"]],template:function(e,n){if(e&1){let o=x();a(0,"div",9)(1,"button",10),u("click",function(){return g(o),f(n.closeForm())}),s(2,"\xD7"),r(),a(3,"h2"),s(4,"Trimite o ofert\u0103"),r(),a(5,"form",11,0),u("ngSubmit",function(){g(o);let m=L(6);return f(n.submitReply(m))}),a(7,"label"),s(8," Data: "),a(9,"div",12)(10,"div",13)(11,"div",14)(12,"div",15)(13,"input",16,1),I("ngModelChange",function(m){return g(o),E(n.replyForm.day,m)||(n.replyForm.day=m),f(m)}),r()()(),a(15,"span",17),s(16,"/"),r(),a(17,"div",14)(18,"div",15)(19,"input",18,2),I("ngModelChange",function(m){return g(o),E(n.replyForm.month,m)||(n.replyForm.month=m),f(m)}),r()()(),a(21,"span",17),s(22,"/"),r(),a(23,"div",14)(24,"div",15)(25,"input",19,3),I("ngModelChange",function(m){return g(o),E(n.replyForm.year,m)||(n.replyForm.year=m),f(m)}),r()()()()(),h(27,td,2,0,"div",20),r(),a(28,"div",21)(29,"label"),s(30," De la: "),a(31,"div",22)(32,"div",23)(33,"div",15)(34,"input",24,4),I("ngModelChange",function(m){return g(o),E(n.replyForm.startHour,m)||(n.replyForm.startHour=m),f(m)}),r()()(),a(36,"span",25),s(37,":"),r(),a(38,"div",23)(39,"div",15)(40,"input",26,5),I("ngModelChange",function(m){return g(o),E(n.replyForm.startMinute,m)||(n.replyForm.startMinute=m),f(m)}),r()()()(),h(42,nd,2,0,"div",20),r(),a(43,"label"),s(44," P\xE2n\u0103 la: "),a(45,"div",22)(46,"div",23)(47,"div",15)(48,"input",27,6),I("ngModelChange",function(m){return g(o),E(n.replyForm.endHour,m)||(n.replyForm.endHour=m),f(m)}),r()()(),a(50,"span",25),s(51,":"),r(),a(52,"div",23)(53,"div",15)(54,"input",28,7),I("ngModelChange",function(m){return g(o),E(n.replyForm.endMinute,m)||(n.replyForm.endMinute=m),f(m)}),r()()()(),h(56,id,2,0,"div",20),r()(),a(57,"label"),s(58," Pre\u021B: "),a(59,"div",29)(60,"input",30,8),I("ngModelChange",function(m){return g(o),E(n.replyForm.price,m)||(n.replyForm.price=m),f(m)}),r(),a(62,"span",31),s(63,"RON"),r()(),h(64,od,2,0,"div",20),r(),a(65,"div",32)(66,"button",33),s(67," Trimite oferta "),r()()()()}if(e&2){let o=L(6),c=L(14),m=L(20),_=L(26),w=L(35),A=L(41),j=L(49),ge=L(55),We=L(61);l(13),k("ngModel",n.replyForm.day),l(6),k("ngModel",n.replyForm.month),l(6),k("ngModel",n.replyForm.year),l(2),d("ngIf",(c.invalid||m.invalid||_.invalid)&&(c.dirty||c.touched||m.dirty||m.touched||_.dirty||_.touched||n.formSubmitted)),l(7),k("ngModel",n.replyForm.startHour),l(6),k("ngModel",n.replyForm.startMinute),l(2),d("ngIf",(w.invalid||A.invalid)&&(w.dirty||w.touched||A.dirty||A.touched||n.formSubmitted)),l(6),k("ngModel",n.replyForm.endHour),l(6),k("ngModel",n.replyForm.endMinute),l(2),d("ngIf",(j.invalid||ge.invalid)&&(j.dirty||j.touched||ge.dirty||ge.touched||n.formSubmitted)),l(4),k("ngModel",n.replyForm.price),l(4),d("ngIf",We.invalid&&(We.dirty||We.touched||n.formSubmitted)),l(2),d("disabled",o.invalid&&n.formSubmitted)}},dependencies:[W,we,ae,ot,J,Me,Se,Et,kt,ee,Pe,T],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;padding:1rem;box-sizing:border-box}.request-form-wrapper[_ngcontent-%COMP%]{position:relative;max-width:800px;max-height:90vh;background-color:#e8d9ff;border:2px solid #000;padding:2rem;font-family:Roboto Mono,monospace;border-radius:8px;box-shadow:0 4px 12px #00000026;overflow-y:auto;margin:0}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;background:none;border:none;font-size:24px;font-weight:700;cursor:pointer;color:#333;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;z-index:2}.close-button[_ngcontent-%COMP%]:hover{color:#000;background-color:#0000001a;border-radius:50%}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:1.25rem;margin-bottom:1.5rem;margin-top:0;padding-left:40px;padding-right:40px;position:relative;width:100%;box-sizing:border-box}.request-form[_ngcontent-%COMP%]{max-height:calc(90vh - 4rem);overflow-y:auto}.request-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;font-size:.95rem;font-weight:500}.datetime-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-top:4px}.date-fields[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.time-row[_ngcontent-%COMP%]{display:flex;gap:2rem}.time-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;margin-bottom:1rem}.time-fields[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;margin-top:4px}.date-field[_ngcontent-%COMP%]{flex:1}.date-field[_ngcontent-%COMP%]:nth-child(5){flex:1.5}.time-field[_ngcontent-%COMP%]{flex:1}.date-separator[_ngcontent-%COMP%], .time-separator[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#666;margin:0 2px}.input-box[_ngcontent-%COMP%]{background-color:#f8f5ff;border:2px solid #c9b7ff;border-radius:6px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s ease;margin-top:4px;position:relative}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff;box-shadow:0 2px 8px #9a79ff33}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:14px;outline:none;color:#333}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#888;font-style:italic}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.date-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .time-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{text-align:center;font-weight:500}.price-input[_ngcontent-%COMP%]{display:flex;align-items:center}.price-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;text-align:right;padding-right:8px}.price-input[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{color:#666;font-weight:500;font-size:14px;margin-left:4px}.center-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1.5rem}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border:2px solid #000;border-radius:6px;background-color:#c9b7ff;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace;font-size:14px;transition:all .3s ease}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#b8a3ff;box-shadow:0 2px 6px #0003;transform:translateY(-1px)}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 1px 3px #0003}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#dcdcdc;color:#888;cursor:not-allowed;border-color:#bbb;transform:none;box-shadow:none}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px;font-weight:400}@media (max-width: 768px){.overlay[_ngcontent-%COMP%]{padding:.5rem}.request-form-wrapper[_ngcontent-%COMP%]{max-width:100%;padding:1.5rem;max-height:95vh}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;padding-right:35px}.time-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.time-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem}.datetime-row[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:stretch}}@media (max-height: 600px){.request-form-wrapper[_ngcontent-%COMP%]{max-height:98vh;padding:1rem}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem}.center-button[_ngcontent-%COMP%]{margin-top:1rem}}"]})};var aa="basil",rd=function(t){return t===3?"v3":t},sa="https://js.stripe.com",ad="".concat(sa,"/").concat(aa,"/stripe.js"),sd=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,cd=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,oa="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ld=function(t){return sd.test(t)||cd.test(t)},dd=function(){for(var t=document.querySelectorAll('script[src^="'.concat(sa,'"]')),e=0;e<t.length;e++){var n=t[e];if(ld(n.src))return n}return null},ra=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(ad).concat(e);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n},pd=function(t,e){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.3.1",startTime:e})},En=null,Si=null,Pi=null,md=function(t){return function(e){t(new Error("Failed to load Stripe.js",{cause:e}))}},ud=function(t,e){return function(){window.Stripe?t(window.Stripe):e(new Error("Stripe.js not available"))}},gd=function(t){return En!==null?En:(En=new Promise(function(e,n){if(typeof window>"u"||typeof document>"u"){e(null);return}if(window.Stripe&&t&&console.warn(oa),window.Stripe){e(window.Stripe);return}try{var o=dd();if(o&&t)console.warn(oa);else if(!o)o=ra(t);else if(o&&Pi!==null&&Si!==null){var c;o.removeEventListener("load",Pi),o.removeEventListener("error",Si),(c=o.parentNode)===null||c===void 0||c.removeChild(o),o=ra(t)}Pi=ud(e,n),Si=md(n),o.addEventListener("load",Pi),o.addEventListener("error",Si)}catch(m){n(m);return}}),En.catch(function(e){return En=null,Promise.reject(e)}))},fd=function(t,e,n){if(t===null)return null;var o=e[0],c=o.match(/^pk_test/),m=rd(t.version),_=aa;c&&m!==_&&console.warn("Stripe.js@".concat(m," was loaded on the page, but @stripe/stripe-js@").concat("7.3.1"," expected Stripe.js@").concat(_,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var w=t.apply(void 0,e);return pd(w,n),w},In,ca=!1,la=function(){return In||(In=gd(null).catch(function(t){return In=null,Promise.reject(t)}),In)};Promise.resolve().then(function(){return la()}).catch(function(i){ca||console.warn(i)});var da=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];ca=!0;var o=Date.now();return la().then(function(c){return fd(c,e,o)})};var on=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/Payment";createPaymentIntent(t){console.log("Creating payment intent with data:",t);let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.post(`${this.baseUrl}/CreatePaymentIntent`,t,{headers:n})}calculateProtectionFee(t){console.log("Calculating protection fee for:",t);let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.post(`${this.baseUrl}/CalculateProtectionFee`,t,{headers:n})}confirmPayment(t){let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.post(`${this.baseUrl}/ConfirmPayment`,t,{headers:n})}getPaymentHistory(t){let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.get(`${this.baseUrl}/GetPaymentHistory`,{params:t,headers:n})}getPaymentDetails(t){let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.get(`${this.baseUrl}/GetPaymentDetails/${t}`,{headers:n})}refundPayment(t){let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.post(`${this.baseUrl}/RefundPayment`,t,{headers:n})}cancelPayment(t){let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.post(`${this.baseUrl}/CancelPayment/${t}`,{},{headers:n})}stripeWebhook(t){return this.http.post(`${this.baseUrl}/StripeWebhook`,t)}getPaymentStatus(t){let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.get(`${this.baseUrl}/GetPaymentStatus/${t}`,{headers:n})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var rn=class i{paymentFlowState=new fe({isActive:!1,serviceDetails:null,userDetails:null,specialistDetails:null,replyId:null,conversationId:null});paymentFlow$=this.paymentFlowState.asObservable();paymentCompleted=new fe(null);paymentCompleted$=this.paymentCompleted.asObservable();initiatePaymentFlow(t,e,n,o,c){this.paymentFlowState.next({isActive:!0,serviceDetails:e,userDetails:n,specialistDetails:o,replyId:t,conversationId:c})}completePayment(t=null){this.paymentCompleted.next(t),this.cancelPaymentFlow()}cancelPaymentFlow(){this.paymentFlowState.next({isActive:!1,serviceDetails:null,userDetails:null,specialistDetails:null,replyId:null,conversationId:null})}getCurrentState(){return this.paymentFlowState.value}getCurrentReplyId(){return this.paymentFlowState.value.replyId}isPaymentFlowActive(){return this.paymentFlowState.value.isActive}getPaymentAmount(){return this.paymentFlowState.value.serviceDetails?.price||0}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Oi=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/CustomerPaymentMethod";savePaymentMethod(t){let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.post(`${this.baseUrl}/Add`,t,{headers:n})}getPaymentMethods(){let e={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.get(`${this.baseUrl}/GetAll`,{headers:e})}deletePaymentMethod(t){let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.delete(`${this.baseUrl}/Delete/${t}`,{headers:n})}setAsDefault(t){let n={Authorization:`Bearer ${this.authService.getToken()}`};return this.http.put(`${this.baseUrl}/SetDefault/${t}`,{},{headers:n})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var bt=class i{notifications=new fe([]);notifications$=this.notifications.asObservable();defaultDuration=5e3;show(t,e="info",n){let o={id:`notification_${Date.now()}_${Math.random()}`,type:e,message:t,timestamp:new Date,duration:n??this.defaultDuration},c=this.notifications.value;return this.notifications.next([...c,o]),o.duration&&o.duration>0&&setTimeout(()=>{this.dismiss(o.id)},o.duration),o.id}dismiss(t){let n=this.notifications.value.filter(o=>o.id!==t);this.notifications.next(n)}clear(){this.notifications.next([])}success(t,e){return this.show(t,"success",e)}info(t,e){return this.show(t,"info",e)}warning(t,e){return this.show(t,"warning",e)}error(t,e){return this.show(t,"error",e)}showNotification(t){this.show(t.message,t.type),console.log(`${t.type.toUpperCase()}: ${t.message}`)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var _d=["cardNumberElement"],vd=["cardExpiryElement"],bd=["cardCvcElement"];function xd(i,t){i&1&&(a(0,"span",65),s(1,"Default"),r())}function Cd(i,t){if(i&1){let e=x();a(0,"div",54),u("click",function(){let o=g(e).$implicit,c=p(3);return f(c.selectSavedCard(o))}),a(1,"div",55)(2,"div",56)(3,"span",57),s(4),r()(),a(5,"div",58)(6,"span",59),s(7),r(),a(8,"span",60),s(9),r()(),a(10,"div",61),h(11,xd,2,0,"span",62),r()(),a(12,"div",63)(13,"button",64),u("click",function(o){let c=g(e).$implicit;return p(3).deleteSavedCard(c),f(o.stopPropagation())}),s(14," \u{1F5D1}\uFE0F "),r()()()}if(i&2){let e=t.$implicit,n=p(3);H("selected",(n.selectedSavedCard==null?null:n.selectedSavedCard.id)===e.id),l(4),P(e.cardBrand),l(3),M("\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ",e.cardLast4,""),l(2),P(e.cardholderName),l(2),d("ngIf",e.isDefault)}}function yd(i,t){if(i&1){let e=x();a(0,"div",49),h(1,Cd,15,6,"div",50),a(2,"div",51),u("click",function(){g(e);let o=p(2);return f(o.useNewCard())}),a(3,"div",52)(4,"span",53),s(5,"+"),r(),a(6,"span"),s(7,"Folose\u0219te un card nou"),r()()()()}if(i&2){let e=p(2);l(),d("ngForOf",e.savedPaymentMethods)}}function Md(i,t){if(i&1){let e=x();a(0,"div",44)(1,"div",45)(2,"button",46),u("click",function(){g(e);let o=p();return f(o.toggleSavedCards())}),a(3,"span"),s(4),r(),a(5,"span",47),s(6),r()()(),h(7,yd,8,1,"div",48),r()}if(i&2){let e=p();l(4),Nt("",e.showSavedCards?"Ascunde":"Arat\u0103"," cardurile salvate (",e.savedPaymentMethods.length,")"),l(2),P(e.showSavedCards?"\u25B2":"\u25BC"),l(),d("ngIf",e.showSavedCards)}}function wd(i,t){if(i&1){let e=x();a(0,"div",66)(1,"div",67),y(2,"img",68),a(3,"div",69)(4,"strong"),s(5),r(),a(6,"p"),s(7),r(),a(8,"span",70),s(9,"Card salvat"),r()(),a(10,"div",63)(11,"button",71),u("click",function(){g(e);let o=p();return f(o.useNewCard())}),s(12,"Schimb\u0103"),r()()()()}if(i&2){let e=p();l(5),Nt("",e.selectedSavedCard.cardBrand," \u2022\u2022\u2022\u2022 ",e.selectedSavedCard.cardLast4,""),l(2),P(e.selectedSavedCard.cardholderName)}}function Sd(i,t){i&1&&(a(0,"span",77),s(1,"\u2713"),r())}function Pd(i,t){if(i&1){let e=x();a(0,"div",72),u("click",function(){g(e);let o=p();return f(o.openCardDetailsModal())}),y(1,"img",68),a(2,"div",69)(3,"strong"),s(4,"Card bancar"),r(),a(5,"p"),s(6,"Utilizeaz\u0103 un card de credit sau de debit"),r(),a(7,"div",73),y(8,"img",74)(9,"img",75),r()(),h(10,Sd,2,0,"span",76),r()}if(i&2){let e=p();H("selected",e.paymentMethodSelected),l(10),d("ngIf",e.paymentMethodSelected)}}function Od(i,t){if(i&1){let e=x();a(0,"div",78)(1,"div",55)(2,"span",79),s(3),r(),a(4,"span",80),s(5),r()(),a(6,"button",71),u("click",function(){g(e);let o=p();return f(o.openCardDetailsModal())}),s(7,"Modific\u0103"),r()()}if(i&2){let e=p();l(3),M("**** **** **** ",e.cardLast4,""),l(2),P(e.cardBrand)}}function kd(i,t){i&1&&(a(0,"p",81),s(1," Introdu datele cardului pentru a continua "),r())}function Ed(i,t){if(i&1&&(a(0,"span",82),s(1),r()),i&2){let e=p();l(),M(" ",e.protectionFeeDisplayText," ")}}function Id(i,t){i&1&&(a(0,"span",83),s(1," Se calculeaz\u0103... "),r())}function Dd(i,t){if(i&1&&(a(0,"span",28),s(1),R(2,"currency"),r()),i&2){let e=p();l(),M(" ",st(2,1,e.protectionFee,"RON","symbol","1.2-2")," ")}}function Td(i,t){i&1&&(a(0,"span",84),s(1," ... "),r())}function Fd(i,t){if(i&1&&(a(0,"span",85),s(1),R(2,"currency"),r()),i&2){let e=p();l(),M(" ",st(2,1,e.totalAmount,"RON","symbol","1.2-2")," ")}}function Rd(i,t){i&1&&(a(0,"span",84),s(1," Se calculeaz\u0103... "),r())}function Ad(i,t){i&1&&(a(0,"div",86)(1,"div",87),s(2,"\u{1F6E1}\uFE0F"),r(),a(3,"div",88)(4,"strong"),s(5,"Garan\u021Bie 100%:"),r(),s(6," Banii t\u0103i sunt proteja\u021Bi p\xE2n\u0103 la finalizarea serviciului. \xCEn caz de probleme, po\u021Bi solicita rambursarea integral\u0103. "),r()())}function zd(i,t){i&1&&(a(0,"span"),s(1," \u{1F512} Pl\u0103te\u0219te \xEEn siguran\u021B\u0103 "),r())}function Vd(i,t){i&1&&(a(0,"span"),s(1," Se calculeaz\u0103... "),r())}function Nd(i,t){i&1&&(a(0,"span"),s(1," Se proceseaz\u0103... "),r())}function Ud(i,t){if(i&1&&(a(0,"div",117),s(1),r()),i&2){let e=p(2);l(),P(e.cardNumberError)}}function Ld(i,t){if(i&1&&(a(0,"div",117),s(1),r()),i&2){let e=p(2);l(),P(e.cardholderNameError)}}function Bd(i,t){if(i&1&&(a(0,"div",117),s(1),r()),i&2){let e=p(2);l(),P(e.cardExpiryError)}}function jd(i,t){if(i&1&&(a(0,"div",117),s(1),r()),i&2){let e=p(2);l(),P(e.cardCvcError)}}function qd(i,t){if(i&1&&(a(0,"span"),s(1),r()),i&2){let e=p(2);l(),M(" ",e.saveCardForFuture?"Salveaz\u0103 \u0219i continu\u0103":"Continu\u0103"," ")}}function $d(i,t){i&1&&(a(0,"span"),s(1,"Se verific\u0103..."),r())}function Wd(i,t){if(i&1){let e=x();a(0,"div",89),u("click",function(o){g(e);let c=p();return f(c.closeCardModal(o))}),a(1,"div",90),u("click",function(o){return g(e),f(o.stopPropagation())}),a(2,"div",91)(3,"h3"),s(4,"Introdu datele cardului"),r(),a(5,"button",92),u("click",function(){g(e);let o=p();return f(o.closeCardModal())}),s(6,"\xD7"),r()(),a(7,"div",93)(8,"div",94)(9,"label",95),s(10,"Num\u0103rul cardului"),r(),a(11,"div",96),y(12,"div",97,0),r(),h(14,Ud,2,1,"div",98),r(),a(15,"div",94)(16,"label",99),s(17,"Numele titularului"),r(),a(18,"input",100),I("ngModelChange",function(o){g(e);let c=p();return E(c.cardholderName,o)||(c.cardholderName=o),f(o)}),u("input",function(){g(e);let o=p();return f(o.onCardholderNameChange())}),r(),h(19,Ld,2,1,"div",98),r(),a(20,"div",101)(21,"div",102)(22,"label",103),s(23,"Data de expirare"),r(),a(24,"div",96),y(25,"div",104,1),r(),h(27,Bd,2,1,"div",98),r(),a(28,"div",102)(29,"label",105),s(30,"Codul cardului"),r(),a(31,"div",96),y(32,"div",106,2),r(),h(34,jd,2,1,"div",98),r()(),a(35,"div",107)(36,"label",108)(37,"input",109),I("ngModelChange",function(o){g(e);let c=p();return E(c.saveCardForFuture,o)||(c.saveCardForFuture=o),f(o)}),r(),a(38,"span",110),s(39," Salveaz\u0103 acest card pentru pl\u0103\u021Bi viitoare "),r()(),a(40,"p",111),s(41," Cardul va fi salvat \xEEn siguran\u021B\u0103 \u0219i criptat pentru a facilita pl\u0103\u021Bile viitoare. "),r()(),a(42,"div",112)(43,"div",113),s(44,"\u{1F512}"),r(),a(45,"p"),s(46,"Datele tale sunt protejate \u0219i criptate \xEEn siguran\u021B\u0103"),r()()(),a(47,"div",114)(48,"button",115),u("click",function(){g(e);let o=p();return f(o.closeCardModal())}),s(49,"Anuleaz\u0103"),r(),a(50,"button",116),u("click",function(){g(e);let o=p();return f(o.saveCardDetails())}),h(51,qd,2,1,"span",42)(52,$d,2,0,"span",42),r()()()()}if(i&2){let e=p();l(14),d("ngIf",e.cardNumberError),l(4),H("error",e.cardholderNameError),k("ngModel",e.cardholderName),l(),d("ngIf",e.cardholderNameError),l(8),d("ngIf",e.cardExpiryError),l(7),d("ngIf",e.cardCvcError),l(3),k("ngModel",e.saveCardForFuture),l(13),d("disabled",!e.allFieldsComplete||e.isSavingCard),l(),d("ngIf",!e.isSavingCard),l(),d("ngIf",e.isSavingCard)}}var an=class i{constructor(t,e,n,o,c,m){this.paymentService=t;this.paymentFlowService=e;this.customerPaymentMethodService=n;this.notificationService=o;this.cdr=c;this.ngZone=m}cardNumberElement;cardExpiryElement;cardCvcElement;stripe=null;elements=null;cardNumber=null;cardExpiry=null;cardCvc=null;elementMountRetries=0;maxMountRetries=5;isElementsDestroyed=!1;isModalOpen=!1;mountingInProgress=!1;storedPaymentMethodData=null;savedPaymentMethods=[];selectedSavedCard=null;showSavedCards=!1;isLoadingSavedCards=!1;showCardModal=!1;paymentMethodSelected=!1;cardDetailsEntered=!1;isSavingCard=!1;saveCardForFuture=!0;cardholderName="";cardLast4="";cardBrand="";cardNumberComplete=!1;cardExpiryComplete=!1;cardCvcComplete=!1;cardholderNameValid=!1;cardNumberError=null;cardExpiryError=null;cardCvcError=null;cardholderNameError=null;showError=!1;serviceDetails;specialistDetails;userDetails;serviceAmount=0;protectionFee=0;totalAmount=0;isProcessing=!1;protectionFeeDetails=null;feeCalculationLoaded=!1;ngOnInit(){return C(this,null,function*(){yield this.initializeStripe(),this.loadPaymentFlowData(),yield this.calculateProtectionFee(),yield this.loadSavedPaymentMethods()})}ngOnDestroy(){this.isModalOpen=!1,this.safeDestroyElements()}initializeStripe(){return C(this,null,function*(){try{if(this.stripe=yield da("pk_test_51RY4TaRP4R8qcMUlWSJwbW6GBjetIiG7jc4fLrsUcl7xMS8uTMcI2mfDHId8YRAku8lllViJiAY0mVPObrvgLYke00QP5RVa7S"),!this.stripe)throw new Error("Failed to load Stripe");console.log("\u2705 Stripe initialized successfully")}catch(t){console.error("Error initializing Stripe:",t),this.notificationService.showNotification({type:"error",message:"Failed to initialize payment system"})}})}loadPaymentFlowData(){let t=this.paymentFlowService.getCurrentState();this.serviceDetails=t.serviceDetails,this.userDetails=t.userDetails,this.specialistDetails=t.specialistDetails,this.extractServiceAmount()}extractServiceAmount(){if(!this.serviceDetails){this.serviceAmount=0;return}let t=["price","amount","cost","servicePrice","totalPrice"],e=!1;for(let n of t)if(this.serviceDetails[n]!==void 0&&this.serviceDetails[n]!==null){this.serviceAmount=Number(this.serviceDetails[n]),e=!0;break}e||(this.serviceAmount=0),this.serviceAmount<0&&(this.serviceAmount=0)}openCardDetailsModal(){console.log("\u{1F513} Opening card details modal..."),this.showCardModal=!0,this.isModalOpen=!0,this.isElementsDestroyed=!1,this.elementMountRetries=0,this.mountingInProgress=!1,this.cdr.detectChanges(),setTimeout(()=>{this.setupStripeElementsWithRetry()},200)}closeCardModal(t){t&&t.preventDefault(),console.log("\u{1F512} Closing card modal..."),this.isModalOpen=!1,this.showCardModal=!1,this.mountingInProgress=!1,this.clearErrors(),this.cardDetailsEntered||this.safeDestroyElements()}setupStripeElementsWithRetry(){return C(this,null,function*(){if(!(!this.stripe||this.isElementsDestroyed||!this.isModalOpen))try{if(!this.cardNumberElement?.nativeElement||!this.cardExpiryElement?.nativeElement||!this.cardCvcElement?.nativeElement)if(this.elementMountRetries<this.maxMountRetries){this.elementMountRetries++,console.log(`\u{1F504} Retrying element setup (${this.elementMountRetries}/${this.maxMountRetries})...`),setTimeout(()=>this.setupStripeElementsWithRetry(),200);return}else throw new Error("DOM elements not available after retries");yield this.createAndMountElements()}catch(t){console.error("\u274C Error setting up Stripe elements:",t),this.notificationService.showNotification({type:"error",message:"Failed to load payment form. Please try again."})}})}createAndMountElements(){return C(this,null,function*(){if(yield this.safeDestroyElements(!1),!this.isModalOpen)return;this.elements=this.stripe.elements();let t={base:{fontSize:"16px",color:"#424770",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',"::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}};this.cardNumber=this.elements.create("cardNumber",{style:t}),this.cardExpiry=this.elements.create("cardExpiry",{style:t}),this.cardCvc=this.elements.create("cardCvc",{style:t}),this.cardNumber.mount(this.cardNumberElement.nativeElement),this.cardExpiry.mount(this.cardExpiryElement.nativeElement),this.cardCvc.mount(this.cardCvcElement.nativeElement),this.cardNumber.on("change",e=>{this.cardNumberComplete=e.complete,this.cardNumberError=e.error?e.error.message:null,e.brand&&(this.cardBrand=e.brand.toUpperCase())}),this.cardExpiry.on("change",e=>{this.cardExpiryComplete=e.complete,this.cardExpiryError=e.error?e.error.message:null}),this.cardCvc.on("change",e=>{this.cardCvcComplete=e.complete,this.cardCvcError=e.error?e.error.message:null}),this.userDetails?.userFullName&&!this.cardholderName&&(this.cardholderName=this.userDetails.userFullName,this.validateCardholderName()),console.log("\u2705 Stripe elements setup completed")})}safeDestroyElements(t=!0){return C(this,null,function*(){try{this.cardNumber&&(this.cardNumber.destroy(),this.cardNumber=null),this.cardExpiry&&(this.cardExpiry.destroy(),this.cardExpiry=null),this.cardCvc&&(this.cardCvc.destroy(),this.cardCvc=null),t&&(this.isElementsDestroyed=!0)}catch(e){console.error("\u274C Error destroying elements:",e),this.cardNumber=null,this.cardExpiry=null,this.cardCvc=null,t&&(this.isElementsDestroyed=!0)}})}onCardholderNameChange(){this.validateCardholderName()}validateCardholderName(){let t=this.cardholderName.trim();t?t.length<2?(this.cardholderNameError="Numele trebuie s\u0103 aib\u0103 cel pu\u021Bin 2 caractere",this.cardholderNameValid=!1):(this.cardholderNameError=null,this.cardholderNameValid=!0):(this.cardholderNameError="Numele titularului este obligatoriu",this.cardholderNameValid=!1)}validateAllFields(){this.validateCardholderName(),this.cardNumberComplete||(this.cardNumberError="Num\u0103rul cardului este incomplet"),this.cardExpiryComplete||(this.cardExpiryError="Data de expirare este incomplet\u0103"),this.cardCvcComplete||(this.cardCvcError="Codul cardului este incomplet")}clearErrors(){this.cardNumberError=null,this.cardExpiryError=null,this.cardCvcError=null,this.cardholderNameError=null}get allFieldsComplete(){return this.selectedSavedCard?!0:this.cardNumberComplete&&this.cardExpiryComplete&&this.cardCvcComplete&&this.cardholderNameValid}get hasValidServiceAmount(){return this.serviceAmount>0}get isLoadingFeeCalculation(){return!this.feeCalculationLoaded&&this.serviceAmount>0}get protectionFeeDisplayText(){return this.feeCalculationLoaded?this.protectionFee===0?"No protection fee":`${(this.protectionFee/this.serviceAmount*100).toFixed(1)}% protection fee`:"Calculating..."}get protectionFeeExplanation(){return this.protectionFeeDetails?this.protectionFeeDetails.description||"Client protection fee for service quality assurance":"Protection fee helps ensure service quality"}get hasSavedCards(){return this.savedPaymentMethods.length>0}processPayment(){return C(this,null,function*(){if(!this.cardDetailsEntered||!this.serviceDetails||!this.userDetails||!this.feeCalculationLoaded){this.showError=!0,this.notificationService.showNotification({type:"error",message:"Please complete all required fields before proceeding."});return}if(!this.storedPaymentMethodData&&!this.selectedSavedCard){this.notificationService.showNotification({type:"error",message:"No payment method available. Please add a card first."});return}this.isProcessing=!0;try{console.log("\u{1F680} Starting escrow payment process...");let t=yield this.createPaymentIntent();if(!t.response)throw new Error(t.errorMessage?.message||"Failed to create payment intent");let{clientSecret:e,paymentIntentId:n}=t.response;console.log("\u2705 Escrow payment intent created:",n);let o;if(this.selectedSavedCard)o=this.selectedSavedCard.stripePaymentMethodId,console.log("\u{1F4B3} Using saved card:",this.selectedSavedCard.cardLast4);else if(this.storedPaymentMethodData)o=this.storedPaymentMethodData.paymentMethodId,console.log("\u{1F4B3} Using new card:",this.storedPaymentMethodData.cardLast4);else throw new Error("No payment method available");console.log("\u{1F4B3} Confirming payment with payment method ID:",o);let{error:c,paymentIntent:m}=yield this.stripe.confirmCardPayment(e,{payment_method:o});if(c){console.error("\u274C Stripe payment failed:",c),this.notificationService.showNotification({type:"error",message:c.message||"Payment failed. Please try again."});return}if(m?.status==="succeeded")console.log("\u2705 Stripe payment succeeded - money now in escrow"),yield this.confirmPaymentWithBackend(n),console.log("\u2705 Escrow payment process completed successfully"),this.safeDestroyElements();else throw new Error(`Unexpected payment status: ${m?.status}`)}catch(t){console.error("\u274C Payment error:",t);let e="Payment failed. Please try again.";t instanceof Error&&(t.message.includes("network")?e="Network error. Please check your connection and try again.":t.message.includes("declined")&&(e="Payment was declined. Please check your card details.")),this.notificationService.showNotification({type:"error",message:e})}finally{this.isProcessing=!1,this.cdr.detectChanges()}})}createPaymentIntent(){return C(this,null,function*(){let t=this.paymentFlowService.getCurrentState(),e={replyId:t.replyId,serviceAmount:this.serviceAmount,protectionFee:this.protectionFee,totalAmount:this.totalAmount,currency:"ron",description:`Escrow payment: ${this.serviceDetails?.description||"Professional service"}`,metadata:{replyId:t.replyId,conversationId:t.conversationId,userId:this.userDetails?.userId||"",specialistId:this.specialistDetails?.userId||"",paymentType:"escrow"}};return console.log("\u{1F4B3} Creating escrow payment intent:",e),yield Ce(this.paymentService.createPaymentIntent(e))})}confirmPaymentWithBackend(t){return C(this,null,function*(){let e=this.paymentFlowService.getCurrentState(),n={paymentIntentId:t,replyId:e.replyId,serviceAmount:this.serviceAmount,protectionFee:this.protectionFee,totalAmount:this.totalAmount,paymentMethod:`${this.cardBrand} \u2022\u2022\u2022\u2022 ${this.cardLast4}`};try{let o=yield Ce(this.paymentService.confirmPayment(n));if(o.response!==void 0)this.notificationService.showNotification({type:"success",message:"Payment completed successfully! Money is now securely held in escrow."}),this.paymentFlowService.completePayment(),console.log("\u{1F4B3} Escrow payment flow completed - service task will be created");else throw new Error(o.errorMessage?.message||"Failed to confirm payment")}catch(o){throw console.error("\u274C Backend confirmation failed:",o),o}})}cancelPayment(){console.log("\u{1F6AB} Payment cancelled by user"),this.paymentFlowService.cancelPaymentFlow(),this.notificationService.showNotification({type:"info",message:"Payment cancelled"})}loadSavedPaymentMethods(){return C(this,null,function*(){this.isLoadingSavedCards=!0;try{let t=yield Ce(this.customerPaymentMethodService.getPaymentMethods());if(t.response){this.savedPaymentMethods=t.response,console.log("\u2705 Loaded saved payment methods:",this.savedPaymentMethods.length);let e=this.savedPaymentMethods.find(n=>n.isDefault);e&&this.selectSavedCard(e)}}catch(t){console.error("\u274C Error loading saved payment methods:",t)}finally{this.isLoadingSavedCards=!1}})}selectSavedCard(t){this.selectedSavedCard=t,this.cardLast4=t.cardLast4,this.cardBrand=t.cardBrand,this.cardholderName=t.cardholderName,this.cardDetailsEntered=!0,this.paymentMethodSelected=!0,this.showSavedCards=!1,this.showError=!1,this.storedPaymentMethodData={paymentMethodId:t.stripePaymentMethodId,cardLast4:t.cardLast4,cardBrand:t.cardBrand,cardholderName:t.cardholderName},console.log("\u2705 Selected saved card:",t.cardLast4)}toggleSavedCards(){this.showSavedCards=!this.showSavedCards}useNewCard(){this.selectedSavedCard=null,this.storedPaymentMethodData=null,this.cardDetailsEntered=!1,this.paymentMethodSelected=!1,this.showSavedCards=!1,this.openCardDetailsModal()}deleteSavedCard(t){return C(this,null,function*(){try{(yield Ce(this.customerPaymentMethodService.deletePaymentMethod(t.stripePaymentMethodId))).response!==void 0&&(this.savedPaymentMethods=this.savedPaymentMethods.filter(n=>n.id!==t.id),this.selectedSavedCard?.id===t.id&&(this.selectedSavedCard=null,this.storedPaymentMethodData=null,this.cardDetailsEntered=!1,this.paymentMethodSelected=!1),this.notificationService.showNotification({type:"success",message:"Payment method deleted successfully"}))}catch(e){console.error("\u274C Error deleting payment method:",e),this.notificationService.showNotification({type:"error",message:"Failed to delete payment method"})}})}saveCardDetails(){return C(this,null,function*(){if(!this.allFieldsComplete){this.validateAllFields();return}if(!this.stripe||!this.cardNumber||this.isElementsDestroyed||!this.isModalOpen){this.notificationService.showNotification({type:"error",message:"Payment form is not ready. Please close and reopen the modal."});return}this.isSavingCard=!0;try{console.log("\u{1F4B3} Creating payment method...");let{error:t,paymentMethod:e}=yield this.stripe.createPaymentMethod({type:"card",card:this.cardNumber,billing_details:{name:this.cardholderName,email:this.userDetails?.email,phone:this.userDetails?.phoneNumber}});if(t){console.error("\u274C Stripe createPaymentMethod error:",t),this.cardNumberError=t.message||"Invalid card details";return}if(e?.card)this.storedPaymentMethodData={paymentMethodId:e.id,cardLast4:e.card.last4||"",cardBrand:e.card.brand?.toUpperCase()||"",cardholderName:this.cardholderName},this.cardLast4=this.storedPaymentMethodData.cardLast4,this.cardBrand=this.storedPaymentMethodData.cardBrand,this.cardDetailsEntered=!0,this.paymentMethodSelected=!0,this.showError=!1,this.saveCardForFuture&&(yield this.saveCardToBackend(e)),console.log("\u2705 Card details saved successfully"),this.closeCardModal();else throw new Error("Failed to create payment method")}catch(t){console.error("\u274C Error validating card:",t),t instanceof Error&&(t.message.includes("Element")||t.message.includes("mounted"))?this.notificationService.showNotification({type:"error",message:"Payment form disconnected. Please close and reopen the modal."}):(this.cardNumberError="Failed to validate card details",this.notificationService.showNotification({type:"error",message:"Failed to validate card. Please check your details and try again."}))}finally{this.isSavingCard=!1}})}saveCardToBackend(t){return C(this,null,function*(){try{let e={paymentMethodId:t.id,cardLast4:t.card.last4,cardBrand:t.card.brand.toUpperCase(),cardholderName:this.cardholderName,isDefault:this.savedPaymentMethods.length===0},n=yield Ce(this.customerPaymentMethodService.savePaymentMethod(e));n.response&&(this.savedPaymentMethods.push(n.response),console.log("\u2705 Card saved to backend successfully"),this.notificationService.showNotification({type:"success",message:"Card saved for future payments"}))}catch(e){console.error("\u274C Error saving card to backend:",e),this.notificationService.showNotification({type:"warning",message:"Card validated but not saved for future use"})}})}calculateProtectionFee(){return C(this,null,function*(){if(this.serviceAmount<=0){this.protectionFee=0,this.totalAmount=this.serviceAmount,this.feeCalculationLoaded=!0;return}try{console.log("\u{1F4B0} Calculating protection fee for service amount:",this.serviceAmount);let t={serviceAmount:this.serviceAmount},e=yield Ce(this.paymentService.calculateProtectionFee(t));if(e.response)this.protectionFee=e.response.protectionFee,this.totalAmount=e.response.totalAmount,this.protectionFeeDetails=e.response.feeConfiguration,this.feeCalculationLoaded=!0,console.log("\u2705 Protection fee calculated:",{serviceAmount:this.serviceAmount,protectionFee:this.protectionFee,totalAmount:this.totalAmount,justification:e.response.feeJustification});else throw new Error("Failed to calculate protection fee")}catch(t){console.error("\u274C Error calculating protection fee:",t),this.protectionFee=Math.min(Math.max(this.serviceAmount*.1,5),100),this.totalAmount=this.serviceAmount+this.protectionFee,this.feeCalculationLoaded=!0,this.notificationService.showNotification({type:"warning",message:"Using fallback protection fee calculation."})}})}get protectionFeePercentage(){return!this.protectionFeeDetails||this.serviceAmount<=0?0:this.protectionFee/this.serviceAmount*100}static \u0275fac=function(e){return new(e||i)(v(on),v(rn),v(Oi),v(bt),v(Ut),v(ze))};static \u0275cmp=S({type:i,selectors:[["app-service-payment"]],viewQuery:function(e,n){if(e&1&&(Vt(_d,5),Vt(vd,5),Vt(bd,5)),e&2){let o;yt(o=Mt())&&(n.cardNumberElement=o.first),yt(o=Mt())&&(n.cardExpiryElement=o.first),yt(o=Mt())&&(n.cardCvcElement=o.first)}},decls:141,vars:45,consts:[["cardNumberElement",""],["cardExpiryElement",""],["cardCvcElement",""],[1,"payment-overlay"],[1,"payment-container"],[1,"payment-header"],[1,"close-btn",3,"click","disabled"],[1,"payment-content"],[1,"payment-section"],[1,"details-grid"],[1,"detail-item"],[1,"label"],[1,"value"],[1,"payment-section","escrow-info"],[1,"escrow-explanation"],[1,"escrow-step"],[1,"step-number"],[1,"step-content"],["class","saved-cards-section",4,"ngIf"],[1,"payment-method"],["class","selected-card-display",4,"ngIf"],["class","card-payment-option",3,"selected","click",4,"ngIf"],["class","card-summary",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"payment-section","price-section"],[1,"price-breakdown"],[1,"price-item"],[1,"price-label"],[1,"price-value"],[1,"price-item","protection-fee-item"],["class","protection-fee-badge",4,"ngIf"],["class","loading-badge",4,"ngIf"],["class","price-value",4,"ngIf"],["class","price-value loading",4,"ngIf"],[1,"price-item","protection-info"],[1,"price-divider"],[1,"price-item","total"],["class","price-value total-amount",4,"ngIf"],["class","escrow-guarantee",4,"ngIf"],[1,"payment-actions"],[1,"cancel-btn",3,"click","disabled"],[1,"pay-btn",3,"click","disabled"],[4,"ngIf"],["class","card-modal-overlay",3,"click",4,"ngIf"],[1,"saved-cards-section"],[1,"saved-cards-header"],[1,"toggle-saved-cards-btn",3,"click"],[1,"toggle-icon"],["class","saved-cards-list",4,"ngIf"],[1,"saved-cards-list"],["class","saved-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"new-card-option",3,"click"],[1,"new-card-content"],[1,"plus-icon"],[1,"saved-card",3,"click"],[1,"card-info"],[1,"card-brand-icon"],[1,"brand-text"],[1,"card-details"],[1,"card-number"],[1,"cardholder-name"],[1,"card-badges"],["class","default-badge",4,"ngIf"],[1,"card-actions"],["title","\u0218terge cardul",1,"delete-card-btn",3,"click"],[1,"default-badge"],[1,"selected-card-display"],[1,"card-payment-option","selected"],["src","assets/icons/card.svg","alt","Card bancar",1,"payment-icon"],[1,"payment-text"],[1,"saved-card-label"],[1,"edit-card-btn",3,"click"],[1,"card-payment-option",3,"click"],[1,"card-brands"],["src","assets/icons/visa.png","alt","Visa",1,"brand-icon"],["src","assets/icons/mastercard.png","alt","Mastercard",1,"brand-icon"],["class","selection-indicator",4,"ngIf"],[1,"selection-indicator"],[1,"card-summary"],[1,"card-last4"],[1,"card-brand"],[1,"error-message"],[1,"protection-fee-badge"],[1,"loading-badge"],[1,"price-value","loading"],[1,"price-value","total-amount"],[1,"escrow-guarantee"],[1,"guarantee-icon"],[1,"guarantee-text"],[1,"card-modal-overlay",3,"click"],[1,"card-modal",3,"click"],[1,"card-modal-header"],[1,"modal-close-btn",3,"click"],[1,"card-modal-content"],[1,"form-group"],["id","cardNumber"],[1,"input-container"],["id","card-number-element",1,"stripe-element"],["class","field-error",4,"ngIf"],["for","cardholderName"],["type","text","id","cardholderName","placeholder","Numele de pe card",1,"form-input",3,"ngModelChange","input","ngModel"],[1,"form-row"],[1,"form-group","half"],["id","cardExpiry"],["id","card-expiry-element",1,"stripe-element"],["id","cardCvc"],["id","card-cvc-element",1,"stripe-element"],[1,"form-group","save-card-option"],[1,"checkbox-label"],["type","checkbox",1,"checkbox-input",3,"ngModelChange","ngModel"],[1,"checkbox-text"],[1,"save-card-info"],[1,"security-info"],[1,"security-icon"],[1,"card-modal-actions"],[1,"cancel-btn",3,"click"],[1,"save-btn",3,"click","disabled"],[1,"field-error"]],template:function(e,n){e&1&&(a(0,"div",3)(1,"div",4)(2,"div",5)(3,"h2"),s(4,"Confirm\u0103 \u0219i pl\u0103te\u0219te serviciul"),r(),a(5,"button",6),u("click",function(){return n.cancelPayment()}),s(6,"\xD7"),r()(),a(7,"div",7)(8,"section",8)(9,"h3"),s(10,"Descriere"),r(),a(11,"p"),s(12),r()(),a(13,"section",8)(14,"h3"),s(15,"Detalii specialist"),r(),a(16,"div",9)(17,"div",10)(18,"span",11),s(19,"Nume:"),r(),a(20,"span",12),s(21),r()(),a(22,"div",10)(23,"span",11),s(24,"Adres\u0103 email:"),r(),a(25,"span",12),s(26),r()(),a(27,"div",10)(28,"span",11),s(29,"Num\u0103r de telefon:"),r(),a(30,"span",12),s(31),r()()()(),a(32,"section",8)(33,"h3"),s(34,"Detalii serviciu"),r(),a(35,"div",9)(36,"div",10)(37,"span",11),s(38,"Adresa serviciului:"),r(),a(39,"span",12),s(40),r()(),a(41,"div",10)(42,"span",11),s(43,"Data:"),r(),a(44,"span",12),s(45),R(46,"date"),r()(),a(47,"div",10)(48,"span",11),s(49,"Ora:"),r(),a(50,"span",12),s(51),R(52,"date"),R(53,"date"),r()()()(),a(54,"section",8)(55,"h3"),s(56,"Date de contact ale clientului"),r(),a(57,"div",9)(58,"div",10)(59,"span",11),s(60,"Num\u0103r de telefon:"),r(),a(61,"span",12),s(62),r()(),a(63,"div",10)(64,"span",11),s(65,"Adres\u0103 email:"),r(),a(66,"span",12),s(67),r()()()(),a(68,"section",13)(69,"h3"),s(70,"\u{1F512} Plat\u0103 cu protec\u021Bie escrow"),r(),a(71,"div",14)(72,"div",15)(73,"span",16),s(74,"1"),r(),a(75,"div",17)(76,"strong"),s(77,"Plata ta este protejat\u0103"),r(),a(78,"p"),s(79,"Banii sunt p\u0103stra\u021Bi \xEEn siguran\u021B\u0103 p\xE2n\u0103 la finalizarea serviciului"),r()()(),a(80,"div",15)(81,"span",16),s(82,"2"),r(),a(83,"div",17)(84,"strong"),s(85,"Serviciul este prestat"),r(),a(86,"p"),s(87,"Specialistul va efectua serviciul conform acordului"),r()()(),a(88,"div",15)(89,"span",16),s(90,"3"),r(),a(91,"div",17)(92,"strong"),s(93,"Plata este eliberat\u0103"),r(),a(94,"p"),s(95,"Dup\u0103 confirmarea finaliz\u0103rii, banii sunt transfera\u021Bi specialistului"),r()()()()(),a(96,"section",8)(97,"h3"),s(98,"Metoda de plat\u0103"),r(),h(99,Md,8,4,"div",18),a(100,"div",19),h(101,wd,13,3,"div",20)(102,Pd,11,3,"div",21)(103,Od,8,2,"div",22)(104,kd,2,0,"p",23),r()(),a(105,"section",24)(106,"h3"),s(107,"Detalii pre\u021B"),r(),a(108,"div",25)(109,"div",26)(110,"span",27),s(111,"Pre\u021Bul serviciului:"),r(),a(112,"span",28),s(113),R(114,"currency"),r()(),a(115,"div",29)(116,"span",27),s(117," Tax\u0103 de protec\u021Bie pentru client: "),h(118,Ed,2,1,"span",30)(119,Id,2,0,"span",31),r(),h(120,Dd,3,6,"span",32)(121,Td,2,0,"span",33),r(),a(122,"div",34)(123,"small"),s(124),r()(),y(125,"hr",35),a(126,"div",36)(127,"span",27)(128,"strong"),s(129,"Total de plat\u0103:"),r()(),h(130,Fd,3,6,"span",37)(131,Rd,2,0,"span",33),r(),h(132,Ad,7,0,"div",38),r()()(),a(133,"div",39)(134,"button",40),u("click",function(){return n.cancelPayment()}),s(135," Anuleaz\u0103 "),r(),a(136,"button",41),u("click",function(){return n.processPayment()}),h(137,zd,2,0,"span",42)(138,Vd,2,0,"span",42)(139,Nd,2,0,"span",42),r()()()(),h(140,Wd,53,11,"div",43)),e&2&&(l(5),d("disabled",n.isProcessing),l(7),P(n.serviceDetails==null?null:n.serviceDetails.description),l(9),P(n.specialistDetails==null?null:n.specialistDetails.userFullName),l(5),P(n.specialistDetails==null?null:n.specialistDetails.email),l(5),P(n.specialistDetails==null?null:n.specialistDetails.phoneNumber),l(9),P(n.serviceDetails==null?null:n.serviceDetails.address),l(5),P(se(46,31,n.serviceDetails==null?null:n.serviceDetails.startDate,"dd MMMM yyyy")),l(6),Nt(" ",se(52,34,n.serviceDetails==null?null:n.serviceDetails.startDate,"HH:mm")," - ",se(53,37,n.serviceDetails==null?null:n.serviceDetails.endDate,"HH:mm")," "),l(11),P(n.userDetails==null?null:n.userDetails.phoneNumber),l(5),P(n.userDetails==null?null:n.userDetails.email),l(32),d("ngIf",n.hasSavedCards),l(2),d("ngIf",n.selectedSavedCard),l(),d("ngIf",!n.selectedSavedCard),l(),d("ngIf",n.cardDetailsEntered&&!n.selectedSavedCard),l(),d("ngIf",n.showError),l(9),P(st(114,40,n.serviceAmount,"RON","symbol","1.2-2")),l(5),d("ngIf",n.feeCalculationLoaded),l(),d("ngIf",n.isLoadingFeeCalculation),l(),d("ngIf",n.feeCalculationLoaded),l(),d("ngIf",n.isLoadingFeeCalculation),l(3),M(" ",n.protectionFeeExplanation," "),l(6),d("ngIf",n.feeCalculationLoaded),l(),d("ngIf",n.isLoadingFeeCalculation),l(),d("ngIf",n.feeCalculationLoaded),l(2),d("disabled",n.isProcessing),l(2),d("disabled",!n.cardDetailsEntered||n.isProcessing||!n.feeCalculationLoaded),l(),d("ngIf",!n.isProcessing&&n.feeCalculationLoaded),l(),d("ngIf",!n.isProcessing&&!n.feeCalculationLoaded),l(),d("ngIf",n.isProcessing),l(),d("ngIf",n.showCardModal))},dependencies:[ve,Bt,T,G,W,ae,Ot,J,ee],styles:['@charset "UTF-8";.payment-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.payment-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0000004d}.payment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0}.payment-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:20px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%}.close-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.payment-content[_ngcontent-%COMP%]{padding:24px}.payment-section[_ngcontent-%COMP%]{margin-bottom:24px}.payment-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;color:#333;font-size:16px;font-weight:600}.details-grid[_ngcontent-%COMP%]{display:grid;gap:8px}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.label[_ngcontent-%COMP%]{color:#666;font-size:14px}.value[_ngcontent-%COMP%]{color:#333;font-weight:500;text-align:right}.card-payment-option[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:border-color .2s;margin-bottom:16px}.card-payment-option.selected[_ngcontent-%COMP%]{border-color:#007bff;background:#f8f9ff}.payment-icon[_ngcontent-%COMP%]{width:32px;height:32px;margin-right:12px}.payment-text[_ngcontent-%COMP%]{flex:1}.payment-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:4px}.payment-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.card-brands[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:8px}.brand-icon[_ngcontent-%COMP%]{height:20px;width:auto}.selection-indicator[_ngcontent-%COMP%]{color:#007bff;font-weight:700;font-size:18px}.stripe-card-section[_ngcontent-%COMP%]{margin-top:16px}.card-element-container[_ngcontent-%COMP%]{padding:16px;border:2px solid #e0e0e0;border-radius:8px;background:#fff;transition:border-color .2s}.card-element-container[_ngcontent-%COMP%]:focus-within{border-color:#007bff;box-shadow:0 0 0 2px #007bff1a}.card-errors[_ngcontent-%COMP%]{color:#dc3545;font-size:14px;margin-top:8px;padding:8px 12px;background:#f8d7da;border:1px solid #f5c6cb;border-radius:4px}.stripe-loading[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666}.price-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px;border-radius:8px;margin-top:16px;position:relative}.price-breakdown[_ngcontent-%COMP%]{display:grid;gap:8px}.price-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.price-item.protection-info[_ngcontent-%COMP%]{justify-content:flex-end}.price-item.protection-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-style:italic}.price-divider[_ngcontent-%COMP%]{border:none;border-top:1px solid #dee2e6;margin:12px 0}.price-item.total[_ngcontent-%COMP%]{font-weight:700;font-size:18px;background:linear-gradient(135deg,#f8f9fa,#e9ecef);border:2px solid #007bff;border-radius:8px;padding:16px;margin-top:12px}.total-amount[_ngcontent-%COMP%]{color:#007bff;font-size:20px;font-weight:700}.payment-actions[_ngcontent-%COMP%]{display:flex;gap:12px;padding:20px 24px;border-top:1px solid #e0e0e0;background:#f8f9fa}.cancel-btn[_ngcontent-%COMP%], .pay-btn[_ngcontent-%COMP%]{flex:1;padding:12px 24px;border:none;border-radius:6px;font-size:16px;font-weight:500;cursor:pointer;transition:all .2s}.cancel-btn[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.cancel-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a6268}.pay-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;position:relative;overflow:hidden}.pay-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#218838,#1ea080);transform:translateY(-1px);box-shadow:0 4px 12px #28a7454d}.pay-btn[_ngcontent-%COMP%]:disabled{background:#6c757d;opacity:.7;cursor:not-allowed;transform:none;box-shadow:none}.card-summary[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:linear-gradient(135deg,#f8f9ff,#e3f2fd);border:2px solid #007bff;border-radius:8px;margin-top:12px;box-shadow:0 2px 8px #007bff1a}.card-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.card-last4[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:700;color:#333;font-size:16px}.card-brand[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;text-transform:uppercase;font-weight:700}.edit-card-btn[_ngcontent-%COMP%]{background:none;border:2px solid #007bff;color:#007bff;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}.edit-card-btn[_ngcontent-%COMP%]:hover{background:#007bff;color:#fff;transform:translateY(-1px)}.card-modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;justify-content:center;align-items:center;z-index:1100}.card-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px #0006}.card-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0}.card-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:18px}.modal-close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%}.modal-close-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.card-modal-content[_ngcontent-%COMP%]{padding:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group.half[_ngcontent-%COMP%]{flex:1}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;color:#333;font-weight:500;font-size:14px}.form-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e0e0e0;border-radius:6px;font-size:16px;transition:border-color .2s}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff1a}.form-input.error[_ngcontent-%COMP%]{border-color:#dc3545}.input-container[_ngcontent-%COMP%]{position:relative}.stripe-element[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e0e0e0;border-radius:6px;background:#fff;transition:border-color .2s}.stripe-element.StripeElement--focus[_ngcontent-%COMP%]{border-color:#007bff;box-shadow:0 0 0 2px #007bff1a}.stripe-element.StripeElement--invalid[_ngcontent-%COMP%]{border-color:#dc3545}.field-error[_ngcontent-%COMP%]{color:#dc3545;font-size:14px;margin-top:6px;display:flex;align-items:center;gap:4px;background:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;padding:8px 12px}.field-error[_ngcontent-%COMP%]:before{content:"\\26a0";color:#dc3545}.security-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:linear-gradient(135deg,#e8f5e8,#f0f9ff);border:1px solid #28a745;border-radius:8px;margin-top:16px}.security-icon[_ngcontent-%COMP%]{font-size:20px;color:#28a745}.security-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#155724;font-size:14px;font-weight:500}.card-modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;padding:20px 24px;border-top:1px solid #e0e0e0;background:#f8f9fa}.card-modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%], .card-modal-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{flex:1;padding:12px 24px;border:none;border-radius:6px;font-size:16px;font-weight:500;cursor:pointer;transition:all .2s}.card-modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.card-modal-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background:#5a6268}.card-modal-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background:#007bff;color:#fff}.card-modal-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.card-modal-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.escrow-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e8,#f0f9ff);border:2px solid #28a745;border-radius:12px;padding:20px;margin:20px 0}.escrow-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#28a745;margin-bottom:16px;display:flex;align-items:center;gap:8px}.escrow-explanation[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.escrow-step[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px}.step-number[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:#28a745;color:#fff;border-radius:50%;font-weight:700;font-size:14px;flex-shrink:0}.step-content[_ngcontent-%COMP%]{flex:1}.step-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#333;margin-bottom:4px;font-size:15px}.step-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px;line-height:1.4}.protection-fee-item[_ngcontent-%COMP%]{position:relative}.protection-fee-badge[_ngcontent-%COMP%]{display:inline-block;background:#e3f2fd;color:#1976d2;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500;margin-left:8px}.loading-badge[_ngcontent-%COMP%]{display:inline-block;background:#f5f5f5;color:#666;padding:2px 8px;border-radius:12px;font-size:12px;font-style:italic;margin-left:8px}.price-value.loading[_ngcontent-%COMP%]{color:#999;font-style:italic}.escrow-guarantee[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;background:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;padding:16px;margin-top:16px}.guarantee-icon[_ngcontent-%COMP%]{font-size:24px;flex-shrink:0}.guarantee-text[_ngcontent-%COMP%]{flex:1;font-size:14px;line-height:1.5}.guarantee-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#28a745;display:block;margin-bottom:4px}.price-section.loading[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:#fffc;border-radius:8px;pointer-events:none}.protection-info[_ngcontent-%COMP%]{background:#fff3cd;border:1px solid #ffeaa7;border-radius:6px;padding:12px;margin:8px 0}.protection-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#856404;font-size:13px;line-height:1.4;display:block}.saved-cards-section[_ngcontent-%COMP%]{margin-bottom:16px}.saved-cards-header[_ngcontent-%COMP%]{margin-bottom:12px}.toggle-saved-cards-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:12px 16px;background:#f8f9fa;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;font-size:14px;font-weight:500;color:#333;transition:all .2s ease}.toggle-saved-cards-btn[_ngcontent-%COMP%]:hover{background:#e9ecef;border-color:#007bff}.toggle-icon[_ngcontent-%COMP%]{font-size:12px;color:#666}.saved-cards-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-top:12px;padding:12px;background:#f8f9fa;border-radius:8px;border:1px solid #e0e0e0}.saved-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;background:#fff;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s ease}.saved-card[_ngcontent-%COMP%]:hover{border-color:#007bff;box-shadow:0 2px 8px #007bff1a}.saved-card.selected[_ngcontent-%COMP%]{border-color:#007bff;background:linear-gradient(135deg,#f8f9ff,#e3f2fd);box-shadow:0 2px 8px #007bff26}.saved-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.card-brand-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:32px;background:#007bff;color:#fff;border-radius:6px;font-size:10px;font-weight:700}.brand-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.saved-card[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.saved-card[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-weight:600;color:#333;font-size:14px}.saved-card[_ngcontent-%COMP%]   .cardholder-name[_ngcontent-%COMP%]{font-size:12px;color:#666}.card-badges[_ngcontent-%COMP%]{display:flex;gap:4px}.default-badge[_ngcontent-%COMP%]{background:#28a745;color:#fff;padding:2px 6px;border-radius:12px;font-size:10px;font-weight:700;text-transform:uppercase}.saved-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.delete-card-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:4px;border-radius:4px;font-size:16px;opacity:.6;transition:all .2s ease}.delete-card-btn[_ngcontent-%COMP%]:hover{opacity:1;background:#fee;transform:scale(1.1)}.new-card-option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:16px;background:#fff;border:2px dashed #ccc;border-radius:8px;cursor:pointer;transition:all .2s ease;margin-top:8px}.new-card-option[_ngcontent-%COMP%]:hover{border-color:#007bff;background:#f8f9ff}.new-card-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#666;font-weight:500}.plus-icon[_ngcontent-%COMP%]{font-size:18px;color:#007bff;font-weight:700}.selected-card-display[_ngcontent-%COMP%]{margin-bottom:16px}.selected-card-display[_ngcontent-%COMP%]   .card-payment-option[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9ff,#e3f2fd);border-color:#007bff}.selected-card-display[_ngcontent-%COMP%]   .payment-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#007bff;font-size:16px}.saved-card-label[_ngcontent-%COMP%]{display:inline-block;background:#e3f2fd;color:#1976d2;padding:2px 8px;border-radius:12px;font-size:11px;font-weight:500;margin-top:4px}.save-card-option[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e0e0e0;border-radius:8px;padding:16px;margin-top:16px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;cursor:pointer;margin-bottom:8px}.checkbox-input[_ngcontent-%COMP%]{width:18px;height:18px;margin:0;cursor:pointer;accent-color:#007bff}.checkbox-text[_ngcontent-%COMP%]{font-weight:500;color:#333;line-height:1.4}.save-card-info[_ngcontent-%COMP%]{font-size:13px;color:#666;line-height:1.4;margin:0 0 0 30px}.card-summary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9ff,#e3f2fd);border:2px solid #007bff;border-radius:8px;margin-top:12px;box-shadow:0 2px 8px #007bff1a;position:relative}.card-summary[_ngcontent-%COMP%]:before{content:"Card nou";position:absolute;top:-8px;left:16px;background:#007bff;color:#fff;padding:2px 8px;border-radius:4px;font-size:11px;font-weight:700}.saved-cards-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:20px;color:#666;font-style:italic}.saved-cards-loading[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{margin-right:8px}@keyframes _ngcontent-%COMP%_cardSlideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.saved-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cardSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_cardSelected{0%{transform:scale(1)}50%{transform:scale(1.02)}to{transform:scale(1)}}.saved-card.selected[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cardSelected .4s ease-out}@media (max-width: 768px){.saved-card[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.saved-card[_ngcontent-%COMP%]   .card-info[_ngcontent-%COMP%]{width:100%}.saved-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{align-self:flex-end}.card-brand-icon[_ngcontent-%COMP%]{width:40px;height:28px;font-size:9px}.saved-card[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%]{font-size:13px}.saved-card[_ngcontent-%COMP%]   .cardholder-name[_ngcontent-%COMP%]{font-size:11px}.new-card-content[_ngcontent-%COMP%]{font-size:14px}.checkbox-label[_ngcontent-%COMP%]{gap:8px}.checkbox-input[_ngcontent-%COMP%]{width:16px;height:16px}.save-card-info[_ngcontent-%COMP%]{margin-left:24px;font-size:12px}}.saved-cards-error[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:16px;background:#f8d7da;border:1px solid #f5c6cb;border-radius:8px;color:#721c24;font-size:14px}.saved-cards-error[_ngcontent-%COMP%]:before{content:"\\26a0";margin-right:8px;font-size:16px}.selected-card-display[_ngcontent-%COMP%]   .edit-card-btn[_ngcontent-%COMP%]{background:#fff;border:2px solid #007bff;color:#007bff;padding:6px 12px;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease}.selected-card-display[_ngcontent-%COMP%]   .edit-card-btn[_ngcontent-%COMP%]:hover{background:#007bff;color:#fff;transform:translateY(-1px)}@keyframes _ngcontent-%COMP%_escrowSuccess{0%{transform:scale(1);box-shadow:0 0 #28a745b3}70%{transform:scale(1.05);box-shadow:0 0 0 10px #28a74500}to{transform:scale(1);box-shadow:0 0 #28a74500}}.escrow-success[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_escrowSuccess .6s ease-out}@media (max-width: 768px){.payment-container[_ngcontent-%COMP%]{width:95%;margin:20px}.payment-actions[_ngcontent-%COMP%]{flex-direction:column}.detail-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.value[_ngcontent-%COMP%]{text-align:left}.escrow-explanation[_ngcontent-%COMP%]{gap:12px}.escrow-step[_ngcontent-%COMP%]{gap:8px}.step-number[_ngcontent-%COMP%]{width:28px;height:28px;font-size:12px}.step-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px}.step-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.escrow-guarantee[_ngcontent-%COMP%]{padding:12px;gap:8px}.guarantee-icon[_ngcontent-%COMP%]{font-size:20px}.guarantee-text[_ngcontent-%COMP%]{font-size:13px}}']})};function Gd(i,t){i&1&&(a(0,"span"),s(1,"\u2705"),r())}function Hd(i,t){i&1&&(a(0,"span"),s(1,"\u274C"),r())}function Zd(i,t){i&1&&(a(0,"span"),s(1,"\u26A0\uFE0F"),r())}function Yd(i,t){i&1&&(a(0,"span"),s(1,"\u2139\uFE0F"),r())}function Kd(i,t){if(i&1){let e=x();a(0,"div",2)(1,"div",3)(2,"div",4)(3,"span",5),h(4,Gd,2,0,"span",6)(5,Hd,2,0,"span",6)(6,Zd,2,0,"span",6)(7,Yd,2,0,"span",7),r()(),a(8,"div",8),s(9),r(),a(10,"div",9),s(11),R(12,"date"),r()(),a(13,"button",10),u("click",function(){let o=g(e).$implicit,c=p();return f(c.dismiss(o.id))}),s(14," \xD7 "),r()()}if(i&2){let e=t.$implicit;d("ngClass","notification-"+e.type),at("data-notification-id",e.id),l(3),d("ngSwitch",e.type),l(),d("ngSwitchCase","success"),l(),d("ngSwitchCase","error"),l(),d("ngSwitchCase","warning"),l(3),M(" ",e.message," "),l(2),M(" ",se(12,8,e.timestamp,"HH:mm:ss")," ")}}var ki=class i{constructor(t){this.notificationService=t}notifications=[];destroy$=new xe;ngOnInit(){console.log("First notification:",this.notifications[0].type),this.notificationService.notifications$.pipe(he(this.destroy$)).subscribe(t=>{this.notifications=t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}dismiss(t){this.notificationService.dismiss(t)}trackByNotification(t,e){return e.id}static \u0275fac=function(e){return new(e||i)(v(bt))};static \u0275cmp=S({type:i,selectors:[["app-notification-display"]],decls:2,vars:2,consts:[[1,"notification-container"],["class","notification",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"notification",3,"ngClass"],[1,"notification-content"],[1,"notification-icon"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"notification-message"],[1,"notification-timestamp"],["title","Dismiss",1,"notification-close",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0),h(1,Kd,15,11,"div",1),r()),e&2&&(l(),d("ngForOf",n.notifications)("ngForTrackBy",n.trackByNotification))},dependencies:[ve,ct,lt,jn,ie,G],styles:[".notification-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1050;max-width:400px;pointer-events:none}.notification[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding:16px;margin-bottom:12px;border-radius:8px;background:#fff;box-shadow:0 4px 12px #00000026;border-left:4px solid #6c757d;animation:_ngcontent-%COMP%_slideInRight .3s ease-out;font-family:Roboto Mono,monospace;pointer-events:auto;min-width:300px}.notification-success[_ngcontent-%COMP%]{border-left-color:#28a745;background:#d4edda;color:#155724}.notification-info[_ngcontent-%COMP%]{border-left-color:#17a2b8;background:#d1ecf1;color:#0c5460}.notification-warning[_ngcontent-%COMP%]{border-left-color:#ffc107;background:#fff3cd;color:#856404}.notification-error[_ngcontent-%COMP%]{border-left-color:#dc3545;background:#f8d7da;color:#721c24}.notification-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;flex:1}.notification-icon[_ngcontent-%COMP%]{font-size:18px;flex-shrink:0;margin-top:2px}.notification-message[_ngcontent-%COMP%]{flex:1;font-size:14px;line-height:1.4;word-wrap:break-word}.notification-timestamp[_ngcontent-%COMP%]{font-size:11px;opacity:.7;margin-top:4px;flex-shrink:0}.notification-close[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;padding:0;margin-left:12px;opacity:.7;color:inherit;flex-shrink:0;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.notification-close[_ngcontent-%COMP%]:hover{opacity:1;background-color:#0000001a;border-radius:50%}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.notification[_ngcontent-%COMP%]{min-width:auto;padding:12px;font-size:14px}.notification-message[_ngcontent-%COMP%]{font-size:13px}}"]})};var Jd=(i,t)=>({"photo-bubble-left":i,"photo-bubble-right":t}),Qd=(i,t)=>({left:i,right:t});function Xd(i,t){i&1&&(a(0,"div",7),y(1,"div",8),a(2,"span"),s(3,"Loading photo..."),r()())}function ep(i,t){i&1&&(a(0,"div",9)(1,"span"),s(2,"\u{1F4F7}"),r(),a(3,"span"),s(4,"Failed to load photo"),r()())}var Ei=class i{photoItem;currentUserId;imageLoading=!0;imageError=!1;get isOwnMessage(){return this.photoItem.senderId===this.currentUserId}onImageError(t){this.imageLoading=!1,this.imageError=!0}onImageLoad(){this.imageLoading=!1,this.imageError=!1}openPhotoViewer(){!this.imageError&&this.photoItem.url&&window.open(this.photoItem.url,"_blank")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-photo-bubble"]],inputs:{photoItem:"photoItem",currentUserId:"currentUserId"},decls:9,vars:16,consts:[[1,"photo-bubble",3,"ngClass"],[1,"photo-content",3,"ngClass"],[1,"photo-container"],["loading","lazy",1,"photo-image",3,"click","error","load","src","alt"],["class","photo-placeholder",4,"ngIf"],["class","photo-error",4,"ngIf"],[1,"timestamp"],[1,"photo-placeholder"],[1,"loading-spinner"],[1,"photo-error"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"img",3),u("click",function(){return n.openPhotoViewer()})("error",function(c){return n.onImageError(c)})("load",function(){return n.onImageLoad()}),r(),h(4,Xd,4,0,"div",4)(5,ep,5,0,"div",5),r(),a(6,"div",6),s(7),R(8,"date"),r()()()),e&2&&(d("ngClass",Ie(10,Jd,!n.isOwnMessage,n.isOwnMessage)),l(),d("ngClass",Ie(13,Qd,!n.isOwnMessage,n.isOwnMessage)),l(2),d("src",n.photoItem.url,de)("alt",n.photoItem.fileName),l(),d("ngIf",n.imageLoading),l(),d("ngIf",n.imageError),l(2),P(se(8,7,n.photoItem.createdAt,"shortTime")))},dependencies:[T,ve,ie],styles:[".photo-bubble[_ngcontent-%COMP%]{display:flex;width:100%;margin:8px 0}.photo-bubble-left[_ngcontent-%COMP%]{justify-content:flex-start}.photo-bubble-right[_ngcontent-%COMP%]{justify-content:flex-end}.photo-content[_ngcontent-%COMP%]{display:inline-block;border-radius:12px;overflow:hidden;max-width:300px;min-width:200px}.photo-content.left[_ngcontent-%COMP%]{border:2px solid #514c70;border-top-left-radius:4px}.photo-content.right[_ngcontent-%COMP%]{border:2px solid #514c70;border-top-right-radius:4px}.photo-container[_ngcontent-%COMP%]{position:relative;width:100%;max-height:300px;overflow:hidden}.photo-image[_ngcontent-%COMP%]{width:100%;height:auto;max-height:300px;object-fit:cover;cursor:pointer;transition:opacity .2s ease}.photo-image[_ngcontent-%COMP%]:hover{opacity:.9}.photo-placeholder[_ngcontent-%COMP%], .photo-error[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:150px;background-color:#f5f5f5;color:#666;font-size:14px}.loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #e0caff;border-top:2px solid #6c5ce7;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:8px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.photo-caption[_ngcontent-%COMP%]{padding:8px 12px;background-color:#ffffffe6;font-size:14px;word-wrap:break-word}.timestamp[_ngcontent-%COMP%]{padding:4px 12px 8px;font-size:10px;opacity:.6;text-align:right;background-color:#ffffffe6}.left[_ngcontent-%COMP%]   .photo-caption[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{background-color:#ffffffe6;color:#000}.right[_ngcontent-%COMP%]   .photo-caption[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{background-color:#a79ed7e6;color:#000}"]})};var tp=()=>[1,2,3,4,5];function np(i,t){if(i&1){let e=x();ce(0),a(1,"img",10),u("click",function(){let o=g(e).index,c=p();return f(c.reviewForm.rating=o+1)}),r(),le()}if(i&2){let e=t.index,n=p();l(),d("src",e<n.reviewForm.rating?"assets/icons/star-filled.svg":"assets/icons/star.svg",de)}}var Ii=class i{reviewForm={receiverUserId:"",rating:5,content:""};formSubmit=new F;close=new F;submitReview(){this.formSubmit.emit(this.reviewForm)}closeForm(){this.close.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-review-form"]],inputs:{reviewForm:"reviewForm"},outputs:{formSubmit:"formSubmit",close:"close"},decls:18,vars:3,consts:[["form","ngForm"],[1,"request-form-wrapper"],[1,"close-button",3,"click"],[1,"request-form",3,"ngSubmit"],[1,"rating-container"],[1,"star-rating"],[4,"ngFor","ngForOf"],["name","comment","rows","4","required","",3,"ngModelChange","ngModel"],[1,"center-button"],["type","submit"],["alt","Star",1,"star",3,"click","src"]],template:function(e,n){if(e&1){let o=x();a(0,"div",1)(1,"button",2),u("click",function(){return g(o),f(n.closeForm())}),s(2,"\xD7"),r(),a(3,"h2"),s(4,"Trimite o recenzie"),r(),a(5,"form",3,0),u("ngSubmit",function(){return g(o),f(n.submitReview())}),a(7,"div",4)(8,"span"),s(9,"Not\u0103:"),r(),a(10,"div",5),h(11,np,2,1,"ng-container",6),r()(),a(12,"label"),s(13," Comentariu: "),a(14,"textarea",7),I("ngModelChange",function(m){return g(o),E(n.reviewForm.content,m)||(n.reviewForm.content=m),f(m)}),r()(),a(15,"div",8)(16,"button",9),s(17,"Trimite recenzia"),r()()()()}e&2&&(l(11),d("ngForOf",Ee(2,tp)),l(3),k("ngModel",n.reviewForm.content))},dependencies:[W,we,ae,J,Me,Se,ee,Pe,G],styles:[".request-form-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;max-width:500px;margin:0 auto;background-color:#e8d9ff;border:2px solid #000;padding:32px;font-family:Roboto Mono,monospace;min-height:auto;box-sizing:border-box}.close-button[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;background:none;border:none;font-size:24px;font-weight:700;cursor:pointer;color:#333;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%}.close-button[_ngcontent-%COMP%]:hover{background-color:#0000001a}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:1.25rem;margin-bottom:1.5rem;margin-top:0}.request-form[_ngcontent-%COMP%]{width:100%}.request-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;font-size:.95rem}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;font-family:Roboto Mono,monospace;font-size:.9rem}.request-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #999;border-radius:4px;font-family:Roboto Mono,monospace;background-color:#fff;font-size:1rem}.request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.center-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1.5rem}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 2rem;border:2px solid #000;border-radius:6px;background-color:#c9b7ff;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace;font-size:1rem;transition:background-color .2s ease}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#b8a6ff}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#dcdcdc;color:#888;cursor:not-allowed}.rating-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:1rem}.rating-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600}.star-rating[_ngcontent-%COMP%]{display:flex;gap:8px}.star[_ngcontent-%COMP%]{width:28px;height:28px;cursor:pointer;transition:transform .15s ease-in-out}.star[_ngcontent-%COMP%]:hover{transform:scale(1.2)}@media (max-width: 768px){.request-form-wrapper[_ngcontent-%COMP%]{max-width:90vw;padding:24px;margin:0}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.request-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .request-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.6rem}.star[_ngcontent-%COMP%]{width:24px;height:24px}}"]})};var Di=class i{constructor(t,e){this.authService=t;this.http=e}baseUrl="http://localhost:5241/api/Conversation";getExchanges(t){let e=new He;t&&(e=e.set("page",t.page.toString()),e=e.set("pageSize",t.pageSize.toString()));let n=this.authService.getToken(),o=new z({Authorization:`Bearer ${n}`});return this.http.get(`${this.baseUrl}/GetPage`,{params:e,headers:o})}getExchange(t,e){let n=new He;e&&(n=n.set("page",e.page.toString()),n=n.set("pageSize",e.pageSize.toString()));let o=this.authService.getToken(),c=new z({Authorization:`Bearer ${o}`});return this.http.get(`${this.baseUrl}/GetById/${t}`,{params:n,headers:c})}static \u0275fac=function(e){return new(e||i)(N(V),N(oe))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ti=class i{mockConversations=[{conversationId:"convo1",userId:"user_specialist_456",userFullName:"Ana Popescu",userProfilePictureUrl:"assets/avatar.svg",lastMessage:"Oferta este valabil\u0103 p\xE2n\u0103 m\xE2ine!",lastMessageAt:new Date("2024-01-01T10:45:00Z"),unreadCount:1},{conversationId:"convo2",userId:"user_specialist_789",userFullName:"Ion Vasile",userProfilePictureUrl:"assets/avatar.svg",lastMessage:"Bun\u0103 ziua! Cum merge treaba?",lastMessageAt:new Date("2024-01-01T10:00:00Z"),unreadCount:0}];mockConversationItems=[{id:"msg_001",conversationId:"conv_12345",senderId:"user_client_123",type:"message",createdAt:new Date("2024-01-01T10:00:00Z"),data:{Content:"Bun\u0103 ziua! Cum merge treaba?",SenderId:"user_client_123",CreatedAt:new Date("2024-01-01T10:00:00Z"),IsRead:!0}},{id:"req_001",conversationId:"conv_12345",senderId:"user_client_123",type:"request",createdAt:new Date("2024-01-01T10:15:00Z"),data:{RequestId:"req_001",RequestedStartDate:new Date("2024-01-02T09:00:00Z"),PhoneNumber:"0722123456",Address:"Strada Libert\u0103\u021Bii nr. 25, Bucure\u0219ti",Description:"Instalare aer condi\u021Bionat \xEEn living",Status:"Accepted",SenderId:"user_client_123"}},{id:"reply_001",conversationId:"conv_12345",senderId:"user_specialist_456",type:"reply",createdAt:new Date("2024-01-01T10:30:00Z"),data:{RequestId:"req_001",StartDate:new Date("2024-01-02T09:00:00Z"),EndDate:new Date("2024-01-02T12:00:00Z"),Price:450,Status:"Pending",SenderId:"user_specialist_456"}},{id:"msg_002",conversationId:"conv_12345",senderId:"user_specialist_456",type:"message",createdAt:new Date("2024-01-01T10:45:00Z"),data:{Content:"Oferta este valabil\u0103 p\xE2n\u0103 m\xE2ine!",CreatedAt:new Date("2024-01-01T10:45:00Z"),IsRead:!1}}];getExchanges(t){let e={response:{page:t?.page||1,pageSize:t?.pageSize||20,totalCount:this.mockConversations.length,data:this.mockConversations},errorMessage:void 0};return vo(e).pipe(bo(300))}getExchange(t,e){let n={response:{page:e?.page||1,pageSize:e?.pageSize||50,totalCount:this.mockConversationItems.length,data:this.mockConversationItems},errorMessage:void 0};return vo(n).pipe(bo(500))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ne=class extends Error{constructor(t,e){let n=new.target.prototype;super(`${t}: Status code '${e}'`),this.statusCode=e,this.__proto__=n}},xt=class extends Error{constructor(t="A timeout occurred."){let e=new.target.prototype;super(t),this.__proto__=e}},be=class extends Error{constructor(t="An abort occurred."){let e=new.target.prototype;super(t),this.__proto__=e}},Fi=class extends Error{constructor(t,e){let n=new.target.prototype;super(t),this.transport=e,this.errorType="UnsupportedTransportError",this.__proto__=n}},Ri=class extends Error{constructor(t,e){let n=new.target.prototype;super(t),this.transport=e,this.errorType="DisabledTransportError",this.__proto__=n}},Ai=class extends Error{constructor(t,e){let n=new.target.prototype;super(t),this.transport=e,this.errorType="FailedToStartTransportError",this.__proto__=n}},Dn=class extends Error{constructor(t){let e=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=e}},zi=class extends Error{constructor(t,e){let n=new.target.prototype;super(t),this.innerErrors=e,this.__proto__=n}};var sn=class{constructor(t,e,n){this.statusCode=t,this.statusText=e,this.content=n}},Qe=class{get(t,e){return this.send($(O({},e),{method:"GET",url:t}))}post(t,e){return this.send($(O({},e),{method:"POST",url:t}))}delete(t,e){return this.send($(O({},e),{method:"DELETE",url:t}))}getCookieString(t){return""}};var b=function(i){return i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None",i}(b||{});var Xe=class{constructor(){}log(t,e){}};Xe.instance=new Xe;var rp="8.0.7",Q=class{static isRequired(t,e){if(t==null)throw new Error(`The '${e}' argument is required.`)}static isNotEmpty(t,e){if(!t||t.match(/^\s*$/))throw new Error(`The '${e}' argument should not be empty.`)}static isIn(t,e,n){if(!(t in e))throw new Error(`Unknown ${n} value: ${t}.`)}},ne=class i{static get isBrowser(){return!i.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!i.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!i.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}};function Ct(i,t){let e="";return Ze(i)?(e=`Binary data of length ${i.byteLength}`,t&&(e+=`. Content: '${ap(i)}'`)):typeof i=="string"&&(e=`String data of length ${i.length}`,t&&(e+=`. Content: '${i}'`)),e}function ap(i){let t=new Uint8Array(i),e="";return t.forEach(n=>{let o=n<16?"0":"";e+=`0x${o}${n.toString(16)} `}),e.substr(0,e.length-1)}function Ze(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Ni(i,t,e,n,o,c){return C(this,null,function*(){let m={},[_,w]=et();m[_]=w,i.log(b.Trace,`(${t} transport) sending data. ${Ct(o,c.logMessageContent)}.`);let A=Ze(o)?"arraybuffer":"text",j=yield e.post(n,{content:o,headers:O(O({},m),c.headers),responseType:A,timeout:c.timeout,withCredentials:c.withCredentials});i.log(b.Trace,`(${t} transport) request complete. Response status: ${j.statusCode}.`)})}function ua(i){return i===void 0?new Dt(b.Information):i===null?Xe.instance:i.log!==void 0?i:new Dt(i)}var Vi=class{constructor(t,e){this._subject=t,this._observer=e}dispose(){let t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(e=>{})}},Dt=class{constructor(t){this._minLevel=t,this.out=console}log(t,e){if(t>=this._minLevel){let n=`[${new Date().toISOString()}] ${b[t]}: ${e}`;switch(t){case b.Critical:case b.Error:this.out.error(n);break;case b.Warning:this.out.warn(n);break;case b.Information:this.out.info(n);break;default:this.out.log(n);break}}}};function et(){let i="X-SignalR-User-Agent";return ne.isNode&&(i="User-Agent"),[i,sp(rp,cp(),dp(),lp())]}function sp(i,t,e,n){let o="Microsoft SignalR/",c=i.split(".");return o+=`${c[0]}.${c[1]}`,o+=` (${i}; `,t&&t!==""?o+=`${t}; `:o+="Unknown OS; ",o+=`${e}`,n?o+=`; ${n}`:o+="; Unknown Runtime Version",o+=")",o}function cp(){if(ne.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function lp(){if(ne.isNode)return process.versions.node}function dp(){return ne.isNode?"NodeJS":"Browser"}function Ui(i){return i.stack?i.stack:i.message?i.message:`${i}`}function ga(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var Li=class extends Qe{constructor(t){if(super(),this._logger=t,typeof fetch>"u"||ne.isNode){let e=typeof __webpack_require__=="function"?__non_webpack_require__:Ft;this._jar=new(e("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=e("node-fetch"):this._fetchType=fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(ga());if(typeof AbortController>"u"){let e=typeof __webpack_require__=="function"?__non_webpack_require__:Ft;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}send(t){return C(this,null,function*(){if(t.abortSignal&&t.abortSignal.aborted)throw new be;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");let e=new this._abortControllerType,n;t.abortSignal&&(t.abortSignal.onabort=()=>{e.abort(),n=new be});let o=null;if(t.timeout){let w=t.timeout;o=setTimeout(()=>{e.abort(),this._logger.log(b.Warning,"Timeout from HTTP request."),n=new xt},w)}t.content===""&&(t.content=void 0),t.content&&(t.headers=t.headers||{},Ze(t.content)?t.headers["Content-Type"]="application/octet-stream":t.headers["Content-Type"]="text/plain;charset=UTF-8");let c;try{c=yield this._fetchType(t.url,{body:t.content,cache:"no-cache",credentials:t.withCredentials===!0?"include":"same-origin",headers:O({"X-Requested-With":"XMLHttpRequest"},t.headers),method:t.method,mode:"cors",redirect:"follow",signal:e.signal})}catch(w){throw n||(this._logger.log(b.Warning,`Error from HTTP request. ${w}.`),w)}finally{o&&clearTimeout(o),t.abortSignal&&(t.abortSignal.onabort=null)}if(!c.ok){let w=yield fa(c,"text");throw new Ne(w||c.statusText,c.status)}let _=yield fa(c,t.responseType);return new sn(c.status,c.statusText,_)})}getCookieString(t){let e="";return ne.isNode&&this._jar&&this._jar.getCookies(t,(n,o)=>e=o.join("; ")),e}};function fa(i,t){let e;switch(t){case"arraybuffer":e=i.arrayBuffer();break;case"text":e=i.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`);default:e=i.text();break}return e}var Bi=class extends Qe{constructor(t){super(),this._logger=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new be):t.method?t.url?new Promise((e,n)=>{let o=new XMLHttpRequest;o.open(t.method,t.url,!0),o.withCredentials=t.withCredentials===void 0?!0:t.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.content===""&&(t.content=void 0),t.content&&(Ze(t.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let c=t.headers;c&&Object.keys(c).forEach(m=>{o.setRequestHeader(m,c[m])}),t.responseType&&(o.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{o.abort(),n(new be)}),t.timeout&&(o.timeout=t.timeout),o.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),o.status>=200&&o.status<300?e(new sn(o.status,o.statusText,o.response||o.responseText)):n(new Ne(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(b.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),n(new Ne(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(b.Warning,"Timeout from HTTP request."),n(new xt)},o.send(t.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var ji=class extends Qe{constructor(t){if(super(),typeof fetch<"u"||ne.isNode)this._httpClient=new Li(t);else if(typeof XMLHttpRequest<"u")this._httpClient=new Bi(t);else throw new Error("No usable HttpClient found.")}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new be):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this._httpClient.getCookieString(t)}};var Ue=class i{static write(t){return`${t}${i.RecordSeparator}`}static parse(t){if(t[t.length-1]!==i.RecordSeparator)throw new Error("Message is incomplete.");let e=t.split(i.RecordSeparator);return e.pop(),e}};Ue.RecordSeparatorCode=30;Ue.RecordSeparator=String.fromCharCode(Ue.RecordSeparatorCode);var qi=class{writeHandshakeRequest(t){return Ue.write(JSON.stringify(t))}parseHandshakeResponse(t){let e,n;if(Ze(t)){let _=new Uint8Array(t),w=_.indexOf(Ue.RecordSeparatorCode);if(w===-1)throw new Error("Message is incomplete.");let A=w+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(_.slice(0,A))),n=_.byteLength>A?_.slice(A).buffer:null}else{let _=t,w=_.indexOf(Ue.RecordSeparator);if(w===-1)throw new Error("Message is incomplete.");let A=w+1;e=_.substring(0,A),n=_.length>A?_.substring(A):null}let o=Ue.parse(e),c=JSON.parse(o[0]);if(c.type)throw new Error("Expected a handshake response from the server.");return[n,c]}};var B=function(i){return i[i.Invocation=1]="Invocation",i[i.StreamItem=2]="StreamItem",i[i.Completion=3]="Completion",i[i.StreamInvocation=4]="StreamInvocation",i[i.CancelInvocation=5]="CancelInvocation",i[i.Ping=6]="Ping",i[i.Close=7]="Close",i[i.Ack=8]="Ack",i[i.Sequence=9]="Sequence",i}(B||{});var $i=class{constructor(){this.observers=[]}next(t){for(let e of this.observers)e.next(t)}error(t){for(let e of this.observers)e.error&&e.error(t)}complete(){for(let t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new Vi(this,t)}};var Wi=class{constructor(t,e,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=t,this._connection=e,this._bufferSize=n}_send(t){return C(this,null,function*(){let e=this._protocol.writeMessage(t),n=Promise.resolve();if(this._isInvocationMessage(t)){this._totalMessageCount++;let o=()=>{},c=()=>{};Ze(e)?this._bufferedByteCount+=e.byteLength:this._bufferedByteCount+=e.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise((m,_)=>{o=m,c=_})),this._messages.push(new $o(e,this._totalMessageCount,o,c))}try{this._reconnectInProgress||(yield this._connection.send(e))}catch{this._disconnected()}yield n})}_ack(t){let e=-1;for(let n=0;n<this._messages.length;n++){let o=this._messages[n];if(o._id<=t.sequenceId)e=n,Ze(o._message)?this._bufferedByteCount-=o._message.byteLength:this._bufferedByteCount-=o._message.length,o._resolver();else if(this._bufferedByteCount<this._bufferSize)o._resolver();else break}e!==-1&&(this._messages=this._messages.slice(e+1))}_shouldProcessMessage(t){if(this._waitForSequenceMessage)return t.type!==B.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(t))return!0;let e=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,e<=this._latestReceivedSequenceId?(e===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=e,this._ackTimer(),!0)}_resetSequence(t){if(t.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=t.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){return C(this,null,function*(){let t=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;yield this._connection.send(this._protocol.writeMessage({type:B.Sequence,sequenceId:t}));let e=this._messages;for(let n of e)yield this._connection.send(n._message);this._reconnectInProgress=!1})}_dispose(t){t??(t=new Error("Unable to reconnect to server."));for(let e of this._messages)e._rejector(t)}_isInvocationMessage(t){switch(t.type){case B.Invocation:case B.StreamItem:case B.Completion:case B.StreamInvocation:case B.CancelInvocation:return!0;case B.Close:case B.Sequence:case B.Ping:case B.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(()=>C(this,null,function*(){try{this._reconnectInProgress||(yield this._connection.send(this._protocol.writeMessage({type:B.Ack,sequenceId:this._latestReceivedSequenceId})))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}},$o=class{constructor(t,e,n,o){this._message=t,this._id=e,this._resolver=n,this._rejector=o}};var pp=30*1e3,mp=15*1e3,up=1e5,K=function(i){return i.Disconnected="Disconnected",i.Connecting="Connecting",i.Connected="Connected",i.Disconnecting="Disconnecting",i.Reconnecting="Reconnecting",i}(K||{}),Tn=class i{static create(t,e,n,o,c,m,_){return new i(t,e,n,o,c,m,_)}constructor(t,e,n,o,c,m,_){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(b.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Q.isRequired(t,"connection"),Q.isRequired(e,"logger"),Q.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=c??pp,this.keepAliveIntervalInMilliseconds=m??mp,this._statefulReconnectBufferSize=_??up,this._logger=e,this._protocol=n,this.connection=t,this._reconnectPolicy=o,this._handshakeProtocol=new qi,this.connection.onreceive=w=>this._processIncomingData(w),this.connection.onclose=w=>this._connectionClosed(w),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=K.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:B.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this._connectionState!==K.Disconnected&&this._connectionState!==K.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return C(this,null,function*(){if(this._connectionState!==K.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=K.Connecting,this._logger.log(b.Debug,"Starting HubConnection.");try{yield this._startInternal(),ne.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=K.Connected,this._connectionStarted=!0,this._logger.log(b.Debug,"HubConnection connected successfully.")}catch(t){return this._connectionState=K.Disconnected,this._logger.log(b.Debug,`HubConnection failed to start successfully because of error '${t}'.`),Promise.reject(t)}})}_startInternal(){return C(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let t=new Promise((e,n)=>{this._handshakeResolver=e,this._handshakeRejecter=n});yield this.connection.start(this._protocol.transferFormat);try{let e=this._protocol.version;this.connection.features.reconnect||(e=1);let n={protocol:this._protocol.name,version:e};if(this._logger.log(b.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(b.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield t,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Wi(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(e){throw this._logger.log(b.Debug,`Hub handshake failed with error '${e}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(e),e}})}stop(){return C(this,null,function*(){let t=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield t}catch{}})}_stopInternal(t){if(this._connectionState===K.Disconnected)return this._logger.log(b.Debug,`Call to HubConnection.stop(${t}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===K.Disconnecting)return this._logger.log(b.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;let e=this._connectionState;return this._connectionState=K.Disconnecting,this._logger.log(b.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(b.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(e===K.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new be("The connection was stopped before the hub handshake could complete."),this.connection.stop(t))}_sendCloseMessage(){return C(this,null,function*(){try{yield this._sendWithProtocol(this._createCloseMessage())}catch{}})}stream(t,...e){let[n,o]=this._replaceStreamingParams(e),c=this._createStreamInvocation(t,e,o),m,_=new $i;return _.cancelCallback=()=>{let w=this._createCancelInvocation(c.invocationId);return delete this._callbacks[c.invocationId],m.then(()=>this._sendWithProtocol(w))},this._callbacks[c.invocationId]=(w,A)=>{if(A){_.error(A);return}else w&&(w.type===B.Completion?w.error?_.error(new Error(w.error)):_.complete():_.next(w.item))},m=this._sendWithProtocol(c).catch(w=>{_.error(w),delete this._callbacks[c.invocationId]}),this._launchStreams(n,m),_}_sendMessage(t){return this._resetKeepAliveInterval(),this.connection.send(t)}_sendWithProtocol(t){return this._messageBuffer?this._messageBuffer._send(t):this._sendMessage(this._protocol.writeMessage(t))}send(t,...e){let[n,o]=this._replaceStreamingParams(e),c=this._sendWithProtocol(this._createInvocation(t,e,!0,o));return this._launchStreams(n,c),c}invoke(t,...e){let[n,o]=this._replaceStreamingParams(e),c=this._createInvocation(t,e,!1,o);return new Promise((_,w)=>{this._callbacks[c.invocationId]=(j,ge)=>{if(ge){w(ge);return}else j&&(j.type===B.Completion?j.error?w(new Error(j.error)):_(j.result):w(new Error(`Unexpected message type: ${j.type}`)))};let A=this._sendWithProtocol(c).catch(j=>{w(j),delete this._callbacks[c.invocationId]});this._launchStreams(n,A)})}on(t,e){!t||!e||(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),this._methods[t].indexOf(e)===-1&&this._methods[t].push(e))}off(t,e){if(!t)return;t=t.toLowerCase();let n=this._methods[t];if(n)if(e){let o=n.indexOf(e);o!==-1&&(n.splice(o,1),n.length===0&&delete this._methods[t])}else delete this._methods[t]}onclose(t){t&&this._closedCallbacks.push(t)}onreconnecting(t){t&&this._reconnectingCallbacks.push(t)}onreconnected(t){t&&this._reconnectedCallbacks.push(t)}_processIncomingData(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t){let e=this._protocol.parseMessages(t,this._logger);for(let n of e)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(n)))switch(n.type){case B.Invocation:this._invokeClientMethod(n).catch(o=>{this._logger.log(b.Error,`Invoke client method threw error: ${Ui(o)}`)});break;case B.StreamItem:case B.Completion:{let o=this._callbacks[n.invocationId];if(o){n.type===B.Completion&&delete this._callbacks[n.invocationId];try{o(n)}catch(c){this._logger.log(b.Error,`Stream callback threw error: ${Ui(c)}`)}}break}case B.Ping:break;case B.Close:{this._logger.log(b.Information,"Close message received from server.");let o=n.error?new Error("Server returned an error on close: "+n.error):void 0;n.allowReconnect===!0?this.connection.stop(o):this._stopPromise=this._stopInternal(o);break}case B.Ack:this._messageBuffer&&this._messageBuffer._ack(n);break;case B.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(n);break;default:this._logger.log(b.Warning,`Invalid message type: ${n.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(t){let e,n;try{[n,e]=this._handshakeProtocol.parseHandshakeResponse(t)}catch(o){let c="Error parsing handshake response: "+o;this._logger.log(b.Error,c);let m=new Error(c);throw this._handshakeRejecter(m),m}if(e.error){let o="Server returned handshake error: "+e.error;this._logger.log(b.Error,o);let c=new Error(o);throw this._handshakeRejecter(c),c}else this._logger.log(b.Debug,"Server handshake complete.");return this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let t=this._nextKeepAlive-new Date().getTime();t<0&&(t=0),this._pingServerHandle=setTimeout(()=>C(this,null,function*(){if(this._connectionState===K.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(t){return C(this,null,function*(){let e=t.target.toLowerCase(),n=this._methods[e];if(!n){this._logger.log(b.Warning,`No client method with the name '${e}' found.`),t.invocationId&&(this._logger.log(b.Warning,`No result given for '${e}' method and invocation ID '${t.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)));return}let o=n.slice(),c=!!t.invocationId,m,_,w;for(let A of o)try{let j=m;m=yield A.apply(this,t.arguments),c&&m&&j&&(this._logger.log(b.Error,`Multiple results provided for '${e}'. Sending error to server.`),w=this._createCompletionMessage(t.invocationId,"Client provided multiple results.",null)),_=void 0}catch(j){_=j,this._logger.log(b.Error,`A callback for the method '${e}' threw error '${j}'.`)}w?yield this._sendWithProtocol(w):c?(_?w=this._createCompletionMessage(t.invocationId,`${_}`,null):m!==void 0?w=this._createCompletionMessage(t.invocationId,null,m):(this._logger.log(b.Warning,`No result given for '${e}' method and invocation ID '${t.invocationId}'.`),w=this._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(w)):m&&this._logger.log(b.Error,`Result given for '${e}' method but server is not expecting a result.`)})}_connectionClosed(t){this._logger.log(b.Debug,`HubConnection.connectionClosed(${t}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||t||new be("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===K.Disconnecting?this._completeClose(t):this._connectionState===K.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===K.Connected&&this._completeClose(t)}_completeClose(t){if(this._connectionStarted){this._connectionState=K.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(t??new Error("Connection closed.")),this._messageBuffer=void 0),ne.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(e=>e.apply(this,[t]))}catch(e){this._logger.log(b.Error,`An onclose callback called with error '${t}' threw error '${e}'.`)}}}_reconnect(t){return C(this,null,function*(){let e=Date.now(),n=0,o=t!==void 0?t:new Error("Attempting to reconnect due to a unknown error."),c=this._getNextRetryDelay(n++,0,o);if(c===null){this._logger.log(b.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(t);return}if(this._connectionState=K.Reconnecting,t?this._logger.log(b.Information,`Connection reconnecting because of error '${t}'.`):this._logger.log(b.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(m=>m.apply(this,[t]))}catch(m){this._logger.log(b.Error,`An onreconnecting callback called with error '${t}' threw error '${m}'.`)}if(this._connectionState!==K.Reconnecting){this._logger.log(b.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;c!==null;){if(this._logger.log(b.Information,`Reconnect attempt number ${n} will start in ${c} ms.`),yield new Promise(m=>{this._reconnectDelayHandle=setTimeout(m,c)}),this._reconnectDelayHandle=void 0,this._connectionState!==K.Reconnecting){this._logger.log(b.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=K.Connected,this._logger.log(b.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(m=>m.apply(this,[this.connection.connectionId]))}catch(m){this._logger.log(b.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${m}'.`)}return}catch(m){if(this._logger.log(b.Information,`Reconnect attempt failed because of error '${m}'.`),this._connectionState!==K.Reconnecting){this._logger.log(b.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===K.Disconnecting&&this._completeClose();return}o=m instanceof Error?m:new Error(m.toString()),c=this._getNextRetryDelay(n++,Date.now()-e,o)}}this._logger.log(b.Information,`Reconnect retries have been exhausted after ${Date.now()-e} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(t,e,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:t,retryReason:n})}catch(o){return this._logger.log(b.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${t}, ${e}) threw error '${o}'.`),null}}_cancelCallbacksWithError(t){let e=this._callbacks;this._callbacks={},Object.keys(e).forEach(n=>{let o=e[n];try{o(null,t)}catch(c){this._logger.log(b.Error,`Stream 'error' callback called with '${t}' threw error: ${Ui(c)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(t,e,n,o){if(n)return o.length!==0?{arguments:e,streamIds:o,target:t,type:B.Invocation}:{arguments:e,target:t,type:B.Invocation};{let c=this._invocationId;return this._invocationId++,o.length!==0?{arguments:e,invocationId:c.toString(),streamIds:o,target:t,type:B.Invocation}:{arguments:e,invocationId:c.toString(),target:t,type:B.Invocation}}}_launchStreams(t,e){if(t.length!==0){e||(e=Promise.resolve());for(let n in t)t[n].subscribe({complete:()=>{e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(n)))},error:o=>{let c;o instanceof Error?c=o.message:o&&o.toString?c=o.toString():c="Unknown error",e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(n,c)))},next:o=>{e=e.then(()=>this._sendWithProtocol(this._createStreamItemMessage(n,o)))}})}}_replaceStreamingParams(t){let e=[],n=[];for(let o=0;o<t.length;o++){let c=t[o];if(this._isObservable(c)){let m=this._invocationId;this._invocationId++,e[m]=c,n.push(m.toString()),t.splice(o,1)}}return[e,n]}_isObservable(t){return t&&t.subscribe&&typeof t.subscribe=="function"}_createStreamInvocation(t,e,n){let o=this._invocationId;return this._invocationId++,n.length!==0?{arguments:e,invocationId:o.toString(),streamIds:n,target:t,type:B.StreamInvocation}:{arguments:e,invocationId:o.toString(),target:t,type:B.StreamInvocation}}_createCancelInvocation(t){return{invocationId:t,type:B.CancelInvocation}}_createStreamItemMessage(t,e){return{invocationId:t,item:e,type:B.StreamItem}}_createCompletionMessage(t,e,n){return e?{error:e,invocationId:t,type:B.Completion}:{invocationId:t,result:n,type:B.Completion}}_createCloseMessage(){return{type:B.Close}}};var gp=[0,2e3,1e4,3e4,null],Fn=class{constructor(t){this._retryDelays=t!==void 0?[...t,null]:gp}nextRetryDelayInMilliseconds(t){return this._retryDelays[t.previousRetryCount]}};var Tt=(()=>{class i{}return i.Authorization="Authorization",i.Cookie="Cookie",i})();var Gi=class extends Qe{constructor(t,e){super(),this._innerClient=t,this._accessTokenFactory=e}send(t){return C(this,null,function*(){let e=!0;this._accessTokenFactory&&(!this._accessToken||t.url&&t.url.indexOf("/negotiate?")>0)&&(e=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(t);let n=yield this._innerClient.send(t);return e&&n.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(t),yield this._innerClient.send(t)):n})}_setAuthorizationHeader(t){t.headers||(t.headers={}),this._accessToken?t.headers[Tt.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&t.headers[Tt.Authorization]&&delete t.headers[Tt.Authorization]}getCookieString(t){return this._innerClient.getCookieString(t)}};var ue=function(i){return i[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling",i}(ue||{}),pe=function(i){return i[i.Text=1]="Text",i[i.Binary=2]="Binary",i}(pe||{});var Hi=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var Rn=class{get pollAborted(){return this._pollAbort.aborted}constructor(t,e,n){this._httpClient=t,this._logger=e,this._pollAbort=new Hi,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}connect(t,e){return C(this,null,function*(){if(Q.isRequired(t,"url"),Q.isRequired(e,"transferFormat"),Q.isIn(e,pe,"transferFormat"),this._url=t,this._logger.log(b.Trace,"(LongPolling transport) Connecting."),e===pe.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[n,o]=et(),c=O({[n]:o},this._options.headers),m={abortSignal:this._pollAbort.signal,headers:c,timeout:1e5,withCredentials:this._options.withCredentials};e===pe.Binary&&(m.responseType="arraybuffer");let _=`${t}&_=${Date.now()}`;this._logger.log(b.Trace,`(LongPolling transport) polling: ${_}.`);let w=yield this._httpClient.get(_,m);w.statusCode!==200?(this._logger.log(b.Error,`(LongPolling transport) Unexpected response code: ${w.statusCode}.`),this._closeError=new Ne(w.statusText||"",w.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,m)})}_poll(t,e){return C(this,null,function*(){try{for(;this._running;)try{let n=`${t}&_=${Date.now()}`;this._logger.log(b.Trace,`(LongPolling transport) polling: ${n}.`);let o=yield this._httpClient.get(n,e);o.statusCode===204?(this._logger.log(b.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):o.statusCode!==200?(this._logger.log(b.Error,`(LongPolling transport) Unexpected response code: ${o.statusCode}.`),this._closeError=new Ne(o.statusText||"",o.statusCode),this._running=!1):o.content?(this._logger.log(b.Trace,`(LongPolling transport) data received. ${Ct(o.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(o.content)):this._logger.log(b.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(n){this._running?n instanceof xt?this._logger.log(b.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=n,this._running=!1):this._logger.log(b.Trace,`(LongPolling transport) Poll errored after shutdown: ${n.message}`)}}finally{this._logger.log(b.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(t){return C(this,null,function*(){return this._running?Ni(this._logger,"LongPolling",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return C(this,null,function*(){this._logger.log(b.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(b.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let t={},[e,n]=et();t[e]=n;let o={headers:O(O({},t),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},c;try{yield this._httpClient.delete(this._url,o)}catch(m){c=m}c?c instanceof Ne&&(c.statusCode===404?this._logger.log(b.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(b.Trace,`(LongPolling transport) Error sending a DELETE request: ${c}`)):this._logger.log(b.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(b.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(b.Trace,t),this.onclose(this._closeError)}}};var Zi=class{constructor(t,e,n,o){this._httpClient=t,this._accessToken=e,this._logger=n,this._options=o,this.onreceive=null,this.onclose=null}connect(t,e){return C(this,null,function*(){return Q.isRequired(t,"url"),Q.isRequired(e,"transferFormat"),Q.isIn(e,pe,"transferFormat"),this._logger.log(b.Trace,"(SSE transport) Connecting."),this._url=t,this._accessToken&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((n,o)=>{let c=!1;if(e!==pe.Text){o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let m;if(ne.isBrowser||ne.isWebWorker)m=new this._options.EventSource(t,{withCredentials:this._options.withCredentials});else{let _=this._httpClient.getCookieString(t),w={};w.Cookie=_;let[A,j]=et();w[A]=j,m=new this._options.EventSource(t,{withCredentials:this._options.withCredentials,headers:O(O({},w),this._options.headers)})}try{m.onmessage=_=>{if(this.onreceive)try{this._logger.log(b.Trace,`(SSE transport) data received. ${Ct(_.data,this._options.logMessageContent)}.`),this.onreceive(_.data)}catch(w){this._close(w);return}},m.onerror=_=>{c?this._close():o(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},m.onopen=()=>{this._logger.log(b.Information,`SSE connected to ${this._url}`),this._eventSource=m,c=!0,n()}}catch(_){o(_);return}})})}send(t){return C(this,null,function*(){return this._eventSource?Ni(this._logger,"SSE",this._httpClient,this._url,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))}};var Yi=class{constructor(t,e,n,o,c,m){this._logger=n,this._accessTokenFactory=e,this._logMessageContent=o,this._webSocketConstructor=c,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=m}connect(t,e){return C(this,null,function*(){Q.isRequired(t,"url"),Q.isRequired(e,"transferFormat"),Q.isIn(e,pe,"transferFormat"),this._logger.log(b.Trace,"(WebSockets transport) Connecting.");let n;return this._accessTokenFactory&&(n=yield this._accessTokenFactory()),new Promise((o,c)=>{t=t.replace(/^http/,"ws");let m,_=this._httpClient.getCookieString(t),w=!1;if(ne.isNode||ne.isReactNative){let A={},[j,ge]=et();A[j]=ge,n&&(A[Tt.Authorization]=`Bearer ${n}`),_&&(A[Tt.Cookie]=_),m=new this._webSocketConstructor(t,void 0,{headers:O(O({},A),this._headers)})}else n&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);m||(m=new this._webSocketConstructor(t)),e===pe.Binary&&(m.binaryType="arraybuffer"),m.onopen=A=>{this._logger.log(b.Information,`WebSocket connected to ${t}.`),this._webSocket=m,w=!0,o()},m.onerror=A=>{let j=null;typeof ErrorEvent<"u"&&A instanceof ErrorEvent?j=A.error:j="There was an error with the transport",this._logger.log(b.Information,`(WebSockets transport) ${j}.`)},m.onmessage=A=>{if(this._logger.log(b.Trace,`(WebSockets transport) data received. ${Ct(A.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(A.data)}catch(j){this._close(j);return}},m.onclose=A=>{if(w)this._close(A);else{let j=null;typeof ErrorEvent<"u"&&A instanceof ErrorEvent?j=A.error:j="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",c(new Error(j))}}})})}send(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(b.Trace,`(WebSockets transport) sending data. ${Ct(t,this._logMessageContent)}.`),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(t){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(b.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(t)&&(t.wasClean===!1||t.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${t.code} (${t.reason||"no reason given"}).`)):t instanceof Error?this.onclose(t):this.onclose())}_isCloseEvent(t){return t&&typeof t.wasClean=="boolean"&&typeof t.code=="number"}};var ha=100,Ki=class{constructor(t,e={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Q.isRequired(t,"url"),this._logger=ua(e.logger),this.baseUrl=this._resolveUrl(t),e=e||{},e.logMessageContent=e.logMessageContent===void 0?!1:e.logMessageContent,typeof e.withCredentials=="boolean"||e.withCredentials===void 0)e.withCredentials=e.withCredentials===void 0?!0:e.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");e.timeout=e.timeout===void 0?100*1e3:e.timeout;let n=null,o=null;if(ne.isNode&&typeof Ft<"u"){let c=typeof __webpack_require__=="function"?__non_webpack_require__:Ft;n=c("ws"),o=c("eventsource")}!ne.isNode&&typeof WebSocket<"u"&&!e.WebSocket?e.WebSocket=WebSocket:ne.isNode&&!e.WebSocket&&n&&(e.WebSocket=n),!ne.isNode&&typeof EventSource<"u"&&!e.EventSource?e.EventSource=EventSource:ne.isNode&&!e.EventSource&&typeof o<"u"&&(e.EventSource=o),this._httpClient=new Gi(e.httpClient||new ji(this._logger),e.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=e,this.onreceive=null,this.onclose=null}start(t){return C(this,null,function*(){if(t=t||pe.Binary,Q.isIn(t,pe,"transferFormat"),this._logger.log(b.Debug,`Starting connection with transfer format '${pe[t]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(t),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let e="Failed to start the HttpConnection before stop() was called.";return this._logger.log(b.Error,e),yield this._stopPromise,Promise.reject(new be(e))}else if(this._connectionState!=="Connected"){let e="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(b.Error,e),Promise.reject(new be(e))}this._connectionStarted=!0})}send(t){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Wo(this.transport)),this._sendQueue.send(t))}stop(t){return C(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(b.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(b.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(e=>{this._stopPromiseResolver=e}),yield this._stopInternal(t),yield this._stopPromise})}_stopInternal(t){return C(this,null,function*(){this._stopError=t;try{yield this._startInternalPromise}catch{}if(this.transport){try{yield this.transport.stop()}catch(e){this._logger.log(b.Error,`HttpConnection.transport.stop() threw error '${e}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(b.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(t){return C(this,null,function*(){let e=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===ue.WebSockets)this.transport=this._constructTransport(ue.WebSockets),yield this._startTransport(e,t);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let n=null,o=0;do{if(n=yield this._getNegotiationResponse(e),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new be("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(e=n.url),n.accessToken){let c=n.accessToken;this._accessTokenFactory=()=>c,this._httpClient._accessToken=c,this._httpClient._accessTokenFactory=void 0}o++}while(n.url&&o<ha);if(o===ha&&n.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(e,this._options.transport,n,t)}this.transport instanceof Rn&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(b.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(n){return this._logger.log(b.Error,"Failed to start the connection: "+n),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(n)}})}_getNegotiationResponse(t){return C(this,null,function*(){let e={},[n,o]=et();e[n]=o;let c=this._resolveNegotiateUrl(t);this._logger.log(b.Debug,`Sending negotiation request: ${c}.`);try{let m=yield this._httpClient.post(c,{content:"",headers:O(O({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(m.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${m.statusCode}'`));let _=JSON.parse(m.content);return(!_.negotiateVersion||_.negotiateVersion<1)&&(_.connectionToken=_.connectionId),_.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Dn("Client didn't negotiate Stateful Reconnect but the server did.")):_}catch(m){let _="Failed to complete negotiation with the server: "+m;return m instanceof Ne&&m.statusCode===404&&(_=_+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(b.Error,_),Promise.reject(new Dn(_))}})}_createConnectUrl(t,e){return e?t+(t.indexOf("?")===-1?"?":"&")+`id=${e}`:t}_createTransport(t,e,n,o){return C(this,null,function*(){let c=this._createConnectUrl(t,n.connectionToken);if(this._isITransport(e)){this._logger.log(b.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=e,yield this._startTransport(c,o),this.connectionId=n.connectionId;return}let m=[],_=n.availableTransports||[],w=n;for(let A of _){let j=this._resolveTransportOrError(A,e,o,w?.useStatefulReconnect===!0);if(j instanceof Error)m.push(`${A.transport} failed:`),m.push(j);else if(this._isITransport(j)){if(this.transport=j,!w){try{w=yield this._getNegotiationResponse(t)}catch(ge){return Promise.reject(ge)}c=this._createConnectUrl(t,w.connectionToken)}try{yield this._startTransport(c,o),this.connectionId=w.connectionId;return}catch(ge){if(this._logger.log(b.Error,`Failed to start the transport '${A.transport}': ${ge}`),w=void 0,m.push(new Ai(`${A.transport} failed: ${ge}`,ue[A.transport])),this._connectionState!=="Connecting"){let We="Failed to select transport before stop() was called.";return this._logger.log(b.Debug,We),Promise.reject(new be(We))}}}}return m.length>0?Promise.reject(new zi(`Unable to connect to the server with any of the available transports. ${m.join(" ")}`,m)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(t){switch(t){case ue.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Yi(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case ue.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Zi(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case ue.LongPolling:return new Rn(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${t}.`)}}_startTransport(t,e){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=n=>C(this,null,function*(){let o=!1;if(this.features.reconnect)try{this.features.disconnected(),yield this.transport.connect(t,e),yield this.features.resend()}catch{o=!0}else{this._stopConnection(n);return}o&&this._stopConnection(n)}):this.transport.onclose=n=>this._stopConnection(n),this.transport.connect(t,e)}_resolveTransportOrError(t,e,n,o){let c=ue[t.transport];if(c==null)return this._logger.log(b.Debug,`Skipping transport '${t.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${t.transport}' because it is not supported by this client.`);if(fp(e,c))if(t.transferFormats.map(_=>pe[_]).indexOf(n)>=0){if(c===ue.WebSockets&&!this._options.WebSocket||c===ue.ServerSentEvents&&!this._options.EventSource)return this._logger.log(b.Debug,`Skipping transport '${ue[c]}' because it is not supported in your environment.'`),new Fi(`'${ue[c]}' is not supported in your environment.`,c);this._logger.log(b.Debug,`Selecting transport '${ue[c]}'.`);try{return this.features.reconnect=c===ue.WebSockets?o:void 0,this._constructTransport(c)}catch(_){return _}}else return this._logger.log(b.Debug,`Skipping transport '${ue[c]}' because it does not support the requested transfer format '${pe[n]}'.`),new Error(`'${ue[c]}' does not support ${pe[n]}.`);else return this._logger.log(b.Debug,`Skipping transport '${ue[c]}' because it was disabled by the client.`),new Ri(`'${ue[c]}' is disabled by the client.`,c)}_isITransport(t){return t&&typeof t=="object"&&"connect"in t}_stopConnection(t){if(this._logger.log(b.Debug,`HttpConnection.stopConnection(${t}) called while in state ${this._connectionState}.`),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(b.Debug,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(b.Warning,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${t}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),t?this._logger.log(b.Error,`Connection disconnected with error '${t}'.`):this._logger.log(b.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(e=>{this._logger.log(b.Error,`TransportSendQueue.stop() threw error '${e}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(e){this._logger.log(b.Error,`HttpConnection.onclose(${t}) threw error '${e}'.`)}}}_resolveUrl(t){if(t.lastIndexOf("https://",0)===0||t.lastIndexOf("http://",0)===0)return t;if(!ne.isBrowser)throw new Error(`Cannot resolve '${t}'.`);let e=window.document.createElement("a");return e.href=t,this._logger.log(b.Information,`Normalizing '${t}' to '${e.href}'.`),e.href}_resolveNegotiateUrl(t){let e=new URL(t);e.pathname.endsWith("/")?e.pathname+="negotiate":e.pathname+="/negotiate";let n=new URLSearchParams(e.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?n.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&n.append("useStatefulReconnect","true"),e.search=n.toString(),e.toString()}};function fp(i,t){return!i||(t&i)!==0}var Wo=class i{constructor(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new cn,this._transportResult=new cn,this._sendLoopPromise=this._sendLoop()}send(t){return this._bufferData(t),this._transportResult||(this._transportResult=new cn),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof t}`);this._buffer.push(t),this._sendBufferedData.resolve()}_sendLoop(){return C(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new cn;let t=this._transportResult;this._transportResult=void 0;let e=typeof this._buffer[0]=="string"?this._buffer.join(""):i._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(e),t.resolve()}catch(n){t.reject(n)}}})}static _concatBuffers(t){let e=t.map(c=>c.byteLength).reduce((c,m)=>c+m),n=new Uint8Array(e),o=0;for(let c of t)n.set(new Uint8Array(c),o),o+=c.byteLength;return n.buffer}},cn=class{constructor(){this.promise=new Promise((t,e)=>[this._resolver,this._rejecter]=[t,e])}resolve(){this._resolver()}reject(t){this._rejecter(t)}};var hp="json",Ji=class{constructor(){this.name=hp,this.version=2,this.transferFormat=pe.Text}parseMessages(t,e){if(typeof t!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];e===null&&(e=Xe.instance);let n=Ue.parse(t),o=[];for(let c of n){let m=JSON.parse(c);if(typeof m.type!="number")throw new Error("Invalid payload.");switch(m.type){case B.Invocation:this._isInvocationMessage(m);break;case B.StreamItem:this._isStreamItemMessage(m);break;case B.Completion:this._isCompletionMessage(m);break;case B.Ping:break;case B.Close:break;case B.Ack:this._isAckMessage(m);break;case B.Sequence:this._isSequenceMessage(m);break;default:e.log(b.Information,"Unknown message type '"+m.type+"' ignored.");continue}o.push(m)}return o}writeMessage(t){return Ue.write(JSON.stringify(t))}_isInvocationMessage(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),t.invocationId!==void 0&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),t.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")}_isAckMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(t){if(typeof t.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(t,e){if(typeof t!="string"||t==="")throw new Error(e)}};var _p={trace:b.Trace,debug:b.Debug,info:b.Information,information:b.Information,warn:b.Warning,warning:b.Warning,error:b.Error,critical:b.Critical,none:b.None};function vp(i){let t=_p[i.toLowerCase()];if(typeof t<"u")return t;throw new Error(`Unknown log level: ${i}`)}var An=class{configureLogging(t){if(Q.isRequired(t,"logging"),bp(t))this.logger=t;else if(typeof t=="string"){let e=vp(t);this.logger=new Dt(e)}else this.logger=new Dt(t);return this}withUrl(t,e){return Q.isRequired(t,"url"),Q.isNotEmpty(t,"url"),this.url=t,typeof e=="object"?this.httpConnectionOptions=O(O({},this.httpConnectionOptions),e):this.httpConnectionOptions=$(O({},this.httpConnectionOptions),{transport:e}),this}withHubProtocol(t){return Q.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new Fn(t):this.reconnectPolicy=t:this.reconnectPolicy=new Fn,this}withServerTimeout(t){return Q.isRequired(t,"milliseconds"),this._serverTimeoutInMilliseconds=t,this}withKeepAliveInterval(t){return Q.isRequired(t,"milliseconds"),this._keepAliveIntervalInMilliseconds=t,this}withStatefulReconnect(t){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=t?.bufferSize,this}build(){let t=this.httpConnectionOptions||{};if(t.logger===void 0&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let e=new Ki(this.url,t);return Tn.create(e,this.logger||Xe.instance,this.protocol||new Ji,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}};function bp(i){return i.log!==void 0}var ln=class i{hubConnection=null;connectionStateSubject=new fe(!1);reconnectAttempts=0;maxReconnectAttempts=5;reconnectInterval=2e3;connectionState$=this.connectionStateSubject.asObservable();constructor(){}connect(t){return C(this,null,function*(){if(!t){console.warn("Cannot connect to SignalR without userId");return}try{this.hubConnection||this.createConnection(),this.hubConnection?.state===K.Disconnected&&(yield this.hubConnection.start(),console.log("SignalR connected successfully"),yield this.hubConnection.invoke("Join",t),console.log(`Joined SignalR group for user: ${t}`),this.connectionStateSubject.next(!0),this.reconnectAttempts=0)}catch(e){console.error("Failed to connect to SignalR:",e),this.connectionStateSubject.next(!1),this.scheduleReconnect(t)}})}createConnection(){this.hubConnection=new An().withUrl("http://localhost:5241/hubs/conversations",{withCredentials:!0,skipNegotiation:!1}).configureLogging(b.Information).withAutomaticReconnect([0,2e3,1e4,3e4]).build(),this.setupConnectionEventHandlers()}setupConnectionEventHandlers(){this.hubConnection&&(this.hubConnection.onreconnecting(t=>{console.log("SignalR reconnecting...",t),this.connectionStateSubject.next(!1)}),this.hubConnection.onreconnected(t=>{console.log("SignalR reconnected with connection ID:",t),this.connectionStateSubject.next(!0),this.reconnectAttempts=0}),this.hubConnection.onclose(t=>{console.log("SignalR connection closed:",t),this.connectionStateSubject.next(!1)}))}scheduleReconnect(t){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached. Giving up.");return}this.reconnectAttempts++;let e=this.reconnectInterval*Math.pow(2,this.reconnectAttempts-1);console.log(`Scheduling reconnection attempt ${this.reconnectAttempts} in ${e}ms`),setTimeout(()=>{this.connect(t)},e)}disconnect(){return C(this,null,function*(){if(this.hubConnection)try{yield this.hubConnection.stop(),console.log("SignalR disconnected"),this.connectionStateSubject.next(!1)}catch(t){console.error("Error disconnecting SignalR:",t)}})}on(t,e){this.hubConnection?this.hubConnection.on(t,e):console.warn(`Cannot register listener for ${t}: connection not established`)}off(t){this.hubConnection&&this.hubConnection.off(t)}invoke(t,...e){return C(this,null,function*(){if(this.hubConnection?.state===K.Connected)try{return yield this.hubConnection.invoke(t,...e)}catch(n){throw console.error(`Error invoking ${t}:`,n),n}else{let n=`Cannot invoke ${t}: SignalR not connected`;throw console.warn(n),new Error(n)}})}send(t,...e){return C(this,null,function*(){if(this.hubConnection?.state===K.Connected)try{yield this.hubConnection.send(t,...e)}catch(n){throw console.error(`Error sending ${t}:`,n),n}else{let n=`Cannot send ${t}: SignalR not connected`;throw console.warn(n),new Error(n)}})}isConnected(){return this.hubConnection?.state===K.Connected}getConnectionState(){return this.hubConnection?.state||K.Disconnected}getConnectionId(){return this.hubConnection?.connectionId||null}notifyNewMessage(t,e){return C(this,null,function*(){yield this.invoke("NotifyNewMessage",t,e)})}notifyNewRequest(t,e){return C(this,null,function*(){yield this.invoke("NotifyNewRequest",t,e)})}notifyNewReply(t,e){return C(this,null,function*(){yield this.invoke("NotifyNewReply",t,e)})}joinGroup(t){return C(this,null,function*(){yield this.invoke("JoinGroup",t)})}leaveGroup(t){return C(this,null,function*(){yield this.invoke("LeaveGroup",t)})}onNewMessage(t){this.on("ReceiveNewMessage",t)}onMessageRead(t){this.on("ReceiveMessageRead",t)}onNewRequest(t){this.on("ReceiveNewRequest",t)}onRequestStatusChanged(t){this.on("ReceiveNewRequestAccepted",t),this.on("ReceiveNewRequestRejected",t),this.on("ReceiveNewRequestCancelled",t)}onNewReply(t){this.on("ReceiveNewReply",t)}onReplyStatusChanged(t){this.on("ReceiveNewReplyAccepted",t),this.on("ReceiveNewReplyRejected",t),this.on("ReceiveNewReplyCancelled",t)}removeMessageListeners(){this.off("ReceiveNewMessage"),this.off("ReceiveMessageRead")}removeRequestListeners(){this.off("ReceiveNewRequest"),this.off("ReceiveNewRequestAccepted"),this.off("ReceiveNewRequestRejected"),this.off("ReceiveNewRequestCancelled")}removeReplyListeners(){this.off("ReceiveNewReply"),this.off("ReceiveNewReplyAccepted"),this.off("ReceiveNewReplyRejected"),this.off("ReceiveNewReplyCancelled")}onServiceCompleted(t){this.on("ServiceCompleted",t)}onReviewReceived(t){this.on("ReviewReceived",t)}onReviewPrompt(t){this.on("ReviewPrompt",t)}onServiceStatusChanged(t){this.on("ServiceStatusChanged",t)}removeReviewListeners(){this.off("ServiceCompleted"),this.off("ReviewReceived"),this.off("ReviewPrompt"),this.off("ServiceStatusChanged")}removeAllListeners(){this.removeMessageListeners(),this.removeRequestListeners(),this.removeReplyListeners(),this.removeReviewListeners()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var dn=class i{constructor(t){this.signalRService=t}notificationSubject=new xe;conversationUpdateSubject=new xe;notification$=this.notificationSubject.asObservable();conversationUpdate$=this.conversationUpdateSubject.asObservable();setupListeners(t){this.signalRService.removeAllListeners(),this.signalRService.onNewMessage(e=>{this.handleNewMessageReceived(e,t)}),this.signalRService.onMessageRead(e=>{this.handleMessageRead(e)}),this.signalRService.onNewRequest(e=>{this.handleNewRequestReceived(e)}),this.signalRService.on("ReceiveRequestAccepted",e=>{this.handleRequestAccepted(e)}),this.signalRService.on("ReceiveRequestRejected",e=>{this.handleRequestRejected(e)}),this.signalRService.on("ReceiveRequestCompleted",e=>{this.handleRequestRejected(e)}),this.signalRService.on("ReceiveRequestCancelled",e=>{this.handleRequestCancelled(e)}),this.signalRService.onNewReply(e=>{this.handleNewReplyReceived(e)}),this.signalRService.on("ReceiveReplyAccepted",e=>{this.handleReplyAccepted(e)}),this.signalRService.on("ReceiveReplyRejected",e=>{this.handleReplyRejected(e)}),this.signalRService.on("ReceiveReplyCancelled",e=>{this.handleReplyCancelled(e)}),this.signalRService.onServiceCompleted(e=>{this.handleServiceCompleted(e)}),this.signalRService.onReviewReceived(e=>{this.handleReviewReceived(e)}),this.signalRService.onReviewPrompt(e=>{this.handleReviewPrompt(e)}),this.signalRService.onServiceStatusChanged(e=>{this.handleServiceStatusChanged(e)})}sendMessageNotification(t,e,n,o,c){return C(this,null,function*(){try{let m={MessageId:e,SenderId:c,RecipientId:t,Content:n,SenderName:o,SentAt:new Date,Message:"You have a new message"};yield this.signalRService.notifyNewMessage(t,m)}catch(m){console.error("Failed to send message notification:",m)}})}cleanup(){this.signalRService.removeAllListeners()}handleNewMessageReceived(t,e){let{SenderId:n,Content:o,SenderName:c}=t;if(n!==e){let m=o.length>50?o.substring(0,50)+"...":o;this.notificationSubject.next({type:"info",message:`New message from ${c}: ${m}`})}this.conversationUpdateSubject.next({type:"refresh-both"})}handleMessageRead(t){this.conversationUpdateSubject.next({type:"refresh-current"})}handleNewRequestReceived(t){let{SenderName:e}=t;this.notificationSubject.next({type:"info",message:`New service request from ${e}`}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleRequestAccepted(t){this.notificationSubject.next({type:"success",message:"Your service request has been accepted!"}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleRequestRejected(t){this.notificationSubject.next({type:"info",message:"Your service request has been declined."}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleRequestCancelled(t){this.notificationSubject.next({type:"warning",message:"A service request has been cancelled."}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleNewReplyReceived(t){let{SpecialistName:e,Price:n,StartDate:o}=t,c=new Date(o).toLocaleDateString();this.notificationSubject.next({type:"info",message:`New offer from ${e}: $${n} (${c})`}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleReplyAccepted(t){this.notificationSubject.next({type:"success",message:"Great! Your service offer has been accepted."}),this.notificationSubject.next({type:"info",message:"Payment processing has begun."}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleReplyRejected(t){this.notificationSubject.next({type:"info",message:"Your service offer has been declined."}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleReplyCancelled(t){this.notificationSubject.next({type:"warning",message:"A service offer has been cancelled."}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleServiceCompleted(t){console.log("\u{1F389} Service completed event received:",t);let{ServiceDescription:e,TransferCompleted:n,Message:o}=t;this.notificationSubject.next({type:"success",message:o||`Serviciul "${e}" a fost finalizat cu succes! ${n?"Plata a fost transferat\u0103.":""}`}),this.conversationUpdateSubject.next({type:"service-completed",data:t}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleReviewReceived(t){console.log("\u2B50 Review received event:",t);let{ReviewerName:e,Rating:n,Message:o}=t;this.notificationSubject.next({type:"success",message:o||`Ai primit o nou\u0103 recenzie de ${n} stele de la ${e}!`})}handleReviewPrompt(t){console.log("\u{1F4DD} Review prompt event received:",t);let{ReviewTargetName:e,ReviewTargetRole:n,TaskId:o}=t,c=n==="specialist"?"specialistul":"clientul";this.notificationSubject.next({type:"info",message:`Po\u021Bi l\u0103sa o recenzie pentru ${c} ${e}!`}),this.conversationUpdateSubject.next({type:"review-prompt",data:t})}handleServiceStatusChanged(t){console.log("\u{1F504} Service status changed event:",t);let{NewStatus:e,OldStatus:n,Message:o,HasMoneyTransfer:c}=t,m="info",_=`Status serviciu actualizat: ${e}`;switch(e){case"Completed":m="success",_=c?"Serviciul a fost finalizat \u0219i plata a fost transferat\u0103!":"Serviciul a fost finalizat cu succes!";break;case"Cancelled":m="warning",_="Serviciul a fost anulat.";break;case"Reviewed":m="success",_="Procesul de recenzie a fost finalizat. Mul\u021Bumim!";break;case"Confirmed":m="info",_="Serviciul este acum \xEEn desf\u0103\u0219urare.";break}this.notificationSubject.next({type:m,message:o||_}),this.conversationUpdateSubject.next({type:"refresh-both"})}static \u0275fac=function(e){return new(e||i)(N(ln))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var pn=class i{exchangesSubject=new fe([]);conversationItemsSubject=new fe([]);selectedUserSubject=new fe(null);selectedUserInfoSubject=new fe(null);loadingSubject=new fe(!1);exchanges$=this.exchangesSubject.asObservable();conversationItems$=this.conversationItemsSubject.asObservable();selectedUser$=this.selectedUserSubject.asObservable();selectedUserInfo$=this.selectedUserInfoSubject.asObservable();loading$=this.loadingSubject.asObservable();conversationListMeta={totalCount:0,hasMore:!1};messagesMeta={totalCount:0,hasMore:!1};selectedConversationIdSubject=new fe(null);selectedConversationId$=this.selectedConversationIdSubject.asObservable();get exchanges(){return this.exchangesSubject.value}get conversationItems(){return this.conversationItemsSubject.value}get selectedUser(){return this.selectedUserSubject.value}get selectedUserInfo(){return this.selectedUserInfoSubject.value}get isLoading(){return this.loadingSubject.value}get selectedConversationId(){return this.selectedConversationIdSubject.value}setExchanges(t,e=!1){let n=e?[...this.exchanges,...t]:t;this.exchangesSubject.next(n)}setConversationItems(t,e=!1){let n=e?[...t,...this.conversationItems]:[...this.conversationItems,...t];this.conversationItemsSubject.next(n)}addOptimisticMessage(t,e){let n={id:`temp_${Date.now()}`,conversationId:"temp",senderId:e,type:"message",createdAt:new Date,data:{Content:t.trim(),SenderId:e,CreatedAt:new Date,IsRead:!1}},o=this.conversationItems;return this.conversationItemsSubject.next([...o,n]),n}removeOptimisticMessage(t){let e=this.conversationItems.filter(n=>n.id!==t);this.conversationItemsSubject.next(e)}updateMessageReadStatus(t,e){let n=this.conversationItems.map(o=>o.id===t&&o.type==="message"?$(O({},o),{data:$(O({},o.data),{IsRead:!0,ReadAt:e})}):o);this.conversationItemsSubject.next(n)}setSelectedUser(t){this.selectedUserSubject.next(t)}setSelectedConversation(t,e,n){this.selectedConversationIdSubject.next(t),this.selectedUserSubject.next(e),this.selectedUserInfoSubject.next(n)}setSelectedUserInfo(t){this.selectedUserInfoSubject.next(t)}setLoading(t){this.loadingSubject.next(t)}clearConversationItems(){this.conversationItemsSubject.next([])}clearAll(){this.exchangesSubject.next([]),this.conversationItemsSubject.next([]),this.selectedConversationIdSubject.next(null),this.selectedUserSubject.next(null),this.selectedUserInfoSubject.next(null),this.loadingSubject.next(!1),this.conversationListMeta={totalCount:0,hasMore:!1},this.messagesMeta={totalCount:0,hasMore:!1}}getTypedConversationItems(){let t=this.conversationItems;return t?t.map(e=>{let n=this.deserializeItem(e),o=n?e.type:"unknown";return{item:e,typed:n,type:o}}):[]}deserializeItem(t){if(!t.data||!t.type)return null;let e=t.data,n={id:t.id,senderId:t.senderId||e.SenderId||e.senderId};try{switch(t.type.toLowerCase()){case"message":return $(O({},n),{content:e.Content||e.content||"",createdAt:this.convertTimestamp(e.CreatedAt||e.createdAt||t.createdAt),isRead:!!(e.IsRead??e.isRead??!1)});case"request":return $(O({},n),{requestedStartDate:this.convertTimestamp(e.RequestedStartDate||e.requestedStartDate),description:e.Description||e.description||"",status:e.Status||e.status||"Pending",senderAddress:e.Address||e.address,senderPhoneNumber:e.PhoneNumber||e.phoneNumber});case"reply":return $(O({},n),{requestId:e.RequestId||e.requestId||"",startDate:this.convertTimestamp(e.StartDate||e.startDate),endDate:this.convertTimestamp(e.EndDate||e.endDate),price:Number(e.Price||e.price||0),status:e.Status||e.status||"Pending",serviceTask:e.ServiceTask||e.serviceTask,specialistId:e.SpecialistId||e.specialistId,acceptedAt:e.AcceptedAt?this.convertTimestamp(e.AcceptedAt):void 0,rejectedAt:e.RejectedAt?this.convertTimestamp(e.RejectedAt):void 0});case"photo":return $(O({},n),{url:e.Url||e.url||e.DownloadUrl||e.downloadUrl||"",fileName:e.FileName||e.fileName||e.Name||e.name||"Unknown",contentType:e.ContentType||e.contentType||e.MimeType||e.mimeType||"image/jpeg",caption:e.Caption||e.caption||"",createdAt:this.convertTimestamp(e.CreatedAt||e.createdAt||t.createdAt),fileSize:Number(e.FileSize||e.fileSize||e.Size||e.size||0)});default:return console.warn(`Unknown conversation item type: ${t.type}`,t),null}}catch(o){return console.error("Error deserializing conversation item:",o,t),null}}convertTimestamp(t){return t instanceof Date?t:t&&typeof t.toDate=="function"?t.toDate():t&&typeof t.seconds=="number"?new Date(t.seconds*1e3):typeof t=="string"?new Date(t):new Date}static \u0275fac=function(e){return new(e||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Qi=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/Message";sendMessage(t,e){let n=this.authService.getToken(),o=new z({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/Add/${t}`,e,{headers:o})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var mn=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/Reply";addReply(t,e){let n=this.authService.getToken(),o=new z({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/Add/${t}`,e,{headers:o})}getReply(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/GetById/${t}`,{headers:n})}updateReply(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Update/${t.id}`,t,{headers:n})}acceptReply(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return console.log(e),this.http.patch(`${this.baseUrl}/Accept/${t}`,{},{headers:n})}rejectReply(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Reject/${t}`,{},{headers:n})}cancelReply(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Cancel/${t}`,{headers:n})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Xi=class i{constructor(t,e,n,o,c){this.messageService=t;this.requestService=e;this.replyService=n;this.signalRHandler=o;this.messagesState=c}refreshTrigger=new xe;refresh$=this.refreshTrigger.asObservable();sendMessage(t,e,n){return C(this,null,function*(){if(!t.trim())return{success:!1,error:"Message content cannot be empty"};let o=this.messagesState.addOptimisticMessage(t.trim(),n.id);try{return(yield this.messageService.sendMessage(e,{content:t.trim()}).toPromise())?.response?.id?(this.triggerRefresh(),{success:!0}):(this.messagesState.removeOptimisticMessage(o.id),{success:!1,error:"Failed to send message"})}catch(c){return console.error("Error sending message:",c),this.messagesState.removeOptimisticMessage(o.id),{success:!1,error:"Failed to send message, but the second one"}}})}acceptRequest(t){return C(this,null,function*(){try{return yield this.requestService.acceptRequest(t).toPromise(),this.triggerRefresh(),{success:!0}}catch(e){return console.error("Error accepting request:",e),{success:!1,error:"Failed to accept request"}}})}rejectRequest(t){return C(this,null,function*(){try{return yield this.requestService.rejectRequest(t).toPromise(),this.triggerRefresh(),{success:!0}}catch(e){return console.error("Error rejecting request:",e),{success:!1,error:"Failed to reject request"}}})}acceptReply(t){return C(this,null,function*(){try{return yield this.replyService.acceptReply(t),this.triggerRefresh(),{success:!0}}catch(e){return console.error("Error accepting reply:",e),{success:!1,error:"Failed to accept reply"}}})}rejectReply(t){return C(this,null,function*(){try{return yield this.replyService.rejectReply(t).toPromise(),this.triggerRefresh(),{success:!0}}catch(e){return console.error("Error rejecting reply:",e),{success:!1,error:"Failed to reject reply"}}})}submitReply(t,e){return C(this,null,function*(){try{return yield this.replyService.addReply(t,e).toPromise(),this.triggerRefresh(),{success:!0}}catch(n){return console.error("Error submitting reply:",n),{success:!1,error:"Failed to submit reply"}}})}triggerRefresh(){console.log("Triggering refresh of conversations and messages"),this.refreshTrigger.next()}static \u0275fac=function(e){return new(e||i)(N(Qi),N(Qt),N(mn),N(dn),N(pn))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var eo=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/ServiceTask";addTaskFromPayment(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.post(`${this.baseUrl}/AddTaskToPayment/${t}`,{},{headers:n})}getServiceTask(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/GetById/${t}`,{headers:n})}getCurrentServiceTask(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/GetCurrent/${t}`,{headers:n})}updateServiceTask(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Update/${t.id}`,t,{headers:n})}completeServiceTask(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Complete/${t}`,{},{headers:n})}cancelServiceTask(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.patch(`${this.baseUrl}/Cancel/${t}`,{},{headers:n})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var un=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/Review";addReview(t,e){let n=this.authService.getToken(),o=new z({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/Add/${t}`,e,{headers:o})}getReviews(t,e){let n=this.authService.getToken(),o=new z({Authorization:`Bearer ${n}`}),c=new He().set("page",t).set("pageSize",e);return this.http.get(`${this.baseUrl}/GetPage`,{params:c,headers:o})}getReview(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/GetById/${t}`,{headers:n})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var Mp=i=>["/specialist",i],wp=i=>({"payment-active":i});function Sp(i,t){i&1&&(a(0,"div",12),y(1,"div",13),a(2,"p"),s(3,"Se \xEEncarc\u0103 conversa\u021Biile..."),r()())}function Pp(i,t){if(i&1&&(a(0,"div",20),s(1),R(2,"slice"),r()),i&2){let e=p().$implicit;l(),M(" ",rr(2,1,e.lastMessage,0,30),"... ")}}function Op(i,t){if(i&1&&(a(0,"div",21),s(1),r()),i&2){let e=p().$implicit;l(),M(" ",e.unreadCount," ")}}function kp(i,t){if(i&1){let e=x();a(0,"div",14),R(1,"async"),u("click",function(){let o=g(e).$implicit,c=p();return f(c.selectConversation(o))}),y(2,"img",15),a(3,"div",16)(4,"span",17),s(5),r(),h(6,Pp,3,5,"div",18),r(),h(7,Op,2,1,"div",19),r()}if(i&2){let e=t.$implicit,n=p();H("active",e.userId===Z(1,7,n.selectedUser$)),l(2),d("src",e.userProfilePictureUrl||"assets/avatar.svg",de)("alt",e.userFullName),l(3),P(e.userFullName),l(),d("ngIf",e.lastMessage),l(),d("ngIf",e.unreadCount&&e.unreadCount>0)}}function Ep(i,t){i&1&&(a(0,"span"),s(1,"\xCEncarc\u0103 mai multe conversa\u021Bii"),r())}function Ip(i,t){i&1&&(a(0,"span",25),y(1,"div",26),s(2," Se \xEEncarc\u0103... "),r())}function Dp(i,t){if(i&1){let e=x();a(0,"button",22),R(1,"async"),u("click",function(){g(e);let o=p();return f(o.loadMoreExchanges())}),h(2,Ep,2,0,"span",23),R(3,"async"),h(4,Ip,3,0,"span",24),R(5,"async"),r()}if(i&2){let e=p();d("disabled",Z(1,3,e.loading$)===!0),l(2),d("ngIf",Z(3,5,e.loading$)===!1),l(2),d("ngIf",Z(5,7,e.loading$)===!0)}}function Tp(i,t){i&1&&(a(0,"div",49),y(1,"div",50),a(2,"p"),s(3,"Se \xEEncarc\u0103 mesajele..."),r()())}function Fp(i,t){i&1&&(a(0,"span"),s(1,"\xCEncarc\u0103 mesaje mai vechi"),r())}function Rp(i,t){i&1&&(a(0,"span",25),y(1,"div",26),s(2," Se \xEEncarc\u0103... "),r())}function Ap(i,t){if(i&1){let e=x();a(0,"button",51),R(1,"async"),u("click",function(){g(e);let o=p(2);return f(o.loadMoreMessages())}),h(2,Fp,2,0,"span",23),R(3,"async"),h(4,Rp,3,0,"span",24),R(5,"async"),r()}if(i&2){let e=p(2);d("disabled",Z(1,3,e.loading$)===!0),l(2),d("ngIf",Z(3,5,e.loading$)===!1),l(2),d("ngIf",Z(5,7,e.loading$)===!0)}}function zp(i,t){i&1&&(a(0,"div",52),y(1,"div",13),a(2,"p"),s(3,"Se \xEEncarc\u0103 mesaje mai vechi..."),r()())}function Vp(i,t){if(i&1&&y(0,"app-message-bubble",59),i&2){let e=p().$implicit,n=p(2);d("message",n.asTypedMessage(e))("currentUserId",n.userId)}}function Np(i,t){if(i&1&&y(0,"app-photo-bubble",60),i&2){let e=p().$implicit,n=p(2);d("photoItem",n.asTypedPhoto(e))("currentUserId",n.userId)}}function Up(i,t){if(i&1){let e=x();a(0,"app-request-message",61),u("requestAccepted",function(){g(e);let o=p().$implicit,c=p(2);return f(c.acceptRequest(o.item.id))})("requestRejected",function(){g(e);let o=p().$implicit,c=p(2);return f(c.rejectRequest(o.item.id))})("makeOffer",function(){g(e);let o=p().$implicit,c=p(2);return f(c.showReplyForm(o.item.id))}),r()}if(i&2){let e=p().$implicit,n=p(2);d("request",n.asTypedRequest(e))("currentUserId",n.userId)}}function Lp(i,t){if(i&1){let e=x();a(0,"app-reply-message",62),u("replyAccepted",function(){g(e);let o=p().$implicit,c=p(2);return f(c.acceptReply(o.item.id))})("replyRejected",function(){g(e);let o=p().$implicit,c=p(2);return f(c.rejectReply(o.item.id))}),r()}if(i&2){let e=p().$implicit,n=p(2);d("reply",n.asTypedReply(e))("currentUserId",n.userId)}}function Bp(i,t){if(i&1&&(a(0,"div",63)(1,"p"),s(2),r()()),i&2){let e=p().$implicit;l(2),M("\u26A0\uFE0F Invalid message type (ID: ",e.item.id,")")}}function jp(i,t){if(i&1&&(ce(0)(1,53),h(2,Vp,1,2,"app-message-bubble",54)(3,Np,1,2,"app-photo-bubble",55)(4,Up,1,2,"app-request-message",56)(5,Lp,1,2,"app-reply-message",57)(6,Bp,3,1,"div",58),le()()),i&2){let e=t.$implicit;l(),d("ngSwitch",e.type),l(),d("ngSwitchCase","message"),l(),d("ngSwitchCase","photo"),l(),d("ngSwitchCase","request"),l(),d("ngSwitchCase","reply"),l(),d("ngSwitchCase","unknown")}}function qp(i,t){i&1&&(a(0,"div",64)(1,"div",65)(2,"span",66),s(3,"\u2B50"),r(),a(4,"span"),s(5,"Serviciul este complet - Recenzia a fost trimis\u0103"),r()()())}function $p(i,t){i&1&&(a(0,"div",67)(1,"div",68),s(2,"\u{1F4AC}"),r(),a(3,"p"),s(4,"Nu exist\u0103 mesaje \xEEnc\u0103. \xCEncepe conversa\u021Bia!"),r()())}function Wp(i,t){i&1&&(a(0,"div",69)(1,"div",70),y(2,"div",71),a(3,"span"),s(4,"Se trimite mesajul..."),r()()())}function Gp(i,t){i&1&&(a(0,"div",72)(1,"div",73),y(2,"span",74),a(3,"span"),s(4,"Reconectare \xEEn curs..."),r()()())}function Hp(i,t){i&1&&(a(0,"div",75),y(1,"div",76),r())}function Zp(i,t){i&1&&(a(0,"span"),s(1,"\u2192"),r())}function Yp(i,t){i&1&&y(0,"div",76)}function Kp(i,t){if(i&1){let e=x();a(0,"div",77)(1,"div",78),u("click",function(){g(e);let o=p(2);return f(o.hideReplyForm())}),r(),a(2,"div",79)(3,"app-reply-form",80),u("formSubmit",function(o){g(e);let c=p(2);return f(c.onReplySubmit(o))})("close",function(){g(e);let o=p(2);return f(o.hideReplyForm())}),r()()()}if(i&2){let e=p(2);l(3),d("replyForm",e.replyFormData)}}function Jp(i,t){if(i&1&&y(0,"app-service-payment",81),i&2){let e=p(2);d("ngClass",Ge(1,wp,e.showPaymentFlow))}}function Qp(i,t){if(i&1){let e=x();a(0,"app-service-message",85),u("taskCompleted",function(o){g(e);let c=p(3);return f(c.onServiceTaskCompleted(o))})("taskCancelled",function(o){g(e);let c=p(3);return f(c.onServiceTaskCancelled(o))})("openReviewForm",function(){g(e);let o=p(3);return f(o.openReviewForm())}),r()}if(i&2){let e=p(3);d("serviceTask",e.currentServiceTask)("replyId",e.currentServiceTask.replyId)}}function Xp(i,t){if(i&1){let e=x();a(0,"app-review-form",86),u("formSubmit",function(o){g(e);let c=p(3);return f(c.onReviewSubmit(o))})("close",function(){g(e);let o=p(3);return f(o.hideReviewForm())}),r()}if(i&2){let e=p(3);d("reviewForm",e.reviewFormData)}}function em(i,t){if(i&1){let e=x();a(0,"div",82)(1,"div",78),u("click",function(){g(e);let o=p(2);return f(o.isReviewFormVisible?o.hideReviewForm():o.hideServiceConfirmation())}),r(),h(2,Qp,1,2,"app-service-message",83)(3,Xp,1,1,"app-review-form",84),r()}if(i&2){let e=p(2);l(2),d("ngIf",!e.isReviewFormVisible),l(),d("ngIf",e.isReviewFormVisible)}}function tm(i,t){if(i&1){let e=x();a(0,"div",27)(1,"div",28)(2,"div"),s(3),r(),a(4,"div")(5,"button"),y(6,"img",29),r()()(),a(7,"div",30),h(8,Tp,4,0,"div",31),R(9,"async"),R(10,"async"),h(11,Ap,6,9,"button",32),R(12,"async"),h(13,zp,4,0,"div",33),R(14,"async"),R(15,"async"),h(16,jp,7,6,"ng-container",34)(17,qp,6,0,"div",35)(18,$p,5,0,"div",36),R(19,"async"),R(20,"async"),h(21,Wp,5,0,"div",37)(22,Gp,5,0,"div",38),R(23,"async"),r(),a(24,"div",39)(25,"button",40),R(26,"async"),u("click",function(){g(e);let o=p();return f(o.openMediaPicker())}),y(27,"img",41),h(28,Hp,2,0,"div",42),r(),a(29,"input",43),R(30,"async"),R(31,"async"),I("ngModelChange",function(o){g(e);let c=p();return E(c.messageContent,o)||(c.messageContent=o),f(o)}),u("keydown.enter",function(){g(e);let o=p();return f(o.sendMessage(o.messageContent))}),r(),a(32,"button",44),R(33,"async"),R(34,"async"),u("click",function(){g(e);let o=p();return f(o.sendMessage(o.messageContent))}),h(35,Zp,2,0,"span",23)(36,Yp,1,0,"div",45),r()(),h(37,Kp,4,1,"div",46)(38,Jp,1,3,"app-service-payment",47)(39,em,4,2,"div",48),r()}if(i&2){let e,n,o,c,m=t.ngIf,_=p();H("overlay-active",_.chatOverlayVisible||_.isReplyFormVisible),l(3),P(m.fullName),l(3),d("routerLink",Ge(51,Mp,m.userId)),l(),H("scroll-frozen",_.chatOverlayVisible||_.isReplyFormVisible),l(),d("ngIf",Z(9,25,_.loading$)===!0&&!((e=Z(10,27,_.conversationItems$))!=null&&e.length)),l(3),d("ngIf",_.messagesState.messagesMeta.hasMore&&((n=Z(12,29,_.conversationItems$))==null?null:n.length)),l(2),d("ngIf",Z(14,31,_.loading$)===!0&&((o=Z(15,33,_.conversationItems$))==null?null:o.length)&&_.messagesState.messagesMeta.hasMore),l(3),d("ngForOf",_.getTypedConversationItems())("ngForTrackBy",_.trackByConversationItem),l(),d("ngIf",_.hasSubmittedReview&&_.currentServiceTask),l(),d("ngIf",!((c=Z(19,35,_.conversationItems$))!=null&&c.length)&&Z(20,37,_.loading$)===!1),l(3),d("ngIf",_.isSendingMessage),l(),d("ngIf",Z(23,39,_.signalRService.connectionState$)===!1),l(3),d("disabled",Z(26,41,_.loading$)===!0||_.isUploadingPhoto),l(3),d("ngIf",_.isUploadingPhoto),l(),k("ngModel",_.messageContent),d("disabled",Z(30,43,_.loading$)===!0||_.isSendingMessage||_.isReplyFormVisible||_.isUploadingPhoto||Z(31,45,_.signalRService.connectionState$)===!1),l(3),d("disabled",!_.messageContent.trim()||Z(33,47,_.loading$)===!0||_.isSendingMessage||_.isUploadingPhoto||Z(34,49,_.signalRService.connectionState$)===!1),l(3),d("ngIf",!_.isSendingMessage),l(),d("ngIf",_.isSendingMessage),l(),d("ngIf",_.isReplyFormVisible),l(),d("ngIf",_.showPaymentFlow),l(),d("ngIf",_.isServiceConfirmationVisible&&_.currentServiceTask&&!_.hasSubmittedReview)}}function nm(i,t){i&1&&(a(0,"div",87)(1,"div",68),s(2,"\u{1F4AC}"),r(),a(3,"p"),s(4,"Selecteaz\u0103 o conversa\u021Bie pentru a \xEEncepe."),r()())}function im(i,t){if(i&1){let e=x();a(0,"div",88)(1,"div",89)(2,"div",90),s(3,"\u2705"),r(),a(4,"h3"),s(5,"Serviciul este complet!"),r(),a(6,"p"),s(7,"Mul\u021Bumim pentru recenzia ta!"),r(),a(8,"small"),s(9),r(),a(10,"button",91),u("click",function(){g(e);let o=p();return f(o.hasSubmittedReview=!1)}),s(11," \xD7 "),r()()()}if(i&2){let e=p();l(9),P(e.currentServiceTask.description||"Serviciu finalizat")}}function om(i,t){i&1&&(a(0,"div",92),y(1,"app-notification-display"),r())}var to=class i{constructor(t,e,n,o,c,m,_,w,A,j,ge,We,wu,Su,Pu,Ou){this.exchangeService=t;this.authService=e;this.userService=n;this.cdr=o;this.mockExchangeService=c;this.paymentFlowService=m;this.signalRService=_;this.signalRHandler=w;this.messagesState=A;this.conversationActions=j;this.notificationService=ge;this.taskService=We;this.photoService=wu;this.replyService=Su;this.paymentService=Pu;this.reviewService=Ou}destroy$=new xe;USE_MOCK_DATA=!1;conversationListPagination={page:1,pageSize:20};messagesPagination={page:1,pageSize:50};messageContent="";userId=null;currentUserDetails=null;isSendingMessage=!1;isReplyFormVisible=!1;isReviewFormVisible=!1;hasSubmittedReview=!1;currentRequestId=null;chatOverlayVisible=!1;replyFormData={day:null,month:null,year:null,startHour:null,startMinute:null,endHour:null,endMinute:null,price:null};reviewFormData={receiverUserId:"",rating:5,content:""};isServiceConfirmationVisible=!1;currentPaymentDetails;currentServiceTask;showPaymentFlow=!1;isUploadingPhoto=!1;selectedPhotoFile=null;photoCaption="";exchanges$;conversationItems$;selectedUser$;selectedUserInfo$;loading$;trackByConversation=(t,e)=>e.userId;trackByConversationItem=(t,e)=>e.item.id;ngOnInit(){return C(this,null,function*(){this.exchanges$=this.messagesState.exchanges$,this.conversationItems$=this.messagesState.conversationItems$,this.selectedUser$=this.messagesState.selectedUser$,this.selectedUserInfo$=this.messagesState.selectedUserInfo$,this.loading$=this.messagesState.loading$,this.userId=this.authService.getUserId(),yield this.initializeServices(),this.loadExchanges(),this.loadCurrentUserDetails(),setTimeout(()=>{this.loadServiceTaskForCurrentConversation()},2e3)})}ngOnDestroy(){this.signalRHandler.cleanup(),this.signalRService.disconnect(),this.messagesState.clearAll(),this.destroy$.next(),this.destroy$.complete()}getTypedConversationItems(){return this.messagesState.getTypedConversationItems()}asTypedMessage(t){return t.typed}asTypedRequest(t){return t.typed}asTypedPhoto(t){return t.typed}asTypedReply(t){return t.typed}refreshServiceTask(){return C(this,null,function*(){console.log("\u{1F504} Manually refreshing service task..."),yield this.loadCurrentServiceTaskFast()})}initializeServices(){return C(this,null,function*(){try{yield this.signalRService.connect(this.userId||void 0),this.signalRHandler.setupListeners(this.userId||""),this.signalRHandler.notification$.pipe(he(this.destroy$)).subscribe(t=>this.notificationService.showNotification(t)),this.signalRHandler.conversationUpdate$.pipe(he(this.destroy$)).subscribe(t=>this.handleConversationUpdate(t)),this.paymentFlowService.paymentFlow$.pipe(he(this.destroy$)).subscribe(t=>{console.log("\u{1F4B3} Payment flow state changed:",t),this.showPaymentFlow=t.isActive,this.cdr.detectChanges()}),this.conversationActions.refresh$.pipe(he(this.destroy$)).subscribe(()=>{this.refreshCurrentConversation(),this.loadExchanges(!1)}),this.subscribeToPaymentCompletion()}catch(t){console.error("Failed to initialize services:",t)}})}handleConversationUpdate(t){switch(t.type){case"refresh-current":this.refreshCurrentConversation();break;case"refresh-list":this.loadExchanges(!1);break;case"refresh-both":this.refreshCurrentConversation(),this.loadExchanges(!1);break;case"service-completed":this.handleServiceCompletedEvent(t.data);break;case"review-prompt":console.log("\u{1F4DD} Review prompt event received:",t.data),this.handleReviewPromptEvent(t.data);break}}handleServiceCompletedEvent(t){console.log("\u{1F389} Service completed event received:",t),setTimeout(()=>{this.loadCurrentServiceTaskFast()},500),this.notificationService.showNotification({type:"success",message:"Serviciul a fost finalizat cu succes! Po\u021Bi l\u0103sa o recenzie."})}handleReviewPromptEvent(t){console.log("\u{1F4DD} Review prompt event received:",t),this.currentServiceTask?.id===t.TaskId&&(this.notificationService.showNotification({type:"info",message:"Po\u021Bi l\u0103sa o recenzie pentru serviciul finalizat!"}),setTimeout(()=>{this.openReviewForm()},2e3))}openReviewForm(){return C(this,null,function*(){if(console.log("\u{1F4DD} Opening review form in service task place..."),console.log("\u{1F50D} Current service task state:",this.currentServiceTask),this.hasSubmittedReview){this.notificationService.showNotification({type:"info",message:"Ai trimis deja o recenzie pentru acest serviciu."});return}if(!this.currentServiceTask){console.log("\u{1F4CB} No service task loaded, attempting to load it...");try{if(yield this.loadCurrentServiceTaskFast(),yield new Promise(e=>setTimeout(e,500)),!this.currentServiceTask){console.error("\u274C Still no service task after loading attempt"),this.notificationService.showNotification({type:"error",message:"Nu s-a g\u0103sit serviciul pentru care s\u0103 la\u0219i recenzia. Asigur\u0103-te c\u0103 serviciul este finalizat."});return}}catch(e){console.error("\u274C Error loading service task for review:",e),this.notificationService.showNotification({type:"error",message:"Eroare la \xEEnc\u0103rcarea informa\u021Biilor despre serviciu."});return}}if(this.currentServiceTask.status!=="Completed"){this.notificationService.showNotification({type:"warning",message:"Recenziile pot fi f\u0103cute doar pentru serviciile finalizate."});return}let t=this.determineReviewReceiver();if(!t){console.error("\u274C Could not determine review receiver"),this.notificationService.showNotification({type:"error",message:"Nu s-a putut determina cui s\u0103 \xEEi dai recenzia."});return}console.log("\u{1F464} Review will be sent to:",t),this.reviewFormData={receiverUserId:t,rating:5,content:""},this.isReviewFormVisible=!0,this.cdr.detectChanges(),console.log("\u2705 Review form opened in service task place")})}hideReviewForm(){console.log("\u{1F504} Hiding review form, returning to service task"),this.isReviewFormVisible=!1,this.reviewFormData={receiverUserId:"",rating:5,content:""},this.cdr.detectChanges()}determineReviewReceiver(){if(!this.currentServiceTask||!this.userId)return console.error("\u274C Missing service task or user ID for review receiver determination"),null;let t=this.currentServiceTask;return this.userId===t.userId?(console.log("\u{1F464} Current user is CLIENT \u2192 will review SPECIALIST"),t.specialistId):this.userId===t.specialistId?(console.log("\u{1F464} Current user is SPECIALIST \u2192 will review CLIENT"),t.userId):(console.error("\u274C Current user is neither client nor specialist in this service task"),null)}subscribeToPaymentCompletion(){this.paymentFlowService.paymentCompleted$.pipe(he(this.destroy$)).subscribe(t=>{t&&this.handlePaymentCompletion(t)})}loadCurrentUserDetails(){this.userService.getUserProfile().subscribe({next:t=>{this.currentUserDetails=t.response||null},error:t=>{console.error("Error loading user details:",t)}})}loadExchanges(t=!1){t||(this.conversationListPagination.page=1,this.messagesState.setExchanges([],!1)),this.messagesState.setLoading(!0),(this.USE_MOCK_DATA?this.mockExchangeService:this.exchangeService).getExchanges(this.conversationListPagination).pipe(he(this.destroy$)).subscribe({next:n=>{if(n.response){let o=n.response;this.messagesState.setExchanges(o.data||[],t),this.messagesState.conversationListMeta={totalCount:o.totalCount,hasMore:this.messagesState.exchanges.length<o.totalCount},!t&&Array.isArray(o.data)&&o.data.length>0&&this.selectConversation(o.data[0])}this.messagesState.setLoading(!1),this.cdr.detectChanges()},error:n=>{console.error("Error loading conversations:",n),this.messagesState.setLoading(!1),this.cdr.detectChanges()}})}selectConversation(t){this.currentServiceTask=null,this.isServiceConfirmationVisible=!1,this.chatOverlayVisible=!1,this.hasSubmittedReview=!1,this.messagesState.setSelectedUserInfo({userId:t.userId,fullName:t.userFullName,profilePictureUrl:t.userProfilePictureUrl}),this.loadConversationMessages(t.userId),setTimeout(()=>{this.loadCurrentServiceTaskFast()},1e3)}loadConversationMessages(t,e=!1){e||(this.messagesPagination.page=1,this.messagesState.clearConversationItems());let n=this.USE_MOCK_DATA?this.mockExchangeService:this.exchangeService;this.messagesState.setSelectedUser(t),this.messagesState.setLoading(!0),n.getExchange(t,this.messagesPagination).pipe(he(this.destroy$)).subscribe({next:o=>{if(o.response){let c=o.response;this.messagesState.setConversationItems(c.data||[],e),this.messagesState.messagesMeta={totalCount:c.totalCount,hasMore:this.messagesState.conversationItems.length<c.totalCount}}this.messagesState.setLoading(!1),this.cdr.detectChanges()},error:o=>{console.error("Error loading conversation messages:",o),this.messagesState.setLoading(!1),this.cdr.detectChanges()}})}loadMoreExchanges(){this.messagesState.conversationListMeta.hasMore&&!this.messagesState.isLoading&&(this.conversationListPagination.page++,this.loadExchanges(!0))}loadMoreMessages(){let t=this.messagesState.selectedUser;t&&this.messagesState.messagesMeta.hasMore&&!this.messagesState.isLoading&&(this.messagesPagination.page++,this.loadConversationMessages(t,!0))}refreshCurrentConversation(){let t=this.messagesState.selectedUser;t&&this.loadConversationMessages(t,!1)}sendMessage(t){return C(this,null,function*(){let e=this.messagesState.selectedUser;if(!t.trim()||!e||this.isSendingMessage||!this.currentUserDetails)return;this.isSendingMessage=!0,this.cdr.detectChanges();let n=yield this.conversationActions.sendMessage(t.trim(),e,this.currentUserDetails);console.log(n),this.isSendingMessage=!1,n.success?(this.messageContent="",this.refreshCurrentConversation()):(this.messageContent=t.trim(),this.notificationService.showNotification({type:"error",message:n.error||"Failed to send message"})),this.cdr.detectChanges()})}acceptRequest(t){return C(this,null,function*(){let e=yield this.conversationActions.acceptRequest(t);e.success||this.notificationService.showNotification({type:"error",message:e.error||"Failed to accept request"})})}rejectRequest(t){return C(this,null,function*(){let e=yield this.conversationActions.rejectRequest(t);e.success||this.notificationService.showNotification({type:"error",message:e.error||"Failed to reject request"})})}acceptReply(t){return C(this,null,function*(){console.log("\u{1F680} Initiating payment flow for reply:",t);let e=yield this.conversationActions.acceptReply(t);if(!e.success){this.notificationService.showNotification({type:"error",message:e.error||"Failed to initiate payment for reply"});return}this.notificationService.showNotification({type:"info",message:"Payment required to confirm service booking. Please complete payment."}),this.triggerPaymentFlowForReply(t)})}rejectReply(t){return C(this,null,function*(){let e=yield this.conversationActions.rejectReply(t);e.success||this.notificationService.showNotification({type:"error",message:e.error||"Failed to reject reply"})})}showReplyForm(t){this.currentRequestId=t,this.isReplyFormVisible=!0,this.chatOverlayVisible=!0,this.replyFormData={day:null,month:null,year:null,startHour:null,startMinute:null,endHour:null,endMinute:null,price:null},this.cdr.detectChanges()}hideReplyForm(){this.isReplyFormVisible=!1,this.chatOverlayVisible=!1,this.currentRequestId=null,this.cdr.detectChanges()}onReplySubmit(t){return C(this,null,function*(){if(!this.currentRequestId){console.error("No current request ID for reply");return}let e=yield this.conversationActions.submitReply(this.currentRequestId,t);e.success?this.hideReplyForm():this.notificationService.showNotification({type:"error",message:e.error||"Failed to submit reply"})})}waitForConversationSelection(){return C(this,null,function*(){return new Promise(t=>{let e=()=>{let n=this.messagesState.selectedUser;console.log("\u23F3 Checking for selected user:",n),n?(console.log("\u2705 User selected:",n),t()):(console.log("\u23F3 Still waiting for user selection..."),setTimeout(e,500))};e()})})}loadServiceTaskForCurrentConversation(){return C(this,null,function*(){try{console.log("\u{1F504} Loading service task for current conversation..."),yield this.waitForConversationSelection(),yield this.loadCurrentServiceTaskFast()}catch(t){console.error("\u274C Error loading service task for conversation:",t)}})}loadCurrentServiceTaskFast(){return C(this,null,function*(){try{let t=this.messagesState.selectedUser;if(!t){console.log("\u274C No selected user to get service task for");return}console.log("\u26A1 Loading current service task for user:",t),this.hasSubmittedReview=!1;let e=yield Ce(this.taskService.getCurrentServiceTask(t));e?.response?(this.currentServiceTask=e.response,console.log("\u2705 Service task loaded instantly:",this.currentServiceTask),(this.currentServiceTask.hasUserReview||this.currentServiceTask.status==="ReviewCompleted")&&(console.log("\u{1F4DD} Review already exists for this service task"),this.hasSubmittedReview=!0),this.shouldShowServiceTask()?(this.showServiceConfirmation(),this.notificationService.showNotification({type:"success",message:"Service task loaded!"})):console.log("\u{1F6AB} Service task exists but should not be shown to user")):(console.log("\u2139\uFE0F No current service task found for this conversation"),this.currentServiceTask=null,this.isServiceConfirmationVisible=!1,this.chatOverlayVisible=!1,this.hasSubmittedReview=!1,e?.errorMessage&&(console.log("\u2139\uFE0F Details:",e.errorMessage.message),e.errorMessage.code!=="EntityNotFound"&&this.notificationService.showNotification({type:"warning",message:"Could not load service task details."})))}catch(t){console.error("\u274C Error loading current service task:",t),this.notificationService.showNotification({type:"error",message:"Failed to check for service tasks."})}})}shouldShowServiceTask(){return!this.currentServiceTask||!this.userId?!1:this.hasSubmittedReview?(console.log("\u{1F4DD} Review already submitted, hiding service task"),!1):this.currentServiceTask.status==="ReviewCompleted"||this.currentServiceTask.hasUserReview===!0?(console.log("\u{1F4DD} Review already exists for this task, hiding service task"),!1):this.currentServiceTask.status!=="Completed"?(console.log("\u{1F6A7} Service task not completed yet, hiding service task overlay"),!1):this.userId===this.currentServiceTask.userId||this.userId===this.currentServiceTask.specialistId}showServiceConfirmation(){if(!this.currentServiceTask){console.warn("\u26A0\uFE0F Attempting to show service confirmation without service task");return}if(!this.shouldShowServiceTask()){console.warn("\u26A0\uFE0F Current user should not see this service task");return}console.log("\u{1F389} Showing service confirmation with task details"),console.log("\u{1F464} Current user role in service:",{userId:this.userId,isClient:this.userId===this.currentServiceTask.userId,isSpecialist:this.userId===this.currentServiceTask.specialistId}),this.isServiceConfirmationVisible=!0,this.chatOverlayVisible=!0}hideServiceConfirmation(){console.log("\u{1F504} Hiding service confirmation"),this.isReviewFormVisible||(this.isServiceConfirmationVisible=!1,this.chatOverlayVisible=!1),this.cdr.detectChanges()}onServiceTaskCompleted(t){return C(this,null,function*(){if(console.log("\u{1F389} Service task completed locally:",t),!this.currentServiceTask){console.error("\u274C No current service task to complete");return}try{if(this.notificationService.showNotification({type:"info",message:"Se finalizeaz\u0103 serviciul \u0219i se proceseaz\u0103 transferul de bani..."}),console.log("\u{1F4DE} Calling backend to complete service task:",t.taskId),yield Ce(this.taskService.completeServiceTask(t.taskId)))console.log("\u2705 Service task completed successfully on backend"),this.currentServiceTask.status="Completed",this.currentServiceTask.completedAt=new Date,this.notificationService.showNotification({type:"success",message:"Serviciul a fost finalizat cu succes! Plata este \xEEn curs de transfer."});else throw new Error("Failed to complete service task")}catch(e){console.error("\u274C Error completing service task:",e),this.notificationService.showNotification({type:"error",message:"A ap\u0103rut o eroare la finalizarea serviciului. Te rug\u0103m s\u0103 \xEEncerci din nou."})}this.cdr.detectChanges()})}onServiceTaskCancelled(t){console.log("\u274C Service task cancelled:",t),this.currentServiceTask&&(this.currentServiceTask.status="Cancelled",this.currentServiceTask.cancelledAt=new Date,this.notificationService.showNotification({type:"warning",message:"Serviciul a fost anulat. Se proceseaz\u0103 rambursarea..."})),this.cdr.detectChanges()}onReviewSubmit(t){return C(this,null,function*(){if(console.log("\u{1F4DD} Submitting review with data:",t),!this.currentServiceTask){console.error("\u274C No service task available for review submission"),this.notificationService.showNotification({type:"error",message:"Nu s-a g\u0103sit serviciul pentru care s\u0103 la\u0219i recenzia."});return}if(!t.receiverUserId||!t.rating||t.rating<1||t.rating>5){this.notificationService.showNotification({type:"error",message:"Date de recenzie invalide. Te rug\u0103m s\u0103 completezi toate c\xE2mpurile."});return}try{if(console.log("\u{1F4E4} Sending review to backend..."),yield Ce(this.reviewService.addReview(this.currentServiceTask.id,{receiverUserId:t.receiverUserId,rating:t.rating,content:t.content})))console.log("\u2705 Review submitted successfully"),this.hasSubmittedReview=!0,this.isReviewFormVisible=!1,this.isServiceConfirmationVisible=!1,this.chatOverlayVisible=!1,this.notificationService.showNotification({type:"success",message:"Recenzia a fost trimis\u0103 cu succes! Mul\u021Bumim pentru feedback."}),this.currentServiceTask&&(this.currentServiceTask.status="ReviewCompleted",this.currentServiceTask.hasUserReview=!0),this.reviewFormData={receiverUserId:"",rating:5,content:""};else throw new Error("Failed to submit review - no response")}catch(e){console.error("\u274C Error submitting review:",e),this.notificationService.showNotification({type:"error",message:"A ap\u0103rut o eroare la trimiterea recenziei. Te rug\u0103m s\u0103 \xEEncerci din nou."})}this.cdr.detectChanges()})}triggerPaymentFlowForReply(t){return C(this,null,function*(){try{let e=yield Ce(this.replyService.getReply(t));if(!e||!e.response){console.error("Reply not found"),this.triggerTestPaymentFlow(t);return}let n=e.response,o={replyId:n.replyId,startDate:n.startDate,endDate:n.endDate,description:n.description,address:n.address,price:n.price},c=yield Ce(this.userService.getUserPaymentDetails(n.clientId));if(!c||!c.response){console.error("Client details not found"),this.triggerTestPaymentFlow(t);return}let m=yield Ce(this.userService.getUserPaymentDetails(n.specialistId));if(!m||!m.response){console.error("Specialist details not found"),this.triggerTestPaymentFlow(t);return}this.showPaymentFlow=!0,this.chatOverlayVisible=!0,this.paymentFlowService.initiatePaymentFlow(t,o,c.response,m.response,this.messagesState.selectedUser||""),console.log("\u2705 Payment flow successfully triggered")}catch(e){console.error("\u274C Error during payment flow setup:",e),this.triggerTestPaymentFlow(t)}})}triggerTestPaymentFlow(t){console.log("\u{1F9EA} Using test payment flow data");let e={replyId:t,startDate:new Date,endDate:new Date(Date.now()+2*60*60*1e3),description:"Test service booking",address:"Test service address",price:150},n={userId:this.userId||"test-user",userFullName:this.currentUserDetails?.fullName||"Test User",email:this.currentUserDetails?.email||"test@example.com",phoneNumber:"1234567890"},o={userId:this.messagesState.selectedUser||"test-specialist",userFullName:this.messagesState.selectedUserInfo?.fullName||"Test Specialist",email:"specialist@example.com",phoneNumber:"0987654321"};this.showPaymentFlow=!0,this.chatOverlayVisible=!0,this.paymentFlowService.initiatePaymentFlow(t,e,n,o,"test-conversation"),console.log("\u{1F680} Test payment flow triggered for reply:",t)}handlePaymentCompletion(t){return C(this,null,function*(){console.log("\u{1F4B3} Payment completed in messages component:",t),this.showPaymentFlow=!1,this.chatOverlayVisible=!1,this.currentPaymentDetails=t,this.notificationService.showNotification({type:"success",message:"Payment completed successfully! Getting service details..."}),setTimeout(()=>C(this,null,function*(){console.log("\u{1F504} Getting service task from payment..."),yield this.getServiceTaskFromPayment(t.id),setTimeout(()=>{this.loadCurrentServiceTaskFast()},1e3),this.refreshCurrentConversation(),this.loadExchanges(!1)}),2e3)})}getServiceTaskFromPayment(t){return C(this,null,function*(){try{console.log("\u{1F4CB} Step 1: Getting payment status for payment:",t);let e=yield Ce(this.paymentService.getPaymentStatus(t));if(console.log("Service task id:",e?.response?.serviceTaskId),!e?.response){console.error("\u274C Payment status not found"),this.handleServiceTaskRetrievalFailure("Payment status not found");return}let n=e.response;if(console.log("\u{1F4B3} Payment status retrieved:",{paymentId:n.paymentId,status:n.status,serviceTaskId:n.serviceTaskId,isEscrowed:n.isEscrowed}),!n.serviceTaskId){console.warn("\u26A0\uFE0F Payment does not have a service task ID yet"),setTimeout(()=>{console.log("\u{1F504} Retrying service task retrieval..."),this.getServiceTaskFromPayment(t)},3e3);return}console.log("\u{1F3AF} Step 2: Getting service task with ID:",n.serviceTaskId);let o=yield Ce(this.taskService.getServiceTask(n.serviceTaskId));o?.response?(this.currentServiceTask=o.response,console.log("\u2705 Service task retrieved successfully:",{taskId:this.currentServiceTask.id,userId:this.currentServiceTask.userId,specialistId:this.currentServiceTask.specialistId,status:this.currentServiceTask.status,startDate:this.currentServiceTask.startDate,endDate:this.currentServiceTask.endDate,price:this.currentServiceTask.price}),this.showServiceConfirmation(),this.notificationService.showNotification({type:"success",message:"Service confirmed successfully! Check your service details."})):(console.error("\u274C Service task not found:",o?.errorMessage),this.handleServiceTaskRetrievalFailure("Service task not found"))}catch(e){console.error("\u274C Error fetching service task:",e),this.handleServiceTaskRetrievalFailure("Error retrieving service task")}})}handleServiceTaskRetrievalFailure(t){console.log("\u{1F4A1} Handling service task retrieval failure:",t),this.notificationService.showNotification({type:"warning",message:"Payment completed but service details are still being processed. They will appear shortly."}),setTimeout(()=>{console.log("\u{1F504} Trying fast service task loading as fallback..."),this.loadCurrentServiceTaskFast()},2e3)}openMediaPicker(){let t=document.createElement("input");t.type="file",t.accept="image/jpeg,image/jpg,image/png,image/gif,image/webp",t.style.display="none",t.onchange=e=>{let n=e.target.files?.[0];n&&this.handlePhotoSelection(n)},document.body.appendChild(t),t.click(),document.body.removeChild(t)}handlePhotoSelection(t){console.log("File: ",t);let e=this.photoService.validatePhotoFile(t);if(console.log(e),!e.isValid){this.notificationService.showNotification({type:"error",message:e.error||"Invalid file selected"});return}this.selectedPhotoFile=t,this.uploadSelectedPhoto()}uploadSelectedPhoto(){return C(this,null,function*(){if(!(!this.selectedPhotoFile||!this.messagesState.selectedUser)){this.isUploadingPhoto=!0,this.cdr.detectChanges(),console.log(this.selectedPhotoFile);try{let t=yield this.photoService.uploadPhotoToConversation(this.messagesState.selectedUser,this.selectedPhotoFile).toPromise();if(t?.response)this.notificationService.showNotification({type:"success",message:"Photo uploaded successfully!"}),this.refreshCurrentConversation(),this.loadExchanges(!1);else throw new Error(t?.errorMessage?.message||"Failed to upload photo")}catch(t){console.error("Error uploading photo:",t),this.notificationService.showNotification({type:"error",message:"Failed to upload photo. Please try again."})}finally{this.isUploadingPhoto=!1,this.selectedPhotoFile=null,this.photoCaption="",this.cdr.detectChanges()}}})}getRequestItemById(t){return this.messagesState.getTypedConversationItems().find(n=>n.item.id===t&&n.type==="request")}getReplyItemById(t){return this.messagesState.getTypedConversationItems().find(n=>n.item.id===t&&n.type==="reply")}static \u0275fac=function(e){return new(e||i)(v(Di),v(V),v(Be),v(Ut),v(Ti),v(rn),v(ln),v(dn),v(pn),v(Xi),v(bt),v(eo),v(Je),v(mn),v(on),v(un))};static \u0275cmp=S({type:i,selectors:[["app-messages"]],decls:17,vars:14,consts:[["noSelection",""],[1,"chat-wrapper"],[1,"chat-container"],[1,"sidebar"],[1,"sidebar-header"],["class","loading-indicator",4,"ngIf"],[1,"conversation-list"],["class","conversation",3,"active","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","load-more-btn",3,"disabled","click",4,"ngIf"],["class","chat-area",3,"overlay-active",4,"ngIf","ngIfElse"],["class","review-completion-indicator",4,"ngIf"],["class","notification-container",4,"ngIf"],[1,"loading-indicator"],[1,"loading-spinner"],[1,"conversation",3,"click"],[3,"src","alt"],[1,"conversation-info"],[1,"conversation-name"],["class","conversation-preview",4,"ngIf"],["class","unread-badge",4,"ngIf"],[1,"conversation-preview"],[1,"unread-badge"],[1,"load-more-btn",3,"click","disabled"],[4,"ngIf"],["class","loading-text",4,"ngIf"],[1,"loading-text"],[1,"inline-spinner"],[1,"chat-area"],[1,"chat-header"],["src","assets/icons/info.svg","alt","specialist_info",3,"routerLink"],[1,"chat-messages"],["class","initial-messages-loading",4,"ngIf"],["class","load-more-btn top",3,"disabled","click",4,"ngIf"],["class","loading-more-messages",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","service-review-status",4,"ngIf"],["class","empty-messages",4,"ngIf"],["class","sending-message-indicator",4,"ngIf"],["class","connection-status offline",4,"ngIf"],[1,"chat-input"],["title","Adaug\u0103 o poz\u0103",3,"click","disabled"],["src","assets/icons/photo_media.svg","alt","photo_media"],["class","upload-indicator",4,"ngIf"],["type","text","placeholder","Scrie un mesaj aici",3,"ngModelChange","keydown.enter","ngModel","disabled"],["title","Trimite mesaj",1,"send-btn",3,"click","disabled"],["class","inline-spinner small",4,"ngIf"],["class","reply-form-overlay",4,"ngIf"],[3,"ngClass",4,"ngIf"],["class","service-message-overlay",4,"ngIf"],[1,"initial-messages-loading"],[1,"loading-spinner","large"],[1,"load-more-btn","top",3,"click","disabled"],[1,"loading-more-messages"],[3,"ngSwitch"],[3,"message","currentUserId",4,"ngSwitchCase"],[3,"photoItem","currentUserId",4,"ngSwitchCase"],[3,"request","currentUserId","requestAccepted","requestRejected","makeOffer",4,"ngSwitchCase"],[3,"reply","currentUserId","replyAccepted","replyRejected",4,"ngSwitchCase"],["class","error-message",4,"ngSwitchCase"],[3,"message","currentUserId"],[3,"photoItem","currentUserId"],[3,"requestAccepted","requestRejected","makeOffer","request","currentUserId"],[3,"replyAccepted","replyRejected","reply","currentUserId"],[1,"error-message"],[1,"service-review-status"],[1,"review-badge"],[1,"review-icon"],[1,"empty-messages"],[1,"empty-state-icon"],[1,"sending-message-indicator"],[1,"message-sending"],[1,"loading-dots"],[1,"connection-status","offline"],[1,"status-indicator"],[1,"status-dot","offline"],[1,"upload-indicator"],[1,"inline-spinner","small"],[1,"reply-form-overlay"],[1,"overlay-background",3,"click"],[1,"reply-form-container"],[3,"formSubmit","close","replyForm"],[3,"ngClass"],[1,"service-message-overlay"],[3,"serviceTask","replyId","taskCompleted","taskCancelled","openReviewForm",4,"ngIf"],[3,"reviewForm","formSubmit","close",4,"ngIf"],[3,"taskCompleted","taskCancelled","openReviewForm","serviceTask","replyId"],[3,"formSubmit","close","reviewForm"],[1,"chat-area","empty"],[1,"review-completion-indicator"],[1,"completion-message"],[1,"success-icon"],[1,"close-indicator-btn",3,"click"],[1,"notification-container"]],template:function(e,n){if(e&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),s(4,"Convorbiri"),r(),h(5,Sp,4,0,"div",5),R(6,"async"),a(7,"div",6),h(8,kp,8,9,"div",7),R(9,"async"),h(10,Dp,6,9,"button",8),r()(),h(11,tm,40,53,"div",9),R(12,"async"),h(13,nm,5,0,"ng-template",null,0,wt),r()(),h(15,im,12,1,"div",10)(16,om,2,0,"div",11)),e&2){let o=L(14);l(5),d("ngIf",Z(6,8,n.loading$)===!0),l(3),d("ngForOf",Z(9,10,n.exchanges$))("ngForTrackBy",n.trackByConversation),l(2),d("ngIf",n.messagesState.conversationListMeta.hasMore),l(),d("ngIf",Z(12,12,n.selectedUserInfo$))("ngIfElse",o),l(4),d("ngIf",n.hasSubmittedReview&&n.currentServiceTask),l(),d("ngIf",!1)}},dependencies:[W,ae,J,ee,sr,T,xi,lt,Ci,yi,ct,Mi,wi,G,De,lr,an,ie,ki,Ei,Ii],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Roboto Mono,monospace}[_nghost-%COMP%]{display:block;background-color:#f4f4f4;padding:2rem;position:relative}.chat-wrapper[_ngcontent-%COMP%]{width:100%;max-width:1000px;margin:auto;border:3px solid black;background-color:#e8d9ff}.chat-container[_ngcontent-%COMP%]{display:flex;height:600px}.sidebar[_ngcontent-%COMP%]{width:25%;border-right:3px solid black;display:flex;flex-direction:column}.sidebar-header[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:12px}.conversation[_ngcontent-%COMP%]{padding:1rem;border-bottom:2px solid black;background-color:#c9b7ff;display:flex;align-items:center;gap:1rem;cursor:pointer}.conversation[_ngcontent-%COMP%]:hover{background-color:#b8a6ff}.conversation.active[_ngcontent-%COMP%]{background-color:#a695ff}.conversation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.chat-area[_ngcontent-%COMP%]{position:relative;width:75%;display:flex;flex-direction:column}.chat-header[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:16px;background-color:#c9b7ff;display:flex;justify-content:space-between;align-items:center}.chat-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer}.chat-messages[_ngcontent-%COMP%]{flex-grow:1;padding:1rem;overflow-y:auto;position:relative}.chat-messages[_ngcontent-%COMP%]   app-message-bubble[_ngcontent-%COMP%], .chat-messages[_ngcontent-%COMP%]   app-request-message[_ngcontent-%COMP%], .chat-messages[_ngcontent-%COMP%]   app-reply-message[_ngcontent-%COMP%]{display:block;width:100%}.chat-messages[_ngcontent-%COMP%]   ng-container[_ngcontent-%COMP%]{display:contents}.chat-input[_ngcontent-%COMP%]{border-top:2px solid black;display:flex;align-items:center;padding:.5rem;gap:.5rem}.chat-input[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex:1;padding:.5rem;border-radius:6px;border:none;font-family:Roboto Mono,monospace}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer}.chat-input[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{background-color:#7e6cbe;padding:.5rem 1rem;border-radius:6px}.contact-link[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px;font-size:.9rem}.message-left[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin:10px}.message-right[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:10px}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.conversation-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;z-index:10;display:flex;align-items:center;justify-content:center;padding:1rem;box-shadow:0 0 12px #0003}.no-conversations[_ngcontent-%COMP%]{padding:1rem;color:#888;font-style:italic}.chat-area.empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#888;font-style:italic}.chat-area.overlay-active[_ngcontent-%COMP%]{position:relative}.chat-messages.scroll-frozen[_ngcontent-%COMP%]{overflow:hidden!important;pointer-events:none}.service-message-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:100;display:flex;align-items:center;justify-content:center;padding:1rem;box-sizing:border-box}.service-message-overlay[_ngcontent-%COMP%]   app-service-message[_ngcontent-%COMP%], .service-message-overlay[_ngcontent-%COMP%]   app-review-form[_ngcontent-%COMP%]{position:relative;z-index:101;display:flex;align-items:center;justify-content:center;max-width:95vw;max-height:90vh;width:auto;height:auto}.overlay-background[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;cursor:pointer;z-index:100}.service-message-container[_ngcontent-%COMP%]{display:none!important}.service-message-overlay[_ngcontent-%COMP%]   app-review-form[_ngcontent-%COMP%]{position:relative!important;inset:auto!important;transform:none!important;margin:0!important}.service-message-overlay[_ngcontent-%COMP%]   app-review-form[_ngcontent-%COMP%]   .request-form-wrapper[_ngcontent-%COMP%]{margin:0 auto!important;display:block;position:relative}.service-message-overlay[_ngcontent-%COMP%]   app-service-message[_ngcontent-%COMP%]{display:block;width:auto;height:auto;position:relative}.service-message-overlay[_ngcontent-%COMP%]   app-service-message[_ngcontent-%COMP%]{display:block;width:auto;height:auto}.service-message-overlay[_ngcontent-%COMP%]   app-review-form[_ngcontent-%COMP%]{display:block;width:auto;height:auto;position:relative!important;top:auto!important;left:auto!important;transform:none!important}.overlay-background[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:#000000b3;cursor:pointer}.service-message-container[_ngcontent-%COMP%]{position:relative;background:#fff;border:3px solid #28a745;border-radius:16px;max-width:500px;width:100%;max-height:80vh;overflow-y:auto;box-shadow:0 8px 32px #0000004d;font-family:Roboto Mono,monospace;animation:_ngcontent-%COMP%_overlayFadeIn .3s ease-out}.overlay-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem 1rem;border-bottom:2px solid #e0caff;background:linear-gradient(135deg,#d4edda,#c3e6cb);border-radius:13px 13px 0 0}.overlay-footer[_ngcontent-%COMP%]{padding:1.5rem 2rem;text-align:center;border-top:1px solid #e0e0e0;background-color:#f9f9f9;border-radius:0 0 13px 13px}@keyframes _ngcontent-%COMP%_successPulse{0%{transform:scale(.3);opacity:0}50%{transform:scale(1.1)}to{transform:scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_loading-dots{0%,80%,to{opacity:.3;transform:scale(.8)}40%{opacity:1;transform:scale(1)}}@media (max-width: 768px){.service-message-overlay[_ngcontent-%COMP%]{padding:.5rem}.service-message-container[_ngcontent-%COMP%]{max-height:90vh}.overlay-header[_ngcontent-%COMP%]{padding:1rem 1.5rem .5rem;flex-direction:column;gap:.5rem;text-align:center}.overlay-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.overlay-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem}.close-overlay-btn.secondary[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-size:.9rem}.loading-indicator[_ngcontent-%COMP%], .initial-messages-loading[_ngcontent-%COMP%]{padding:1rem}.loading-indicator[_ngcontent-%COMP%]   .loading-spinner.large[_ngcontent-%COMP%], .initial-messages-loading[_ngcontent-%COMP%]   .loading-spinner.large[_ngcontent-%COMP%]{width:30px;height:30px}.loading-more-messages[_ngcontent-%COMP%]{padding:.75rem;font-size:.85rem}}.loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #e0caff;border-top:2px solid #6c5ce7;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-spinner.large[_ngcontent-%COMP%]{width:40px;height:40px;border-width:3px}.loading-spinner.small[_ngcontent-%COMP%]{width:16px;height:16px;border-width:2px}.inline-spinner[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border:1.5px solid transparent;border-top:1.5px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-right:5px}.inline-spinner.small[_ngcontent-%COMP%]{width:10px;height:10px;border-width:1px}.loading-dots[_ngcontent-%COMP%]{display:inline-block;position:relative;width:20px;height:4px}.loading-dots[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:4px;height:4px;border-radius:50%;background:#6c5ce7;animation:_ngcontent-%COMP%_loading-dots 1.4s ease-in-out infinite both}.loading-dots[_ngcontent-%COMP%]:after{content:"";position:absolute;left:8px;top:0;width:4px;height:4px;border-radius:50%;background:#6c5ce7;animation:_ngcontent-%COMP%_loading-dots 1.4s ease-in-out .2s infinite both}.loading-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;color:#666;font-style:italic}.loading-indicator[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:0}.initial-messages-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:#666;font-style:italic}.initial-messages-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:0}.loading-more-messages[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1rem;color:#666;font-style:italic;border-bottom:1px solid #e0caff;margin-bottom:1rem}.loading-more-messages[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{margin-right:.5rem}.loading-more-messages[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.sending-message-indicator[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:.5rem 1rem}.sending-message-indicator[_ngcontent-%COMP%]   .message-sending[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;background-color:#f0f0f0;border-radius:18px;font-size:.85rem;color:#666;font-style:italic}.sending-message-indicator[_ngcontent-%COMP%]   .message-sending[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]{margin-right:.5rem}.loading-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.load-more-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.75rem 1rem;margin:.5rem;background-color:#e0caff;border:2px solid #6c5ce7;border-radius:6px;cursor:pointer;font-family:Roboto Mono,monospace;font-size:.9rem;transition:all .2s ease}.load-more-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#d4bfff;transform:translateY(-1px)}.load-more-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.load-more-btn.top[_ngcontent-%COMP%]{margin-bottom:1rem}.empty-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:#888;font-style:italic}.empty-messages[_ngcontent-%COMP%]   .empty-state-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;opacity:.5}.chat-area.empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;color:#888;font-style:italic}.chat-area.empty[_ngcontent-%COMP%]   .empty-state-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.3}.chat-input[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{background-color:#f5f5f5;color:#999;cursor:not-allowed}.chat-input[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.chat-input[_ngcontent-%COMP%]   .send-btn[disabled][_ngcontent-%COMP%]{background-color:#d4bfff}.reply-form-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:100;display:flex;align-items:center;justify-content:center;box-sizing:border-box}.reply-form-container[_ngcontent-%COMP%]{position:relative}.overlay-background[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;cursor:pointer}.connection-status[_ngcontent-%COMP%]{position:sticky;top:0;z-index:15;padding:8px 16px;background:#fff3cd;border-bottom:2px solid #ffeaa7;text-align:center;font-size:14px;color:#856404}.connection-status.online[_ngcontent-%COMP%]{background:#d4edda;border-color:#c3e6cb;color:#155724}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;font-family:Roboto Mono,monospace}.status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#28a745}.status-dot.offline[_ngcontent-%COMP%]{background:#ffc107;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.1)}to{opacity:1;transform:scale(1)}}.notification-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1050;max-width:400px;pointer-events:none}.notification[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;margin-bottom:8px;border-radius:8px;background:#fff;box-shadow:0 4px 12px #0000001a;border:2px solid #6c757d;animation:_ngcontent-%COMP%_slideInRight .3s ease-out;font-family:Roboto Mono,monospace;pointer-events:auto}.notification.success[_ngcontent-%COMP%]{border-color:#28a745;background:#d4edda;color:#155724}.notification.info[_ngcontent-%COMP%]{border-color:#17a2b8;background:#d1ecf1;color:#0c5460}.notification.warning[_ngcontent-%COMP%]{border-color:#ffc107;background:#fff3cd;color:#856404}.notification.error[_ngcontent-%COMP%]{border-color:#dc3545;background:#f8d7da;color:#721c24}.notification[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;padding:0;margin-left:12px;opacity:.7;font-family:Roboto Mono,monospace}.notification[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.review-completion-indicator[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:1000;animation:_ngcontent-%COMP%_slideInUp .5s ease-out}@media (max-width: 768px){.review-completion-indicator[_ngcontent-%COMP%]{bottom:10px;right:10px;left:10px}}.completion-message[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4edda,#c3e6cb);border:3px solid #28a745;border-radius:12px;padding:1.5rem;text-align:center;box-shadow:0 4px 20px #28a7454d;font-family:Roboto Mono,monospace;max-width:300px}.completion-message[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem;animation:_ngcontent-%COMP%_bounce 1s ease-out}.completion-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#155724;margin:.5rem 0;font-size:1.2rem;font-weight:600}.completion-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#155724;margin:.5rem 0;font-size:1rem}.completion-message[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:.85rem;font-style:italic;display:block;margin-top:.5rem}@keyframes _ngcontent-%COMP%_slideInUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_bounce{0%,20%,53%,80%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1);transform:scale(1)}40%,43%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:scale(1.1)}70%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:scale(1.05)}90%{transform:scale(1.02)}}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_overlayFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.reply-form-overlay[_ngcontent-%COMP%], .service-message-overlay[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBackdrop .2s ease-out}.reply-form-overlay[_ngcontent-%COMP%]   .reply-form-container[_ngcontent-%COMP%], .reply-form-overlay[_ngcontent-%COMP%]   .service-message-container[_ngcontent-%COMP%], .service-message-overlay[_ngcontent-%COMP%]   .reply-form-container[_ngcontent-%COMP%], .service-message-overlay[_ngcontent-%COMP%]   .service-message-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_overlayFadeIn .3s ease-out}.reply-form-overlay.review-complete[_ngcontent-%COMP%], .service-message-overlay.review-complete[_ngcontent-%COMP%]{display:none!important}@keyframes _ngcontent-%COMP%_fadeInBackdrop{0%{background:#0000}to{background:#000000b3}}.sending-message-indicator[_ngcontent-%COMP%]   .message-sending[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]{background:linear-gradient(90deg,#6c5ce7 0%,transparent 50%,#6c5ce7 100%);background-size:200% 100%;animation:_ngcontent-%COMP%_loadingDots 1.5s infinite;width:20px;height:4px;border-radius:2px}.sending-message-indicator[_ngcontent-%COMP%]   .message-sending[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]:before, .sending-message-indicator[_ngcontent-%COMP%]   .message-sending[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]:after{display:none}@keyframes _ngcontent-%COMP%_loadingDots{0%{background-position:200% 0}to{background-position:-200% 0}}.conversation-list[_ngcontent-%COMP%]{overflow-y:auto;flex:1}.conversation-info[_ngcontent-%COMP%]{flex:1;min-width:0}.conversation-info[_ngcontent-%COMP%]   .conversation-name[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:4px}.conversation-info[_ngcontent-%COMP%]   .conversation-preview[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.unread-badge[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border-radius:50%;padding:2px 6px;font-size:.75rem;font-weight:700;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;flex-shrink:0}@media (max-width: 768px){.chat-container[_ngcontent-%COMP%]{height:500px}.sidebar[_ngcontent-%COMP%]{width:35%}.chat-area[_ngcontent-%COMP%]{width:65%}.conversation[_ngcontent-%COMP%]{padding:.75rem}.conversation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px}.conversation-info[_ngcontent-%COMP%]   .conversation-name[_ngcontent-%COMP%]{font-size:.9rem}.conversation-info[_ngcontent-%COMP%]   .conversation-preview[_ngcontent-%COMP%]{font-size:.8rem}.notification-container[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.notification[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem}}@media (max-width: 480px){[_nghost-%COMP%]{padding:1rem}.chat-container[_ngcontent-%COMP%]{height:450px}.sidebar[_ngcontent-%COMP%]{width:40%}.chat-area[_ngcontent-%COMP%]{width:60%}.sidebar-header[_ngcontent-%COMP%]{padding:8px;font-size:.9rem}.chat-header[_ngcontent-%COMP%]{padding:12px;font-size:.9rem}}']})};function rm(i,t){if(i&1){let e=x();a(0,"div",7),y(1,"img",8),a(2,"button",9),u("click",function(){let o=g(e).index,c=p(2);return f(c.remove(o))}),s(3,"\xD7"),r()()}if(i&2){let e=t.$implicit;l(),d("src",e,de)}}function am(i,t){if(i&1&&(a(0,"div",5),h(1,rm,4,1,"div",6),r()),i&2){let e=p();l(),d("ngForOf",e.imagePreviews)}}function sm(i,t){i&1&&(a(0,"div",10)(1,"p"),s(2,"Nu ai ad\u0103ugat nicio imagine \xEEn portofoliu"),r()())}var no=class i{constructor(t,e){this.photoService=t;this.sanitizer=e}uploadedFiles=[];portfolioChange=new F;imagePreviews=[];onFileSelected(t){let e=t.target;if(e.files){for(let n=0;n<e.files.length;n++){let o=e.files[n];this.uploadedFiles.push(o);let c=URL.createObjectURL(o);this.imagePreviews.push(c)}this.portfolioChange.emit([...this.uploadedFiles]),e.value=""}}remove(t){this.imagePreviews[t]&&URL.revokeObjectURL(this.imagePreviews[t]),this.uploadedFiles.splice(t,1),this.imagePreviews.splice(t,1),this.portfolioChange.emit([...this.uploadedFiles])}getFileSize(t){let e=t.size;if(e===0)return"0 Bytes";let n=1024,o=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,c)).toFixed(2))+" "+o[c]}ngOnDestroy(){this.imagePreviews.forEach(t=>{t.startsWith("blob:")&&URL.revokeObjectURL(t)})}clearAll(){this.imagePreviews.forEach(t=>{t.startsWith("blob:")&&URL.revokeObjectURL(t)}),this.uploadedFiles=[],this.imagePreviews=[],this.portfolioChange.emit([])}static \u0275fac=function(e){return new(e||i)(v(Je),v(ur))};static \u0275cmp=S({type:i,selectors:[["app-portfolio-upload"]],inputs:{uploadedFiles:"uploadedFiles"},outputs:{portfolioChange:"portfolioChange"},decls:6,vars:2,consts:[[1,"portfolio-section"],["class","portfolio-images",4,"ngIf"],["class","portfolio-empty",4,"ngIf"],[1,"upload-portfolio-btn"],["type","file","multiple","","accept","image/*","hidden","",3,"change"],[1,"portfolio-images"],["class","image-item",4,"ngFor","ngForOf"],[1,"image-item"],["alt","Portfolio image",3,"src"],["type","button",1,"delete-image-btn",3,"click"],[1,"portfolio-empty"]],template:function(e,n){e&1&&(a(0,"div",0),h(1,am,2,1,"div",1)(2,sm,3,0,"div",2),a(3,"label",3),s(4," \u{1F4F8} Adaug\u0103 imagini "),a(5,"input",4),u("change",function(c){return n.onFileSelected(c)}),r()()()),e&2&&(l(),d("ngIf",n.imagePreviews.length>0),l(),d("ngIf",n.uploadedFiles.length===0))},dependencies:[G,T],styles:[".portfolio-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;max-width:100%}.portfolio-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;align-items:flex-start;width:100%;margin-bottom:24px;padding:0}.portfolio-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.image-container[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.delete-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background-color:#000000b3;color:#fff;border:none;border-radius:50%;font-size:14px;cursor:pointer;width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#000000e6}.custom-upload-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;background-color:#d9c8ff;color:#000;border:2px solid black;border-radius:5px;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;cursor:pointer;transition:background-color .3s ease;margin:0 auto;min-width:200px}.custom-upload-btn[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.section-title[_ngcontent-%COMP%]{margin-bottom:16px;font-family:Roboto Mono,monospace;text-align:center;font-size:18px}.error-text[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:center;margin-top:8px}.portfolio-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.portfolio-images[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;min-height:60px;padding:16px;border:2px dashed #c9b7ff;border-radius:8px;background-color:#fafafa}.portfolio-empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:120px;padding:16px;border:2px dashed #c9b7ff;border-radius:8px;background-color:#fafafa;color:#666;font-style:italic}.image-item[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a;border:2px solid #e0e0e0}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.delete-image-btn[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background-color:#000000b3;color:#fff;border:none;border-radius:50%;font-size:16px;cursor:pointer;width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease;font-weight:700}.delete-image-btn[_ngcontent-%COMP%]:hover{background-color:#dc3545cc}.upload-portfolio-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;background-color:#d9c8ff;color:#000;border:2px solid black;border-radius:5px;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;cursor:pointer;transition:background-color .3s ease;align-self:flex-start;margin-bottom:40px}.upload-portfolio-btn[_ngcontent-%COMP%]:hover{background-color:#cbb6ff;transform:translateY(-1px)}"]})};function cm(i,t){if(i&1&&(a(0,"strong"),s(1),r()),i&2){let e=p();l(),P(e.title)}}function lm(i,t){if(i&1){let e=x();a(0,"div",4)(1,"button",5),u("click",function(){g(e);let o=p();return f(o.onConfirm())}),s(2),r(),a(3,"button",6),u("click",function(){g(e);let o=p();return f(o.onCancel())}),s(4),r()()}if(i&2){let e=p();l(2),P(e.confirmText),l(2),P(e.cancelText)}}function dm(i,t){if(i&1){let e=x();a(0,"button",7),u("click",function(){g(e);let o=p();return f(o.onClose())}),s(1,"\xD7"),r()}}var io=class i{type="info";title="";message="";showActions=!1;confirmText="Da";cancelText="Nu";close=new F;confirm=new F;cancel=new F;onClose(){this.close.emit()}onConfirm(){this.confirm.emit()}onCancel(){this.cancel.emit()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-alert"]],inputs:{type:"type",title:"title",message:"message",showActions:"showActions",confirmText:"confirmText",cancelText:"cancelText"},outputs:{close:"close",confirm:"confirm",cancel:"cancel"},decls:6,vars:5,consts:[[1,"alert",3,"ngClass"],[4,"ngIf"],["class","alert-actions",4,"ngIf"],["class","close-btn",3,"click",4,"ngIf"],[1,"alert-actions"],[1,"alert-btn","confirm-btn",3,"click"],[1,"alert-btn","cancel-btn",3,"click"],[1,"close-btn",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0),h(1,cm,2,1,"strong",1),a(2,"p"),s(3),r(),h(4,lm,5,2,"div",2)(5,dm,2,0,"button",3),r()),e&2&&(d("ngClass",n.type),l(),d("ngIf",n.title),l(2),P(n.message),l(),d("ngIf",n.showActions),l(),d("ngIf",!n.showActions))},dependencies:[ie,T],styles:[".alert[_ngcontent-%COMP%]{position:relative;padding:1rem;border-radius:8px;margin:1rem 0;font-size:.95rem}.alert.info[_ngcontent-%COMP%]{background-color:#e0f0ff;color:#00599f}.alert.success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.alert.warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.alert.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.alert[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:1rem;background:none;border:none;font-size:1.2rem;cursor:pointer}.alert[_ngcontent-%COMP%]   .alert-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-top:16px}.alert[_ngcontent-%COMP%]   .alert-btn[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;border:2px solid;border-radius:5px;padding:8px 16px;cursor:pointer;transition:background-color .3s ease}.alert[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-color:#721c24}.alert[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]:hover{background-color:#f1aeb5}.alert[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border-color:#000}.alert[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}"]})};var gn=class i{constructor(t,e){this.http=t;this.authService=e}baseUrl="http://localhost:5241/api/stripe/account";generateOnboardingLink(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.post(`${this.baseUrl}/onboarding-link/${t}`,{},{headers:n})}generateDashboardLink(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.post(`${this.baseUrl}/dashboard-link/${t}`,{headers:n})}getAccountStatus(t){let e=this.authService.getToken(),n=new z({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/status/${t}`,{headers:n})}static \u0275fac=function(e){return new(e||i)(N(oe),N(V))};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var pm=()=>[];function mm(i,t){if(i&1){let e=x();a(0,"div",7)(1,"app-alert",8),u("confirm",function(){g(e);let o=p();return f(o.handleAlertConfirm())})("cancel",function(){g(e);let o=p();return f(o.handleAlertCancel())}),r()()}if(i&2){let e=p();l(),d("message",e.getAlertMessage())("showActions",!0)}}function um(i,t){if(i&1){let e=x();a(0,"button",9),u("click",function(){g(e);let o=p();return f(o.showBackConfirmation())}),s(1," \u2190 "),r()}}function gm(i,t){if(i&1){let e=x();a(0,"div")(1,"h3"),s(2,"Pas 1: Profilul de specialist"),r(),a(3,"p",10),s(4," Spune-ne pu\u021Bin despre tine \u0219i despre serviciile tale! "),r(),a(5,"app-dynamic-form",11),u("formSubmit",function(o){g(e);let c=p();return f(c.handleStep1(o))}),r()()}if(i&2){let e=p();l(5),d("fields",e.step1FormFields)("submitText","Treci la pasul urm\u0103tor")}}function fm(i,t){if(i&1){let e=x();a(0,"div",12)(1,"div",13)(2,"h3"),s(3,"Pas 2: Alegerea categoriilor"),r(),a(4,"p",10),s(5," Selecteaz\u0103 categoriile de servicii pe care le oferi! "),r()(),a(6,"app-category-selector",14),u("categoryChange",function(o){g(e);let c=p();return f(c.updateCategories(o))}),r(),a(7,"div",15)(8,"div",16)(9,"button",17),u("click",function(){g(e);let o=p();return f(o.handleStep2())}),s(10," Continu\u0103 "),r(),a(11,"button",18),u("click",function(){g(e);let o=p();return f(o.skipCategories())}),s(12," Sari peste "),r()()()()}if(i&2){let e=p();l(6),d("selectedCategoryIds",e.specialistData.categories||Ee(1,pm))}}function hm(i,t){if(i&1){let e=x();a(0,"div",12)(1,"div",13)(2,"h3"),s(3,"Pas 3: Crearea portofoliului"),r(),a(4,"p",10),s(5," Adaug\u0103 imagini cu lucr\u0103rile tale pentru a-\u021Bi prezenta serviciile! "),r()(),a(6,"div",15)(7,"app-portfolio-upload",19),u("portfolioChange",function(o){g(e);let c=p();return f(c.updatePortfolio(o))}),r()(),a(8,"div",15)(9,"div",16)(10,"button",17),u("click",function(){g(e);let o=p();return f(o.handleStep3())}),s(11," Continu\u0103 "),r(),a(12,"button",18),u("click",function(){g(e);let o=p();return f(o.skipPortfolio())}),s(13," Sari peste "),r()()()()}if(i&2){let e=p();l(7),d("uploadedFiles",e.portfolioImages)}}function _m(i,t){if(i&1&&(a(0,"div",31)(1,"span",32),s(2,"\u26A0\uFE0F"),r(),s(3),r()),i&2){let e=p(2);l(3),M(" ",e.stripeActivationError," ")}}function vm(i,t){i&1&&(a(0,"span"),s(1,"\u{1F680} Activeaz\u0103 contul pentru pl\u0103\u021Bi"),r())}function bm(i,t){i&1&&(a(0,"span"),s(1,"Se proceseaz\u0103..."),r())}function xm(i,t){if(i&1){let e=x();a(0,"div",12)(1,"div",20)(2,"div",21)(3,"h3"),s(4,"Pas 4: Activeaz\u0103 contul pentru pl\u0103\u021Bi"),r(),a(5,"p",22),s(6," Pentru a putea primi pl\u0103\u021Bi de la clien\u021Bi, trebuie s\u0103 \xEE\u021Bi configurezi contul Stripe. Acest proces dureaz\u0103 doar c\xE2teva minute \u0219i este complet securizat. "),r()(),a(7,"div",23)(8,"div",24)(9,"span",25),s(10,"\u{1F4B3}"),r(),a(11,"span"),s(12,"Prime\u0219te pl\u0103\u021Bi direct \xEEn contul t\u0103u"),r()(),a(13,"div",24)(14,"span",25),s(15,"\u{1F512}"),r(),a(16,"span"),s(17,"Securitate bancar\u0103 de nivel \xEEnalt"),r()(),a(18,"div",24)(19,"span",25),s(20,"\u{1F4CA}"),r(),a(21,"span"),s(22,"Rapoarte detaliate despre c\xE2\u0219tiguri"),r()()(),h(23,_m,4,1,"div",26),a(24,"div",16)(25,"button",27),u("click",function(){g(e);let o=p();return f(o.activateStripeAccount())}),h(26,vm,2,0,"span",28)(27,bm,2,0,"span",28),r(),a(28,"button",29),u("click",function(){g(e);let o=p();return f(o.skipStripeActivation())}),s(29," Sari peste "),r()(),a(30,"div",30)(31,"p")(32,"strong"),s(33,"Not\u0103:"),r(),s(34,' Dac\u0103 nu activezi contul acum, po\u021Bi face acest lucru oric\xE2nd din sec\u021Biunea "Profil" \u2192 "Contul ExpertEase".'),r()()()()}if(i&2){let e=p();l(23),d("ngIf",e.stripeActivationError),l(2),d("disabled",e.isActivatingStripe),l(),d("ngIf",!e.isActivatingStripe),l(),d("ngIf",e.isActivatingStripe),l(),d("disabled",e.isActivatingStripe)}}var oo=class i{constructor(t,e,n,o){this.authService=t;this.specialistProfileService=e;this.stripeAccountService=n;this.router=o}step=1;portfolioImages=[];imagePreviews=[];stripeAccountId="";isActivatingStripe=!1;stripeActivationError="";showStep2BackAlert=!1;showStep3BackAlert=!1;showStep4BackAlert=!1;specialistData={yearsExperience:0,phoneNumber:"",address:"",description:"",categories:[]};formData={};step1FormFields=Oe({yearsExperience:0,phoneNumber:"",address:"",description:""},{address:{type:"text",class:"full-width"},yearsExperience:{type:"number",placeholder:"Ex: 5"},description:{type:"textarea",placeholder:"Descrie serviciile oferite",class:"full-width"}});isAddUserFormVisible=!1;ngOnInit(){let t={phoneNumber:"",address:"",yearsExperience:0,description:""};this.formData=O({},t)}handleStep1(t){this.specialistData=O(O({},this.specialistData),t),this.step=2}updateCategories(t){this.specialistData.categories=t}handleStep2(){this.step=3}skipCategories(){this.specialistData.categories=[],this.step=3}updatePortfolio(t){this.portfolioImages=t,this.imagePreviews.forEach(e=>URL.revokeObjectURL(e)),this.imagePreviews=t.map(e=>URL.createObjectURL(e))}handleStep3(){this.step=4}skipPortfolio(){this.portfolioImages=[],this.imagePreviews.forEach(t=>URL.revokeObjectURL(t)),this.imagePreviews=[],this.step=4}activateStripeAccount(){return C(this,null,function*(){this.isActivatingStripe=!0,this.stripeActivationError="";try{let t=this.authService.getUserId();if(!t)throw new Error("User ID not found");let e=yield this.createSpecialistProfileWithFormData(t);if(!e?.response)throw new Error(e?.errorMessage?.message||"Eroare la crearea profilului");if(this.stripeAccountId=e.response?.stripeAccountId||"",console.log("Retrieved stripeAccountId:",this.stripeAccountId),!this.stripeAccountId)throw new Error("Stripe account ID not found in response");this.stripeAccountService.generateOnboardingLink(this.stripeAccountId).subscribe({next:n=>{if(console.log("Onboarding link response:",n),n?.response&&n.response?.url)console.log("Redirecting to Stripe onboarding:",n.response.url),window.location.href=n.response.url;else throw new Error(n?.errorMessage?.message||"Eroare la generarea link-ului de activare")},error:n=>{console.error("Error generating onboarding link:",n),this.stripeActivationError=n.message||n.error?.message||"Eroare la generarea link-ului de activare",this.isActivatingStripe=!1}})}catch(t){console.error("Error in activateStripeAccount:",t),this.stripeActivationError=t.message||"Eroare la activarea contului Stripe",this.isActivatingStripe=!1}})}createSpecialistProfileWithFormData(t){return new Promise((e,n)=>{this.specialistProfileService.becomeSpecialist({userId:t,phoneNumber:this.specialistData.phoneNumber,address:this.specialistData.address,yearsExperience:this.specialistData.yearsExperience,description:this.specialistData.description,categories:this.specialistData.categories},this.portfolioImages).subscribe({next:o=>{console.log("Specialist profile created:",o),e(o)},error:o=>{console.error("Error creating specialist profile:",o),n(o)}})})}skipStripeActivation(){this.createSpecialistProfileOnly()}createSpecialistProfileOnly(){let t=this.authService.getUserId();if(!t){console.error("User ID not found");return}this.specialistProfileService.becomeSpecialist({userId:t,phoneNumber:this.specialistData.phoneNumber,address:this.specialistData.address,yearsExperience:this.specialistData.yearsExperience,description:this.specialistData.description,categories:this.specialistData.categories},this.portfolioImages).subscribe({next:e=>{console.log("Specialist profile created successfully:",e),this.closeAddUserForm(),this.router.navigate(["/home"])},error:e=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",e),this.stripeActivationError=e.message||e.error?.message||"Eroare la crearea profilului"}})}showBackConfirmation(){this.step===2?this.showStep2BackAlert=!0:this.step===3?this.showStep3BackAlert=!0:this.step===4&&(this.showStep4BackAlert=!0)}getAlertMessage(){return this.showStep2BackAlert?"Sigur vrei s\u0103 te \xEEntorci la pasul anterior? Categoriile selectate vor fi pierdute.":this.showStep3BackAlert?"Sigur vrei s\u0103 te \xEEntorci la pasul anterior? Toate imaginile ad\u0103ugate vor fi pierdute.":this.showStep4BackAlert?"Sigur vrei s\u0103 te \xEEntorci la pasul anterior?":""}handleAlertConfirm(){this.showStep2BackAlert?this.goBackToStep1():this.showStep3BackAlert?this.goBackToStep2():this.showStep4BackAlert&&this.goBackToStep3()}handleAlertCancel(){this.showStep2BackAlert=!1,this.showStep3BackAlert=!1,this.showStep4BackAlert=!1}goBackToStep1(){this.specialistData.categories=[],this.showStep2BackAlert=!1,this.step=1}goBackToStep2(){this.portfolioImages=[],this.imagePreviews.forEach(t=>URL.revokeObjectURL(t)),this.imagePreviews=[],this.showStep3BackAlert=!1,this.step=2}goBackToStep3(){this.showStep4BackAlert=!1,this.step=3}closeAddUserForm(){this.isAddUserFormVisible=!1}ngOnDestroy(){this.imagePreviews.forEach(t=>URL.revokeObjectURL(t))}static \u0275fac=function(e){return new(e||i)(v(V),v(vt),v(gn),v(re))};static \u0275cmp=S({type:i,selectors:[["app-become-specialist"]],decls:11,vars:7,consts:[["class","modal-overlay",4,"ngIf"],[1,"form-wrapper"],[1,"form-box"],["class","close-button","title","\xCEnapoi",3,"click",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","form-layout",4,"ngSwitchCase"],[1,"modal-overlay"],["type","warning","title","Confirmare","confirmText","Da, m\u0103 \xEEntorc","cancelText","Anuleaz\u0103",3,"confirm","cancel","message","showActions"],["title","\xCEnapoi",1,"close-button",3,"click"],[1,"step-description"],[3,"formSubmit","fields","submitText"],[1,"form-layout"],[1,"step-header"],[3,"categoryChange","selectedCategoryIds"],[1,"form-group","full-width"],[1,"button-wrapper"],["title","Treci la pasul urm\u0103tor",1,"send-button",3,"click"],["title","Sari peste aceast\u0103 etap\u0103",1,"skip-button",3,"click"],[3,"portfolioChange","uploadedFiles"],[1,"stripe-activation-section"],[1,"activation-header"],[1,"activation-description"],[1,"activation-features"],[1,"feature-item"],[1,"feature-icon"],["class","error-message",4,"ngIf"],["title","Activeaz\u0103 contul Stripe",1,"send-button","primary",3,"click","disabled"],[4,"ngIf"],["title","Sari peste aceast\u0103 etap\u0103",1,"skip-button",3,"click","disabled"],[1,"activation-note"],[1,"error-message"],[1,"error-icon"]],template:function(e,n){e&1&&(a(0,"h2"),s(1,"Devino specialist!"),r(),h(2,mm,2,2,"div",0),a(3,"div",1)(4,"div",2),h(5,um,2,0,"button",3),ce(6,4),h(7,gm,6,2,"div",5)(8,fm,13,2,"div",6)(9,hm,14,1,"div",6)(10,xm,35,5,"div",6),le(),r()()),e&2&&(l(2),d("ngIf",n.showStep2BackAlert||n.showStep3BackAlert||n.showStep4BackAlert),l(3),d("ngIf",n.step>1),l(),d("ngSwitch",n.step),l(),d("ngSwitchCase",1),l(),d("ngSwitchCase",2),l(),d("ngSwitchCase",3),l(),d("ngSwitchCase",4))},dependencies:[Re,ct,lt,nn,no,io,T],styles:["h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;gap:16px}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.send-button[_ngcontent-%COMP%]:disabled{background-color:#f0f0f0;color:#999;cursor:not-allowed;border-color:#ccc}.skip-button[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#666;font-family:Roboto Mono,monospace;font-size:14px;font-weight:400;border:1px solid #ddd;border-radius:5px;padding:0;width:250px;height:36px;cursor:pointer;transition:all .3s ease}.skip-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e8e8e8;border-color:#bbb}.skip-button[_ngcontent-%COMP%]:disabled{background-color:#fafafa;color:#ccc;cursor:not-allowed}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.back-button[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:120px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.back-button[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.stripe-activation-section[_ngcontent-%COMP%]{width:100%;text-align:center}.activation-header[_ngcontent-%COMP%]{margin-bottom:32px}.activation-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:24px;color:#333;margin-bottom:16px}.activation-header[_ngcontent-%COMP%]   .activation-description[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:16px;color:#666;line-height:1.5;max-width:500px;margin:0 auto}.activation-features[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:32px;max-width:400px;margin-left:auto;margin-right:auto}.activation-features[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-family:Roboto Mono,monospace;font-size:14px;color:#555;text-align:left}.activation-features[_ngcontent-%COMP%]   .feature-item[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{font-size:20px;width:24px;text-align:center}.error-message[_ngcontent-%COMP%]{background-color:#ffeaea;border:1px solid #ffcdd2;border-radius:5px;padding:12px 16px;margin-bottom:24px;color:#d32f2f;font-family:Roboto Mono,monospace;font-size:14px;display:flex;align-items:center;gap:8px}.error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:16px}.activation-note[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background-color:#f8f9fa;border-radius:5px;border-left:4px solid #d9c8ff}.activation-note[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:13px;color:#666;margin:0;line-height:1.4}"]})};var Cm=["class","categories"],ym=()=>[5,10,20];function Mm(i,t){if(i&1){let e=x();a(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),u("click",function(){g(e);let o=p();return f(o.closeAddEntityForm())}),s(4,"\xD7"),r()(),a(5,"app-dynamic-form",13),u("formSubmit",function(o){g(e);let c=p();return f(c.addEntity(o))}),r()()()}if(i&2){let e=p();l(5),d("fields",e.addEntityFormFields)("submitText","Trimite")}}function wm(i,t){if(i&1){let e=x();a(0,"div",9)(1,"div",10)(2,"button",12),u("click",function(){g(e);let o=p();return f(o.closeUpdateEntityForm())}),s(3,"\xD7"),r(),a(4,"app-dynamic-form",14),u("formSubmit",function(o){g(e);let c=p();return f(c.updateEntity(o))}),r()()()}if(i&2){let e=p();l(4),d("fields",e.updateEntityFormFields)("initialData",e.formData)("submitText","Actualizeaz\u0103")}}function Sm(i,t){if(i&1){let e=x();a(0,"app-admin-details",18),u("close",function(){g(e);let o=p(2);return f(o.closeEntityDetails())}),r()}if(i&2){let e=p(2);d("entity",e.entityDetails)("title","Detalii categorie")}}function Pm(i,t){if(i&1){let e=x();a(0,"div",15)(1,"div",16)(2,"button",12),u("click",function(){g(e);let o=p();return f(o.closeEntityDetails())}),s(3,"\xD7"),r(),h(4,Sm,1,2,"app-admin-details",17),r()()}if(i&2){let e=p();l(4),d("ngIf",e.isEntityDetailsVisible)}}var ro=class i{constructor(t){this.adminService=t}dummy_categories=[{id:"c1",name:"Psihologie",description:"Categoria pentru speciali\u0219ti \xEEn psihologie",specialistsCount:5,specialistIds:["s1","s2","s3","s4","s5"]},{id:"c2",name:"Nutri\u021Bie",description:"Categoria pentru speciali\u0219ti \xEEn nutri\u021Bie",specialistsCount:3,specialistIds:["s6","s7","s8"]}];searchTerm="";entities=[];selectedEntity=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddEntityFormVisible=!1;isUpdateEntityFormVisible=!1;isEntityDetailsVisible=!1;selectedEntityId=null;columns=[{key:"id",header:"ID"},{key:"name",header:"Denumire"},{key:"description",header:"Descriere"},{key:"specialistsCount",header:"Num\u0103r speciali\u0219ti"},{key:"specialistIds",header:"Speciali\u0219tii cu aceast\u0103 categorie"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:t=>this.getEntity(t.id)},{label:"Modific\u0103",class:"edit",callback:t=>this.editEntity(t)},{label:"\u0218terge",class:"delete",callback:t=>this.deleteEntity(t)}]}];defaultEntity={name:"",description:""};formData={};error=null;addEntityFormFields=Oe(this.defaultEntity,{description:{type:"input",placeholder:"Descrie categoria",required:!1}});updateEntityFormFields=Oe({name:this.selectedEntity?.name||"",description:this.selectedEntity?.description||""});placeholder="Caut\u0103 o categorie...";ngOnInit(){let t={name:"",description:""};this.formData=O({},t),this.getPage()}onSearch(t){this.searchTerm=t,this.currentPage=1,this.getPage()}getEntity(t){console.log(t),this.adminService.getCategoryById(t).subscribe({next:e=>{this.entityDetailsId=e.response?.id,this.entityDetails=Xt(e.response??{}),this.isEntityDetailsVisible=!0},error:e=>{console.error("Eroare la preluarea utilizatorului:",e.errorMessage?.status),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getCategoriesAdminPage(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:t=>{console.log(t.response),this.entities=t.response?.data??[],this.totalItems=t.response?.totalCount??0},error:t=>{this.error=t.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(t){let e=t;this.adminService.addCategory(e).subscribe({next:()=>{this.closeAddEntityForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editEntity(t){this.selectedEntityId=t.id,this.formData={name:t.name,description:t.description},this.isUpdateEntityFormVisible=!0}updateEntity(t){if(!this.selectedEntityId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let e={id:this.selectedEntityId,name:t.name||this.formData.name,description:t.description||this.formData.description};this.adminService.updateCategory(e).subscribe({next:()=>{this.closeUpdateEntityForm(),this.getPage()},error:n=>{console.error("Eroare la actualizare:",n)}})}showEntityDetails(t){this.isEntityDetailsVisible=!0}closeEntityDetails(){this.isEntityDetailsVisible=!1,this.selectedEntity=null}closeUpdateEntityForm(){this.selectedEntityId=null,this.resetForm(),this.isUpdateEntityFormVisible=!1}openAddEntityForm(){this.selectedEntityId=null,this.resetForm(),this.isAddEntityFormVisible=!0}viewEntity(t){this.isEntityDetailsVisible=!0}deleteEntity(t){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi categoria ${t.name}?`)&&this.adminService.deleteCategory(t.id).subscribe({next:()=>{this.getPage()},error:e=>{console.error("Eroare la \u0219tergerea utilizatorului:",e)}})}closeAddEntityForm(){this.isAddEntityFormVisible=!1,this.resetForm()}resetForm(){this.formData={name:"",description:""}}onPageChange(t){this.currentPage=t,this.getPage()}onPageSizeChange(t){this.pageSize=t,this.currentPage=1,this.getPage()}static \u0275fac=function(e){return new(e||i)(v(gt))};static \u0275cmp=S({type:i,selectors:[["app-admin",8,"categories"]],attrs:Cm,decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[1,"admin-modal"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(e,n){e&1&&(a(0,"app-pagination",0),u("pageChange",function(c){return n.onPageChange(c)})("pageSizeChange",function(c){return n.onPageSizeChange(c)}),r(),a(1,"div",1)(2,"div",2)(3,"h2"),s(4,"Administreaz\u0103 toate categoriile"),r(),a(5,"div",3)(6,"app-search-input",4),u("searchChanged",function(c){return n.onSearch(c)}),r()(),a(7,"button",5),u("click",function(){return n.openAddEntityForm()}),s(8,"Adaug\u0103 categorie"),r(),y(9,"app-dynamic-table",6),r()(),h(10,Mm,6,2,"div",7)(11,wm,5,3,"div",7)(12,Pm,5,1,"div",8)),e&2&&(d("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",Ee(10,ym))("totalItems",n.totalItems),l(6),d("placeholder",n.placeholder),l(3),d("columns",n.columns)("data",n.entities),l(),d("ngIf",n.isAddEntityFormVisible),l(),d("ngIf",n.isUpdateEntityFormVisible),l(),d("ngIf",n.isEntityDetailsVisible))},dependencies:[_t,Re,je,ht,Ke,T],styles:[".table-wrapper[_ngcontent-%COMP%]{width:100%;font-family:Roboto Mono,monospace}.desktop-table[_ngcontent-%COMP%]{display:block;overflow-x:auto;background-color:#f8f4ff;border-radius:8px;box-shadow:0 4px 12px #0000001a;border:2px solid #4b358e}@media (max-width: 768px){.desktop-table[_ngcontent-%COMP%]{display:none}}.admin-table[_ngcontent-%COMP%]{width:100%;min-width:600px;border-collapse:collapse;background-color:#f8f4ff;margin:0}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;vertical-align:middle}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 12px;font-size:13px}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px;font-size:12px}}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700;position:sticky;top:0;z-index:10;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:150px}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:120px}}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid transparent;border-radius:4px;cursor:pointer;font-weight:700;font-size:12px;font-family:Roboto Mono,monospace;transition:all .3s ease;text-decoration:none;display:inline-block}.action-btn.view[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1565c0;border-color:#1565c0}.action-btn.view[_ngcontent-%COMP%]:hover{background-color:#1565c0;color:#fff}.action-btn.edit[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32;border-color:#2e7d32}.action-btn.edit[_ngcontent-%COMP%]:hover{background-color:#2e7d32;color:#fff}.action-btn.delete[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;border-color:#c62828}.action-btn.delete[_ngcontent-%COMP%]:hover{background-color:#c62828;color:#fff}.action-btn.mobile[_ngcontent-%COMP%]{padding:8px 12px;font-size:11px}@media (max-width: 900px){.action-btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:11px}}.mobile-cards[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.mobile-cards[_ngcontent-%COMP%]{display:block;padding:16px}}.card[_ngcontent-%COMP%]{background-color:#f8f4ff;border:2px solid #cfbdfe;border-radius:8px;margin-bottom:16px;box-shadow:0 2px 8px #0000001a;transition:all .3s ease}.card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:16px;background-color:#cfbdfe;border-bottom:1px solid #ddd;border-radius:6px 6px 0 0;gap:12px}.card-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:700;color:#333;flex:1;word-break:break-word}@media (max-width: 480px){.card-title[_ngcontent-%COMP%]{font-size:14px}}.card-actions[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap;flex-shrink:0}.card-body[_ngcontent-%COMP%]{padding:16px}.field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;gap:12px}.field[_ngcontent-%COMP%]:last-child{margin-bottom:0}.field.primary[_ngcontent-%COMP%]{display:none}.field-label[_ngcontent-%COMP%]{font-weight:700;color:#666;font-size:13px;flex-shrink:0;min-width:80px}@media (max-width: 480px){.field-label[_ngcontent-%COMP%]{font-size:12px;min-width:70px}}.field-value[_ngcontent-%COMP%]{color:#333;font-size:13px;text-align:right;word-break:break-word;flex:1}@media (max-width: 480px){.field-value[_ngcontent-%COMP%]{font-size:12px}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;background-color:#f8f4ff;border:2px dashed #cfbdfe;border-radius:8px;color:#666}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]{margin:16px;padding:32px 16px}}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;opacity:.7}@media (max-width: 768px){.empty-icon[_ngcontent-%COMP%]{font-size:36px;margin-bottom:12px}}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;color:#333}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}}@media (max-width: 1200px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+6), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+6){display:none}}@media (max-width: 1024px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+5), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+5){display:none}}@media (max-width: 900px){.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(n+4), .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(n+4){display:none}}@media (min-width: 769px) and (max-width: 1024px){.desktop-table[_ngcontent-%COMP%]{margin:0 16px}.admin-table[_ngcontent-%COMP%]{min-width:500px}}@media print{.table-wrapper[_ngcontent-%COMP%]{overflow:visible!important}.desktop-table[_ngcontent-%COMP%]{display:block!important;overflow:visible!important}.mobile-cards[_ngcontent-%COMP%]{display:none!important}.admin-table[_ngcontent-%COMP%]{min-width:auto!important;width:100%!important}.action-btn[_ngcontent-%COMP%]{display:none!important}}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};function Om(i,t){i&1&&(a(0,"div",43),y(1,"div",44),a(2,"p"),s(3,"Se \xEEncarc\u0103..."),r()())}function km(i,t){if(i&1&&(a(0,"div",45),s(1),r()),i&2){let e=p();H("error",e.saveMessage.includes("Eroare")),l(),M(" ",e.saveMessage," ")}}function Em(i,t){if(i&1&&(a(0,"option",46),s(1),r()),i&2){let e=t.$implicit;d("value",e.value),l(),M(" ",e.label," ")}}function Im(i,t){if(i&1&&(a(0,"option",46),s(1),r()),i&2){let e=t.$implicit;d("value",e.value),l(),M(" ",e.label," ")}}function Dm(i,t){if(i&1){let e=x();a(0,"label",24)(1,"input",47),I("ngModelChange",function(o){g(e);let c=p();return E(c.settings.autoAcceptRequests,o)||(c.settings.autoAcceptRequests=o),f(o)}),r(),a(2,"span"),s(3,"Accept\u0103 automat cererile \xEEn programul de lucru"),r()()}if(i&2){let e=p();l(),k("ngModel",e.settings.autoAcceptRequests)}}function Tm(i,t){if(i&1){let e=x();a(0,"label",59)(1,"input",60),u("change",function(){let o=g(e).$implicit,c=p(3);return f(c.toggleWorkingDay(o.value))}),r(),a(2,"span"),s(3),r()()}if(i&2){let e=t.$implicit,n=p(3);H("selected",n.isWorkingDaySelected(e.value)),l(),d("checked",n.isWorkingDaySelected(e.value)),l(2),P(e.label)}}function Fm(i,t){if(i&1){let e=x();a(0,"div",50)(1,"div",51)(2,"div",52)(3,"label",53),s(4,"Ora de \xEEnceput"),r(),a(5,"input",54),I("ngModelChange",function(o){g(e);let c=p(2);return E(c.settings.workingHours.start,o)||(c.settings.workingHours.start=o),f(o)}),r()(),a(6,"div",52)(7,"label",55),s(8,"Ora de sf\xE2r\u0219it"),r(),a(9,"input",56),I("ngModelChange",function(o){g(e);let c=p(2);return E(c.settings.workingHours.end,o)||(c.settings.workingHours.end=o),f(o)}),r()()(),a(10,"div",8)(11,"label"),s(12,"Zilele de lucru"),r(),a(13,"div",57),h(14,Tm,4,4,"label",58),r()()()}if(i&2){let e=p(2);l(5),k("ngModel",e.settings.workingHours.start),l(4),k("ngModel",e.settings.workingHours.end),l(5),d("ngForOf",e.availableDays)}}function Rm(i,t){if(i&1){let e=x();a(0,"section",6)(1,"h2"),s(2,"Program de lucru"),r(),a(3,"form",7),u("ngSubmit",function(){g(e);let o=p();return f(o.saveWorkingHours())}),a(4,"div",23)(5,"label",24)(6,"input",48),I("ngModelChange",function(o){g(e);let c=p();return E(c.settings.workingHours.enabled,o)||(c.settings.workingHours.enabled=o),f(o)}),r(),a(7,"span"),s(8,"Activeaz\u0103 programul de lucru"),r()()(),h(9,Fm,15,3,"div",49),a(10,"button",19),s(11," Salveaz\u0103 programul de lucru "),r()()()}if(i&2){let e=p();l(6),k("ngModel",e.settings.workingHours.enabled),l(3),d("ngIf",e.settings.workingHours.enabled),l(),d("disabled",e.loading)}}var ao=class i{constructor(t,e,n,o){this.userService=t;this.authService=e;this.photoService=n;this.router=o}destroy$=new xe;user=null;loading=!1;saveMessage="";settings={fullName:"",email:"",phoneNumber:"",address:"",language:"ro",darkMode:!1,emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,marketingEmails:!1,serviceReminders:!0,locationSharing:!1,profileVisibility:"public",autoAcceptRequests:!1,workingHours:{enabled:!1,start:"09:00",end:"17:00",days:[]}};availableDays=[{value:"monday",label:"Luni"},{value:"tuesday",label:"Mar\u021Bi"},{value:"wednesday",label:"Miercuri"},{value:"thursday",label:"Joi"},{value:"friday",label:"Vineri"},{value:"saturday",label:"S\xE2mb\u0103t\u0103"},{value:"sunday",label:"Duminic\u0103"}];languages=[{value:"ro",label:"Rom\xE2n\u0103"},{value:"en",label:"English"},{value:"fr",label:"Fran\xE7ais"},{value:"de",label:"Deutsch"}];profileVisibilityOptions=[{value:"public",label:"Public - vizibil pentru to\u021Bi"},{value:"specialists-only",label:"Doar pentru speciali\u0219ti"},{value:"private",label:"Privat - ascuns din c\u0103ut\u0103ri"}];ngOnInit(){this.loadUserProfile()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadUserProfile(){this.loading=!0}populateSettingsFromUser(){this.user&&(this.settings=$(O({},this.settings),{fullName:this.user.fullName||"",email:this.user.email||"",phoneNumber:this.user.contactInfo?.phoneNumber||"",address:this.user.contactInfo?.address||""}))}onImageUpload(t){let e=t.target.files?.[0];e&&(this.loading=!0,this.photoService.addProfilePicture(e).pipe(he(this.destroy$)).subscribe({next:n=>{this.showSaveMessage("Poza de profil a fost actualizat\u0103 cu succes!"),this.loadUserProfile()},error:n=>{console.error("Error uploading image:",n),this.showSaveMessage("Eroare la \xEEnc\u0103rcarea pozei de profil.",!0)},complete:()=>{this.loading=!1}}))}saveBasicInfo(){if(!this.user)return;this.loading=!0;let t={fullName:this.settings.fullName,email:this.settings.email,contactInfo:{phoneNumber:this.settings.phoneNumber,address:this.settings.address}}}saveNotificationSettings(){this.loading=!0,setTimeout(()=>{this.showSaveMessage("Set\u0103rile de notificare au fost salvate!"),this.loading=!1},1e3)}savePrivacySettings(){this.loading=!0,setTimeout(()=>{this.showSaveMessage("Set\u0103rile de confiden\u021Bialitate au fost salvate!"),this.loading=!1},1e3)}saveWorkingHours(){this.isSpecialist()&&(this.loading=!0,setTimeout(()=>{this.showSaveMessage("Programul de lucru a fost salvat!"),this.loading=!1},1e3))}toggleWorkingDay(t){let e=this.settings.workingHours.days.indexOf(t);e>-1?this.settings.workingHours.days.splice(e,1):this.settings.workingHours.days.push(t)}isWorkingDaySelected(t){return this.settings.workingHours.days.includes(t)}isSpecialist(){return this.user?.role==="Specialist"}changePassword(){this.router.navigate(["/profile/change-password"])}exportData(){this.showSaveMessage("Datele tale vor fi trimise pe email \xEEn cur\xE2nd.")}deactivateAccount(){confirm("E\u0219ti sigur c\u0103 vrei s\u0103 dezactivezi contul? Contul t\u0103u va fi ascuns temporar, dar po\u021Bi s\u0103 \xEEl reactivezi oric\xE2nd.")&&(this.loading=!0,setTimeout(()=>{this.showSaveMessage("Contul a fost dezactivat."),this.authService.logout(),this.router.navigate(["/home"])},1500))}deleteAccount(){confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi contul? Aceast\u0103 ac\u021Biune este ireversibil\u0103 \u0219i toate datele tale vor fi \u0219terse permanent.")&&confirm("Confirm\u0103 din nou: Toate datele tale vor fi \u0219terse permanent. Aceast\u0103 ac\u021Biune NU poate fi anulat\u0103.")&&(this.loading=!0,setTimeout(()=>{this.showSaveMessage("Contul a fost \u0219ters."),this.authService.logout(),this.router.navigate(["/home"])},2e3))}goBack(){this.router.navigate(["/profile"])}showSaveMessage(t,e=!1){this.saveMessage=t,setTimeout(()=>{this.saveMessage=""},3e3)}static \u0275fac=function(e){return new(e||i)(v(Be),v(V),v(Je),v(re))};static \u0275cmp=S({type:i,selectors:[["app-settings"]],decls:115,vars:25,consts:[[1,"settings-container"],[1,"settings-header"],[1,"back-button",3,"click"],[1,"settings-title"],["class","loading-spinner",4,"ngIf"],["class","save-message",3,"error",4,"ngIf"],[1,"settings-section"],[3,"ngSubmit"],[1,"form-group"],["for","fullName"],["id","fullName","type","text","name","fullName","required","",3,"ngModelChange","ngModel"],["for","email"],["id","email","type","email","name","email","required","",3,"ngModelChange","ngModel"],["for","phone"],["id","phone","type","tel","name","phone",3,"ngModelChange","ngModel"],["for","address"],["id","address","name","address","rows","3","placeholder","Strada, num\u0103rul, ora\u0219ul, jude\u021Bul",3,"ngModelChange","ngModel"],["for","profileImage"],["id","profileImage","type","file","accept","image/*",3,"change"],["type","submit",3,"disabled"],["for","language"],["id","language","name","language",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","darkMode",3,"ngModelChange","ngModel"],["type","checkbox","name","emailNotifications",3,"ngModelChange","ngModel"],["type","checkbox","name","smsNotifications",3,"ngModelChange","ngModel"],["type","checkbox","name","pushNotifications",3,"ngModelChange","ngModel"],["type","checkbox","name","serviceReminders",3,"ngModelChange","ngModel"],["type","checkbox","name","marketingEmails",3,"ngModelChange","ngModel"],["for","profileVisibility"],["id","profileVisibility","name","profileVisibility",3,"ngModelChange","ngModel"],["type","checkbox","name","locationSharing",3,"ngModelChange","ngModel"],["class","checkbox-label",4,"ngIf"],["class","settings-section",4,"ngIf"],[1,"security-actions"],["type","button",1,"security-btn",3,"click"],[1,"settings-section","danger-section"],[1,"danger-actions"],[1,"danger",3,"click","disabled"],[1,"danger","delete",3,"click","disabled"],[1,"danger-warning"],[1,"loading-spinner"],[1,"spinner"],[1,"save-message"],[3,"value"],["type","checkbox","name","autoAcceptRequests",3,"ngModelChange","ngModel"],["type","checkbox","name","workingHoursEnabled",3,"ngModelChange","ngModel"],["class","working-hours-config",4,"ngIf"],[1,"working-hours-config"],[1,"form-row"],[1,"form-group","half"],["for","startTime"],["id","startTime","type","time","name","startTime",3,"ngModelChange","ngModel"],["for","endTime"],["id","endTime","type","time","name","endTime",3,"ngModelChange","ngModel"],[1,"days-selection"],["class","day-checkbox",3,"selected",4,"ngFor","ngForOf"],[1,"day-checkbox"],["type","checkbox",3,"change","checked"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),u("click",function(){return n.goBack()}),s(3,"\u2190 \xCEnapoi la profil"),r(),a(4,"h1",3),s(5,"Set\u0103rile contului"),r()(),h(6,Om,4,0,"div",4)(7,km,2,3,"div",5),a(8,"section",6)(9,"h2"),s(10,"Informa\u021Bii de baz\u0103"),r(),a(11,"form",7),u("ngSubmit",function(){return n.saveBasicInfo()}),a(12,"div",8)(13,"label",9),s(14,"Nume complet"),r(),a(15,"input",10),I("ngModelChange",function(c){return E(n.settings.fullName,c)||(n.settings.fullName=c),c}),r()(),a(16,"div",8)(17,"label",11),s(18,"Adresa e-mail"),r(),a(19,"input",12),I("ngModelChange",function(c){return E(n.settings.email,c)||(n.settings.email=c),c}),r()(),a(20,"div",8)(21,"label",13),s(22,"Num\u0103r de telefon"),r(),a(23,"input",14),I("ngModelChange",function(c){return E(n.settings.phoneNumber,c)||(n.settings.phoneNumber=c),c}),r()(),a(24,"div",8)(25,"label",15),s(26,"Adresa"),r(),a(27,"textarea",16),I("ngModelChange",function(c){return E(n.settings.address,c)||(n.settings.address=c),c}),r()(),a(28,"div",8)(29,"label",17),s(30,"Poza de profil"),r(),a(31,"input",18),u("change",function(c){return n.onImageUpload(c)}),r(),a(32,"small"),s(33,"Formate acceptate: JPG, PNG, GIF (max 5MB)"),r()(),a(34,"button",19),s(35," Salveaz\u0103 informa\u021Biile de baz\u0103 "),r()()(),a(36,"section",6)(37,"h2"),s(38,"Preferin\u021Be aplica\u021Bie"),r(),a(39,"form",7),u("ngSubmit",function(){return n.saveNotificationSettings()}),a(40,"div",8)(41,"label",20),s(42,"Limba aplica\u021Biei"),r(),a(43,"select",21),I("ngModelChange",function(c){return E(n.settings.language,c)||(n.settings.language=c),c}),h(44,Em,2,2,"option",22),r()(),a(45,"div",23)(46,"label",24)(47,"input",25),I("ngModelChange",function(c){return E(n.settings.darkMode,c)||(n.settings.darkMode=c),c}),r(),a(48,"span"),s(49,"Activeaz\u0103 modul \xEEntunecat"),r()()(),a(50,"button",19),s(51," Salveaz\u0103 preferin\u021Bele "),r()()(),a(52,"section",6)(53,"h2"),s(54,"Notific\u0103ri"),r(),a(55,"form",7),u("ngSubmit",function(){return n.saveNotificationSettings()}),a(56,"div",23)(57,"label",24)(58,"input",26),I("ngModelChange",function(c){return E(n.settings.emailNotifications,c)||(n.settings.emailNotifications=c),c}),r(),a(59,"span"),s(60,"Notific\u0103ri prin e-mail"),r()(),a(61,"label",24)(62,"input",27),I("ngModelChange",function(c){return E(n.settings.smsNotifications,c)||(n.settings.smsNotifications=c),c}),r(),a(63,"span"),s(64,"Notific\u0103ri prin SMS"),r()(),a(65,"label",24)(66,"input",28),I("ngModelChange",function(c){return E(n.settings.pushNotifications,c)||(n.settings.pushNotifications=c),c}),r(),a(67,"span"),s(68,"Notific\u0103ri push \xEEn browser"),r()(),a(69,"label",24)(70,"input",29),I("ngModelChange",function(c){return E(n.settings.serviceReminders,c)||(n.settings.serviceReminders=c),c}),r(),a(71,"span"),s(72,"Amintiri pentru serviciile programate"),r()(),a(73,"label",24)(74,"input",30),I("ngModelChange",function(c){return E(n.settings.marketingEmails,c)||(n.settings.marketingEmails=c),c}),r(),a(75,"span"),s(76,"E-mailuri de marketing \u0219i promo\u021Bii"),r()()(),a(77,"button",19),s(78," Salveaz\u0103 set\u0103rile de notificare "),r()()(),a(79,"section",6)(80,"h2"),s(81,"Confiden\u021Bialitate"),r(),a(82,"form",7),u("ngSubmit",function(){return n.savePrivacySettings()}),a(83,"div",8)(84,"label",31),s(85,"Vizibilitatea profilului"),r(),a(86,"select",32),I("ngModelChange",function(c){return E(n.settings.profileVisibility,c)||(n.settings.profileVisibility=c),c}),h(87,Im,2,2,"option",22),r()(),a(88,"div",23)(89,"label",24)(90,"input",33),I("ngModelChange",function(c){return E(n.settings.locationSharing,c)||(n.settings.locationSharing=c),c}),r(),a(91,"span"),s(92,"Permite partajarea loca\u021Biei pentru servicii"),r()(),h(93,Dm,4,1,"label",34),r(),a(94,"button",19),s(95," Salveaz\u0103 set\u0103rile de confiden\u021Bialitate "),r()()(),h(96,Rm,12,3,"section",35),a(97,"section",6)(98,"h2"),s(99,"Securitate"),r(),a(100,"div",36)(101,"button",37),u("click",function(){return n.changePassword()}),s(102," Schimb\u0103 parola "),r(),a(103,"button",37),u("click",function(){return n.exportData()}),s(104," Export\u0103 datele mele "),r()()(),a(105,"section",38)(106,"h2"),s(107,"Ac\u021Biuni cont"),r(),a(108,"div",39)(109,"button",40),u("click",function(){return n.deactivateAccount()}),s(110," Dezactiveaz\u0103 contul temporar "),r(),a(111,"button",41),u("click",function(){return n.deleteAccount()}),s(112," \u0218terge contul permanent "),r()(),a(113,"small",42),s(114," \u26A0\uFE0F Ac\u021Biunile de mai sus sunt ireversibile. Te rug\u0103m s\u0103 fii foarte atent. "),r()()()),e&2&&(l(6),d("ngIf",n.loading),l(),d("ngIf",n.saveMessage),l(8),k("ngModel",n.settings.fullName),l(4),k("ngModel",n.settings.email),l(4),k("ngModel",n.settings.phoneNumber),l(4),k("ngModel",n.settings.address),l(7),d("disabled",n.loading),l(9),k("ngModel",n.settings.language),l(),d("ngForOf",n.languages),l(3),k("ngModel",n.settings.darkMode),l(3),d("disabled",n.loading),l(8),k("ngModel",n.settings.emailNotifications),l(4),k("ngModel",n.settings.smsNotifications),l(4),k("ngModel",n.settings.pushNotifications),l(4),k("ngModel",n.settings.serviceReminders),l(4),k("ngModel",n.settings.marketingEmails),l(3),d("disabled",n.loading),l(9),k("ngModel",n.settings.profileVisibility),l(),d("ngForOf",n.profileVisibilityOptions),l(3),k("ngModel",n.settings.locationSharing),l(3),d("ngIf",n.isSpecialist()),l(),d("disabled",n.loading),l(2),d("ngIf",n.isSpecialist()),l(13),d("disabled",n.loading),l(2),d("disabled",n.loading))},dependencies:[W,we,Ht,Zt,ae,Ot,mt,J,Me,Se,ee,Pe,T,G],styles:[".settings-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background-color:#f9f6ff;border-radius:12px;box-shadow:0 0 8px #0000001a}.settings-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:2rem;gap:1rem}.settings-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:#6541f0;color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:background-color .3s}.settings-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:#5134c9}.settings-title[_ngcontent-%COMP%]{font-size:1.8rem;margin:0;font-weight:700;flex:1}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #6541f0;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;color:#666}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.save-message[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem;border-radius:6px;background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.save-message.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-color:#f5c6cb}.settings-section[_ngcontent-%COMP%]{margin-bottom:3rem;border-top:1px solid #e1e1e1;padding-top:2rem}.settings-section[_ngcontent-%COMP%]:first-of-type{border-top:none}.settings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:1.5rem;color:#333;font-weight:600}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.5rem;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border-radius:6px;border:1px solid #ddd;font-size:1rem;transition:border-color .3s,box-shadow .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#6541f0;box-shadow:0 0 0 3px #6541f01a}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.25rem;color:#666;font-size:.85rem}.form-group.half[_ngcontent-%COMP%]{width:calc(50% - .5rem)}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.checkbox-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem;cursor:pointer;padding:.5rem;border-radius:4px;transition:background-color .3s}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-right:.75rem;transform:scale(1.2)}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;color:#333}.working-hours-config[_ngcontent-%COMP%]{background:#f8f9fa;padding:1.5rem;border-radius:8px;margin-top:1rem}.days-selection[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.days-selection[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]{background:#fff;border:2px solid #ddd;border-radius:6px;padding:.5rem 1rem;cursor:pointer;transition:all .3s;min-width:80px;text-align:center}.days-selection[_ngcontent-%COMP%]   .day-checkbox.selected[_ngcontent-%COMP%]{background:#6541f0;border-color:#6541f0;color:#fff}.days-selection[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]:hover{border-color:#6541f0}.days-selection[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.days-selection[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500}.security-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.security-actions[_ngcontent-%COMP%]   .security-btn[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .3s}.security-actions[_ngcontent-%COMP%]   .security-btn[_ngcontent-%COMP%]:hover{background:#138496}.danger-section[_ngcontent-%COMP%]{border-top:2px solid #dc3545;background:#fff5f5;padding:2rem;border-radius:8px}.danger-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#dc3545}.danger-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;flex-wrap:wrap}.danger-warning[_ngcontent-%COMP%]{color:#dc3545;font-style:italic;display:block;margin-top:1rem}button[_ngcontent-%COMP%]{display:inline-block;padding:.75rem 1.5rem;border:none;border-radius:6px;background-color:#6541f0;color:#fff;font-weight:500;cursor:pointer;transition:all .3s;font-size:1rem}button[_ngcontent-%COMP%]:hover{background-color:#5134c9;transform:translateY(-1px)}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed;transform:none}button.danger[_ngcontent-%COMP%]{background-color:#dc3545;margin-right:1rem}button.danger[_ngcontent-%COMP%]:hover{background-color:#c82333}button.danger.delete[_ngcontent-%COMP%]{background-color:#a71d2a}button.danger.delete[_ngcontent-%COMP%]:hover{background-color:#8b1a26}@media (max-width: 768px){.settings-container[_ngcontent-%COMP%]{padding:1rem;margin:1rem}.settings-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.settings-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{align-self:flex-start}.form-row[_ngcontent-%COMP%]{flex-direction:column}.form-row[_ngcontent-%COMP%]   .form-group.half[_ngcontent-%COMP%]{width:100%}.days-selection[_ngcontent-%COMP%]{justify-content:center}.days-selection[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]{flex:1;min-width:60px}.security-actions[_ngcontent-%COMP%], .danger-actions[_ngcontent-%COMP%]{flex-direction:column}.security-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .danger-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};var Am=()=>[];function zm(i,t){if(i&1&&y(0,"img",9),i&2){let e=p().$implicit;d("src",e.senderUserProfilePictureUrl,de)}}function Vm(i,t){i&1&&(ce(0),y(1,"img",10),le())}function Nm(i,t){if(i&1&&(a(0,"div",3)(1,"div",4),h(2,zm,1,1,"img",5),a(3,"div",6)(4,"strong"),s(5),r(),a(6,"span",7),h(7,Vm,2,0,"ng-container",8),r()()(),a(8,"p"),s(9),r(),a(10,"small"),s(11),R(12,"date"),r()()),i&2){let e=t.$implicit;l(2),d("ngIf",e.senderUserProfilePictureUrl),l(3),P(e.senderUserFullName),l(2),d("ngForOf",Ee(8,Am).constructor(e.rating)),l(2),P(e.content),l(2),P(se(12,5,e.createdAt,"shortDate"))}}var so=class i{constructor(t){this.reviewService=t}reviews=[];page=1;pageSize=5;dummyReviews=[{id:"1",senderUserFullName:"Ana Popescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/21.jpg",rating:5,content:"Excelent! A fost foarte profesionist\u0103 \u0219i m-a ajutat rapid.",createdAt:new Date("2024-12-05T14:35:00"),updatedAt:new Date("2024-12-05T14:35:00")},{id:"2",senderUserFullName:"Andrei Ionescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/32.jpg",rating:4,content:"Serviciu bun, dar am avut o mic\u0103 \xEEnt\xE2rziere la \xEEnceput.",createdAt:new Date("2025-01-10T09:20:00"),updatedAt:new Date("2025-01-10T09:20:00")},{id:"3",senderUserFullName:"Mihai Georgescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/45.jpg",rating:3,content:"Experien\u021B\u0103 ok, dar se poate \xEEmbun\u0103t\u0103\u021Bi comunicarea.",createdAt:new Date("2025-03-18T17:45:00"),updatedAt:new Date("2025-03-18T17:45:00")},{id:"4",senderUserFullName:"Elena Tudor",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/55.jpg",rating:5,content:"Foarte mul\u021Bumit\u0103! Recomand cu \xEEncredere!",createdAt:new Date("2025-04-02T11:10:00"),updatedAt:new Date("2025-04-02T11:10:00")},{id:"5",senderUserFullName:"Radu Vasile",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/61.jpg",rating:2,content:"Din p\u0103cate, nu a fost ce am a\u0219teptat. Probleme de punctualitate.",createdAt:new Date("2025-02-14T08:30:00"),updatedAt:new Date("2025-02-14T08:30:00")},{id:"6",senderUserFullName:"Ioana Marinescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/88.jpg",rating:4,content:"Totul a decurs bine, dar a\u0219 fi vrut mai multe explica\u021Bii.",createdAt:new Date("2025-05-22T15:50:00"),updatedAt:new Date("2025-05-22T15:50:00")}];ngOnInit(){this.reviews=this.dummyReviews,this.loadReviews()}loadReviews(){this.reviewService.getReviews(this.page,this.pageSize).subscribe({next:t=>{this.reviews=t.response?.data||[]},error:t=>{console.error("Error loading reviews",t)}})}static \u0275fac=function(e){return new(e||i)(v(un))};static \u0275cmp=S({type:i,selectors:[["app-reviews"]],decls:5,vars:1,consts:[[1,"account-card"],[1,"reviews-container"],["class","review-card",4,"ngFor","ngForOf"],[1,"review-card"],[1,"header"],["alt","Profil",3,"src",4,"ngIf"],[1,"review-info"],[1,"rating"],[4,"ngFor","ngForOf"],["alt","Profil",3,"src"],["src","assets/icons/star-filled.svg","alt","star",2,"width","24px","height","24px","margin-right","0"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Recenziile tale"),r(),h(4,Nm,13,9,"div",2),r()()),e&2&&(l(4),d("ngForOf",n.reviews))},dependencies:[G,T,ve],styles:[".account-card[_ngcontent-%COMP%]{background:#e0caff;max-width:1000px;margin:32px auto;box-shadow:0 4px 16px #0000001a;font-family:Roboto Mono,monospace;border:3px solid black}.reviews-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:32px}.reviews-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px;text-align:center;margin-bottom:32px;font-weight:700;color:#000}.review-card[_ngcontent-%COMP%]{background-color:#f5f2ff;border-radius:10px;padding:1.25rem;margin-bottom:1.5rem;box-shadow:0 2px 8px #0000000d;transition:transform .2s}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;object-fit:cover;margin-right:16px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;padding-top:4px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:18px;line-height:1;margin-left:3px;margin-bottom:2px}.review-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem;color:#333}.review-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;text-align:right;color:#777;font-size:.85rem}.rating[_ngcontent-%COMP%]{display:flex;align-items:center}.rating[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:1px}"]})};var co=class i{constructor(t){this.fb=t;this.contactForm=this.fb.group({name:["",dt.required],email:["",[dt.required,dt.email]],subject:["",dt.required],message:["",dt.required]})}contactForm;onSubmit(){if(this.contactForm.valid){let t=this.contactForm.value;console.log("Contact form data:",t),alert("Mesajul a fost trimis cu succes!"),this.contactForm.reset()}}static \u0275fac=function(e){return new(e||i)(v(Xr))};static \u0275cmp=S({type:i,selectors:[["app-contact-us"]],decls:47,vars:1,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"contact-wrapper"],[3,"ngSubmit","formGroup"],["for","name"],["id","name","type","text","formControlName","name","placeholder","Ex: Ana Popescu"],["for","email"],["id","email","type","email","formControlName","email","placeholder","Ex: ana@email.com"],["for","subject"],["id","subject","type","text","formControlName","subject","placeholder","Subiectul mesajului"],["for","message"],["id","message","rows","5","formControlName","message","placeholder","Scrie-ne mesajul t\u0103u..."],[1,"form-actions"],["type","submit"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"Ai o \u021Beav\u0103 spart\u0103?"),r(),a(4,"h1",2),s(5,"\u021Ai s-a stricat chiuveta?"),r(),a(6,"h1"),s(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),a(8,"strong",3),s(9,"ExpertEase"),r(),s(10,"!"),r()(),a(11,"p"),s(12,"Peste "),a(13,"strong"),s(14,"100 de speciali\u0219ti"),r(),s(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),r()(),a(16,"div",4)(17,"h2"),s(18,"Contacteaz\u0103-ne"),r(),a(19,"p")(20,"strong"),s(21,"Email:"),r(),s(22," contact@expertease.ro"),r(),a(23,"p")(24,"strong"),s(25,"Telefon:"),r(),s(26," +40 712 345 678"),r(),a(27,"p")(28,"strong"),s(29,"Adres\u0103:"),r(),s(30," Str. Exemplului 123, Bucure\u0219ti"),r(),a(31,"form",5),u("ngSubmit",function(){return n.onSubmit()}),a(32,"label",6),s(33,"Nume complet"),r(),y(34,"input",7),a(35,"label",8),s(36,"Email"),r(),y(37,"input",9),a(38,"label",10),s(39,"Subiect"),r(),y(40,"input",11),a(41,"label",12),s(42,"Mesaj"),r(),y(43,"textarea",13),a(44,"div",14)(45,"button",15),s(46,"Trimite"),r()()()()),e&2&&(l(31),d("formGroup",n.contactForm))},dependencies:[ut,we,ae,J,Me,Fo,Ro],styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 16px;font-family:Roboto Mono,monospace}@media (max-width: 768px){.home-wrapper[_ngcontent-%COMP%]{padding:20px 12px}}@media (max-width: 480px){.home-wrapper[_ngcontent-%COMP%]{padding:16px 8px}}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;max-width:100%}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;font-size:clamp(1.5rem,4vw,2.5rem);line-height:1.2;word-wrap:break-word;hyphens:auto}@media (max-width: 768px){.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.3rem 0;font-size:clamp(1.2rem,5vw,2rem)}}@media (max-width: 480px){.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.2rem 0;font-size:clamp(1rem,6vw,1.5rem)}}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}@media (max-width: 480px){.brand-highlight[_ngcontent-%COMP%]{letter-spacing:.2px}}.contact-wrapper[_ngcontent-%COMP%]{max-width:600px;width:100%;margin:10px auto;padding:24px;font-family:Roboto Mono,monospace;border:2px solid #3c1a7d;border-radius:8px;background-color:#fff;box-sizing:border-box}@media (max-width: 768px){.contact-wrapper[_ngcontent-%COMP%]{max-width:90%;padding:20px;margin:10px 5%}}@media (max-width: 480px){.contact-wrapper[_ngcontent-%COMP%]{max-width:95%;padding:16px;margin:10px 2.5%;border-width:1px;border-radius:6px}}h2[_ngcontent-%COMP%]{color:#3c1a7d;margin-bottom:24px;text-align:center;font-size:clamp(1.3rem,3vw,1.6rem)}@media (max-width: 768px){h2[_ngcontent-%COMP%]{margin-bottom:20px}}@media (max-width: 480px){h2[_ngcontent-%COMP%]{margin-bottom:16px}}.contact-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px;font-size:clamp(.9rem,2vw,1rem);line-height:1.5}@media (max-width: 480px){.contact-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px;word-wrap:break-word}}label[_ngcontent-%COMP%]{display:block;margin:12px 0 4px;font-size:clamp(.9rem,2vw,1rem);font-weight:500}@media (max-width: 768px){label[_ngcontent-%COMP%]{margin:10px 0 3px}}@media (max-width: 480px){label[_ngcontent-%COMP%]{margin:8px 0 2px}}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;height:auto;padding:12px 10px;line-height:1.4;font-size:clamp(.9rem,2vw,14px);box-sizing:border-box;border:1px solid #ccc;border-radius:4px;margin-bottom:12px;font-family:Roboto Mono,monospace;transition:border-color .3s ease,box-shadow .3s ease}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3c1a7d;box-shadow:0 0 0 2px #3c1a7d1a}@media (max-width: 768px){input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:10px 8px;font-size:14px;margin-bottom:10px}}@media (max-width: 480px){input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:8px 6px;font-size:13px;margin-bottom:8px}}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:120px}@media (max-width: 768px){textarea[_ngcontent-%COMP%]{min-height:100px}}@media (max-width: 480px){textarea[_ngcontent-%COMP%]{min-height:80px}}.form-actions[_ngcontent-%COMP%]{text-align:center;margin-top:20px}@media (max-width: 768px){.form-actions[_ngcontent-%COMP%]{margin-top:16px}}@media (max-width: 480px){.form-actions[_ngcontent-%COMP%]{margin-top:12px}}button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:clamp(.9rem,2vw,16px);font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:min(300px,90%);height:44px;cursor:pointer;transition:all .3s ease;align-self:center}button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff;transform:translateY(-1px)}button[_ngcontent-%COMP%]:active{transform:translateY(0)}button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}@media (max-width: 768px){button[_ngcontent-%COMP%]{width:min(280px,95%);height:42px;font-size:15px}}@media (max-width: 480px){button[_ngcontent-%COMP%]{width:100%;height:40px;font-size:14px;border-width:1px}}@media (hover: none) and (pointer: coarse){input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{min-height:44px}button[_ngcontent-%COMP%]{min-height:48px}}"]})};var lo=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-terms"]],decls:104,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"terms-container"],["href","/confidentialitate",1,"privacy-link"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"Ai o \u021Beav\u0103 spart\u0103?"),r(),a(4,"h1",2),s(5,"\u021Ai s-a stricat chiuveta?"),r(),a(6,"h1"),s(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),a(8,"strong",3),s(9,"ExpertEase"),r(),s(10,"!"),r()(),a(11,"p"),s(12,"Peste "),a(13,"strong"),s(14,"100 de speciali\u0219ti"),r(),s(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),r()(),a(16,"div",4)(17,"section")(18,"h2"),s(19,"Introducere"),r(),a(20,"p"),s(21," Acest document stabile\u0219te termenii \u0219i condi\u021Biile de utilizare a platformei "),a(22,"strong"),s(23,"ExpertEase"),r(),s(24,". Prin accesarea sau utilizarea serviciilor noastre, sunte\u021Bi de acord cu ace\u0219ti termeni. "),r()(),a(25,"section")(26,"h2"),s(27,"Defini\u021Bii"),r(),a(28,"p")(29,"strong"),s(30,"Platform\u0103:"),r(),s(31," aplica\u021Bia ExpertEase care faciliteaz\u0103 conexiunea dintre clien\u021Bi \u0219i speciali\u0219ti."),r(),a(32,"p")(33,"strong"),s(34,"Client:"),r(),s(35," utilizator care solicit\u0103 servicii."),r(),a(36,"p")(37,"strong"),s(38,"Specialist:"),r(),s(39," utilizator care ofer\u0103 servicii."),r()(),a(40,"section")(41,"h2"),s(42,"Condi\u021Bii de utilizare"),r(),a(43,"ul")(44,"li"),s(45,"Accesul necesit\u0103 crearea unui cont valid."),r(),a(46,"li"),s(47,"Utilizatorii trebuie s\u0103 aib\u0103 minim 18 ani."),r(),a(48,"li"),s(49,"Este interzis\u0103 utilizarea platformei \xEEn scopuri ilegale, abuzive sau frauduloase."),r()()(),a(50,"section")(51,"h2"),s(52,"Obliga\u021Biile utilizatorilor"),r(),a(53,"p")(54,"strong"),s(55,"Clien\u021Bi:"),r()(),a(56,"ul")(57,"li"),s(58,"S\u0103 ofere informa\u021Bii clare \u0219i reale despre cerere."),r(),a(59,"li"),s(60,"S\u0103 respecte termenii agrea\u021Bi cu specialistul."),r()(),a(61,"p")(62,"strong"),s(63,"Speciali\u0219ti:"),r()(),a(64,"ul")(65,"li"),s(66,"S\u0103 ofere servicii conforme cu descrierea."),r(),a(67,"li"),s(68,"S\u0103 respecte confiden\u021Bialitatea \u0219i termenele stabilite."),r()()(),a(69,"section")(70,"h2"),s(71,"Pl\u0103\u021Bi \u0219i comisioane"),r(),a(72,"p"),s(73," Pl\u0103\u021Bile se realizeaz\u0103 prin Stripe. Comisioanele platformei, dac\u0103 exist\u0103, vor fi afi\u0219ate transparent \xEEnainte de confirmarea serviciului. "),r()(),a(74,"section")(75,"h2"),s(76,"Limitarea r\u0103spunderii"),r(),a(77,"p"),s(78," Platforma ExpertEase ac\u021Bioneaz\u0103 doar ca intermediar. Nu ne asum\u0103m responsabilitatea pentru calitatea serviciilor oferite de speciali\u0219ti. "),r()(),a(79,"section")(80,"h2"),s(81,"Suspendarea contului"),r(),a(82,"p"),s(83," Ne rezerv\u0103m dreptul de a suspenda sau \u0219terge conturi care \xEEncalc\u0103 ace\u0219ti termeni sau folosesc platforma \xEEn mod abuziv. "),r()(),a(84,"section")(85,"h2"),s(86,"Protec\u021Bia datelor"),r(),a(87,"p"),s(88," Datele personale sunt gestionate conform "),a(89,"a",5),s(90,"Politicii de confiden\u021Bialitate"),r(),s(91,". "),r()(),a(92,"section")(93,"h2"),s(94,"Modificarea termenilor"),r(),a(95,"p"),s(96," Putem actualiza ace\u0219ti termeni periodic. Modific\u0103rile vor fi anun\u021Bate \xEEn aplica\u021Bie \u0219i vor intra \xEEn vigoare la publicare. "),r()(),a(97,"section")(98,"h2"),s(99,"Contact"),r(),a(100,"p"),s(101," Pentru \xEEntreb\u0103ri legate de ace\u0219ti termeni, ne pute\u021Bi contacta la: "),a(102,"strong"),s(103,"contact@expertease.ro"),r()()()())},styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 16px;font-family:Roboto Mono,monospace}@media (max-width: 768px){.home-wrapper[_ngcontent-%COMP%]{padding:20px 12px}}@media (max-width: 480px){.home-wrapper[_ngcontent-%COMP%]{padding:16px 8px}}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;max-width:100%}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;font-size:clamp(1.5rem,4vw,2.5rem);line-height:1.2;word-wrap:break-word;hyphens:auto}@media (max-width: 768px){.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.3rem 0;font-size:clamp(1.2rem,5vw,2rem)}}@media (max-width: 480px){.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.2rem 0;font-size:clamp(1rem,6vw,1.5rem)}}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}@media (max-width: 480px){.brand-highlight[_ngcontent-%COMP%]{letter-spacing:.2px}}.home-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%}.terms-container[_ngcontent-%COMP%]{max-width:900px;width:100%;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6;box-sizing:border-box}@media (max-width: 1024px){.terms-container[_ngcontent-%COMP%]{max-width:95%;padding:0 20px}}@media (max-width: 768px){.terms-container[_ngcontent-%COMP%]{max-width:100%;padding:0 16px;font-size:14px;line-height:1.5}}@media (max-width: 480px){.terms-container[_ngcontent-%COMP%]{padding:0 12px;font-size:13px;line-height:1.4}}.terms-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word}@media (max-width: 768px){.terms-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:20px;margin-bottom:24px;border-radius:6px}}@media (max-width: 480px){.terms-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:16px;margin-bottom:20px;border-width:1px}}.terms-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d;font-size:clamp(1.2rem,3vw,1.5rem);line-height:1.3}@media (max-width: 768px){.terms-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}}@media (max-width: 480px){.terms-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:8px}}.terms-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:16px;word-wrap:break-word;overflow-wrap:break-word}.terms-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}@media (max-width: 768px){.terms-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px}}@media (max-width: 480px){.terms-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}}.terms-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-top:8px;margin-bottom:12px}@media (max-width: 768px){.terms-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px;margin-top:6px;margin-bottom:10px}}@media (max-width: 480px){.terms-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:16px;margin-top:4px;margin-bottom:8px}}.terms-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;line-height:1.5;word-wrap:break-word;overflow-wrap:break-word}@media (max-width: 768px){.terms-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px}}@media (max-width: 480px){.terms-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4px;line-height:1.4}}.privacy-link[_ngcontent-%COMP%]{color:#000;text-decoration:none;font-weight:700;word-wrap:break-word;overflow-wrap:break-word;transition:all .3s ease}.privacy-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#3c1a7d}.privacy-link[_ngcontent-%COMP%]:focus{outline:2px solid #3c1a7d;outline-offset:2px;border-radius:2px}.terms-container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word}"]})};var po=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-privacy"]],decls:103,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"privacy-container"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"Ai o \u021Beav\u0103 spart\u0103?"),r(),a(4,"h1",2),s(5,"\u021Ai s-a stricat chiuveta?"),r(),a(6,"h1"),s(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),a(8,"strong",3),s(9,"ExpertEase"),r(),s(10,"!"),r()(),a(11,"p"),s(12,"Peste "),a(13,"strong"),s(14,"100 de speciali\u0219ti"),r(),s(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),r()(),a(16,"div",4)(17,"section")(18,"h2"),s(19,"Politica de Confiden\u021Bialitate"),r(),a(20,"p"),s(21," Aceast\u0103 politic\u0103 explic\u0103 modul \xEEn care ExpertEase colecteaz\u0103, utilizeaz\u0103 \u0219i protejeaz\u0103 datele personale ale utilizatorilor platformei. Ne angaj\u0103m s\u0103 respect\u0103m confiden\u021Bialitatea \u0219i s\u0103 protej\u0103m toate informa\u021Biile personale furnizate. "),r()(),a(22,"section")(23,"h2"),s(24,"Tipuri de date colectate"),r(),a(25,"ul")(26,"li"),s(27,"Nume \u0219i prenume"),r(),a(28,"li"),s(29,"Adres\u0103 de email"),r(),a(30,"li"),s(31,"Num\u0103r de telefon (dac\u0103 este furnizat)"),r(),a(32,"li"),s(33,"Mesaje transmise prin formularele de contact"),r(),a(34,"li"),s(35,"Date pentru autentificare \xEEn cont"),r(),a(36,"li"),s(37,"Date de plat\u0103 (prin Stripe)"),r(),a(38,"li"),s(39,"Informa\u021Bii despre dispozitiv \u0219i IP (pentru securitate)"),r()()(),a(40,"section")(41,"h2"),s(42,"Scopul prelucr\u0103rii datelor"),r(),a(43,"ul")(44,"li"),s(45,"Crearea \u0219i administrarea contului de utilizator"),r(),a(46,"li"),s(47,"Procesarea solicit\u0103rilor \u0219i a pl\u0103\u021Bilor"),r(),a(48,"li"),s(49,"Comunicare \xEEntre utilizatori (client\u2013specialist)"),r(),a(50,"li"),s(51,"\xCEmbun\u0103t\u0103\u021Birea platformei \u0219i a experien\u021Bei de utilizare"),r(),a(52,"li"),s(53,"Respectarea obliga\u021Biilor legale"),r()()(),a(54,"section")(55,"h2"),s(56,"Temeiuri legale (GDPR)"),r(),a(57,"p"),s(58," Datele sunt colectate \xEEn baza consim\u021B\u0103m\xE2ntului dumneavoastr\u0103, a interesului legitim al platformei sau \xEEn scopul execut\u0103rii unui contract. "),r()(),a(59,"section")(60,"h2"),s(61,"Durata de stocare a datelor"),r(),a(62,"p"),s(63," Datele sunt p\u0103strate pe durata existen\u021Bei contului sau conform obliga\u021Biilor legale. Utilizatorii pot solicita \u0219tergerea acestora \xEEn orice moment. "),r()(),a(64,"section")(65,"h2"),s(66,"Partajarea datelor"),r(),a(67,"p"),s(68," Datele nu sunt v\xE2ndute c\u0103tre ter\u021Bi. Ele pot fi partajate doar cu furnizori de servicii esen\u021Biali (ex: Stripe pentru procesarea pl\u0103\u021Bilor). "),r()(),a(69,"section")(70,"h2"),s(71,"Drepturile utilizatorilor"),r(),a(72,"ul")(73,"li"),s(74,"Dreptul de acces la date"),r(),a(75,"li"),s(76,"Dreptul de rectificare sau \u0219tergere"),r(),a(77,"li"),s(78,"Dreptul de restric\u021Bionare a prelucr\u0103rii"),r(),a(79,"li"),s(80,"Dreptul de opozi\u021Bie"),r(),a(81,"li"),s(82,"Dreptul la portabilitatea datelor"),r(),a(83,"li"),s(84,"Dreptul de a depune pl\xE2ngere la ANSPDCP"),r()()(),a(85,"section")(86,"h2"),s(87,"Securitatea datelor"),r(),a(88,"p"),s(89," Implement\u0103m m\u0103suri tehnice \u0219i organizatorice pentru a proteja datele (criptare, acces limitat, autentificare securizat\u0103). "),r()(),a(90,"section")(91,"h2"),s(92,"Modific\u0103ri ale politicii"),r(),a(93,"p"),s(94," Politica poate fi actualizat\u0103. Modific\u0103rile vor fi publicate pe aceast\u0103 pagin\u0103 \u0219i vor intra \xEEn vigoare imediat. "),r()(),a(95,"section")(96,"h2"),s(97,"Contact"),r(),a(98,"p"),s(99," Pentru \xEEntreb\u0103ri legate de datele tale, ne po\u021Bi scrie la "),a(100,"strong"),s(101,"contact@expertease.ro"),r(),s(102,". "),r()()())},styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 16px;font-family:Roboto Mono,monospace}@media (max-width: 768px){.home-wrapper[_ngcontent-%COMP%]{padding:20px 12px}}@media (max-width: 480px){.home-wrapper[_ngcontent-%COMP%]{padding:16px 8px}}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;max-width:100%}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;font-size:clamp(1.5rem,4vw,2.5rem);line-height:1.2;word-wrap:break-word;hyphens:auto}@media (max-width: 768px){.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.3rem 0;font-size:clamp(1.2rem,5vw,2rem)}}@media (max-width: 480px){.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.2rem 0;font-size:clamp(1rem,6vw,1.5rem)}}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}@media (max-width: 480px){.brand-highlight[_ngcontent-%COMP%]{letter-spacing:.2px}}.privacy-container[_ngcontent-%COMP%]{max-width:900px;width:100%;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6;box-sizing:border-box}@media (max-width: 1024px){.privacy-container[_ngcontent-%COMP%]{max-width:95%;padding:0 20px}}@media (max-width: 768px){.privacy-container[_ngcontent-%COMP%]{max-width:100%;padding:0 16px;font-size:14px;line-height:1.5}}@media (max-width: 480px){.privacy-container[_ngcontent-%COMP%]{padding:0 12px;font-size:13px;line-height:1.4}}.privacy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word}@media (max-width: 768px){.privacy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:20px;margin-bottom:24px;border-radius:6px}}@media (max-width: 480px){.privacy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:16px;margin-bottom:20px;border-width:1px}}.privacy-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d;font-size:clamp(1.2rem,3vw,1.5rem);line-height:1.3}@media (max-width: 768px){.privacy-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}}@media (max-width: 480px){.privacy-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:8px}}.privacy-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:16px;word-wrap:break-word;overflow-wrap:break-word}@media (max-width: 768px){.privacy-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:12px}}@media (max-width: 480px){.privacy-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}}.privacy-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-top:8px;margin-bottom:12px}@media (max-width: 768px){.privacy-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px;margin-top:6px;margin-bottom:10px}}@media (max-width: 480px){.privacy-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:16px;margin-top:4px;margin-bottom:8px}}.privacy-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;line-height:1.5;word-wrap:break-word;overflow-wrap:break-word}@media (max-width: 768px){.privacy-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px}}@media (max-width: 480px){.privacy-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:4px;line-height:1.4}}.privacy-container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word}"]})};var Um=["*"],Vn=class{_ngZone;_pending=[];_listeners=[];_targetStream=new fe(void 0);_clearListeners(){for(let t of this._listeners)t.remove();this._listeners=[]}constructor(t){this._ngZone=t}getLazyEmitter(t){return this._targetStream.pipe(Qo(e=>{let n=new Ho(o=>{if(!e){this._pending.push({observable:n,observer:o});return}let c=e.addListener(t,m=>{this._ngZone.run(()=>o.next(m))});if(!c){o.complete();return}return this._listeners.push(c),()=>c.remove()});return n}))}setTarget(t){let e=this._targetStream.value;t!==e&&(e&&(this._clearListeners(),this._pending=[]),this._targetStream.next(t),this._pending.forEach(n=>n.observable.subscribe(n.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},zn={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},Ma="500px",wa="500px",mo=(()=>{class i{_elementRef=Ae(rt);_ngZone=Ae(ze);_eventManager=new Vn(Ae(ze));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=Ma;width=wa;mapId;mapTypeId;set center(e){this._center=e}_center;set zoom(e){this._zoom=e}_zoom;set options(e){this._options=e||zn}_options=zn;mapInitialized=new F;authFailure=new F;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let e=Ae(er);if(this._isBrowser=dr(e),this._isBrowser){let n=window;n.google,this._existingAuthFailureCallback=n.gm_authFailure,n.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(e){(e.height||e.width)&&this._setSize();let n=this.googleMap;n&&(e.options&&n.setOptions(this._combineOptions()),e.center&&this._center&&n.setCenter(this._center),e.zoom&&this._zoom!=null&&n.setZoom(this._zoom),e.mapTypeId&&this.mapTypeId&&n.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(e=>this._initialize(e.Map))}))}_initialize(e){this._ngZone.runOutsideAngular(()=>{this.googleMap=new e(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let e=window;e.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(e,n){this._assertInitialized(),this.googleMap.fitBounds(e,n)}panBy(e,n){this._assertInitialized(),this.googleMap.panBy(e,n)}panTo(e){this._assertInitialized(),this.googleMap.panTo(e)}panToBounds(e,n){this._assertInitialized(),this.googleMap.panToBounds(e,n)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(Un(1)).toPromise()}_setSize(){if(this._mapEl){let e=this._mapEl.style;e.height=this.height===null?"":Sa(this.height)||Ma,e.width=this.width===null?"":Sa(this.width)||wa}}_combineOptions(){let e=this._options||{};return $(O({},e),{center:this._center||e.center||zn.center,zoom:this._zoom??e.zoom??zn.zoom,mapTypeId:this.mapTypeId||e.mapTypeId||zn.mapTypeId,mapId:this.mapId||e.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=S({type:i,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[ke],ngContentSelectors:Um,decls:2,vars:0,consts:[[1,"map-container"]],template:function(n,o){n&1&&(nr(),y(0,"div",0),ir(1))},encapsulation:2,changeDetection:0})}return i})(),Lm=/([A-Za-z%]+)$/;function Sa(i){return i==null?"":Lm.test(i)?i:`${i}px`}var Pa=(()=>{class i{_googleMap=Ae(mo);_elementRef=Ae(rt);_ngZone=Ae(ze);_eventManager=new Vn(Ae(ze));_options=new fe({});_position=new fe(void 0);_destroy=new xe;infoWindow;set options(e){this._options.next(e||{})}set position(e){this._position.next(e)}closeclick=this._eventManager.getLazyEmitter("closeclick");contentChanged=this._eventManager.getLazyEmitter("content_changed");domready=this._eventManager.getLazyEmitter("domready");positionChanged=this._eventManager.getLazyEmitter("position_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");infoWindowInitialized=new F;constructor(){}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(Un(1)).subscribe(e=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,e):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(n=>{this._initialize(n.InfoWindow,e)})})})}_initialize(e,n){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new e(n),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(e,n){this.open({getAnchor:()=>e},void 0,n)}open(e,n,o){this._assertInitialized();let c=e?e.getAnchor():void 0;(this.infoWindow.get("anchor")!==c||!c)&&(this._elementRef.nativeElement.style.display=o?"none":"",o&&this.infoWindow.setContent(o),this.infoWindow.open({map:this._googleMap.googleMap,anchor:c,shouldFocus:n}))}_combineOptions(){return Yo([this._options,this._position]).pipe(Nn(([e,n])=>$(O({},e),{position:n||e.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(he(this._destroy)).subscribe(e=>{this._assertInitialized(),this.infoWindow.setOptions(e)})}_watchForPositionChanges(){this._position.pipe(he(this._destroy)).subscribe(e=>{e&&(this._assertInitialized(),this.infoWindow.setPosition(e))})}_assertInitialized(){}static \u0275fac=function(n){return new(n||i)};static \u0275dir=X({type:i,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"]})}return i})();var Bm=new tt("MAP_MARKER"),jm={position:{lat:37.421995,lng:-122.084092}},Oa=(()=>{class i{_googleMap=Ae(mo);_ngZone=Ae(ze);_eventManager=new Vn(Ae(ze));set title(e){this._title=e}_title;set position(e){this._position=e}_position;set label(e){this._label=e}_label;set clickable(e){this._clickable=e}_clickable;set options(e){this._options=e}_options;set icon(e){this._icon=e}_icon;set visible(e){this._visible=e}_visible;animationChanged=this._eventManager.getLazyEmitter("animation_changed");mapClick=this._eventManager.getLazyEmitter("click");clickableChanged=this._eventManager.getLazyEmitter("clickable_changed");cursorChanged=this._eventManager.getLazyEmitter("cursor_changed");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");draggableChanged=this._eventManager.getLazyEmitter("draggable_changed");mapDragstart=this._eventManager.getLazyEmitter("dragstart");flatChanged=this._eventManager.getLazyEmitter("flat_changed");iconChanged=this._eventManager.getLazyEmitter("icon_changed");mapMousedown=this._eventManager.getLazyEmitter("mousedown");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");positionChanged=this._eventManager.getLazyEmitter("position_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");shapeChanged=this._eventManager.getLazyEmitter("shape_changed");titleChanged=this._eventManager.getLazyEmitter("title_changed");visibleChanged=this._eventManager.getLazyEmitter("visible_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");markerInitialized=new F;marker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.Marker&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.Marker):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([e,n])=>{this._initialize(e,n.Marker)})}))}_initialize(e,n){this._ngZone.runOutsideAngular(()=>{this.marker=new n(this._combineOptions()),this._assertInitialized(),this.marker.setMap(e),this._eventManager.setTarget(this.marker),this.markerInitialized.next(this.marker)})}ngOnChanges(e){let{marker:n,_title:o,_position:c,_label:m,_clickable:_,_icon:w,_visible:A}=this;n&&(e.options&&n.setOptions(this._combineOptions()),e.title&&o!==void 0&&n.setTitle(o),e.position&&c&&n.setPosition(c),e.label&&m!==void 0&&n.setLabel(m),e.clickable&&_!==void 0&&n.setClickable(_),e.icon&&w&&n.setIcon(w),e.visible&&A!==void 0&&n.setVisible(A))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.marker?.setMap(null)}getAnimation(){return this._assertInitialized(),this.marker.getAnimation()||null}getClickable(){return this._assertInitialized(),this.marker.getClickable()}getCursor(){return this._assertInitialized(),this.marker.getCursor()||null}getDraggable(){return this._assertInitialized(),!!this.marker.getDraggable()}getIcon(){return this._assertInitialized(),this.marker.getIcon()||null}getLabel(){return this._assertInitialized(),this.marker.getLabel()||null}getOpacity(){return this._assertInitialized(),this.marker.getOpacity()||null}getPosition(){return this._assertInitialized(),this.marker.getPosition()||null}getShape(){return this._assertInitialized(),this.marker.getShape()||null}getTitle(){return this._assertInitialized(),this.marker.getTitle()||null}getVisible(){return this._assertInitialized(),this.marker.getVisible()}getZIndex(){return this._assertInitialized(),this.marker.getZIndex()||null}getAnchor(){return this._assertInitialized(),this.marker}_resolveMarker(){return this.marker?Promise.resolve(this.marker):this.markerInitialized.pipe(Un(1)).toPromise()}_combineOptions(){let e=this._options||jm;return $(O({},e),{title:this._title||e.title,position:this._position||e.position,label:this._label||e.label,clickable:this._clickable??e.clickable,map:this._googleMap.googleMap,icon:this._icon||e.icon,visible:this._visible??e.visible})}_assertInitialized(){}static \u0275fac=function(n){return new(n||i)};static \u0275dir=X({type:i,selectors:[["map-marker"]],inputs:{title:"title",position:"position",label:"label",clickable:"clickable",options:"options",icon:"icon",visible:"visible"},outputs:{animationChanged:"animationChanged",mapClick:"mapClick",clickableChanged:"clickableChanged",cursorChanged:"cursorChanged",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",draggableChanged:"draggableChanged",mapDragstart:"mapDragstart",flatChanged:"flatChanged",iconChanged:"iconChanged",mapMousedown:"mapMousedown",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",positionChanged:"positionChanged",mapRightclick:"mapRightclick",shapeChanged:"shapeChanged",titleChanged:"titleChanged",visibleChanged:"visibleChanged",zindexChanged:"zindexChanged",markerInitialized:"markerInitialized"},exportAs:["mapMarker"],features:[_e([{provide:Bm,useExisting:i}]),ke]})}return i})();var qm=["infoWindow"],$m=i=>["/specialist",i];function Wm(i,t){if(i&1&&(a(0,"div",16)(1,"span",17),s(2),r(),a(3,"span",18),s(4,"\xEEn raza de 10km"),r()()),i&2){let e=p(2);l(2),P(e.getNearbyCount())}}function Gm(i,t){if(i&1&&(a(0,"div",16)(1,"span",17),s(2),r(),a(3,"span",18),s(4,"rating mediu"),r()()),i&2){let e=p(2);l(2),M("",e.averageRating,"\u2B50")}}function Hm(i,t){i&1&&(a(0,"div",16)(1,"span",20),s(2,"BASIC"),r()())}function Zm(i,t){if(i&1&&(a(0,"div",15)(1,"div",16)(2,"span",17),s(3),r(),a(4,"span",18),s(5,"speciali\u0219ti g\u0103si\u021Bi"),r()(),h(6,Wm,5,1,"div",19)(7,Gm,5,1,"div",19)(8,Hm,3,0,"div",19),r()),i&2){let e=p();l(3),P(e.specialistMarkers.length),l(3),d("ngIf",e.userLocation),l(),d("ngIf",e.averageRating>0),l(),d("ngIf",e.shouldShowBasicTag())}}function Ym(i,t){i&1&&(a(0,"div",21)(1,"div",22)(2,"div",23),y(3,"div",24),a(4,"div",25),s(5,"\u{1F4CD}"),r()(),a(6,"h3"),s(7,"Se ob\u021Bine loca\u021Bia ta"),r(),a(8,"p"),s(9,"Te rug\u0103m s\u0103 acorzi permisiunea pentru loca\u021Bie"),r()()())}function Km(i,t){if(i&1){let e=x();a(0,"div",26)(1,"div",27)(2,"div",28),s(3,"\u26A0\uFE0F"),r(),a(4,"h3"),s(5,"Nu s-a putut ob\u021Bine loca\u021Bia"),r(),a(6,"p"),s(7),r(),a(8,"div",29)(9,"button",30),u("click",function(){g(e);let o=p();return f(o.useDefaultLocation())}),s(10," \u{1F4CD} Folose\u0219te Bucure\u0219ti "),r(),a(11,"button",31),u("click",function(){g(e);let o=p();return f(o.getCurrentLocation())}),s(12," \u{1F504} \xCEncearc\u0103 din nou "),r()()()()}if(i&2){let e=p();l(7),P(e.locationError)}}function Jm(i,t){if(i&1&&y(0,"map-marker",36),i&2){let e=p(2);d("position",e.userLocation)("options",e.userMarkerOptions)("title","Tu e\u0219ti aici")}}function Qm(i,t){if(i&1){let e=x();a(0,"map-marker",37),u("mapClick",function(){let o=g(e).$implicit,c=p(2);return f(c.onMarkerClick(o))})("mapMarkerClick",function(){let o=g(e).$implicit,c=p(2);return f(c.onMarkerClick(o))}),r()}if(i&2){let e=t.$implicit,n=p(2);d("position",e.position)("title",e.title)("options",n.getMarkerOptions(e))}}function Xm(i,t){if(i&1&&(a(0,"div",49)(1,"span",50),s(2,"\u{1F697}"),r(),a(3,"span",51),s(4),r()()),i&2){let e=p(3);l(4),M("",e.selectedMarker.info==null?null:e.selectedMarker.info.distance,"km dep\u0103rtare")}}function eu(i,t){if(i&1){let e=x();a(0,"map-info-window",38,0)(2,"div",39)(3,"div",40),y(4,"img",41),a(5,"div",42)(6,"h3"),s(7),r(),a(8,"div",43)(9,"div",44),s(10),r(),a(11,"span",45),s(12),r()()()(),a(13,"div",46)(14,"p",47),s(15),r(),a(16,"div",48)(17,"div",49)(18,"span",50),s(19,"\u{1F4CD}"),r(),a(20,"span",51),s(21),r()(),h(22,Xm,5,1,"div",52),r()(),a(23,"div",53)(24,"button",54),s(25," \u{1F464} Vezi profilul "),r(),a(26,"button",55),u("click",function(){g(e);let o=p(2);return f(o.closeInfoWindow())}),s(27," \u2715 \xCEnchide "),r()()()()}if(i&2){let e=p(2);d("position",e.selectedMarker.position)("options",e.infoWindowOptions),l(4),d("src",e.getAvatarUrl(e.selectedMarker.specialist),de)("alt",e.selectedMarker.info==null?null:e.selectedMarker.info.name),l(3),P(e.selectedMarker.info==null?null:e.selectedMarker.info.name),l(3),P(e.getStars((e.selectedMarker.info==null?null:e.selectedMarker.info.rating)||0)),l(2),M("(",(e.selectedMarker.info==null?null:e.selectedMarker.info.rating)||0,")"),l(3),P(e.selectedMarker.info==null?null:e.selectedMarker.info.description),l(6),P(e.selectedMarker.info==null?null:e.selectedMarker.info.address),l(),d("ngIf",e.selectedMarker.info==null?null:e.selectedMarker.info.distance),l(2),d("routerLink",Ge(11,$m,e.selectedMarker.specialist.id))}}function tu(i,t){if(i&1&&(a(0,"google-map",32),h(1,Jm,1,3,"map-marker",33)(2,Qm,1,3,"map-marker",34)(3,eu,28,13,"map-info-window",35),r()),i&2){let e=p();d("center",e.mapCenter)("zoom",e.mapZoom)("options",e.mapOptions)("height","100vh")("width","100vw"),l(),d("ngIf",e.userLocation),l(),d("ngForOf",e.specialistMarkers)("ngForTrackBy",e.trackBySpecialist),l(),d("ngIf",e.selectedMarker)}}function nu(i,t){i&1&&(a(0,"span",58),s(1,"\u{1F504}"),r())}function iu(i,t){i&1&&y(0,"div",64)}function ou(i,t){if(i&1){let e=x();a(0,"div",56)(1,"button",57),u("click",function(){g(e);let o=p();return f(o.centerOnUser())}),a(2,"span",58),s(3,"\u{1F4CD}"),r(),a(4,"span",59),s(5,"Loca\u021Bia mea"),r()(),a(6,"button",60),u("click",function(){g(e);let o=p();return f(o.loadSpecialists())}),h(7,nu,2,0,"span",61)(8,iu,1,0,"div",62),a(9,"span",59),s(10),r()(),a(11,"button",63),u("click",function(){g(e);let o=p();return f(o.toggleSatelliteView())}),a(12,"span",58),s(13,"\u{1F6F0}\uFE0F"),r(),a(14,"span",59),s(15),r()()()}if(i&2){let e=p();l(),H("disabled",!e.userLocation),d("disabled",!e.userLocation),l(5),H("loading",e.isLoadingSpecialists),d("disabled",e.isLoadingSpecialists),l(),d("ngIf",!e.isLoadingSpecialists),l(),d("ngIf",e.isLoadingSpecialists),l(2),P(e.isLoadingSpecialists?"Se \xEEncarc\u0103...":"Re\xEEncarc\u0103"),l(5),P(e.mapTypeId==="satellite"?"Hart\u0103":"Satelit")}}function ru(i,t){if(i&1&&(a(0,"p",70),s(1),r()),i&2){let e=p().$implicit;l(),M(" ",e.info==null?null:e.info.distance,"km ")}}function au(i,t){if(i&1){let e=x();a(0,"div",65),u("click",function(){let o=g(e).$implicit,c=p();return f(c.selectSpecialistFromList(o))}),y(1,"img",66),a(2,"div",67)(3,"h4"),s(4),r(),a(5,"div",68),s(6),r(),h(7,ru,2,1,"p",69),r()()}if(i&2){let e=t.$implicit,n=p();H("selected",n.selectedMarker===e),l(),d("src",n.getAvatarUrl(e.specialist),de)("alt",e.specialist.fullName),l(3),P(e.specialist.fullName),l(2),P(n.getStars((e.info==null?null:e.info.rating)||0)),l(),d("ngIf",e.info==null?null:e.info.distance)}}var uo=class i{constructor(t,e,n){this.geolocationService=t;this.geocodingService=e;this.specialistService=n}destroy$=new xe;infoWindow;mapCenter={lat:44.4268,lng:26.1025};mapZoom=13;mapTypeId="roadmap";mapOptions={mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!0,gestureHandling:"greedy",styles:this.getSimpleMapStyle()};infoWindowOptions={disableAutoPan:!1,maxWidth:350,pixelOffset:new google.maps.Size(0,-10)};userLocation=null;isLoadingLocation=!1;locationError=null;specialists=[];specialistMarkers=[];isLoadingSpecialists=!1;selectedMarker=null;sidePanelOpen=!1;averageRating=0;isAuthenticated=!1;userMarkerOptions={icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
          <circle cx="24" cy="24" r="20" fill="#2196F3" stroke="white" stroke-width="3"/>
          <circle cx="24" cy="24" r="8" fill="white"/>
        </svg>
      `),scaledSize:new google.maps.Size(48,48),anchor:new google.maps.Point(24,24)},zIndex:1e3};ngOnInit(){this.getCurrentLocation()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getSimpleMapStyle(){return[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{visibility:"off"}]}]}getMarkerOptions(t){if(!t||!t.specialist)return this.getDefaultMarkerOptions();let e=t.specialist.profilePictureUrl;return e&&e!=="src/assets/avatar.svg"&&e.startsWith("http")?{icon:{url:e,scaledSize:new google.maps.Size(40,40),anchor:new google.maps.Point(20,20)},optimized:!1,zIndex:100,title:t.title||t.specialist.fullName||"Specialist"}:this.getColorCodedMarkerOptions(t)}getColorCodedMarkerOptions(t){let e=t.info?.rating||0,n="#666666";return e>=4.5?n="#4CAF50":e>=4?n="#FF9800":e>=3&&(n="#2196F3"),{icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
            <circle cx="16" cy="16" r="14" fill="${n}" stroke="white" stroke-width="2"/>
            <text x="16" y="20" text-anchor="middle" fill="white" font-size="14" font-weight="bold">\u{1F464}</text>
          </svg>
        `),scaledSize:new google.maps.Size(32,32),anchor:new google.maps.Point(16,16)},zIndex:50,title:t.title||t.specialist?.fullName||"Specialist"}}getDefaultMarkerOptions(){return{icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
            <circle cx="16" cy="16" r="14" fill="#666666" stroke="white" stroke-width="2"/>
            <text x="16" y="20" text-anchor="middle" fill="white" font-size="14" font-weight="bold">?</text>
          </svg>
        `),scaledSize:new google.maps.Size(32,32),anchor:new google.maps.Point(16,16)},zIndex:10}}getCurrentLocation(){if(this.isLoadingLocation=!0,this.locationError=null,!navigator.geolocation){this.isLoadingLocation=!1,this.locationError="Geoloca\u021Bia nu este suportat\u0103 de acest browser.",this.useDefaultLocation();return}let t=setTimeout(()=>{this.isLoadingLocation=!1,this.locationError="Timpul pentru ob\u021Binerea loca\u021Biei a expirat.",this.useDefaultLocation()},1e4);this.geolocationService.getCurrentPosition().pipe(he(this.destroy$)).subscribe({next:e=>{clearTimeout(t),this.isValidPosition({lat:e.coords.latitude,lng:e.coords.longitude})?(this.userLocation={lat:e.coords.latitude,lng:e.coords.longitude},this.mapCenter=this.userLocation,this.isLoadingLocation=!1,this.locationError=null,this.loadSpecialists()):(this.isLoadingLocation=!1,this.handleLocationError({code:2,message:"Invalid coordinates received"}),this.useDefaultLocation())},error:e=>{clearTimeout(t),this.isLoadingLocation=!1,this.handleLocationError(e),this.useDefaultLocation()}})}handleLocationError(t){switch(t.code){case 1:this.locationError="Accesul la loca\u021Bie a fost refuzat. Te rug\u0103m s\u0103 acorzi permisiunea.";break;case 2:this.locationError="Loca\u021Bia nu poate fi determinat\u0103.";break;case 3:this.locationError="Timpul pentru ob\u021Binerea loca\u021Biei a expirat.";break;default:this.locationError="Nu s-a putut ob\u021Bine loca\u021Bia curent\u0103."}}useDefaultLocation(){this.mapCenter={lat:44.4268,lng:26.1025},this.locationError=null,this.loadSpecialists()}loadSpecialists(){this.isLoadingSpecialists=!0,this.specialistMarkers=[],this.selectedMarker=null,this.specialistService.getSpecialistsLegacy("",1,100).pipe(he(this.destroy$)).subscribe({next:t=>{this.specialists=t.response?.data||[],this.createSpecialistMarkers(),this.calculateAverageRating(),this.isLoadingSpecialists=!1},error:t=>{console.error("Error loading specialists:",t),this.specialists=[],this.specialistMarkers=[],this.isLoadingSpecialists=!1}})}createSpecialistMarkers(){return C(this,null,function*(){this.specialistMarkers=[];let t=5,e=[];for(let n=0;n<this.specialists.length;n+=t)e.push(this.specialists.slice(n,n+t));for(let n of e)yield Promise.all(n.map(o=>C(this,null,function*(){if(o.address&&o.address.trim())try{yield new Promise(m=>setTimeout(m,100));let c=yield this.geocodingService.geocodeAddress(o.address);if(c&&this.isValidPosition(c)){let m=this.userLocation?this.geolocationService.calculateDistance(this.userLocation.lat,this.userLocation.lng,c.lat,c.lng):void 0,_={position:c,title:o.fullName||"Specialist",specialist:o,info:{name:o.fullName||"Specialist",description:o.description||"Specialist pe platforma ExpertEase",rating:o.rating||0,address:o.address,distance:m?Math.round(m*100)/100:void 0}};this.specialistMarkers=[...this.specialistMarkers,_]}}catch(c){console.warn(`Failed to geocode address for ${o.fullName}: ${o.address}`,c)}})));this.userLocation&&this.specialistMarkers.length>0&&this.specialistMarkers.sort((n,o)=>(n.info?.distance||999)-(o.info?.distance||999)),console.log(`Successfully created ${this.specialistMarkers.length} markers from ${this.specialists.length} specialists`)})}isValidPosition(t){return t.lat>=-90&&t.lat<=90&&t.lng>=-180&&t.lng<=180&&!isNaN(t.lat)&&!isNaN(t.lng)}calculateAverageRating(){if(this.specialists.length>0){let t=this.specialists.reduce((e,n)=>e+(n.rating||0),0);this.averageRating=Math.round(t/this.specialists.length*10)/10}}onMarkerClick(t){t&&t.position&&t.specialist&&(this.selectedMarker=t,this.isValidPosition(t.position)&&(this.mapCenter=O({},t.position),this.mapZoom=Math.max(15,this.mapZoom)))}closeInfoWindow(){this.selectedMarker=null,this.infoWindow&&this.infoWindow.close()}openInfoWindow(t){this.selectedMarker=t,this.infoWindow&&this.infoWindow.open()}getInfoWindowInstance(){return this.infoWindow?.infoWindow}customizeInfoWindow(){let t=this.getInfoWindowInstance();t&&t.setOptions({maxWidth:400,pixelOffset:new google.maps.Size(0,-15)})}centerOnUser(){this.userLocation&&this.isValidPosition(this.userLocation)&&(this.mapCenter=O({},this.userLocation),this.mapZoom=15)}toggleSatelliteView(){this.mapTypeId=this.mapTypeId==="satellite"?"roadmap":"satellite",this.mapOptions=$(O({},this.mapOptions),{mapTypeId:this.mapTypeId})}toggleSidePanel(){this.sidePanelOpen=!this.sidePanelOpen}selectSpecialistFromList(t){this.onMarkerClick(t),this.sidePanelOpen=!1}getSortedSpecialists(){return[...this.specialistMarkers].sort((t,e)=>(t.info?.distance||999)-(e.info?.distance||999))}getNearbyCount(){return this.specialistMarkers.filter(t=>(t.info?.distance||999)<=10).length}getCategoriesText(t){return t.slice(0,2).join(", ")+(t.length>2?"...":"")}getStars(t){let e=Math.floor(t),n=t%1>=.5,o="\u2B50".repeat(e);return n&&(o+="\u2B50"),o||"\u2606\u2606\u2606\u2606\u2606"}trackBySpecialist(t,e){return e.specialist.id}getAvatarUrl(t){return t.profilePictureUrl||"src/assets/avatar.svg"}shouldShowBasicTag(){return!this.isAuthenticated}static \u0275fac=function(e){return new(e||i)(v(Jt),v(Kt),v(ft))};static \u0275cmp=S({type:i,selectors:[["app-specialist-map"]],viewQuery:function(e,n){if(e&1&&Vt(qm,5),e&2){let o;yt(o=Mt())&&(n.infoWindow=o.first)}},decls:18,vars:9,consts:[["infoWindow",""],[1,"map-container"],[1,"map-header"],[1,"header-content"],["routerLink","/home",1,"back-button"],["class","stats-bar",4,"ngIf"],["class","loading-overlay",4,"ngIf"],["class","error-overlay",4,"ngIf"],[3,"center","zoom","options","height","width",4,"ngIf"],["class","floating-controls",4,"ngIf"],[1,"side-panel"],[1,"panel-header"],[1,"panel-toggle",3,"click"],[1,"specialists-list"],["class","specialist-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"stats-bar"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],["class","stat-item",4,"ngIf"],[1,"basic-tag"],[1,"loading-overlay"],[1,"loading-card"],[1,"loading-animation"],[1,"pulse-ring"],[1,"location-icon"],[1,"error-overlay"],[1,"error-card"],[1,"error-icon"],[1,"error-actions"],[1,"btn-primary",3,"click"],[1,"btn-secondary",3,"click"],[3,"center","zoom","options","height","width"],[3,"position","options","title",4,"ngIf"],[3,"position","title","options","mapClick","mapMarkerClick",4,"ngFor","ngForOf","ngForTrackBy"],[3,"position","options",4,"ngIf"],[3,"position","options","title"],[3,"mapClick","mapMarkerClick","position","title","options"],[3,"position","options"],[1,"beautiful-info-window"],[1,"info-header"],[1,"specialist-avatar",3,"src","alt"],[1,"info-title"],[1,"rating-container"],[1,"stars"],[1,"rating-text"],[1,"info-content"],[1,"description"],[1,"info-details"],[1,"detail-item"],[1,"detail-icon"],[1,"detail-text"],["class","detail-item",4,"ngIf"],[1,"info-actions"],[1,"action-btn","primary",3,"routerLink"],[1,"action-btn","secondary",3,"click"],[1,"floating-controls"],["title","Centreaz\u0103 pe loca\u021Bia ta",1,"fab",3,"click","disabled"],[1,"fab-icon"],[1,"fab-label"],["title","Re\xEEncarc\u0103 speciali\u0219tii",1,"fab",3,"click","disabled"],["class","fab-icon",4,"ngIf"],["class","fab-spinner",4,"ngIf"],["title","Comut\u0103 vedere satelit",1,"fab",3,"click"],[1,"fab-spinner"],[1,"specialist-item",3,"click"],[1,"specialist-thumb",3,"src","alt"],[1,"specialist-info"],[1,"specialist-rating"],["class","specialist-distance",4,"ngIf"],[1,"specialist-distance"]],template:function(e,n){e&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),s(4," \u2190 "),r()()(),h(5,Zm,9,4,"div",5)(6,Ym,10,0,"div",6)(7,Km,13,1,"div",7)(8,tu,4,9,"google-map",8)(9,ou,16,10,"div",9),a(10,"div",10)(11,"div",11)(12,"h3"),s(13,"Speciali\u0219ti aproape de tine"),r(),a(14,"button",12),u("click",function(){return n.toggleSidePanel()}),s(15),r()(),a(16,"div",13),h(17,au,8,7,"div",14),r()()()),e&2&&(l(5),d("ngIf",!n.isLoadingLocation&&!n.locationError),l(),d("ngIf",n.isLoadingLocation),l(),d("ngIf",n.locationError),l(),d("ngIf",!n.isLoadingLocation&&n.mapOptions),l(),d("ngIf",!n.isLoadingLocation),l(),H("open",n.sidePanelOpen),l(5),M(" ",n.sidePanelOpen?"\u2190":"\u2192"," "),l(2),d("ngForOf",n.getSortedSpecialists()))},dependencies:[T,mo,G,Pa,De,Oa],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}.map-container[_ngcontent-%COMP%]{height:100vh;width:100vw;display:flex;flex-direction:column;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;position:relative;margin:0;padding:0;overflow:hidden}.map-header[_ngcontent-%COMP%]{background:#fff;color:#333;padding:0;box-shadow:0 2px 8px #0000001a;position:relative;flex:0 0 auto;height:50px;min-height:50px;border-bottom:1px solid #e0e0e0}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;padding:12px 20px;position:relative;height:100%}.back-button[_ngcontent-%COMP%]{background:#f5f5f5;border:1px solid #ddd;color:#333;padding:8px 12px;border-radius:6px;cursor:pointer;transition:all .2s ease;font-family:inherit;font-weight:500;font-size:1.2rem;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.back-button[_ngcontent-%COMP%]:hover{background:#eee;border-color:#ccc}.stats-bar[_ngcontent-%COMP%]{background:#fafafa;padding:12px 20px;display:flex;justify-content:flex-start;gap:32px;border-bottom:1px solid #e0e0e0;flex:0 0 auto;height:50px;min-height:50px;align-items:center}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#333}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.85rem;color:#666;font-weight:400}.stat-item[_ngcontent-%COMP%]   .basic-tag[_ngcontent-%COMP%]{background:#f0f0f0;color:#666;padding:4px 8px;border-radius:4px;font-size:.75rem;font-weight:600;letter-spacing:.5px;border:1px solid #ddd}.map[_ngcontent-%COMP%]{flex:1 1 auto;width:100%;height:calc(100vh - 100px);min-height:calc(100vh - 100px);position:relative}.map[_ngcontent-%COMP%]     google-map{height:100%!important;width:100%!important;display:block!important}.map[_ngcontent-%COMP%]     .gm-style{height:100%!important;width:100%!important}.map[_ngcontent-%COMP%]     .gm-style>div:first-child{height:100%!important;width:100%!important}.floating-controls[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px;display:flex;flex-direction:column;gap:8px;z-index:1000}.fab[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#333;padding:10px 16px;cursor:pointer;font-family:inherit;font-weight:500;font-size:.85rem;transition:all .2s ease;box-shadow:0 2px 8px #00000026;border-radius:6px;display:flex;align-items:center;gap:8px;min-width:120px;justify-content:flex-start}.fab[_ngcontent-%COMP%]   .fab-icon[_ngcontent-%COMP%]{font-size:1rem;flex-shrink:0}.fab[_ngcontent-%COMP%]   .fab-label[_ngcontent-%COMP%]{white-space:nowrap}.fab[_ngcontent-%COMP%]:hover:not(.disabled):not(.loading){background:#f5f5f5;border-color:#ccc;box-shadow:0 4px 12px #0003}.fab[_ngcontent-%COMP%]:active:not(.disabled):not(.loading){transform:translateY(1px)}.fab.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;background:#f9f9f9;color:#999}.fab.loading[_ngcontent-%COMP%]{pointer-events:none}.fab.loading[_ngcontent-%COMP%]   .fab-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #ddd;border-top:2px solid #666;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-overlay[_ngcontent-%COMP%], .error-overlay[_ngcontent-%COMP%]{position:absolute;inset:100px 0 0;background:#fffffff2;display:flex;align-items:center;justify-content:center;z-index:1000}.loading-card[_ngcontent-%COMP%], .error-card[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:#fff;border-radius:8px;box-shadow:0 4px 20px #00000026;border:1px solid #e0e0e0;max-width:350px}.loading-animation[_ngcontent-%COMP%]{position:relative;margin:0 auto 1.5rem;width:60px;height:60px}.pulse-ring[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;border:2px solid #007bff;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite}.location-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:1.5rem}@keyframes _ngcontent-%COMP%_pulse{0%{transform:translate(-50%,-50%) scale(.8);opacity:1}to{transform:translate(-50%,-50%) scale(2);opacity:0}}.error-card[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}.error-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#dc3545;margin-bottom:1rem;font-size:1.1rem}.error-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:1.5rem}.error-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-family:inherit;font-weight:500;transition:all .2s ease;font-size:.9rem}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background:#f8f9fa;color:#495057;border:1px solid #dee2e6}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e9ecef}.side-panel[_ngcontent-%COMP%]{position:absolute;top:100px;left:-300px;width:300px;height:calc(100vh - 100px);background:#fffffffa;transition:left .3s ease;box-shadow:2px 0 10px #0000001a;z-index:900;border-right:1px solid #e0e0e0}.side-panel.open[_ngcontent-%COMP%]{left:0}.panel-header[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center;background:#f8f9fa}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#333}.panel-toggle[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;color:#333;width:28px;height:28px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:500;transition:all .2s ease;font-size:.9rem}.panel-toggle[_ngcontent-%COMP%]:hover{background:#f5f5f5}.specialists-list[_ngcontent-%COMP%]{height:calc(100% - 60px);overflow-y:auto;padding:8px}.specialist-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px;border-radius:6px;cursor:pointer;transition:all .2s ease;margin-bottom:4px}.specialist-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.specialist-item.selected[_ngcontent-%COMP%]{background:#e3f2fd;border:1px solid #bbdefb}.specialist-thumb[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid #e0e0e0}.specialist-info[_ngcontent-%COMP%]{flex:1}.specialist-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:.9rem;font-weight:600;color:#333}.specialist-info[_ngcontent-%COMP%]   .specialist-rating[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:2px;color:#666}.specialist-info[_ngcontent-%COMP%]   .specialist-distance[_ngcontent-%COMP%]{margin:0;font-size:.75rem;color:#888;font-weight:400}.beautiful-info-window[_ngcontent-%COMP%]{padding:0;border-radius:8px;overflow:hidden;min-width:280px;max-width:320px;font-family:inherit}.info-header[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px;background:#f8f9fa;border-bottom:1px solid #e0e0e0}.specialist-avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;object-fit:cover;border:2px solid #e0e0e0}.info-title[_ngcontent-%COMP%]{flex:1}.info-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px;font-size:1.1rem;font-weight:600;color:#333}.rating-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.stars[_ngcontent-%COMP%]{font-size:.9rem}.rating-text[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.info-content[_ngcontent-%COMP%]{padding:16px;background:#fff}.description[_ngcontent-%COMP%]{margin:0 0 16px;font-size:.9rem;color:#555;line-height:1.4}.info-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.85rem;color:#666}.detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{width:16px;text-align:center;font-size:.9rem}.detail-item[_ngcontent-%COMP%]   .detail-text[_ngcontent-%COMP%]{flex:1}.info-actions[_ngcontent-%COMP%]{display:flex;gap:8px;padding:12px 16px;background:#f8f9fa;border-top:1px solid #e0e0e0}.action-btn[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:none;border-radius:4px;cursor:pointer;font-family:inherit;font-weight:500;font-size:.85rem;transition:all .2s ease}.action-btn.primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{background:#0056b3}.action-btn.secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:#545b62}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{padding:8px 16px}.stats-bar[_ngcontent-%COMP%]{padding:8px 16px;gap:20px;height:45px;min-height:45px}.map[_ngcontent-%COMP%]{height:calc(100vh - 95px);min-height:calc(100vh - 95px)}.floating-controls[_ngcontent-%COMP%]{bottom:16px;right:16px}.side-panel[_ngcontent-%COMP%]{width:280px;left:-280px;top:95px;height:calc(100vh - 95px)}.loading-overlay[_ngcontent-%COMP%], .error-overlay[_ngcontent-%COMP%]{top:95px}}"]})};function su(i,t){i&1&&(a(0,"div",12)(1,"div",13),s(2,"\u23F3"),r(),a(3,"div",14)(4,"h3"),s(5,"Se \xEEncarc\u0103..."),r(),a(6,"p"),s(7,"Verific\u0103m statusul contului t\u0103u Stripe"),r()()())}function cu(i,t){if(i&1){let e=x();a(0,"div",15)(1,"div",13),s(2,"\u274C"),r(),a(3,"div",14)(4,"h3"),s(5,"Eroare"),r(),a(6,"p"),s(7),r(),a(8,"button",16),u("click",function(){g(e);let o=p();return f(o.loadUserStripeAccount())}),s(9,"\xCEncearc\u0103 din nou"),r()()()}if(i&2){let e=p();l(7),P(e.errorMessage)}}function lu(i,t){if(i&1&&(a(0,"div",23)(1,"div",24)(2,"span",25),s(3,"ID Cont Stripe:"),r(),a(4,"span",26),s(5),r()(),a(6,"div",24)(7,"span",25),s(8,"Status:"),r(),a(9,"span",27),s(10),r()()()),i&2){let e=p(2);l(5),P(e.stripeAccountId),l(4),d("ngClass",e.accountComplete?"status-complete":"status-incomplete"),l(),M(" ",e.accountComplete?"Complet":"Incomplet"," ")}}function du(i,t){i&1&&(a(0,"span"),s(1,"Completeaz\u0103 configurarea"),r())}function pu(i,t){i&1&&(a(0,"span"),s(1,"Se genereaz\u0103 link-ul..."),r())}function mu(i,t){if(i&1){let e=x();a(0,"button",28),u("click",function(){g(e);let o=p(2);return f(o.activateStripeAccount())}),h(1,du,2,0,"span",29)(2,pu,2,0,"span",29),r()}if(i&2){let e=p(2);d("disabled",e.isGeneratingLink),l(),d("ngIf",!e.isGeneratingLink),l(),d("ngIf",e.isGeneratingLink)}}function uu(i,t){i&1&&(a(0,"span"),s(1,"Acceseaz\u0103 Dashboard-ul"),r())}function gu(i,t){i&1&&(a(0,"span"),s(1,"Se genereaz\u0103 link-ul..."),r())}function fu(i,t){if(i&1){let e=x();a(0,"button",30),u("click",function(){g(e);let o=p(2);return f(o.openDashboard())}),h(1,uu,2,0,"span",29)(2,gu,2,0,"span",29),r()}if(i&2){let e=p(2);d("disabled",e.isGeneratingLink),l(),d("ngIf",!e.isGeneratingLink),l(),d("ngIf",e.isGeneratingLink)}}function hu(i,t){if(i&1){let e=x();a(0,"div",31)(1,"p"),s(2,"Pentru a configura un cont Stripe, trebuie s\u0103 \xEE\u021Bi completezi mai \xEEnt\xE2i profilul de specialist."),r(),a(3,"button",32),u("click",function(){g(e);let o=p(2);return f(o.goToSpecialistProfile())}),s(4," Completeaz\u0103 profilul de specialist "),r()()}}function _u(i,t){if(i&1&&(a(0,"div",17)(1,"div",13),s(2),r(),a(3,"div",14)(4,"h3"),s(5),r(),a(6,"p"),s(7),r(),h(8,lu,11,3,"div",18),a(9,"div",19),h(10,mu,3,3,"button",20)(11,fu,3,3,"button",21)(12,hu,5,0,"div",22),r()()()),i&2){let e=p();d("ngClass",e.accountStatusClass),l(2),P(e.accountStatusIcon),l(3),P(e.accountStatusTitle),l(2),P(e.accountStatusDescription),l(),d("ngIf",e.hasStripeAccount),l(2),d("ngIf",e.hasStripeAccount&&!e.accountComplete),l(),d("ngIf",e.hasStripeAccount&&e.accountComplete),l(),d("ngIf",!e.hasStripeAccount)}}var go=class i{constructor(t,e,n,o,c){this.stripeAccountService=t;this.userService=e;this.specialistProfileService=n;this.authService=o;this.router=c}loading=!1;isGeneratingLink=!1;hasStripeAccount=!1;accountComplete=!1;stripeAccountId="";errorMessage="";userProfile=null;ngOnInit(){this.loadUserStripeAccount()}get accountStatusClass(){return this.hasStripeAccount?this.accountComplete?"complete":"incomplete":"not-configured"}get accountStatusIcon(){return this.hasStripeAccount?this.accountComplete?"\u2705":"\u23F3":"\u26A0\uFE0F"}get accountStatusTitle(){return this.hasStripeAccount?this.accountComplete?"Cont configurat complet":"Configurare incomplet\u0103":"Cont neconfigurat"}get accountStatusDescription(){return this.hasStripeAccount?this.accountComplete?"Contul t\u0103u este configurat \u0219i po\u021Bi primi pl\u0103\u021Bi.":"Completeaz\u0103 configurarea pentru a putea primi pl\u0103\u021Bi.":"Nu ai \xEEnc\u0103 un cont Stripe configurat."}loadUserStripeAccount(){return C(this,null,function*(){this.loading=!0,this.errorMessage="";try{let t=this.authService.getUserId();if(!t)throw new Error("User ID not found");console.log("Loading specialist profile for user:",t),this.specialistProfileService.getSpecialistProfile().subscribe({next:e=>C(this,null,function*(){console.log("Specialist profile response:",e),e?.response&&e.response?(this.userProfile=e.response,this.stripeAccountId=e.response.stripeAccountId||"",this.hasStripeAccount=!!this.stripeAccountId,this.stripeAccountId?yield this.checkStripeAccountStatus():this.accountComplete=!1,console.log("User Stripe Account ID:",this.stripeAccountId),console.log("Has Stripe Account:",this.hasStripeAccount),console.log("Account Complete:",this.accountComplete)):(console.log("No specialist profile found or response failed"),this.hasStripeAccount=!1,this.accountComplete=!1,this.errorMessage="Nu ai \xEEnc\u0103 un profil de specialist configurat."),this.loading=!1}),error:e=>{console.error("Error loading Stripe account status:",e),this.errorMessage="Eroare la \xEEnc\u0103rcarea statusului contului.",this.hasStripeAccount=!1,this.accountComplete=!1,this.loading=!1}})}catch(t){console.error("Error in loadUserStripeAccount:",t),this.errorMessage="Eroare la \xEEnc\u0103rcarea statusului contului.",this.hasStripeAccount=!1,this.accountComplete=!1,this.loading=!1}})}checkStripeAccountStatus(){return C(this,null,function*(){try{this.stripeAccountService.getAccountStatus(this.stripeAccountId).subscribe({next:t=>{if(console.log("Stripe account status:",t),t?.response){let e=t.response;this.accountComplete=e.isActive,e.chargesEnabled||console.log("Charges not enabled yet"),e.payoutsEnabled||console.log("Payouts not enabled yet"),e.requirementsCurrentlyDue.length>0&&console.log("Requirements currently due:",e.requirementsCurrentlyDue)}else console.error("Failed to get account status"),this.accountComplete=!1},error:t=>{console.error("Error checking Stripe account status:",t),this.accountComplete=!1}})}catch(t){console.error("Exception checking Stripe account status:",t),this.accountComplete=!1}})}activateStripeAccount(){return C(this,null,function*(){if(!this.stripeAccountId){this.errorMessage="Nu exist\u0103 un cont Stripe asociat cu profilul t\u0103u.";return}this.isGeneratingLink=!0,this.errorMessage="";try{console.log("Generating onboarding link for account:",this.stripeAccountId),this.stripeAccountService.generateOnboardingLink(this.stripeAccountId).subscribe({next:t=>{if(console.log("Link response:",t),t?.response&&t.response?.url)console.log("Redirecting to:",t.response.url),window.location.href=t.response.url;else throw new Error(t?.errorMessage?.message||"Eroare la generarea link-ului de configurare.")},error:t=>{console.error("Error generating onboarding link:",t),t.status===401?this.errorMessage="Nu e\u0219ti autentificat. Te rug\u0103m s\u0103 te conectezi din nou.":t.status===403?this.errorMessage="Nu ai permisiunea s\u0103 accesezi aceast\u0103 func\u021Bionalitate.":t.status===404?this.errorMessage="Contul Stripe nu a fost g\u0103sit.":this.errorMessage=t.message||t.error?.message||"Eroare la configurarea contului Stripe.",this.isGeneratingLink=!1}})}catch(t){console.error("Error in activateStripeAccount:",t),this.errorMessage=t.message||"Eroare la configurarea contului Stripe.",this.isGeneratingLink=!1}})}openDashboard(){return C(this,null,function*(){if(!this.stripeAccountId){this.errorMessage="Nu exist\u0103 un cont Stripe asociat cu profilul t\u0103u.";return}this.isGeneratingLink=!0,this.errorMessage="";try{console.log("Generating dashboard link for account:",this.stripeAccountId),this.stripeAccountService.generateDashboardLink(this.stripeAccountId).subscribe({next:t=>{if(console.log("Dashboard link response:",t),t?.response&&t.response?.url)console.log("Redirecting to dashboard:",t.response.url),window.location.href=t.response.url;else throw new Error(t?.errorMessage?.message||"Eroare la generarea link-ului de dashboard.")},error:t=>{console.error("Error generating dashboard link:",t),t.status===401?this.errorMessage="Nu e\u0219ti autentificat. Te rug\u0103m s\u0103 te conectezi din nou.":t.status===403?this.errorMessage="Nu ai permisiunea s\u0103 accesezi aceast\u0103 func\u021Bionalitate.":t.status===404?this.errorMessage="Contul Stripe nu a fost g\u0103sit.":this.errorMessage=t.message||t.error?.message||"Eroare la accesarea dashboard-ului Stripe.",this.isGeneratingLink=!1}})}catch(t){console.error("Error in openDashboard:",t),this.errorMessage=t.message||"Eroare la accesarea dashboard-ului Stripe.",this.isGeneratingLink=!1}})}goToSpecialistProfile(){this.router.navigate(["/profile/specialist"])}goBack(){this.router.navigate(["/profile"])}static \u0275fac=function(e){return new(e||i)(v(gn),v(Be),v(vt),v(V),v(re))};static \u0275cmp=S({type:i,selectors:[["app-stripe-account"]],decls:39,vars:3,consts:[[1,"top-action-button"],[1,"back-button",3,"click"],[1,"stripe-wrapper"],[1,"stripe-header"],[1,"brand-highlight"],["class","status-card loading",4,"ngIf"],["class","status-card error",4,"ngIf"],["class","status-card",3,"ngClass",4,"ngIf"],[1,"info-section"],[1,"info-grid"],[1,"info-card"],[1,"info-icon"],[1,"status-card","loading"],[1,"status-icon"],[1,"status-content"],[1,"status-card","error"],[1,"retry-button",3,"click"],[1,"status-card",3,"ngClass"],["class","account-details",4,"ngIf"],[1,"actions"],["class","primary-button",3,"disabled","click",4,"ngIf"],["class","secondary-button",3,"disabled","click",4,"ngIf"],["class","no-account-message",4,"ngIf"],[1,"account-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"detail-value",3,"ngClass"],[1,"primary-button",3,"click","disabled"],[4,"ngIf"],[1,"secondary-button",3,"click","disabled"],[1,"no-account-message"],[1,"secondary-button",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"button",1),u("click",function(){return n.goBack()}),s(2,"\u2190 \xCEnapoi la profil"),r()(),a(3,"div",2)(4,"div",3)(5,"h1"),s(6,"Configurarea contului "),a(7,"strong",4),s(8,"Stripe"),r()(),a(9,"p"),s(10,"Gestioneaz\u0103-\u021Bi contul de pl\u0103\u021Bi pentru a primi bani de la clien\u021Bi"),r()(),h(11,su,8,0,"div",5)(12,cu,10,1,"div",6)(13,_u,13,8,"div",7),a(14,"div",8)(15,"h2"),s(16,"De ce ai nevoie de un cont Stripe?"),r(),a(17,"div",9)(18,"div",10)(19,"div",11),s(20,"\u{1F4B3}"),r(),a(21,"h4"),s(22,"Prime\u0219te pl\u0103\u021Bi"),r(),a(23,"p"),s(24,"Clien\u021Bii \xEE\u021Bi pot pl\u0103ti direct prin platform\u0103 folosind cardul bancar"),r()(),a(25,"div",10)(26,"div",11),s(27,"\u{1F512}"),r(),a(28,"h4"),s(29,"Securitate"),r(),a(30,"p"),s(31,"Stripe ofer\u0103 cea mai \xEEnalt\u0103 securitate pentru tranzac\u021Biile online"),r()(),a(32,"div",10)(33,"div",11),s(34,"\u{1F4CA}"),r(),a(35,"h4"),s(36,"Rapoarte"),r(),a(37,"p"),s(38,"Vezi toate tranzac\u021Biile \u0219i veniturile tale \xEEntr-un dashboard dedicat"),r()()()()()),e&2&&(l(11),d("ngIf",n.loading),l(),d("ngIf",n.errorMessage&&!n.loading),l(),d("ngIf",!n.loading&&!n.errorMessage))},dependencies:[T,ie],styles:[".top-action-button[_ngcontent-%COMP%]{position:absolute;top:100px;right:32px;z-index:10}.back-button[_ngcontent-%COMP%]{text-decoration:none;font-family:Roboto Mono,monospace;font-weight:700;border:1px solid transparent;background:none;transition:all .2s ease;color:#000;cursor:pointer;padding:.5rem 1rem;border-radius:4px}.back-button[_ngcontent-%COMP%]:hover{text-decoration:underline;background-color:#b7a4dd1a}.stripe-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace;max-width:800px;margin:0 auto}.stripe-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:2rem;text-align:center}.stripe-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.stripe-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#666;font-size:1.1rem}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.status-card[_ngcontent-%COMP%]{width:100%;max-width:600px;padding:2rem;border-radius:12px;border:2px solid #b7a4dd;background:#fff;margin-bottom:2rem;display:flex;align-items:flex-start;gap:1.5rem;transition:all .3s ease}.status-card.loading[_ngcontent-%COMP%]{border-color:#ffc107;background-color:#fff8e1}.status-card.error[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#ffeaea}.status-card.not-configured[_ngcontent-%COMP%]{border-color:#ffc107;background-color:#fff8e1}.status-card.incomplete[_ngcontent-%COMP%]{border-color:#fd7e14;background-color:#fff4e6}.status-card.complete[_ngcontent-%COMP%]{border-color:#28a745;background-color:#f0f8f0}.status-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #b7a4dd4d}.status-icon[_ngcontent-%COMP%]{font-size:3rem;line-height:1;flex-shrink:0}.status-content[_ngcontent-%COMP%]{flex:1}.status-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.4rem;color:#333}.status-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;color:#666;line-height:1.5}.account-details[_ngcontent-%COMP%]{background:#b7a4dd1a;padding:1rem;border-radius:8px;margin:1rem 0}.account-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.account-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.account-details[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-weight:700;color:#333}.account-details[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-family:Courier New,monospace;color:#666}.account-details[_ngcontent-%COMP%]   .detail-value.status-complete[_ngcontent-%COMP%]{color:#28a745;font-weight:700}.account-details[_ngcontent-%COMP%]   .detail-value.status-incomplete[_ngcontent-%COMP%]{color:#fd7e14;font-weight:700}.actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;align-items:flex-start}.primary-button[_ngcontent-%COMP%]{background-color:#3c1a7d;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-family:Roboto Mono,monospace;font-weight:700;cursor:pointer;transition:all .2s ease;font-size:1rem}.primary-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2d1260;transform:translateY(-1px)}.primary-button[_ngcontent-%COMP%]:disabled{background-color:#999;cursor:not-allowed;transform:none}.secondary-button[_ngcontent-%COMP%]{background-color:transparent;color:#3c1a7d;border:2px solid #3c1a7d;padding:.75rem 1.5rem;border-radius:8px;font-family:Roboto Mono,monospace;font-weight:700;cursor:pointer;transition:all .2s ease;font-size:1rem}.secondary-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#3c1a7d;color:#fff;transform:translateY(-1px)}.secondary-button[_ngcontent-%COMP%]:disabled{border-color:#999;color:#999;cursor:not-allowed;transform:none}.retry-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;font-family:Roboto Mono,monospace;font-weight:700;cursor:pointer;transition:all .2s ease;font-size:.9rem}.retry-button[_ngcontent-%COMP%]:hover{background-color:#c82333;transform:translateY(-1px)}.no-account-message[_ngcontent-%COMP%]{text-align:center;padding:1rem;background:#b7a4dd1a;border-radius:8px;width:100%}.no-account-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;color:#666;font-style:italic}.info-section[_ngcontent-%COMP%]{width:100%;max-width:800px;margin-top:2rem}.info-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;color:#3c1a7d}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.info-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #b7a4dd;border-radius:12px;padding:1.5rem;text-align:center;transition:all .3s ease}.info-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #b7a4dd4d;border-color:#3c1a7d}.info-card[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1rem}.info-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#3c1a7d;font-size:1.2rem}.info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;line-height:1.5}@media (max-width: 768px){.top-action-button[_ngcontent-%COMP%]{top:20px;right:16px}.stripe-wrapper[_ngcontent-%COMP%]{padding:16px}.status-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.status-card[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{font-size:2.5rem}.account-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem;text-align:center}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function vu(i,t){i&1&&(a(0,"div",3),y(1,"div",4),a(2,"h2"),s(3,"Se proceseaz\u0103 autentificarea Google..."),r(),a(4,"p"),s(5,"V\u0103 rug\u0103m s\u0103 a\u0219tepta\u021Bi..."),r()())}function bu(i,t){if(i&1){let e=x();a(0,"div",5)(1,"h2"),s(2,"Eroare"),r(),a(3,"p"),s(4),r(),a(5,"button",6),u("click",function(){g(e);let o=p();return f(o.goBack())}),s(6,"\xCEnapoi la autentificare"),r()()}if(i&2){let e=p();l(4),P(e.errorMessage)}}var fo=class i{constructor(t,e){this.route=t;this.router=e}errorMessage=null;ngOnInit(){console.log("Google callback component initialized"),this.handleGoogleCallback()}handleGoogleCallback(){let t=this.route.snapshot.queryParams,e=window.location.href;console.log("=== GOOGLE CALLBACK DEBUG ==="),console.log("Full URL:",e),console.log("All query params:",t),console.log("Available param keys:",Object.keys(t)),console.log("code:",t.code),console.log("state:",t.state),console.log("error:",t.error),console.log("error_description:",t.error_description),console.log("scope:",t.scope),console.log("authuser:",t.authuser),console.log("prompt:",t.prompt),console.log("=============================");let n=t.code,o=t.state,c=t.error,m=t.error_description;if(Object.keys(t).length===0){this.errorMessage=`No parameters received. Full URL: ${e}`;return}if(c){console.error("Google OAuth error:",c,m),this.handleError(this.getErrorMessage(c,m));return}if(!n||!o){console.error("Missing code or state parameter"),this.errorMessage=`Missing parameters. Received: code=${!!n}, state=${!!o}. All params: ${JSON.stringify(t)}`;return}let _=sessionStorage.getItem("google_oauth_state");if(o!==_){console.error("State mismatch:",{received:o,stored:_}),this.handleError("Eroare de securitate \xEEn autentificarea Google.");return}console.log("Valid Google OAuth response received"),window.opener?(console.log("Handling popup callback"),this.handlePopupCallback(n,o)):(console.log("Handling redirect callback"),this.handleRedirectCallback(n))}handlePopupCallback(t,e){try{localStorage.setItem("google_auth_code",t),localStorage.setItem("google_auth_state",e),console.log("Stored auth data for parent window, closing popup"),window.close()}catch(n){console.error("Error in popup callback:",n),localStorage.setItem("google_auth_error","Eroare la procesarea r\u0103spunsului Google."),window.close()}}handleRedirectCallback(t){let e=sessionStorage.getItem("google_oauth_type")||"login",n=sessionStorage.getItem("google_oauth_redirect")||"/home";sessionStorage.removeItem("google_oauth_state"),sessionStorage.removeItem("google_oauth_type"),sessionStorage.removeItem("google_oauth_redirect"),localStorage.setItem("google_auth_code_redirect",t),localStorage.setItem("google_auth_type",e),e==="register"?this.router.navigate(["/register"],{queryParams:{google_auth:"processing"}}):this.router.navigate(["/login"],{queryParams:{google_auth:"processing"}})}handleError(t){this.errorMessage=t,window.opener&&(localStorage.setItem("google_auth_error",t),setTimeout(()=>{window.close()},3e3))}getErrorMessage(t,e){switch(t){case"access_denied":return"Accesul a fost refuzat. V\u0103 rug\u0103m s\u0103 accepta\u021Bi permisiunile Google.";case"invalid_request":return"Cerere invalid\u0103 c\u0103tre Google. V\u0103 rug\u0103m s\u0103 \xEEncerca\u021Bi din nou.";case"unauthorized_client":return"Client neautorizat. Contacta\u021Bi administratorul.";case"unsupported_response_type":return"Tip de r\u0103spuns nesuportat. Eroare de configurare.";case"invalid_scope":return"Permisiuni invalide solicitate.";case"server_error":return"Eroare de server Google. \xCEncerca\u021Bi din nou mai t\xE2rziu.";case"temporarily_unavailable":return"Serviciul Google este temporar indisponibil.";default:return e||`Eroare Google OAuth: ${t}`}}goBack(){let t=sessionStorage.getItem("google_oauth_type")||"login";sessionStorage.clear(),localStorage.removeItem("google_auth_code"),localStorage.removeItem("google_auth_state"),localStorage.removeItem("google_auth_error"),localStorage.removeItem("google_auth_code_redirect"),localStorage.removeItem("google_auth_type"),t==="register"?this.router.navigate(["/register"]):this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||i)(v(jt),v(re))};static \u0275cmp=S({type:i,selectors:[["app-google-callback"]],decls:3,vars:2,consts:[[1,"callback-container"],["class","loading-content",4,"ngIf"],["class","error-content",4,"ngIf"],[1,"loading-content"],[1,"loading-spinner"],[1,"error-content"],[1,"back-button",3,"click"]],template:function(e,n){e&1&&(a(0,"div",0),h(1,vu,6,0,"div",1)(2,bu,7,1,"div",2),r()),e&2&&(l(),d("ngIf",!n.errorMessage),l(),d("ngIf",n.errorMessage))},dependencies:[Y,T],styles:[".callback-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f5f5;font-family:Roboto Mono,monospace}.loading-content[_ngcontent-%COMP%], .error-content[_ngcontent-%COMP%]{text-align:center;background:#fff;padding:40px;border-radius:10px;box-shadow:0 4px 20px #0000001a;max-width:400px;width:90%}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:15px;font-size:24px;font-weight:600}p[_ngcontent-%COMP%]{color:#666;margin-bottom:20px;line-height:1.5;font-size:16px}.error-content[_ngcontent-%COMP%]{border-left:4px solid #e74c3c}.error-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c}.back-button[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none;padding:12px 24px;border-radius:5px;cursor:pointer;font-family:Roboto Mono,monospace;font-size:14px;font-weight:500;transition:background-color .3s ease}.back-button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.back-button[_ngcontent-%COMP%]:active{transform:translateY(1px)}.back-button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #3498db4d}@media (max-width: 480px){.loading-content[_ngcontent-%COMP%], .error-content[_ngcontent-%COMP%]{padding:30px 20px;margin:20px}h2[_ngcontent-%COMP%]{font-size:20px}p[_ngcontent-%COMP%]{font-size:14px}.back-button[_ngcontent-%COMP%]{padding:10px 20px;font-size:13px}.loading-spinner[_ngcontent-%COMP%]{width:35px;height:35px;border-width:3px}}"]})};var ho=[{path:"home",component:si},{path:"about",component:ci},{path:"contact-us",component:co},{path:"terms",component:lo},{path:"privacy",component:po},{path:"auth/google/callback",component:fo},{path:"profile",component:bi,canActivate:[Ve]},{path:"specialist-map",component:uo},{path:"home/:id",loadComponent:()=>import("./chunk-XMCZHU2T.js").then(i=>i.SpecialistDetailsComponent)},{path:"specialist/:id",component:yo},{path:"messages",component:to,canActivate:[Ve]},{path:"profile/user/become-specialist",component:oo,canActivate:[Ve]},{path:"profile/user-settings",component:ao,canActivate:[Ve]},{path:"profile/user-reviews",component:so,canActivate:[Ve]},{path:"profile/stripe-account",component:go,canActivate:[Ve],data:{roles:["Specialist"]}},{path:"request-form",component:Yt},{path:"register",component:li},{path:"login",component:di},{path:"specialist-details",component:yo},{path:"service-payment",component:an},{path:"admin",canActivate:[Ve,It],component:pi,data:{roles:["Admin"]}},{path:"admin/users",canActivate:[Ve,It],component:mi,data:{roles:["Admin"]}},{path:"admin/specialists",canActivate:[Ve,It],component:ui,data:{roles:["Admin"]}},{path:"admin/categories",canActivate:[Ve,It],component:ro,data:{roles:["Admin"]}},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",component:gi}];var Go={providers:[ar({eventCoalescing:!0}),Wn(ho),mr()]};var xu=i=>({show:i});function Cu(i,t){i&1&&(a(0,"li")(1,"a",17),s(2,"Devino specialist!"),r()())}function yu(i,t){i&1&&(a(0,"li")(1,"a",18),s(2,"Mesajele tale"),r()())}function Mu(i,t){i&1&&(a(0,"li")(1,"a",19),s(2,"Admin Dashboard"),r()())}var _o=class i{constructor(t,e){this.authService=t;this.router=e;this.router.events.pipe(Jo(n=>n instanceof gr)).subscribe(n=>{console.log("Navigated to:",n)})}title="ExpertEase.Frontend";navbarOpen=!1;toggleNavbar(){this.navbarOpen=!this.navbarOpen}static \u0275fac=function(e){return new(e||i)(v(V),v(re))};static \u0275cmp=S({type:i,selectors:[["app-root"]],decls:35,vars:8,consts:[[1,"page-container"],[1,"navbar"],["routerLink","/home","title","Acas\u0103",1,"logo-button"],["src","logo.svg","alt","Logo"],[1,"navbar-toggle",3,"click"],[1,"navbar-links",3,"ngClass"],[4,"ngIf"],["routerLink","/specialist-map","routerLinkActive","active",1,"map-link"],["routerLink","/about","routerLinkActive","active"],["routerLinkActive","active",3,"routerLink"],[1,"main-content"],[1,"site-footer"],[1,"footer-content"],[1,"footer-links"],["routerLink","/contact-us","routerLinkActive","active"],["routerLink","/terms","routerLinkActive","active"],["routerLink","/privacy","routerLinkActive","active"],["routerLink","profile/user/become-specialist","routerLinkActive","active"],["routerLink","/messages","routerLinkActive","active"],["routerLink","/admin","routerLinkActive","active"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"nav",1)(2,"button",2),y(3,"img",3),r(),a(4,"button",4),u("click",function(){return n.toggleNavbar()}),s(5,"\u2630"),r(),a(6,"ul",5),h(7,Cu,3,0,"li",6),a(8,"li")(9,"a",7),s(10," Harta speciali\u0219ti "),r()(),a(11,"li")(12,"a",8),s(13,"Despre noi"),r()(),h(14,yu,3,0,"li",6),a(15,"li")(16,"a",9),s(17),r()(),y(18,"li"),h(19,Mu,3,0,"li",6),r()(),a(20,"div",10),y(21,"router-outlet"),r(),a(22,"footer",11)(23,"div",12)(24,"p"),s(25,"\xA9 2025 ExpertEase. Toate drepturile rezervate."),r(),a(26,"nav",13)(27,"a",8),s(28,"Despre noi"),r(),a(29,"a",14),s(30,"Contacteaz\u0103-ne!"),r(),a(31,"a",15),s(32,"Termeni \u0219i condi\u021Bii"),r(),a(33,"a",16),s(34,"Politic\u0103 de confiden\u021Bialitate"),r()()()()()),e&2&&(l(6),d("ngClass",Ge(6,xu,n.navbarOpen)),l(),d("ngIf",n.authService.getUserRole()==="Client"),l(7),d("ngIf",n.authService.getUserRole()==="Client"||n.authService.getUserRole()==="Specialist"),l(2),d("routerLink",n.authService.getToken()?"/profile":"/register"),l(),M(" ",n.authService.getToken()?"Contul t\u0103u":"\xCEnregistreaz\u0103-te!"," "),l(2),d("ngIf",n.authService.getUserRole()==="Admin"))},dependencies:[Y,ie,T,qn,De],styles:[".navbar[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;padding:16px 32px;background-color:#1e1e2f;color:#fff;box-shadow:0 2px 2px #0000001a;position:relative}.navbar-toggle[_ngcontent-%COMP%]{display:none;font-size:32px;background:none;border:none;color:#fff;cursor:pointer}.navbar-links[_ngcontent-%COMP%]{list-style:none;display:grid;grid-auto-flow:column;gap:24px;margin:0;padding:0;font-family:Roboto Mono,monospace}.navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:2px 0;transition:border-bottom .2s ease}.navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{border-bottom:2px solid white}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{grid-template-columns:1fr auto;grid-template-rows:auto auto;row-gap:16px}.navbar-toggle[_ngcontent-%COMP%]{display:block}.navbar-links[_ngcontent-%COMP%]{display:none;grid-auto-flow:row;width:100%;grid-column:1/-1}.navbar-links.show[_ngcontent-%COMP%]{display:grid}}.site-footer[_ngcontent-%COMP%]{background-color:#3c1a7d;color:#fff;padding:24px;text-align:center;font-family:Roboto Mono,monospace;margin-top:64px}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.footer-links[_ngcontent-%COMP%]{margin-top:12px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:0 12px;font-size:14px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};pr(_o,$(O({},Go),{providers:[...Go.providers,Wn(ho)]})).catch(i=>console.error(i));
