import{$ as Cr,A as Ai,Aa as Bc,B as Fn,Ba as Ze,C as Ye,Ca as qn,D as h,Da as Lc,E as Oi,Ea as he,F as R,Fa as qc,G as U,Ga as ee,H as br,Ha as bt,I as be,Ia as ke,J as Ae,Ja as jc,K as A,Ka as zc,L as kc,La as $c,M as Ri,Ma as Sr,N as f,Na as xe,O as Xe,Oa as Et,P as a,Pa as Gc,Q as s,Qa as Er,R as B,Ra as te,S as Oe,Sa as It,T as Re,Ta as Ds,U as F,V as E,W as y,X as J,Y as u,Z as Y,_ as G,a as L,aa as q,b as ue,ba as j,c as Vn,ca as z,d as V,da as Ke,e as rt,ea as ot,f as ft,fa as Xt,g as Nn,ga as vt,h as Ps,ha as $,i as Mc,ia as le,j as Dc,ja as Se,k as Ac,ka as Vc,l as Oc,la as Zt,m as Ts,ma as ki,n as gt,na as Nc,o as Rc,oa as xr,p as yr,pa as wr,q as He,qa as Lt,r as ne,ra as Un,s as vr,sa as Ms,t as _n,ta as ze,u as Z,ua as ye,v as _t,va as Q,w as P,wa as Bn,x as T,xa as Ln,y as yt,ya as Fc,z as K,za as Uc}from"./chunk-HHKFO775.js";var tl=(()=>{class i{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,n){this._renderer=t,this._elementRef=n}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(n){return new(n||i)(R(Oi),R(Ai))};static \u0275dir=be({type:i})}return i})(),qi=(()=>{class i extends tl{static \u0275fac=(()=>{let t;return function(o){return(t||(t=yt(i)))(o||i)}})();static \u0275dir=be({type:i,features:[Ae]})}return i})(),vn=new _n(""),sd={provide:vn,useExisting:He(()=>ks),multi:!0},ks=(()=>{class i extends qi{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=yt(i)))(o||i)}})();static \u0275dir=be({type:i,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,o){n&1&&E("change",function(p){return o.onChange(p.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Ke([sd]),Ae]})}return i})(),ad={provide:vn,useExisting:He(()=>Ee),multi:!0};function cd(){let i=Ms()?Ms().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var ld=new _n(""),Ee=(()=>{class i extends tl{_compositionMode;_composing=!1;constructor(t,n,o){super(t,n),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!cd())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(n){return new(n||i)(R(Oi),R(Ai),R(ld,8))};static \u0275dir=be({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,o){n&1&&E("input",function(p){return o._handleInput(p.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(p){return o._compositionEnd(p.target.value)})},standalone:!1,features:[Ke([ad]),Ae]})}return i})();function Vs(i){return i==null||Ns(i)===0}function Ns(i){return i==null?null:Array.isArray(i)||typeof i=="string"?i.length:i instanceof Set?i.size:null}var jt=new _n(""),Fr=new _n(""),ud=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,en=class{static min(e){return nl(e)}static max(e){return il(e)}static required(e){return rl(e)}static requiredTrue(e){return dd(e)}static email(e){return ol(e)}static minLength(e){return sl(e)}static maxLength(e){return pd(e)}static pattern(e){return hd(e)}static nullValidator(e){return Pr()}static compose(e){return pl(e)}static composeAsync(e){return hl(e)}};function nl(i){return e=>{if(e.value==null||i==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function il(i){return e=>{if(e.value==null||i==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function rl(i){return Vs(i.value)?{required:!0}:null}function dd(i){return i.value===!0?null:{required:!0}}function ol(i){return Vs(i.value)||ud.test(i.value)?null:{email:!0}}function sl(i){return e=>{let t=e.value?.length??Ns(e.value);return t===null||t===0?null:t<i?{minlength:{requiredLength:i,actualLength:t}}:null}}function pd(i){return e=>{let t=e.value?.length??Ns(e.value);return t!==null&&t>i?{maxlength:{requiredLength:i,actualLength:t}}:null}}function hd(i){if(!i)return Pr;let e,t;return typeof i=="string"?(t="",i.charAt(0)!=="^"&&(t+="^"),t+=i,i.charAt(i.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(Vs(n.value))return null;let o=n.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function Pr(i){return null}function al(i){return i!=null}function cl(i){return kc(i)?Nn(i):i}function ll(i){let e={};return i.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function ul(i,e){return e.map(t=>t(i))}function md(i){return!i.validate}function dl(i){return i.map(e=>md(e)?e:t=>e.validate(t))}function pl(i){if(!i)return null;let e=i.filter(al);return e.length==0?null:function(t){return ll(ul(t,e))}}function Fs(i){return i!=null?pl(dl(i)):null}function hl(i){if(!i)return null;let e=i.filter(al);return e.length==0?null:function(t){let n=ul(t,e).map(cl);return Ac(n).pipe(Dc(ll))}}function Us(i){return i!=null?hl(dl(i)):null}function Wc(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function ml(i){return i._rawValidators}function fl(i){return i._rawAsyncValidators}function As(i){return i?Array.isArray(i)?i:[i]:[]}function Tr(i,e){return Array.isArray(i)?i.includes(e):i===e}function Hc(i,e){let t=As(e);return As(i).forEach(o=>{Tr(t,o)||t.push(o)}),t}function Kc(i,e){return As(e).filter(t=>!Tr(i,t))}var Mr=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Fs(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Us(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},qt=class extends Mr{name;get formDirective(){return null}get path(){return null}},yn=class extends Mr{_parent=null;name=null;valueAccessor=null},Dr=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},fd={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Hg=ue(L({},fd),{"[class.ng-submitted]":"isSubmitted"}),Ie=(()=>{class i extends Dr{constructor(t){super(t)}static \u0275fac=function(n){return new(n||i)(R(yn,2))};static \u0275dir=be({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,o){n&2&&Xe("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Ae]})}return i})(),et=(()=>{class i extends Dr{constructor(t){super(t)}static \u0275fac=function(n){return new(n||i)(R(qt,10))};static \u0275dir=be({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,o){n&2&&Xe("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[Ae]})}return i})();var Vi="VALID",Ir="INVALID",jn="PENDING",Ni="DISABLED",tn=class{},Ar=class extends tn{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ui=class extends tn{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Bi=class extends tn{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},zn=class extends tn{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Or=class extends tn{source;constructor(e){super(),this.source=e}},Rr=class extends tn{source;constructor(e){super(),this.source=e}};function Bs(i){return(Ur(i)?i.validators:i)||null}function gd(i){return Array.isArray(i)?Fs(i):i||null}function Ls(i,e){return(Ur(e)?e.asyncValidators:i)||null}function _d(i){return Array.isArray(i)?Us(i):i||null}function Ur(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function gl(i,e,t){let n=i.controls;if(!(e?Object.keys(n):n).length)throw new yr(1e3,"");if(!n[t])throw new yr(1001,"")}function _l(i,e,t){i._forEachChild((n,o)=>{if(t[o]===void 0)throw new yr(1002,"")})}var $n=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Lt(this.statusReactive)}set status(e){Lt(()=>this.statusReactive.set(e))}_status=Un(()=>this.statusReactive());statusReactive=Fn(void 0);get valid(){return this.status===Vi}get invalid(){return this.status===Ir}get pending(){return this.status==jn}get disabled(){return this.status===Ni}get enabled(){return this.status!==Ni}errors;get pristine(){return Lt(this.pristineReactive)}set pristine(e){Lt(()=>this.pristineReactive.set(e))}_pristine=Un(()=>this.pristineReactive());pristineReactive=Fn(!0);get dirty(){return!this.pristine}get touched(){return Lt(this.touchedReactive)}set touched(e){Lt(()=>this.touchedReactive.set(e))}_touched=Un(()=>this.touchedReactive());touchedReactive=Fn(!1);get untouched(){return!this.touched}_events=new rt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Hc(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Hc(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Kc(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Kc(e,this._rawAsyncValidators))}hasValidator(e){return Tr(this._rawValidators,e)}hasAsyncValidator(e){return Tr(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ue(L({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Bi(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new Bi(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ue(L({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new Ui(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new Ui(!0,n))}markAsPending(e={}){this.status=jn;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zn(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ue(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ni,this.errors=null,this._forEachChild(o=>{o.disable(ue(L({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ar(this.value,n)),this._events.next(new zn(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ue(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Vi,this._forEachChild(n=>{n.enable(ue(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ue(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vi||this.status===jn)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ar(this.value,t)),this._events.next(new zn(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ue(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ni:Vi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=jn,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=cl(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,o)=>n&&n._find(o),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new zn(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new K,this.statusChanges=new K}_calculateStatus(){return this._allControlsDisabled()?Ni:this.errors?Ir:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jn)?jn:this._anyControlsHaveStatus(Ir)?Ir:Vi}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),o=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new Ui(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Bi(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ur(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=gd(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_d(this._rawAsyncValidators)}},Gn=class extends $n{constructor(e,t,n){super(Bs(t),Ls(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){_l(this,!0,e),Object.keys(e).forEach(n=>{gl(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let o=this.controls[n];o&&o.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,o)=>{n.reset(e?e[o]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,o)=>((n.enabled||this.disabled)&&(t[o]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((o,c)=>{n=t(n,o,c)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Os=class extends Gn{};var ji=new _n("",{providedIn:"root",factory:()=>Br}),Br="always";function yl(i,e){return[...e.path,i]}function kr(i,e,t=Br){qs(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),vd(i,e),Cd(i,e),bd(i,e),yd(i,e)}function Qc(i,e,t=!0){let n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),Nr(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Vr(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function yd(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function qs(i,e){let t=ml(i);e.validator!==null?i.setValidators(Wc(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=fl(i);e.asyncValidator!==null?i.setAsyncValidators(Wc(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let o=()=>i.updateValueAndValidity();Vr(e._rawValidators,o),Vr(e._rawAsyncValidators,o)}function Nr(i,e){let t=!1;if(i!==null){if(e.validator!==null){let o=ml(i);if(Array.isArray(o)&&o.length>0){let c=o.filter(p=>p!==e.validator);c.length!==o.length&&(t=!0,i.setValidators(c))}}if(e.asyncValidator!==null){let o=fl(i);if(Array.isArray(o)&&o.length>0){let c=o.filter(p=>p!==e.asyncValidator);c.length!==o.length&&(t=!0,i.setAsyncValidators(c))}}}let n=()=>{};return Vr(e._rawValidators,n),Vr(e._rawAsyncValidators,n),t}function vd(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&vl(i,e)})}function bd(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&vl(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function vl(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Cd(i,e){let t=(n,o)=>{e.valueAccessor.writeValue(n),o&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function bl(i,e){i==null,qs(i,e)}function xd(i,e){return Nr(i,e)}function Cl(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function wd(i){return Object.getPrototypeOf(i.constructor)===qi}function xl(i,e){i._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function wl(i,e){if(!e)return null;Array.isArray(e);let t,n,o;return e.forEach(c=>{c.constructor===Ee?t=c:wd(c)?n=c:o=c}),o||n||t||null}function Sd(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}var Ed={provide:qt,useExisting:He(()=>st)},Fi=Promise.resolve(),st=(()=>{class i extends qt{callSetDisabledState;get submitted(){return Lt(this.submittedReactive)}_submitted=Un(()=>this.submittedReactive());submittedReactive=Fn(!1);_directives=new Set;form;ngSubmit=new K;options;constructor(t,n,o){super(),this.callSetDisabledState=o,this.form=new Gn({},Fs(t),Us(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fi.then(()=>{let n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),kr(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fi.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Fi.then(()=>{let n=this._findContainer(t.path),o=new Gn({});bl(o,t),n.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fi.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Fi.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),xl(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Or(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new Rr(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(n){return new(n||i)(R(jt,10),R(Fr,10),R(ji,8))};static \u0275dir=be({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,o){n&1&&E("submit",function(p){return o.onSubmit(p)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ke([Ed]),Ae]})}return i})();function Jc(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function Yc(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Li=class extends $n{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,n){super(Bs(t),Ls(n,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ur(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Yc(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Jc(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Jc(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Yc(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Id=i=>i instanceof Li;var Pd={provide:yn,useExisting:He(()=>Me)},Xc=Promise.resolve(),Me=(()=>{class i extends yn{_changeDetectorRef;callSetDisabledState;control=new Li;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new K;constructor(t,n,o,c,p,_){super(),this._changeDetectorRef=p,this.callSetDisabledState=_,this._parent=t,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=wl(this,c)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Cl(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){kr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Xc.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,o=n!==0&&wr(n);Xc.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?yl(t,this._parent):[t]}static \u0275fac=function(n){return new(n||i)(R(qt,9),R(jt,10),R(Fr,10),R(vn,10),R(xr,8),R(ji,8))};static \u0275dir=be({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ke([Pd]),Ae,_t]})}return i})();var tt=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275dir=be({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return i})(),Td={provide:vn,useExisting:He(()=>zt),multi:!0},zt=(()=>{class i extends qi{writeValue(t){let n=t??"";this.setProperty("value",n)}registerOnChange(t){this.onChange=n=>{t(n==""?null:parseFloat(n))}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=yt(i)))(o||i)}})();static \u0275dir=be({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,o){n&1&&E("input",function(p){return o.onChange(p.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Ke([Td]),Ae]})}return i})();var Sl=new _n("");var Md={provide:qt,useExisting:He(()=>js)},js=(()=>{class i extends qt{callSetDisabledState;get submitted(){return Lt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Un(()=>this._submittedReactive());_submittedReactive=Fn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new K;constructor(t,n,o){super(),this.callSetDisabledState=o,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Nr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let n=this.form.get(t.path);return kr(n,t,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){Qc(t.control||null,t,!1),Sd(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this._submittedReactive.set(!0),xl(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Or(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Rr(this.form))}_updateDomValue(){this.directives.forEach(t=>{let n=t.control,o=this.form.get(t.path);n!==o&&(Qc(n||null,t),Id(o)&&(kr(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let n=this.form.get(t.path);bl(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let n=this.form.get(t.path);n&&xd(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qs(this.form,this),this._oldForm&&Nr(this._oldForm,this)}static \u0275fac=function(n){return new(n||i)(R(jt,10),R(Fr,10),R(ji,8))};static \u0275dir=be({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,o){n&1&&E("submit",function(p){return o.onSubmit(p)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ke([Md]),Ae,_t]})}return i})();var Dd={provide:yn,useExisting:He(()=>zs)},zs=(()=>{class i extends yn{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new K;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,n,o,c,p){super(),this._ngModelWarningConfig=p,this._parent=t,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=wl(this,c)}ngOnChanges(t){this._added||this._setUpControl(),Cl(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return yl(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(n){return new(n||i)(R(qt,13),R(jt,10),R(Fr,10),R(vn,10),R(Sl,8))};static \u0275dir=be({type:i,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ke([Dd]),Ae,_t]})}return i})();var Ad={provide:vn,useExisting:He(()=>nn),multi:!0};function El(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function Od(i){return i.split(":")[0]}var nn=(()=>{class i extends qi{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let n=this._getOptionId(t),o=El(n,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){let n=Od(t);return this._optionMap.has(n)?this._optionMap.get(n):t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=yt(i)))(o||i)}})();static \u0275dir=be({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,o){n&1&&E("change",function(p){return o.onChange(p.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ke([Ad]),Ae]})}return i})(),Wn=(()=>{class i{_element;_renderer;_select;id;constructor(t,n,o){this._element=t,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(El(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(R(Ai),R(Oi),R(nn,9))};static \u0275dir=be({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})(),Rd={provide:vn,useExisting:He(()=>Il),multi:!0};function Zc(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function kd(i){return i.split(":")[0]}var Il=(()=>{class i extends qi{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let n;if(Array.isArray(t)){let o=t.map(c=>this._getOptionId(c));n=(c,p)=>{c._setSelected(o.indexOf(p.toString())>-1)}}else n=(o,c)=>{o._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{let o=[],c=n.selectedOptions;if(c!==void 0){let p=c;for(let _=0;_<p.length;_++){let O=p[_],k=this._getOptionValue(O.value);o.push(k)}}else{let p=n.options;for(let _=0;_<p.length;_++){let O=p[_];if(O.selected){let k=this._getOptionValue(O.value);o.push(k)}}}this.value=o,t(o)}}_registerOption(t){let n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){let n=kd(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=yt(i)))(o||i)}})();static \u0275dir=be({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,o){n&1&&E("change",function(p){return o.onChange(p.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ke([Rd]),Ae]})}return i})(),Hn=(()=>{class i{_element;_renderer;_select;id;_value;constructor(t,n,o){this._element=t,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Zc(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Zc(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(R(Ai),R(Oi),R(Il,9))};static \u0275dir=be({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})();function Vd(i){return typeof i=="number"?i:parseInt(i,10)}function Pl(i){return typeof i=="number"?i:parseFloat(i)}var zi=(()=>{class i{_validator=Pr;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Pr,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(n){return new(n||i)};static \u0275dir=be({type:i,features:[_t]})}return i})(),Nd={provide:jt,useExisting:He(()=>bn),multi:!0},bn=(()=>{class i extends zi{max;inputName="max";normalizeInput=t=>Pl(t);createValidator=t=>il(t);static \u0275fac=(()=>{let t;return function(o){return(t||(t=yt(i)))(o||i)}})();static \u0275dir=be({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,o){n&2&&Ri("max",o._enabled?o.max:null)},inputs:{max:"max"},standalone:!1,features:[Ke([Nd]),Ae]})}return i})(),Fd={provide:jt,useExisting:He(()=>Cn),multi:!0},Cn=(()=>{class i extends zi{min;inputName="min";normalizeInput=t=>Pl(t);createValidator=t=>nl(t);static \u0275fac=(()=>{let t;return function(o){return(t||(t=yt(i)))(o||i)}})();static \u0275dir=be({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,o){n&2&&Ri("min",o._enabled?o.min:null)},inputs:{min:"min"},standalone:!1,features:[Ke([Fd]),Ae]})}return i})(),Ud={provide:jt,useExisting:He(()=>at),multi:!0};var at=(()=>{class i extends zi{required;inputName="required";normalizeInput=wr;createValidator=t=>rl;enabled(t){return t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=yt(i)))(o||i)}})();static \u0275dir=be({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,o){n&2&&Ri("required",o._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ke([Ud]),Ae]})}return i})();var Bd={provide:jt,useExisting:He(()=>$s),multi:!0},$s=(()=>{class i extends zi{email;inputName="email";normalizeInput=wr;createValidator=t=>ol;enabled(t){return t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=yt(i)))(o||i)}})();static \u0275dir=be({type:i,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},standalone:!1,features:[Ke([Bd]),Ae]})}return i})(),Ld={provide:jt,useExisting:He(()=>Gs),multi:!0},Gs=(()=>{class i extends zi{minlength;inputName="minlength";normalizeInput=t=>Vd(t);createValidator=t=>sl(t);static \u0275fac=(()=>{let t;return function(o){return(t||(t=yt(i)))(o||i)}})();static \u0275dir=be({type:i,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(n,o){n&2&&Ri("minlength",o._enabled?o.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[Ke([Ld]),Ae]})}return i})();var Tl=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=br({type:i});static \u0275inj=vr({})}return i})(),Rs=class extends $n{constructor(e,t,n){super(Bs(t),Ls(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){_l(this,!1,e),e.forEach((n,o)=>{gl(this,!1,o),this.at(o).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((n,o)=>{this.at(o)&&this.at(o).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,o)=>{n.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,n)=>n._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function el(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var Ml=(()=>{class i{useNonNullable=!1;get nonNullable(){let t=new i;return t.useNonNullable=!0,t}group(t,n=null){let o=this._reduceControls(t),c={};return el(n)?c=n:n!==null&&(c.validators=n.validator,c.asyncValidators=n.asyncValidator),new Gn(o,c)}record(t,n=null){let o=this._reduceControls(t);return new Os(o,n)}control(t,n,o){let c={};return this.useNonNullable?(el(n)?c=n:(c.validators=n,c.asyncValidators=o),new Li(t,ue(L({},c),{nonNullable:!0}))):new Li(t,n,o)}array(t,n,o){let c=t.map(p=>this._createControl(p));return new Rs(c,n,o)}_reduceControls(t){let n={};return Object.keys(t).forEach(o=>{n[o]=this._createControl(t[o])}),n}_createControl(t){if(t instanceof Li)return t;if(t instanceof $n)return t;if(Array.isArray(t)){let n=t[0],o=t.length>1?t[1]:null,c=t.length>2?t[2]:null;return this.control(n,o,c)}else return this.control(t)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var re=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:ji,useValue:t.callSetDisabledState??Br}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=br({type:i});static \u0275inj=vr({imports:[Tl]})}return i})(),rn=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:Sl,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ji,useValue:t.callSetDisabledState??Br}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=br({type:i});static \u0275inj=vr({imports:[Tl]})}return i})();var ht=class i{searchTerm="";placeholder="Caut\u0103 ...";searchChanged=new K;onSearchChanged(){this.searchChanged.emit(this.searchTerm.trim())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder"},outputs:{searchChanged:"searchChanged"},decls:4,vars:2,consts:[[1,"search-box"],["type","text",3,"ngModelChange","placeholder","ngModel"],["aria-label","Search",1,"search-icon-button",3,"click"],["src","assets/icons/search.svg","alt","Search Icon"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"input",1),z("ngModelChange",function(c){return j(n.searchTerm,c)||(n.searchTerm=c),c}),s(),a(2,"button",2),E("click",function(){return n.onSearchChanged()}),B(3,"img",3),s()()),t&2&&(h(),f("placeholder",n.placeholder||"Caut\u0103..."),q("ngModel",n.searchTerm))},dependencies:[he,re,Ee,Ie,Me],styles:[".search-box[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;gap:20px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px 50px 15px 20px;border:none;background:transparent;outline:none;font-family:Roboto Mono,monospace;font-size:12px}.search-icon-button[_ngcontent-%COMP%]{background:none;border:none;padding:0 16px;font-size:1.2rem;color:#444;cursor:pointer;display:flex;align-items:center;justify-content:center}.search-icon-button[_ngcontent-%COMP%]:hover{color:#000}.search-icon-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}"]})};function qd(i,e){if(i&1&&(a(0,"option",7),u(1),s()),i&2){let t=e.$implicit;f("value",t),h(),Y(t)}}var Tt=class i{currentPage=1;totalItems=0;pageSize=10;pageSizeOptions=[5,10,20];pageChange=new K;pageSizeChange=new K;getTotalPages(){return Math.ceil(this.totalItems/this.pageSize)}goToPreviousPage(){this.currentPage>1&&this.pageChange.emit(this.currentPage-1)}goToNextPage(){this.currentPage<this.getTotalPages()&&this.pageChange.emit(this.currentPage+1)}onPageSizeChange(e){let t=Number(e);this.pageSizeChange.emit(t)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",totalItems:"totalItems",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},outputs:{pageChange:"pageChange",pageSizeChange:"pageSizeChange"},decls:13,vars:6,consts:[[1,"pagination-wrapper"],[1,"page-size-selector"],["for","pageSize"],["id","pageSize",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"pagination-controls"],[3,"click","disabled"],[3,"value"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"label",2),u(3,"Afi\u0219eaz\u0103 pe pagin\u0103:"),s(),a(4,"select",3),z("ngModelChange",function(c){return j(n.pageSize,c)||(n.pageSize=c),c}),E("change",function(){return n.onPageSizeChange(n.pageSize)}),A(5,qd,2,2,"option",4),s()(),a(6,"div",5)(7,"button",6),E("click",function(){return n.goToPreviousPage()}),u(8,"\u2190"),s(),a(9,"span"),u(10),s(),a(11,"button",6),E("click",function(){return n.goToNextPage()}),u(12,"\u2192"),s()()()),t&2&&(h(4),q("ngModel",n.pageSize),h(),f("ngForOf",n.pageSizeOptions),h(2),f("disabled",n.currentPage===1),h(3),Cr("Pagina ",n.currentPage," din ",n.getTotalPages(),""),h(),f("disabled",n.currentPage===n.getTotalPages()))},dependencies:[ye,rn,Wn,Hn,nn,Ie,re,Me],styles:[".pagination-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:32px;flex-wrap:wrap;margin-top:24px;font-family:Roboto Mono,monospace}.page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:16px}.page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}.page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 6px;border:1px solid #aaa;border-radius:4px;font-size:15px;font-family:Roboto Mono,monospace}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:16px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;border:2px solid #000;background-color:#d9c8ff;border-radius:4px;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:default}"]})};function jd(i,e){i&1&&(a(0,"div",33),u(1," Data \u0219i ora sunt obligatorii. "),s())}function zd(i,e){i&1&&(a(0,"div",33),u(1," Num\u0103rul de telefon este obligatoriu. "),s())}function $d(i,e){i&1&&(a(0,"div",33),u(1," Adresa este obligatorie. "),s())}function Gd(i,e){i&1&&(a(0,"div",33),u(1," Descrierea solicit\u0103rii este obligatorie. "),s())}var Kn=class i{constructor(e){this.router=e}requestForm={receiverUserId:"",day:null,month:null,year:null,startHour:null,startMinute:null,phoneNumber:"",address:"",description:""};formSubmit=new K;close=new K;formSubmitted=!1;submitRequest(e){if(this.formSubmitted=!0,e.invalid){Object.keys(e.controls).forEach(o=>{e.controls[o].markAsTouched()});return}let t=this.combineDateTime(),n=ue(L({},this.requestForm),{requestedStartDate:t});this.formSubmit.emit(n)}combineDateTime(){let e=this.requestForm.day||1,t=(this.requestForm.month||1)-1,n=this.requestForm.year||new Date().getFullYear(),o=this.requestForm.startHour||0,c=this.requestForm.startMinute||0;return new Date(n,t,e,o,c,0,0)}closeForm(){this.close.emit()}static \u0275fac=function(t){return new(t||i)(R(xe))};static \u0275cmp=U({type:i,selectors:[["app-request-form"]],inputs:{requestForm:"requestForm"},outputs:{formSubmit:"formSubmit",close:"close"},decls:61,vars:13,consts:[["formRef","ngForm"],["dayCtrl","ngModel"],["monthCtrl","ngModel"],["yearCtrl","ngModel"],["hourCtrl","ngModel"],["minuteCtrl","ngModel"],["phoneCtrl","ngModel"],["addressCtrl","ngModel"],["descriptionCtrl","ngModel"],[1,"overlay"],[1,"request-form-wrapper"],[1,"close-button",3,"click"],[1,"request-form",3,"ngSubmit"],[1,"datetime-row"],[1,"date-fields"],[1,"date-field"],[1,"input-box"],["type","number","name","day","placeholder","ZZ","min","1","max","31","required","",3,"ngModelChange","ngModel"],[1,"date-separator"],["type","number","name","month","placeholder","LL","min","1","max","12","required","",3,"ngModelChange","ngModel"],["type","number","name","year","placeholder","AAAA","min","2024","max","2030","required","",3,"ngModelChange","ngModel"],[1,"time-fields"],[1,"time-field"],["type","number","name","startHour","placeholder","HH","min","0","max","23","required","",3,"ngModelChange","ngModel"],[1,"time-separator"],["type","number","name","startMinute","placeholder","MM","min","0","max","59","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["type","tel","name","phoneNumber","placeholder","ex: 0723 123 456","required","",3,"ngModelChange","ngModel"],["type","text","name","address","placeholder","ex: Str. Teiului nr. 14, Bucure\u0219ti","required","",3,"ngModelChange","ngModel"],[1,"input-box","textarea-box"],["name","description","rows","4","placeholder","Descrie\u021Bi \xEEn detaliu serviciul de care ave\u021Bi nevoie...","required","",3,"ngModelChange","ngModel"],[1,"center-button"],["type","submit",3,"disabled"],[1,"error"]],template:function(t,n){if(t&1){let o=F();a(0,"div",9)(1,"div",10)(2,"button",11),E("click",function(){return P(o),T(n.closeForm())}),u(3,"\xD7"),s(),a(4,"h2"),u(5,"Trimite o solicitare"),s(),a(6,"form",12,0),E("ngSubmit",function(){P(o);let p=J(7);return T(n.submitRequest(p))}),a(8,"label"),u(9," Data \u0219i ora dorite: "),a(10,"div",13)(11,"div",14)(12,"div",15)(13,"div",16)(14,"input",17,1),z("ngModelChange",function(p){return P(o),j(n.requestForm.day,p)||(n.requestForm.day=p),T(p)}),s()()(),a(16,"span",18),u(17,"/"),s(),a(18,"div",15)(19,"div",16)(20,"input",19,2),z("ngModelChange",function(p){return P(o),j(n.requestForm.month,p)||(n.requestForm.month=p),T(p)}),s()()(),a(22,"span",18),u(23,"/"),s(),a(24,"div",15)(25,"div",16)(26,"input",20,3),z("ngModelChange",function(p){return P(o),j(n.requestForm.year,p)||(n.requestForm.year=p),T(p)}),s()()()(),a(28,"div",21)(29,"div",22)(30,"div",16)(31,"input",23,4),z("ngModelChange",function(p){return P(o),j(n.requestForm.startHour,p)||(n.requestForm.startHour=p),T(p)}),s()()(),a(33,"span",24),u(34,":"),s(),a(35,"div",22)(36,"div",16)(37,"input",25,5),z("ngModelChange",function(p){return P(o),j(n.requestForm.startMinute,p)||(n.requestForm.startMinute=p),T(p)}),s()()()()(),A(39,jd,2,0,"div",26),s(),a(40,"label"),u(41," Num\u0103r de telefon: "),a(42,"div",16)(43,"input",27,6),z("ngModelChange",function(p){return P(o),j(n.requestForm.phoneNumber,p)||(n.requestForm.phoneNumber=p),T(p)}),s()(),A(45,zd,2,0,"div",26),s(),a(46,"label"),u(47," Adres\u0103: "),a(48,"div",16)(49,"input",28,7),z("ngModelChange",function(p){return P(o),j(n.requestForm.address,p)||(n.requestForm.address=p),T(p)}),s()(),A(51,$d,2,0,"div",26),s(),a(52,"label"),u(53," Descrierea solicit\u0103rii: "),a(54,"div",29)(55,"textarea",30,8),z("ngModelChange",function(p){return P(o),j(n.requestForm.description,p)||(n.requestForm.description=p),T(p)}),s()(),A(57,Gd,2,0,"div",26),s(),a(58,"div",31)(59,"button",32),u(60," Trimite solicitarea "),s()()()()()}if(t&2){let o=J(7),c=J(15),p=J(21),_=J(27),O=J(32),k=J(38),H=J(44),ae=J(50),se=J(56);h(14),q("ngModel",n.requestForm.day),h(6),q("ngModel",n.requestForm.month),h(6),q("ngModel",n.requestForm.year),h(5),q("ngModel",n.requestForm.startHour),h(6),q("ngModel",n.requestForm.startMinute),h(2),f("ngIf",(c.invalid||p.invalid||_.invalid||O.invalid||k.invalid)&&(c.dirty||c.touched||p.dirty||p.touched||_.dirty||_.touched||O.dirty||O.touched||k.dirty||k.touched||n.formSubmitted)),h(4),q("ngModel",n.requestForm.phoneNumber),h(2),f("ngIf",H.invalid&&(H.dirty||H.touched||n.formSubmitted)),h(4),q("ngModel",n.requestForm.address),h(2),f("ngIf",ae.invalid&&(ae.dirty||ae.touched||n.formSubmitted)),h(4),q("ngModel",n.requestForm.description),h(2),f("ngIf",se.invalid&&(se.dirty||se.touched||n.formSubmitted)),h(2),f("disabled",o.invalid&&n.formSubmitted)}},dependencies:[he,Q,re,tt,Ee,zt,Ie,et,at,Cn,bn,Me,st,rn],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.request-form-wrapper[_ngcontent-%COMP%]{position:relative;width:600px;max-width:90vw;margin:2rem auto;background-color:#e8d9ff;border:2px solid #000;padding:2rem;font-family:Roboto Mono,monospace;border-radius:8px;box-shadow:0 4px 12px #00000026}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;background:none;border:none;font-size:24px;font-weight:700;cursor:pointer;color:#333;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-button[_ngcontent-%COMP%]:hover{color:#000;background-color:#0000001a;border-radius:50%}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:1.25rem;margin-bottom:1.5rem;margin-top:0}.request-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;font-size:.95rem;font-weight:500}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;font-family:Roboto Mono,monospace;font-size:.9rem}.input-box[_ngcontent-%COMP%]{background-color:#f8f5ff;border:2px solid #c9b7ff;border-radius:6px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s ease;margin-top:4px}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff;box-shadow:0 2px 8px #9a79ff33}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:14px;outline:none;color:#333}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#888;font-style:italic}.datetime-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-top:4px}.date-fields[_ngcontent-%COMP%]{flex:2;display:flex;align-items:center;gap:4px}.time-fields[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:4px}.date-field[_ngcontent-%COMP%]{flex:1}.date-field[_ngcontent-%COMP%]:nth-child(5){flex:1.5}.time-field[_ngcontent-%COMP%]{flex:1}.date-separator[_ngcontent-%COMP%], .time-separator[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#666;margin:0 2px}.date-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .time-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{text-align:center;font-weight:500}.date-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .date-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .time-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .time-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.date-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][type=number][_ngcontent-%COMP%], .time-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.textarea-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;padding:8px 0;line-height:1.4}.center-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1.5rem}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border:2px solid #000;border-radius:6px;background-color:#c9b7ff;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace;font-size:14px;transition:all .3s ease}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#b8a3ff;box-shadow:0 2px 6px #0003;transform:translateY(-1px)}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 1px 3px #0003}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#dcdcdc;color:#888;cursor:not-allowed;border-color:#bbb;transform:none;box-shadow:none}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px;font-weight:400}@media (max-width: 768px){.request-form-wrapper[_ngcontent-%COMP%]{max-width:90vw;margin:1rem;padding:1.5rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem}}"]})};var Wd=i=>["/specialist",i];function Hd(i,e){if(i&1&&(a(0,"span",18),u(1),s()),i&2){let t=e.$implicit;h(),Y(t.name)}}function Kd(i,e){if(i&1){let t=F();a(0,"div",19)(1,"app-request-form",20),E("formSubmit",function(){P(t);let o=y();return T(o.submitRequest(o.requestForm))})("close",function(){P(t);let o=y();return T(o.closeRequestForm())}),s()()}if(i&2){let t=y();h(),f("requestForm",t.requestForm)}}var $i=class i{constructor(e){this.router=e}specialist={id:"",fullName:"",email:"",profilePictureUrl:"",phoneNumber:"",address:"",categories:[],yearsExperience:0,description:"",createdAt:new Date,updatedAt:new Date,rating:0};isRequestFormVisible=!1;requestForm={receiverUserId:"",day:null,month:null,year:null,startHour:null,startMinute:null,phoneNumber:"",address:"",description:""};specialistId=new K;requestFormSubmit=new K;goToSendRequest(){this.requestForm.receiverUserId=this.specialist.id,this.isRequestFormVisible=!0}closeRequestForm(){this.requestForm={receiverUserId:"",day:null,month:null,year:null,startHour:null,startMinute:null,phoneNumber:"",address:"",description:""},this.isRequestFormVisible=!1}transformFormDataToRequestDTO(e){let t=this.combineDateTime(e);return{receiverUserId:e.receiverUserId,requestedStartDate:t,phoneNumber:e.phoneNumber,address:e.address,description:e.description}}combineDateTime(e){let t=e.date||1,n=(e.month||1)-1,o=e.year||new Date().getFullYear(),c=e.startHour||0,p=e.startMinute||0;return new Date(o,n,t,c,p,0,0)}submitRequest(e){let t=this.transformFormDataToRequestDTO(e);this.requestFormSubmit.emit(t),this.closeRequestForm()}static \u0275fac=function(t){return new(t||i)(R(xe))};static \u0275cmp=U({type:i,selectors:[["app-specialist-card"]],inputs:{specialist:"specialist"},outputs:{specialistId:"specialistId",requestFormSubmit:"requestFormSubmit"},decls:28,vars:10,consts:[[1,"card"],[1,"avatar-wrapper"],[1,"avatar"],["alt","User avatar",3,"src"],[1,"rating-badge"],["src","assets/star-rating.svg","alt","User star"],[1,"rating-value"],[1,"info"],[1,"full-name",3,"routerLink"],[1,"details-block"],[1,"row"],[1,"categories"],[1,"label"],["class","tag",4,"ngFor","ngForOf"],[1,"experience"],[1,"description"],[1,"request-btn",3,"click"],["class","overlay",4,"ngIf"],[1,"tag"],[1,"overlay"],[3,"formSubmit","close","requestForm"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),B(3,"img",3),s(),a(4,"div",4),B(5,"img",5),a(6,"span",6),u(7),s()()(),a(8,"div",7)(9,"h2",8),u(10),s(),a(11,"div",9)(12,"div",10)(13,"div",11)(14,"span",12),u(15,"Categorii:"),s(),A(16,Hd,2,1,"span",13),s(),a(17,"div",14)(18,"span",12),u(19,"Ani experien\u021B\u0103:"),s(),u(20),s()(),a(21,"div",15)(22,"span",12),u(23,"Descriere:"),s(),u(24),s()()(),a(25,"button",16),E("click",function(){return n.goToSendRequest()}),u(26,"F\u0103 o solicitare"),s()(),A(27,Kd,2,1,"div",17)),t&2&&(h(3),f("src",n.specialist.profilePictureUrl||"assets/avatar.svg",Ye),h(4),Y(n.specialist.rating),h(2),f("routerLink",Xt(8,Wd,n.specialist.id)),h(),G(" ",n.specialist.fullName," "),h(6),f("ngForOf",n.specialist.categories),h(4),G(" ",n.specialist.yearsExperience," "),h(4),G(" ",n.specialist.description," "),h(3),f("ngIf",n.isRequestFormVisible))},dependencies:[he,ye,Q,Kn,Et],styles:[".card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#cfbdfe;padding:20px;width:100%;gap:20px;justify-content:space-between;box-sizing:border-box;font-family:Roboto Mono,monospace}.info[_ngcontent-%COMP%]{flex:1}.full-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:.25rem;margin-bottom:.5rem}.full-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.details-block[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:12px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.categories[_ngcontent-%COMP%], .experience[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-size:.95rem}.label[_ngcontent-%COMP%]{font-weight:700;margin-right:6px}.tag[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem}.request-btn[_ngcontent-%COMP%]{background-color:#9a83db;padding:32px 24px;border:none;border-radius:8px;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:100px;aspect-ratio:1/1}.avatar[_ngcontent-%COMP%]{position:relative;width:100px;height:100px;overflow:hidden}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background-color:#e6dfff;object-fit:cover;display:block}.rating-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;display:inline-flex;align-items:center;gap:.3em;background:#fff;padding:.2em .5em;border-radius:.6em;font-size:1em;box-shadow:0 1px 4px #0000001a}.rating-badge[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1em;height:1em}"]})};var Lr=class i{constructor(){}geocodeAddress(e){return V(this,null,function*(){if(!window.google||!window.google.maps)throw new Error("Google Maps API not loaded");let t=new google.maps.Geocoder;return new Promise((n,o)=>{t.geocode({address:e},(c,p)=>{if(p===google.maps.GeocoderStatus.OK&&c&&c[0]){let _=c[0].geometry.location;n({lat:_.lat(),lng:_.lng()})}else n(null)})})})}geocodeAddresses(e){let t=e.map(n=>this.geocodeAddress(n));return Nn(Promise.all(t))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var qr=class i{constructor(){}getCurrentPosition(){return navigator.geolocation?Nn(new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(n=>e(n),n=>t(n),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})):Mc(()=>new Error("Geolocation is not supported by this browser."))}calculateDistance(e,t,n,o){let p=this.deg2rad(n-e),_=this.deg2rad(o-t),O=Math.sin(p/2)*Math.sin(p/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(n))*Math.sin(_/2)*Math.sin(_/2);return 6371*(2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O)))}deg2rad(e){return e*(Math.PI/180)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var Qn=class i{constructor(e,t,n,o){this.http=e;this.authService=t;this.geocodingService=n;this.geolocationService=o}baseUrl="http://localhost:5241/api/Specialist";getSpecialists(e,t,n){let o=this.authService.getToken(),c=new ee({Authorization:`Bearer ${o}`}),p=new bt().set("search",e||"").set("page",t).set("pageSize",n);return this.http.get(`${this.baseUrl}/GetPage`,{headers:c,params:p})}getSpecialist(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}addSpecialist(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.post(`${this.baseUrl}/Add`,e,{headers:n})}updateSpecialist(e,t){let n=this.authService.getToken(),o=new ee({Authorization:`Bearer ${n}`});return this.http.patch(`${this.baseUrl}/Update/${e}`,t,{headers:o})}deleteSpecialist(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.delete(`${this.baseUrl}/Delete/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(Z(ke),Z(te),Z(Lr),Z(qr))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var Jn=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Request";addRequest(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return console.log("Headers:",n),this.http.post(`${this.baseUrl}/Add`,e,{headers:n})}acceptRequest(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Accept/${e}`,{},{headers:n})}rejectRequest(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Reject/${e}`,{},{headers:n})}cancelRequest(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Cancel/${e}`,{},{headers:n})}static \u0275fac=function(t){return new(t||i)(Z(ke),Z(te))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var Yd=()=>[5,10,20];function Xd(i,e){i&1&&B(0,"div",13)}function Zd(i,e){if(i&1){let t=F();Oe(0),a(1,"app-specialist-card",11),E("specialistId",function(o){let c=P(t).$implicit;return T(c.id=o)})("requestFormSubmit",function(o){P(t);let c=y();return T(c.addRequest(o))}),s(),A(2,Xd,1,0,"div",12),Re()}if(i&2){let t=e.$implicit,n=e.index,o=y();h(),f("specialist",t),h(),f("ngIf",n<o.users.length-1)}}var jr=class i{constructor(e,t,n){this.homeService=e;this.userRequestService=t;this.authService=n}searchTerm="";currentPage=1;pageSize=10;totalItems=0;entityDetails={};isUserDetailsVisible=!1;users=[];error=null;isRequestFormVisible=!1;requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""};dummySpecialists=[{id:"spec-001",fullName:"Andrei Popescu",email:"andrei.popescu@example.com",phoneNumber:"0721123456",address:"Strada Mihai Eminescu 45, Bucure\u0219ti",yearsExperience:5,description:"Traduc\u0103tor medical cu experien\u021B\u0103 \xEEn terminologie clinic\u0103 \u0219i farmaceutic\u0103.",createdAt:new Date("2022-03-10T10:00:00Z"),updatedAt:new Date,rating:5,categories:[{id:"cat-001",name:"Traduceri medicale"},{id:"cat-002",name:"Farmacie"}]},{id:"spec-002",fullName:"Ioana Marinescu",email:"ioana.marinescu@example.com",phoneNumber:"0733456789",address:"Bd. Revolu\u021Biei 17, Cluj-Napoca",yearsExperience:8,description:"Specialist \xEEn psihologie cu experien\u021B\u0103 \xEEn redactarea \u0219i corectarea articolelor \u0219tiin\u021Bifice.",createdAt:new Date("2020-11-20T08:30:00Z"),updatedAt:new Date,rating:4},{id:"spec-003",fullName:"Victor Ionescu",email:"victor.ionescu@example.com",phoneNumber:"0744123123",address:"Str. Libert\u0103\u021Bii 88, Ia\u0219i",yearsExperience:3,description:"T\xE2n\u0103r specialist \xEEn tehnologia informa\u021Biei, ofer servicii de consultan\u021B\u0103 \u0219i mentenan\u021B\u0103 software.",createdAt:new Date("2023-01-15T14:45:00Z"),updatedAt:new Date,rating:4.5}];ngOnInit(){this.getPage()}getPage(){this.homeService.getSpecialists(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{this.users=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addRequest(e){let t=e;console.log("Request to submit:",t),this.userRequestService.addRequest(t).subscribe({next:n=>{alert("Cererea a fost trimis\u0103 cu succes!"),this.closeRequestForm()},error:n=>{console.error("Eroare la trimiterea cererii:",n),alert("Nu s-a putut trimite cererea.")}})}onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}onPageChange(e){this.currentPage=e,this.getPage()}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}getCategoryNames(e){return e.map(t=>t.name)}closeUserDetails(){this.isUserDetailsVisible=!1,this.entityDetails={}}closeRequestForm(){this.requestForm={receiverUserId:"",requestedStartDate:new Date,phoneNumber:"",address:"",description:""},this.isRequestFormVisible=!1}SpecialistCardComponent=$i;static \u0275fac=function(t){return new(t||i)(R(Qn),R(Jn),R(te))};static \u0275cmp=U({type:i,selectors:[["app-home"]],decls:24,vars:6,consts:[[1,"top-action-button"],["routerLink","/contact-us","routerLinkActive","active",1,"contact-button"],[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"search-box-wrapper"],[3,"searchChanged"],[1,"user-list"],[4,"ngFor","ngForOf"],[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[3,"specialistId","requestFormSubmit","specialist"],["class","separator",4,"ngIf"],[1,"separator"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"a",1),u(2,"Contacteaz\u0103-ne!"),s()(),a(3,"div",2)(4,"div",3)(5,"h1",4),u(6,"Ai o \u021Beav\u0103 spart\u0103?"),s(),a(7,"h1",4),u(8,"\u021Ai s-a stricat chiuveta?"),s(),a(9,"h1"),u(10,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),a(11,"strong",5),u(12,"ExpertEase"),s(),u(13,"!"),s()(),a(14,"div",6)(15,"app-search-input",7),E("searchChanged",function(c){return n.onSearch(c)}),s()(),a(16,"p"),u(17,"Peste "),a(18,"strong"),u(19,"100 de speciali\u0219ti"),s(),u(20," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),s()(),a(21,"div",8),A(22,Zd,3,2,"ng-container",9),s(),a(23,"app-pagination",10),E("pageChange",function(c){return n.onPageChange(c)})("pageSizeChange",function(c){return n.onPageSizeChange(c)}),s()),t&2&&(h(22),f("ngForOf",n.users),h(),f("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",ot(5,Yd))("totalItems",n.totalItems))},dependencies:[$i,he,ye,Q,rn,re,ht,Tt,Et,Gc],styles:[".top-action-button[_ngcontent-%COMP%]{position:absolute;top:100px;right:32px;z-index:10}.contact-button[_ngcontent-%COMP%]{text-decoration:none;font-family:Roboto Mono,monospace;font-weight:700;border:1px solid transparent;transition:all .2s ease;color:#000}.contact-button[_ngcontent-%COMP%]:hover{text-decoration:underline}.user-list[_ngcontent-%COMP%]   app-specialist-card[_ngcontent-%COMP%]{border-bottom:1px solid #b7a4dd;padding-bottom:1rem;margin-bottom:1rem}.user-list[_ngcontent-%COMP%]   app-specialist-card[_ngcontent-%COMP%]:last-child{border-bottom:none}.separator[_ngcontent-%COMP%]{height:3px;background-color:#b7a4dd;width:100%}.home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:2rem}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.close-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1.2rem;font-size:1.5rem;background:none;border:none;color:#333;font-weight:700;cursor:pointer;transition:transform .2s}.close-button[_ngcontent-%COMP%]:hover{transform:scale(1.2);color:#d11a2a}",".search-box[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;align-items:center;gap:20px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px 50px 15px 20px;border:none;background:transparent;outline:none;font-family:Roboto Mono,monospace;font-size:12px}.search-icon-button[_ngcontent-%COMP%]{background:none;border:none;padding:0 16px;font-size:1.2rem;color:#444;cursor:pointer;display:flex;align-items:center;justify-content:center}.search-icon-button[_ngcontent-%COMP%]:hover{color:#000}.search-icon-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}"]})};var zr=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-about"]],decls:142,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"about-info"],[1,"role-sections"],[1,"client-section"],[1,"specialist-section"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),u(3,"Ai o \u021Beav\u0103 spart\u0103?"),s(),a(4,"h1",2),u(5,"\u021Ai s-a stricat chiuveta?"),s(),a(6,"h1"),u(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),a(8,"strong",3),u(9,"ExpertEase"),s(),u(10,"!"),s()(),a(11,"p"),u(12,"Peste "),a(13,"strong"),u(14,"100 de speciali\u0219ti"),s(),u(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),s()(),a(16,"div",4)(17,"section")(18,"h2"),u(19,"Cine suntem noi?"),s(),a(20,"p"),u(21,"Compania "),a(22,"strong"),u(23,"ExpertEase"),s(),u(24," se ocup\u0103 cu problemele tale \xEEn materie de repara\u021Bii sau instala\u021Bii."),s()(),a(25,"section")(26,"h2"),u(27,"Cum facem asta?"),s(),a(28,"p"),u(29,"\xCE\u021Bi punem la dispozi\u021Bie "),a(30,"strong"),u(31,"peste 100 de speciali\u0219ti"),s(),u(32," din domeniu, cu varii nivele de experien\u021B\u0103, care sunt preocupa\u021Bi \xEEn a \xEE\u021Bi rezolva problema."),s()(),a(33,"section")(34,"h2"),u(35,"Cum func\u021Bioneaz\u0103 platforma?"),s(),a(36,"p"),u(37,"Platforma noastr\u0103 este simplu de utilizat. Po\u021Bi c\u0103uta speciali\u0219ti dup\u0103 domeniu, po\u021Bi vedea recenziile altor clien\u021Bi \u0219i po\u021Bi contacta direct specialistul pentru a discuta detaliile repara\u021Biei sau instala\u021Biei."),s()(),a(38,"section")(39,"h2"),u(40,"De ce s\u0103 ne alegi?"),s(),a(41,"p"),u(42,"ExpertEase \xEE\u021Bi ofer\u0103 acces rapid \u0219i u\u0219or la o re\u021Bea extins\u0103 de speciali\u0219ti, asigur\xE2ndu-te c\u0103 vei g\u0103si pe cineva potrivit pentru nevoile tale. \xCEn plus, platforma noastr\u0103 este gratuit\u0103 pentru utilizatori!"),s()(),a(43,"div",5)(44,"section",6)(45,"h2"),u(46,"Ce poate face un client?"),s(),a(47,"p"),u(48,"Pe platforma ExpertEase, clien\u021Bii pot:"),s(),a(49,"ol")(50,"li")(51,"strong"),u(52,"Crea un cont"),s(),B(53,"br"),u(54," \xCE\u021Bi faci un cont rapid \u0219i ai acces la panoul t\u0103u personal."),s(),a(55,"li")(56,"strong"),u(57,"C\u0103uta speciali\u0219ti"),s(),B(58,"br"),u(59," Po\u021Bi filtra speciali\u0219tii dup\u0103: "),a(60,"ul")(61,"li"),u(62,"Categorie (ex. Psihologie, Drept, IT)"),s(),a(63,"li"),u(64,"Ani de experien\u021B\u0103"),s(),a(65,"li"),u(66,"Adres\u0103 (cu op\u021Biune de c\u0103utare pe hart\u0103)"),s()()(),a(67,"li")(68,"strong"),u(69,"Trimite o cerere"),s(),B(70,"br"),u(71," Dup\u0103 ce g\u0103se\u0219ti un specialist potrivit, po\u021Bi trimite o cerere \xEEn care descrii problema sau serviciul dorit \u0219i o dat\u0103 preferat\u0103."),s(),a(72,"li")(73,"strong"),u(74,"Comunic\u0103 prin mesaje"),s(),B(75,"br"),u(76," Vei putea: "),a(77,"ul")(78,"li"),u(79,"Primi r\u0103spunsuri de la specialist"),s(),a(80,"li"),u(81,"Vizualiza propunerea de serviciu \u0219i pre\u021Bul"),s(),a(82,"li"),u(83,"Accepta sau refuza oferta"),s()()(),a(84,"li")(85,"strong"),u(86,"Las\u0103 o recenzie"),s(),B(87,"br"),u(88," Dup\u0103 \xEEncheierea colabor\u0103rii, po\u021Bi scrie o recenzie care ajut\u0103 al\u021Bi utilizatori \u0219i sus\u021Bine calitatea pe platform\u0103."),s(),a(89,"li")(90,"strong"),u(91,"Pl\u0103te\u0219te \xEEn siguran\u021B\u0103"),s(),B(92,"br"),u(93," Pl\u0103\u021Bile se realizeaz\u0103 prin Stripe, \xEEntr-un mod securizat \u0219i transparent. Vei \u0219ti exact c\xE2t pl\u0103te\u0219ti \xEEnainte de confirmare."),s()()(),a(94,"section",7)(95,"h2"),u(96,"Ce poate face un specialist?"),s(),a(97,"p"),u(98,"Speciali\u0219tii au acces la instrumente prin care \xEE\u0219i pot gestiona cererile \u0219i construi o reputa\u021Bie solid\u0103:"),s(),a(99,"ol")(100,"li")(101,"strong"),u(102,"\xCEnregistrare \u0219i verificare profil"),s(),B(103,"br"),u(104," \xCE\u021Bi creezi un cont profesional, alegi domeniul de expertiz\u0103 \u0219i adaugi informa\u021Bii relevante."),s(),a(105,"li")(106,"strong"),u(107,"Prime\u0219ti cereri de la clien\u021Bi"),s(),B(108,"br"),u(109," Vei fi notificat atunci c\xE2nd un client te contacteaz\u0103. Po\u021Bi: "),a(110,"ul")(111,"li"),u(112,"Analiza cererea"),s(),a(113,"li"),u(114,"Accepta, refuza sau propune o ofert\u0103 alternativ\u0103"),s()()(),a(115,"li")(116,"strong"),u(117,"Trimite un r\u0103spuns detaliat"),s(),B(118,"br"),u(119," Po\u021Bi r\u0103spunde cu: "),a(120,"ul")(121,"li"),u(122,"Detalii despre serviciu"),s(),a(123,"li"),u(124,"Dat\u0103 propus\u0103"),s(),a(125,"li"),u(126,"Pre\u021B"),s()()(),a(127,"li")(128,"strong"),u(129,"Gestioneaz\u0103 conversa\u021Biile"),s(),B(130,"br"),u(131," Ai acces la un sistem de mesagerie clar \u0219i sigur, unde po\u021Bi urm\u0103ri fiecare cerere \xEEn parte."),s(),a(132,"li")(133,"strong"),u(134,"Prime\u0219te pl\u0103\u021Bi direct"),s(),B(135,"br"),u(136," Prin conectarea contului t\u0103u Stripe Express, po\u021Bi primi banii direct \xEEn contul bancar."),s(),a(137,"li")(138,"strong"),u(139,"Prime\u0219te recenzii"),s(),B(140,"br"),u(141," Dup\u0103 fiecare colaborare, clien\u021Bii pot l\u0103sa o recenzie care te va ajuta s\u0103 c\xE2\u0219tigi \xEEncrederea altor utilizatori."),s()()()()())},styles:['@charset "UTF-8";.home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.about-info[_ngcontent-%COMP%]{max-width:1600px;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6}.about-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d}.about-info[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff}.role-sections[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:32px;margin-top:32px}.role-sections[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{flex:1 1 45%;border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff;font-family:Roboto Mono,monospace;font-size:16px;line-height:25.6px}.role-sections[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#3c1a7d;font-weight:700;margin-bottom:16px}.role-sections[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:16px}.role-sections[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .role-sections[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-bottom:24px}.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:12px;line-height:25.6px}.role-sections[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:8px;padding-left:20px}@media (max-width: 900px){.role-sections[_ngcontent-%COMP%]{flex-direction:column}.role-sections[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{flex:1 1 100%}}']})};var Ws={firstName:"Prenume",lastName:"Nume",fullName:"Nume complet",email:"Adres\u0103 e-mail",password:"Parol\u0103",role:"Rol",phoneNumber:"Num\u0103r de telefon",address:"Adres\u0103",yearsExperience:"Ani experien\u021B\u0103",description:"Descriere",id:"ID",account:"Cont",transaction:"Tranzac\u021Bie",createdAt:"Creat la",updatedAt:"Actualizat la",categories:"Categorii",name:"Denumire",specialistsCount:"Num\u0103r speciali\u0219ti",specialistIds:"Speciali\u0219tii cu aceast\u0103 categorie"};function Qe(i,e={},t=Ws){return Object.keys(i).map(n=>{let o=e[n]||{},c=o.type||(o.options?"select":"text"),p=t[n]||ep(n);return L({key:n,label:p,type:c,placeholder:o.placeholder||`Introdu ${p.toLowerCase()}`,required:o.required??!0,class:o.class||"half-width"},o)})}function ep(i){return i.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}function Yn(i){if(!i)return{};let e={},t=Object.keys(i);if("id"in i){let n=Ws.id||"id";e[n]=i.id}for(let n of t){if(["id","firstName","lastName"].includes(n))continue;let o=i[n];if(o==null||typeof o=="string"&&o.trim()==="")continue;let c=Ws[n]||n,p=o;typeof o=="string"&&tp(o)||o instanceof Date?p=Ol(o):n.toLowerCase().includes("password")&&(p="********"),e[c]=p}return e}function tp(i){return/^\d{4}-\d{2}-\d{2}T/.test(i)}function Ol(i){let e=new Date(i),t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear();return`${t}.${n}.${o}`}var np=i=>({"placeholder-selected":i});function ip(i,e){if(i&1&&(a(0,"div",15),u(1),$(2,"lowercase"),s()),i&2){let t=y(2).$implicit;h(),G(" C\xE2mpul ",le(2,1,t.label)," este obligatoriu. ")}}function rp(i,e){if(i&1){let t=F();a(0,"div")(1,"div",12)(2,"input",13,1),z("ngModelChange",function(o){P(t);let c=y().$implicit,p=y();return j(p.formData[c.key],o)||(p.formData[c.key]=o),T(o)}),E("input",function(){P(t);let o=y().$implicit,c=y();return T(o.key==="phoneNumber"&&c.liveFormatPhoneNumber(o.key))}),s()(),A(4,ip,3,3,"div",14),s()}if(i&2){let t=J(3),n=y().$implicit,o=y();h(2),f("id",n.key)("name",n.key),q("ngModel",o.formData[n.key]),f("placeholder",n.placeholder)("required",!!n.required),h(2),f("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function op(i,e){if(i&1&&(a(0,"div",15),u(1),$(2,"lowercase"),s()),i&2){let t=y(2).$implicit;h(),G(" C\xE2mpul ",le(2,1,t.label)," este obligatoriu. ")}}function sp(i,e){if(i&1){let t=F();a(0,"div")(1,"div",12)(2,"input",16,1),z("ngModelChange",function(o){P(t);let c=y().$implicit,p=y();return j(p.formData[c.key],o)||(p.formData[c.key]=o),T(o)}),s()(),A(4,op,3,3,"div",14),s()}if(i&2){let t=J(3),n=y().$implicit,o=y();h(2),f("id",n.key)("name",n.key),q("ngModel",o.formData[n.key]),f("placeholder",n.placeholder)("required",!!n.required),h(2),f("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function ap(i,e){if(i&1&&(a(0,"div",15),u(1),$(2,"lowercase"),s()),i&2){let t=y(2).$implicit;h(),G(" C\xE2mpul ",le(2,1,t.label)," este obligatoriu. ")}}function cp(i,e){if(i&1){let t=F();a(0,"div")(1,"div",12)(2,"input",17,1),z("ngModelChange",function(o){P(t);let c=y().$implicit,p=y();return j(p.formData[c.key],o)||(p.formData[c.key]=o),T(o)}),s()(),A(4,ap,3,3,"div",14),s()}if(i&2){let t=J(3),n=y().$implicit,o=y();h(2),f("id",n.key)("name",n.key),q("ngModel",o.formData[n.key]),f("placeholder",n.placeholder)("required",!!n.required),h(2),f("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function lp(i,e){if(i&1&&(a(0,"div",15),u(1),$(2,"lowercase"),s()),i&2){let t=y(2).$implicit;h(),G(" C\xE2mpul ",le(2,1,t.label)," este obligatoriu. ")}}function up(i,e){if(i&1){let t=F();a(0,"div")(1,"div",12)(2,"input",18,1),z("ngModelChange",function(o){P(t);let c=y().$implicit,p=y();return j(p.formData[c.key],o)||(p.formData[c.key]=o),T(o)}),s()(),A(4,lp,3,3,"div",14),s()}if(i&2){let t=J(3),n=y().$implicit,o=y();h(2),f("id",n.key)("name",n.key),q("ngModel",o.formData[n.key]),f("placeholder",n.placeholder)("required",!!n.required),h(2),f("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function dp(i,e){if(i&1&&(a(0,"option",23),u(1),s()),i&2){let t=e.$implicit;f("value",t),h(),Y(t)}}function pp(i,e){if(i&1&&(a(0,"div",15),u(1),$(2,"lowercase"),s()),i&2){let t=y(2).$implicit;h(),G(" C\xE2mpul ",le(2,1,t.label)," este obligatoriu. ")}}function hp(i,e){if(i&1){let t=F();a(0,"div")(1,"div",19)(2,"select",20,1),z("ngModelChange",function(o){P(t);let c=y().$implicit,p=y();return j(p.formData[c.key],o)||(p.formData[c.key]=o),T(o)}),a(4,"option",21),u(5),s(),A(6,dp,2,2,"option",22),s()(),A(7,pp,3,3,"div",14),s()}if(i&2){let t=J(3),n=y().$implicit,o=y();h(2),f("id",n.key)("name",n.key),q("ngModel",o.formData[n.key]),f("required",!!n.required)("ngClass",Xt(8,np,o.formData[n.key]==="")),h(3),Y(n.placeholder||"Selecteaz\u0103 o op\u021Biune"),h(),f("ngForOf",n.options),h(),f("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function mp(i,e){if(i&1&&(a(0,"div",15),u(1),$(2,"lowercase"),s()),i&2){let t=y(2).$implicit;h(),G(" C\xE2mpul ",le(2,1,t.label)," este obligatoriu. ")}}function fp(i,e){if(i&1){let t=F();a(0,"div")(1,"div",12)(2,"textarea",24,1),z("ngModelChange",function(o){P(t);let c=y().$implicit,p=y();return j(p.formData[c.key],o)||(p.formData[c.key]=o),T(o)}),u(4,"          "),s()(),A(5,mp,3,3,"div",14),s()}if(i&2){let t=J(3),n=y().$implicit,o=y();h(2),f("id",n.key)("name",n.key),q("ngModel",o.formData[n.key]),f("placeholder",n.placeholder)("required",!!n.required),h(3),f("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function gp(i,e){if(i&1&&(a(0,"div",15),u(1),$(2,"lowercase"),s()),i&2){let t=y(2).$implicit;h(),G(" C\xE2mpul ",le(2,1,t.label)," este obligatoriu. ")}}function _p(i,e){if(i&1){let t=F();a(0,"div")(1,"div",12)(2,"input",25,1),z("ngModelChange",function(o){P(t);let c=y().$implicit,p=y();return j(p.formData[c.key],o)||(p.formData[c.key]=o),T(o)}),s()(),A(4,gp,3,3,"div",14),s()}if(i&2){let t=J(3),n=y().$implicit,o=y();h(2),f("type",n.type)("id",n.key)("name",n.key),q("ngModel",o.formData[n.key]),f("placeholder",n.placeholder)("required",!!n.required),h(2),f("ngIf",n.required&&t.invalid&&(t.dirty||t.touched||o.formSubmitted))}}function yp(i,e){if(i&1&&(a(0,"div",6)(1,"label",7),u(2),s(),a(3,"div",8),Oe(4,9),A(5,rp,5,6,"div",10)(6,sp,5,6,"div",10)(7,cp,5,6,"div",10)(8,up,5,6,"div",10)(9,hp,8,10,"div",10)(10,fp,6,6,"div",10)(11,_p,5,7,"div",11),Re(),s()()),i&2){let t=e.$implicit;f("ngClass",t.class),h(),f("for",t.key),h(),Y(t.label),h(2),f("ngSwitch",t.type),h(),f("ngSwitchCase","text"),h(),f("ngSwitchCase","email"),h(),f("ngSwitchCase","password"),h(),f("ngSwitchCase","number"),h(),f("ngSwitchCase","select"),h(),f("ngSwitchCase","textarea")}}var nt=class i{fields=[];initialData={};submitText="Submit";formSubmit=new K;formData={};formSubmitted=!1;ngOnChanges(e){e.initialData&&e.initialData.currentValue&&(this.formData=L({},e.initialData.currentValue),this.fields.forEach(t=>{t.key in this.formData||(this.formData[t.key]="")}))}onSubmit(e){this.formSubmitted=!0,console.log(this.formSubmitted),!e.invalid&&this.formSubmit.emit(this.formData)}liveFormatPhoneNumber(e){let t=this.formData[e]||"",n=t.startsWith("+"),o=t.replace(/\D/g,""),c=o;o.length===11&&o.startsWith("40")?c=o.replace(/(\d{2})(\d{3})(\d{3})(\d{3})/,"$1 $2 $3 $4"):o.length===10&&o.startsWith("0")?c=o.replace(/(\d{3})(\d{3})(\d{4})/,"$1 $2 $3"):o.length===9&&(c=o.replace(/(\d{3})(\d{3})(\d{3})/,"$1 $2 $3")),this.formData[e]=n?`+${c}`:c}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-dynamic-form"]],inputs:{fields:"fields",initialData:"initialData",submitText:"submitText"},outputs:{formSubmit:"formSubmit"},features:[_t],decls:6,vars:2,consts:[["formRef","ngForm"],["ctrl","ngModel"],[1,"form-layout",3,"ngSubmit"],["class","form-group",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-group","full-width"],["type","submit",1,"send-button"],[1,"form-group",3,"ngClass"],[3,"for"],[1,"field-wrapper"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"input-box"],["type","text",3,"ngModelChange","input","id","name","ngModel","placeholder","required"],["class","error",4,"ngIf"],[1,"error"],["type","email",3,"ngModelChange","id","name","ngModel","placeholder","required"],["type","password",3,"ngModelChange","id","name","ngModel","placeholder","required"],["type","number",3,"ngModelChange","id","name","ngModel","placeholder","required"],[1,"select-box"],[3,"ngModelChange","id","name","ngModel","required","ngClass"],["value","","disabled","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["rows","4",3,"ngModelChange","id","name","ngModel","placeholder","required"],[3,"ngModelChange","type","id","name","ngModel","placeholder","required"]],template:function(t,n){if(t&1){let o=F();a(0,"form",2,0),E("ngSubmit",function(){P(o);let p=J(1);return T(n.onSubmit(p))}),A(2,yp,12,10,"div",3),a(3,"div",4)(4,"button",5),u(5),s()()()}t&2&&(h(2),f("ngForOf",n.fields),h(3),G(" ",n.submitText," "))},dependencies:[he,ze,ye,Q,Bn,Ln,Fc,Bc,re,tt,Wn,Hn,Ee,zt,nn,Ie,et,at,Me,st],styles:[".grid-form[_ngcontent-%COMP%]{gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto;font-family:Roboto Mono,monospace;border:2px solid #c9b7ff;border-radius:6px;box-shadow:0 4px 12px #0000001a}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:12px 16px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.form-group.half-width[_ngcontent-%COMP%]{flex:1 1 48%}label[_ngcontent-%COMP%]{margin-bottom:8px}.input-box[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:16px;outline:none}.input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-family:inherit;font-size:1rem;border:none;border-radius:6px;box-sizing:border-box;resize:vertical;background:#e6dfff}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;font-size:16px;outline:none;appearance:auto;font-family:inherit;width:100%}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#a388ff;box-shadow:0 0 3px #a388ff}.placeholder-selected[_ngcontent-%COMP%]{color:#7d7d7f!important}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.field-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px}"]})};var $r=class i{constructor(e,t){this.authService=e;this.router=t;let n={firstName:"",lastName:"",email:"",password:""};this.formFields=Qe(n,{email:{type:"email"},password:{type:"password"}}),console.log(this.formFields)}formFields=[];formData={};errorMessage=null;registerUser(e){let t=e;this.authService.registerUser(t).subscribe({next:()=>{let n={email:t.email,password:t.password};this.authService.loginUser(n).subscribe({next:()=>{this.router.navigate(["/home"])},error:o=>{console.error("Login failed:",o),this.errorMessage=o.error?.errorMessage?.message||"Eroare necunoscut\u0103."}})},error:n=>{console.error("Registration failed:",n),this.errorMessage=n.error?.errorMessage?.message||"Eroare necunoscut\u0103."}})}goToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||i)(R(te),R(xe))};static \u0275cmp=U({type:i,selectors:[["app-register"]],decls:10,vars:2,consts:[[1,"register-form"],[1,"form-wrapper"],[1,"form-box"],[3,"formSubmit","fields","submitText"],[1,"auth-switch"],[1,"auth-button",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"h2"),u(2,"\xCEnregistrare"),s(),a(3,"div",1)(4,"div",2)(5,"app-dynamic-form",3),E("formSubmit",function(c){return n.registerUser(c)}),s()()(),a(6,"p",4),u(7," Deja ai un cont? "),a(8,"button",5),E("click",function(){return n.goToLogin()}),u(9,"Autentific\u0103-te"),s()()()),t&2&&(h(5),f("fields",n.formFields)("submitText","Trimite"))},dependencies:[he,re,nt],styles:["p[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:16px}h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.auth-button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700}.auth-button[_ngcontent-%COMP%]:hover{color:#6a5799}"]})};var Gr=class i{constructor(e,t){this.authService=e;this.router=t;let n={email:"",password:""};this.formFields=Qe(n,{email:{type:"email"},password:{type:"password"}})}formFields=[];formData={};errorMessage=null;loginUser(e){let t=e;this.authService.loginUser(t).subscribe({next:n=>{console.log("Login successful:",n),this.router.navigate(["/home"])},error:n=>{console.error("Login failed:",n),this.errorMessage=n.error?.errorMessage?.message||"Eroare necunoscut\u0103."}})}goToRegister(){this.router.navigate(["/register"])}static \u0275fac=function(t){return new(t||i)(R(te),R(xe))};static \u0275cmp=U({type:i,selectors:[["app-login"]],decls:10,vars:2,consts:[[1,"register-form"],[1,"form-wrapper"],[1,"form-box"],[3,"formSubmit","fields","submitText"],[1,"auth-switch"],[1,"auth-button",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"h2"),u(2,"Autentificare"),s(),a(3,"div",1)(4,"div",2)(5,"app-dynamic-form",3),E("formSubmit",function(c){return n.loginUser(c)}),s()()(),a(6,"p",4),u(7," Nu ai cont? "),a(8,"button",5),E("click",function(){return n.goToRegister()}),u(9,"\xCEnregistreaz\u0103-te"),s()()()),t&2&&(h(5),f("fields",n.formFields)("submitText","Trimite"))},dependencies:[he,re,nt],styles:["p[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:16px}h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.auth-button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700}.auth-button[_ngcontent-%COMP%]:hover{color:#6a5799}"]})};var Wr=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-admin"]],decls:15,vars:0,consts:[[1,"grid-form"],[1,"button-group"],["routerLink","/admin/users","routerLinkActive","active",1,"admin-button"],["routerLink","/admin/specialists","routerLinkActive","active",1,"admin-button"],["routerLink","/admin/categories","routerLinkActive","active",1,"admin-button"],[1,"admin-button"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),u(3,"Utilizatori"),s(),a(4,"button",3),u(5,"Speciali\u0219ti"),s(),a(6,"button",4),u(7,"Categorii"),s(),a(8,"button",5),u(9,"Servicii"),s(),a(10,"button",5),u(11,"Tranzac\u021Bii"),s(),a(12,"button",5),u(13,"Recenzii"),s()()(),B(14,"router-outlet"))},dependencies:[Sr,Et],styles:[".grid-form[_ngcontent-%COMP%]{position:absolute;top:calc(50vh - 250px);left:calc(50vw - 400px);width:800px;height:500px;display:flex;flex-direction:column;padding:40px 60px;border:3px solid black;border-radius:4px;box-shadow:0 4px 12px #0000001a;background-color:#cfbdfe;box-sizing:border-box}.button-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:32px;width:100%;justify-items:center;margin-top:24px}.admin-button[_ngcontent-%COMP%]{width:100%;height:5vw;background-color:#e6dfff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;border:3px solid #4b358e;border-radius:5px;cursor:pointer;box-shadow:0 2px 6px #0000001a;transition:background-color .3s ease,text-decoration .2s ease;display:flex;align-items:center;justify-content:center;text-align:center}.admin-button[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var xn=(n=>(n.Admin="Admin",n.Specialist="Specialist",n.Client="Client",n))(xn||{});function vp(i,e){if(i&1&&(a(0,"th"),u(1),s()),i&2){let t=e.$implicit;h(),Y(t.header)}}function bp(i,e){if(i&1&&(Oe(0),u(1),Re()),i&2){let t=y(2).$implicit,n=y().$implicit;h(),G(" ",t.compute(n)," ")}}function Cp(i,e){if(i&1&&u(0),i&2){let t=y(2).$implicit,n=y().$implicit;G(" ",n[t.key]," ")}}function xp(i,e){if(i&1&&(Oe(0),A(1,bp,2,1,"ng-container",4)(2,Cp,1,1,"ng-template",null,1,ki),Re()),i&2){let t=J(3),n=y().$implicit;h(),f("ngIf",n.compute)("ngIfElse",t)}}function wp(i,e){if(i&1){let t=F();a(0,"a",6),E("click",function(){let o=P(t).$implicit,c=y(3).$implicit;return T(o.callback(c))}),u(1),s()}if(i&2){let t=e.$implicit;f("ngClass",t.class),h(),G(" ",t.label," ")}}function Sp(i,e){if(i&1&&A(0,wp,2,2,"a",5),i&2){let t=y().$implicit;f("ngForOf",t.actions)}}function Ep(i,e){if(i&1&&(a(0,"td"),A(1,xp,4,2,"ng-container",4)(2,Sp,1,1,"ng-template",null,0,ki),s()),i&2){let t=e.$implicit,n=J(3);h(),f("ngIf",t.type!=="action")("ngIfElse",n)}}function Ip(i,e){if(i&1&&(a(0,"tr"),A(1,Ep,4,2,"td",3),s()),i&2){let t=y();h(),f("ngForOf",t.columns)}}var sn=class i{columns=[];data=[];static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-dynamic-table"]],inputs:{columns:"columns",data:"data"},decls:6,vars:2,consts:[["actionCell",""],["directValue",""],[1,"admin-table"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["class","action-link",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"action-link",3,"click","ngClass"]],template:function(t,n){t&1&&(a(0,"table",2)(1,"thead")(2,"tr"),A(3,vp,2,1,"th",3),s()(),a(4,"tbody"),A(5,Ip,2,1,"tr",3),s()()),t&2&&(h(3),f("ngForOf",n.columns),h(2),f("ngForOf",n.data))},dependencies:[he,ze,ye,Q,re],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}"]})};function Pp(i,e){if(i&1&&(Oe(0),a(1,"p")(2,"strong"),u(3),s(),u(4),s(),Re()),i&2){let t=y().$implicit,n=y();h(3),G("",n.formatKey(t),":"),h(),G(" ",n.formatValue(n.entity[t])," ")}}function Tp(i,e){if(i&1&&(Oe(0),A(1,Pp,5,2,"ng-container",5),Re()),i&2){let t=e.$implicit;h(),f("ngIf",t!=="ID")}}var an=class i{entity={};title="";close=new K;onClose(){this.close.emit()}objectKeys=Object.keys;formatKey(e){return e.includes(" ")||e.includes("-")?e:e.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase())}formatValue(e){return typeof e=="boolean"?e?"Da":"Nu":e instanceof Date?e.toLocaleDateString():typeof e=="string"&&e.toLowerCase().includes("password")?"********":e}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-admin-details"]],inputs:{entity:"entity",title:"title"},outputs:{close:"close"},decls:10,vars:3,consts:[[1,"admin-wrapper"],[1,"page-title"],[1,"card"],[1,"divider"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"h2",1),u(2),s(),a(3,"div",2)(4,"p")(5,"strong"),u(6,"ID:"),s(),u(7),s(),B(8,"hr",3),A(9,Tp,2,1,"ng-container",4),s()()),t&2&&(h(2),Y(n.title),h(5),G(" ",n.entity.ID,""),h(2),f("ngForOf",n.objectKeys(n.entity)))},dependencies:[he,ye,Q],styles:[".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var Mp=()=>[5,10,20];function Dp(i,e){if(i&1){let t=F();a(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),E("click",function(){P(t);let o=y();return T(o.closeAddUserForm())}),u(4,"\xD7"),s()(),a(5,"app-dynamic-form",13),E("formSubmit",function(o){P(t);let c=y();return T(c.addEntity(o))}),s()()()}if(i&2){let t=y();h(5),f("fields",t.addEntityFormFields)("submitText","Trimite")}}function Ap(i,e){if(i&1){let t=F();a(0,"div",9)(1,"div",10)(2,"button",12),E("click",function(){P(t);let o=y();return T(o.closeUpdateUserForm())}),u(3,"\xD7"),s(),a(4,"app-dynamic-form",14),E("formSubmit",function(o){P(t);let c=y();return T(c.updateEntity(o))}),s()()()}if(i&2){let t=y();h(4),f("fields",t.updateEntityFormFields)("initialData",t.formData)("submitText","Actualizeaz\u0103")}}function Op(i,e){if(i&1){let t=F();a(0,"app-admin-details",18),E("close",function(){P(t);let o=y(2);return T(o.closeUserDetails())}),s()}if(i&2){let t=y(2);f("entity",t.entityDetails)("title","Detalii utilizator")}}function Rp(i,e){if(i&1){let t=F();a(0,"div",15)(1,"div",16)(2,"button",12),E("click",function(){P(t);let o=y();return T(o.closeUserDetails())}),u(3,"\xD7"),s(),A(4,Op,1,2,"app-admin-details",17),s()()}if(i&2){let t=y();h(4),f("ngIf",t.isUserDetailsVisible)}}var Hr=class i{constructor(e){this.adminService=e}dummy_users=[{id:"m3n4o5p6",fullName:"Ana Georgescu",email:"ana.georgescu@example.com",role:"Admin",createdAt:new Date("2024-09-01T11:30:00Z"),updatedAt:new Date("2025-01-12T13:00:00Z"),rating:4.5},{id:"q7r8s9t0",fullName:"Radu Enache",email:"radu.enache@example.com",role:"Client",createdAt:new Date("2024-08-20T15:45:00Z"),updatedAt:new Date("2025-01-08T11:15:00Z"),rating:4}];searchTerm="";users=[];selectedUser=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddUserFormVisible=!1;isUpdateUserFormVisible=!1;isUserDetailsVisible=!1;selectedUserId=null;placeholder="Caut\u0103 un utilizator...";columns=[{key:"id",header:"ID"},{key:"fullName",header:"Nume"},{key:"email",header:"Email"},{key:"role",header:"Rol"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:e=>this.getEntity(e.id)},{label:"Modific\u0103",class:"edit",callback:e=>this.editUser(e)},{label:"\u0218terge",class:"delete",callback:e=>this.deleteEntity(e)}]}];defaultUser={fullName:"",email:"",password:"",role:"Client"};formData={};error=null;addEntityFormFields=Qe(this.defaultUser,{email:{type:"email"},password:{type:"password"},role:{type:"select",options:Object.values(xn)}});updateEntityFormFields=Qe({fullName:this.selectedUser?.fullName||"",role:this.selectedUser?.role||""},{role:{type:"select",options:Object.values(xn)}});ngOnInit(){let e={fullName:"",email:"",password:"",role:"Client"};this.formData=L({},e),this.getPage()}onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}getEntity(e){console.log(e),this.adminService.getUser(e).subscribe({next:t=>{this.entityDetailsId=t.response?.id,this.entityDetails=Yn(t.response??{}),this.isUserDetailsVisible=!0},error:t=>{console.error("Eroare la preluarea utilizatorului:",t),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getUsers(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{console.log(e.response),this.users=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(e){let t=e;this.adminService.addUser(t).subscribe({next:()=>{this.closeAddUserForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editUser(e){this.selectedUserId=e.id,this.formData={fullName:e.fullName,role:e.role},this.isUpdateUserFormVisible=!0}updateEntity(e){if(!this.selectedUserId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let t=e.fullName??[e.firstName,e.lastName].filter(Boolean).join(" ").trim(),n={id:this.selectedUserId,fullName:t,role:e.role};this.adminService.updateUser(this.selectedUserId,n).subscribe({next:()=>{this.closeUpdateUserForm(),this.getPage()},error:o=>{console.error("Eroare la actualizare:",o)}})}showUserDetails(e){this.isUserDetailsVisible=!0}closeUserDetails(){this.isUserDetailsVisible=!1,this.selectedUser=null}closeUpdateUserForm(){this.selectedUserId=null,this.resetForm(),this.isUpdateUserFormVisible=!1}openAddUserForm(){this.selectedUserId=null,this.resetForm(),this.isAddUserFormVisible=!0}viewUser(e){this.isUserDetailsVisible=!0}deleteEntity(e){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi utilizatorul ${e.fullName}?`)&&this.adminService.deleteUser(e.id).subscribe({next:()=>{this.getPage()},error:t=>{console.error("Eroare la \u0219tergerea utilizatorului:",t)}})}closeAddUserForm(){this.isAddUserFormVisible=!1,this.resetForm()}resetForm(){this.formData={firstName:"",lastName:"",email:"",password:"",role:"Client"}}onPageChange(e){this.currentPage=e,this.getPage()}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}static \u0275fac=function(t){return new(t||i)(R(It))};static \u0275cmp=U({type:i,selectors:[["app-admin-users"]],decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[1,"admin-modal"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(t,n){t&1&&(a(0,"app-pagination",0),E("pageChange",function(c){return n.onPageChange(c)})("pageSizeChange",function(c){return n.onPageSizeChange(c)}),s(),a(1,"div",1)(2,"div",2)(3,"h2"),u(4,"Administreaz\u0103 to\u021Bi utilizatorii"),s(),a(5,"div",3)(6,"app-search-input",4),E("searchChanged",function(c){return n.onSearch(c)}),s()(),a(7,"button",5),E("click",function(){return n.openAddUserForm()}),u(8,"Adaug\u0103 utilizator"),s(),B(9,"app-dynamic-table",6),s()(),A(10,Dp,6,2,"div",7)(11,Ap,5,3,"div",7)(12,Rp,5,1,"div",8)),t&2&&(f("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",ot(10,Mp))("totalItems",n.totalItems),h(6),f("placeholder",n.placeholder),h(3),f("columns",n.columns)("data",n.users),h(),f("ngIf",n.isAddUserFormVisible),h(),f("ngIf",n.isUpdateUserFormVisible),h(),f("ngIf",n.isUserDetailsVisible))},dependencies:[he,Q,re,nt,sn,an,ht,Tt],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}",".grid-form[_ngcontent-%COMP%]{gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto;font-family:Roboto Mono,monospace;border:2px solid #c9b7ff;border-radius:6px;box-shadow:0 4px 12px #0000001a}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:12px 16px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.form-group.half-width[_ngcontent-%COMP%]{flex:1 1 48%}label[_ngcontent-%COMP%]{margin-bottom:8px}.input-box[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:16px;outline:none}.input-box[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px;font-family:inherit;font-size:1rem;border:none;border-radius:6px;box-sizing:border-box;resize:vertical;background:#e6dfff}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:5px;padding:8px;box-shadow:0 2px 6px #00000014;font-size:16px;outline:none;appearance:auto;font-family:inherit;width:100%}.select-box[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#a388ff;box-shadow:0 0 3px #a388ff}.placeholder-selected[_ngcontent-%COMP%]{color:#7d7d7f!important}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center}.field-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var kp=["class","users"],Vp=()=>[5,10,20];function Np(i,e){if(i&1){let t=F();a(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),E("click",function(){P(t);let o=y();return T(o.closeAddUserForm())}),u(4,"\xD7"),s()(),a(5,"app-dynamic-form",13),E("formSubmit",function(o){P(t);let c=y();return T(c.addEntity(o))}),s()()()}if(i&2){let t=y();h(5),f("fields",t.addEntityFormFields)("submitText","Adaug\u0103")}}function Fp(i,e){if(i&1){let t=F();a(0,"div",9)(1,"div",10)(2,"button",12),E("click",function(){P(t);let o=y();return T(o.closeUpdateUserForm())}),u(3,"\xD7"),s(),a(4,"app-dynamic-form",14),E("formSubmit",function(o){P(t);let c=y();return T(c.updateEntity(o))}),s()()()}if(i&2){let t=y();h(4),f("fields",t.updateEntityFormFields)("initialData",t.formData)("submitText","Actualizeaz\u0103")}}function Up(i,e){if(i&1){let t=F();a(0,"app-admin-details",17),E("close",function(){P(t);let o=y(2);return T(o.closeUserDetails())}),s()}if(i&2){let t=y(2);f("entity",t.entityDetails)("title","Detalii specialist")}}function Bp(i,e){if(i&1){let t=F();a(0,"div",15)(1,"div",10)(2,"button",12),E("click",function(){P(t);let o=y();return T(o.closeUserDetails())}),u(3,"\xD7"),s(),A(4,Up,1,2,"app-admin-details",16),s()()}if(i&2){let t=y();h(4),f("ngIf",t.isUserDetailsVisible)}}var Qr=class i{constructor(e){this.adminService=e;let t={fullName:"",email:"",password:"",phoneNumber:"",address:"",yearsExperience:0,description:""};this.formData=L({},t),this.getPage()}searchTerm="";users=[];selectedUser=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddUserFormVisible=!1;isUpdateUserFormVisible=!1;isUserDetailsVisible=!1;selectedUserId=null;placeholder="Caut\u0103 un specialist...";columns=[{key:"id",header:"ID"},{key:"fullName",header:"Nume"},{key:"email",header:"Email"},{key:"phoneNumber",header:"Num\u0103r de telefon"},{key:"address",header:"Adres\u0103"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:e=>this.getEntity(e.id)},{label:"Modific\u0103",class:"edit",callback:e=>this.editUser(e)},{label:"\u0218terge",class:"delete",callback:e=>this.deleteUser(e)}]}];defaultUser={fullName:"",email:"",password:"",phoneNumber:"",address:"",yearsExperience:0,description:""};formData={};error=null;addEntityFormFields=Qe(this.defaultUser,{email:{type:"email"},password:{type:"password"},yearsExperience:{type:"number",placeholder:"Ex: 5"},description:{type:"textarea",placeholder:"Descrie serviciile oferite",class:"full-width"}});updateEntityFormFields=Qe({fullName:this.selectedUser?.fullName||"",phoneNumber:this.selectedUser?.phoneNumber||"",address:this.selectedUser?.address||"",yearsExperience:this.selectedUser?.yearsExperience||"",description:this.selectedUser?.description||""});onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}getEntity(e){this.adminService.getSpecialist(e).subscribe({next:t=>{this.entityDetailsId=t.response?.id,console.log(t.response),this.entityDetails=Yn(t.response??{}),this.isUserDetailsVisible=!0},error:t=>{console.error("Eroare la preluarea utilizatorului:",t),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getSpecialists(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{this.users=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(e){let t=e;this.adminService.addSpecialist(t).subscribe({next:()=>{this.closeAddUserForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editUser(e){this.selectedUserId=e.id,this.formData={fullName:e.fullName,phoneNumber:e.phoneNumber,address:e.address,yearsExperience:e.yearsExperience,description:e.description},this.isUpdateUserFormVisible=!0}updateEntity(e){if(console.log("Form data submitted:",e),!this.selectedUserId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let t={id:this.selectedUserId,fullName:e.fullName,phoneNumber:e.phoneNumber,address:e.address,yearsExperience:e.yearsExperience,description:e.description};console.log("Update payload:",t),this.adminService.updateSpecialist(this.selectedUserId,t).subscribe({next:()=>{console.log(),this.closeUpdateUserForm(),this.getPage()},error:n=>{console.error("Eroare la actualizare:",n)}})}closeUserDetails(){this.isUserDetailsVisible=!1,this.entityDetails={}}closeUpdateUserForm(){this.selectedUserId=null,this.resetForm(),this.isUpdateUserFormVisible=!1}openAddUserForm(){this.selectedUserId=null,this.resetForm(),this.isAddUserFormVisible=!0}viewUser(e){this.isUserDetailsVisible=!0}deleteUser(e){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi utilizatorul ${e.fullName}?`)&&this.adminService.deleteSpecialist(e.id).subscribe({next:()=>{this.getPage()},error:t=>{console.error("Eroare la \u0219tergerea utilizatorului:",t)}})}closeAddUserForm(){this.isAddUserFormVisible=!1,this.resetForm()}resetForm(){this.formData={firstName:"",lastName:"",email:"",password:"",role:"Client"}}getTotalPages(){return Math.ceil(this.totalItems/this.pageSize)}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}onPageChange(e){this.currentPage=e,this.getPage()}static \u0275fac=function(t){return new(t||i)(R(Qn))};static \u0275cmp=U({type:i,selectors:[["app-admin",8,"users"]],attrs:kp,decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(t,n){t&1&&(a(0,"app-pagination",0),E("pageChange",function(c){return n.onPageChange(c)})("pageSizeChange",function(c){return n.onPageSizeChange(c)}),s(),a(1,"div",1)(2,"div",2)(3,"h2"),u(4,"Administreaz\u0103 to\u021Bi speciali\u0219tii"),s(),a(5,"div",3)(6,"app-search-input",4),E("searchChanged",function(c){return n.onSearch(c)}),s()(),a(7,"button",5),E("click",function(){return n.openAddUserForm()}),u(8,"Adaug\u0103 specialist"),s(),B(9,"app-dynamic-table",6),s()(),A(10,Np,6,2,"div",7)(11,Fp,5,3,"div",7)(12,Bp,5,1,"div",8)),t&2&&(f("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",ot(10,Vp))("totalItems",n.totalItems),h(6),f("placeholder",n.placeholder),h(3),f("columns",n.columns)("data",n.users),h(),f("ngIf",n.isAddUserFormVisible),h(),f("ngIf",n.isUpdateUserFormVisible),h(),f("ngIf",n.isUserDetailsVisible))},dependencies:[re,an,nt,sn,Q,ht,Tt],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};var wn=class i{constructor(e,t){this.authService=e;this.router=t}canActivate(e,t){let n=e.data.roles,o=this.authService.getUserRole();return n.includes(o??"")?!0:(this.router.navigate(["/unauthorized"]),!1)}static \u0275fac=function(t){return new(t||i)(Z(te),Z(xe))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var Jr=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-unauthorized"]],decls:6,vars:0,consts:[["routerLink","/home"]],template:function(t,n){t&1&&(a(0,"h2"),u(1,"Acces restric\u021Bionat"),s(),a(2,"p"),u(3,"Nu ai permisiunea necesar\u0103 pentru a accesa aceast\u0103 pagin\u0103."),s(),a(4,"a",0),u(5,"\xCEnapoi la pagina principal\u0103"),s())},encapsulation:2})};var Sn=class i{constructor(e,t){this.authService=e;this.router=t}canActivate(){return this.authService.getToken()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(t){return new(t||i)(Z(te),Z(xe))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};function Lp(i,e){if(i&1&&B(0,"img",2),i&2){let t=y();f("src",t.icon,Ye)}}var Yr=class i{label;icon;onClick=new K;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-icon-button"]],inputs:{label:"label",icon:"icon"},outputs:{onClick:"onClick"},decls:4,vars:2,consts:[[1,"icon-button",3,"click"],["alt","icon","class","button-icon",3,"src",4,"ngIf"],["alt","icon",1,"button-icon",3,"src"]],template:function(t,n){t&1&&(a(0,"button",0),E("click",function(){return n.onClick.emit()}),A(1,Lp,1,1,"img",1),a(2,"span"),u(3),s()()),t&2&&(h(),f("ngIf",n.icon),h(2),Y(n.label))},dependencies:[he,Q],styles:[".icon-button[_ngcontent-%COMP%]{width:260px;height:55px;display:flex;align-items:center;gap:12px;padding:12px 24px;font-size:16px;font-weight:500;border:3px solid #4f378a;background-color:#f3e6ff;border-radius:10px;cursor:pointer;transition:background .2s ease;font-family:Roboto Mono,monospace}.icon-button[_ngcontent-%COMP%]:hover{background-color:#a197be}.icon-button[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain}"]})};var Xn=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Category";addCategory(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.post(`${this.baseUrl}/Add`,e,{headers:n})}getCategoryById(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}getAllCategories(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`}),o=new bt;return e&&(o=o.set("search",e)),this.http.get(`${this.baseUrl}/GetAll`,{headers:n,params:o})}getCategoriesForSpecialist(e){let t=new bt;return e&&(t=t.set("search",e)),this.http.get(`${this.baseUrl}/GetAllForSpecialist`,{params:t})}getCategoriesAdminPage(e,t,n){let o=this.authService.getToken(),c=new ee({Authorization:`Bearer ${o}`}),p=new bt().set("search",e||"").set("page",t).set("pageSize",n);return this.http.get(`${this.baseUrl}/GetPageForAdmin`,{headers:c,params:p})}updateCategory(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update/${e.id}`,e,{headers:n})}deleteCategory(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.delete(`${this.baseUrl}/Delete/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(Z(ke),Z(te))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};function qp(i,e){if(i&1){let t=F();a(0,"span",8),E("click",function(){let o=P(t).$implicit,c=y();return T(c.toggle(o.id))}),u(1),s()}if(i&2){let t=e.$implicit,n=y();Xe("disabled",n.selectedCategoryIds.includes(t.id)),h(),G(" ",t.name," ")}}function jp(i,e){if(i&1){let t=F();a(0,"span",11),u(1),a(2,"button",12),E("click",function(){let o=P(t).$implicit,c=y(2);return T(c.remove(o))}),u(3,"\xD7"),s()()}if(i&2){let t=e.$implicit,n=y(2);h(),G(" ",n.getCategoryName(t)," ")}}function zp(i,e){if(i&1&&(Oe(0),a(1,"div",9),A(2,jp,4,1,"span",10),s(),Re()),i&2){let t=y();h(2),f("ngForOf",t.selectedCategoryIds)}}var Zn=class i{constructor(e){this.categoryService=e}category=null;allCategories=[];searchTerm="";dummyCategories=[{id:"cat-001",name:"Traduceri medicale",description:"Traducerea documentelor medicale de specialitate."},{id:"cat-002",name:"Logopedie",description:"Servicii de diagnostic \u0219i terapie pentru tulbur\u0103ri de vorbire."},{id:"cat-003",name:"Psihoterapie",description:"Sesiuni individuale sau de grup pentru s\u0103n\u0103tatea mintal\u0103."},{id:"cat-004",name:"Nutri\u021Bie clinic\u0103",description:"Planuri alimentare personalizate pentru afec\u021Biuni cronice."},{id:"cat-005",name:"Fizioterapie",description:"Reabilitare fizic\u0103 post-traumatic\u0103 sau post-operatorie."}];placeholder="Caut\u0103 o categorie...";selectedCategoryIds=[];categoryChange=new K;ngOnInit(){this.allCategories=this.dummyCategories}getCategories(){this.categoryService.getAllCategories().subscribe({next:e=>{let t=this.removeDiacritics(this.searchTerm);this.allCategories=e.response.filter(n=>this.removeDiacritics(n.name).includes(t))},error:e=>{console.error("Eroare la ob\u021Binerea categoriilor:",e.errorMessage)}})}toggle(e){this.selectedCategoryIds.includes(e)||(this.selectedCategoryIds.push(e),this.categoryChange.emit(this.selectedCategoryIds))}remove(e){this.selectedCategoryIds=this.selectedCategoryIds.filter(t=>t!==e),this.categoryChange.emit(this.selectedCategoryIds)}getCategoryName(e){return this.allCategories?.find(t=>t.id===e)?.name||"Categorie necunoscut\u0103"}onSearch(e){this.searchTerm=e,this.getCategories()}removeDiacritics(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}static \u0275fac=function(t){return new(t||i)(R(Xn))};static \u0275cmp=U({type:i,selectors:[["app-category-selector"]],inputs:{selectedCategoryIds:"selectedCategoryIds"},outputs:{categoryChange:"categoryChange"},decls:11,vars:3,consts:[[1,"tag-selector"],[1,"section-title"],[1,"category-box"],[1,"search-category-wrapper"],[3,"searchChanged","placeholder"],[1,"category-options"],["class","tag option",3,"disabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"tag","option",3,"click"],[1,"category-box","category-options"],["class","tag selected",4,"ngFor","ngForOf"],[1,"tag","selected"],["type","button",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"h3",1),u(2,"Alege din lista de categorii:"),s(),a(3,"div",2)(4,"div",3)(5,"app-search-input",4),E("searchChanged",function(c){return n.onSearch(c)}),s()(),a(6,"div",5),A(7,qp,2,3,"span",6),s()(),a(8,"h3",1),u(9,"Categoriile selectate:"),s(),A(10,zp,3,1,"ng-container",7),s()),t&2&&(h(5),f("placeholder",n.placeholder),h(2),f("ngForOf",n.allCategories),h(3),f("ngIf",n.selectedCategoryIds.length>0))},dependencies:[re,ye,Q,ht],styles:[".tag-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.category-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:1.5rem;padding:1rem;background-color:#e6dfff;border:2px solid #c9b7ff;border-radius:8px;box-shadow:0 0 4px #0000001a;flex-wrap:wrap}.category-options[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;align-items:flex-start}.tag.option[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem;font-family:Roboto Mono,monospace}.tag.option[_ngcontent-%COMP%]:hover{background-color:#333}.tag.option.disabled[_ngcontent-%COMP%]{background-color:#a1a1a1;cursor:not-allowed;opacity:.6}.tag.selected[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem;font-family:Roboto Mono,monospace}button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff}.section-title[_ngcontent-%COMP%]{margin-bottom:8px;font-family:Roboto Mono,monospace}.search-category-wrapper[_ngcontent-%COMP%]{background-color:#f6efff;border-radius:5px;width:300px;margin:auto;border:2px solid #c9b7ff}"]})};var ei=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/SpecialistProfile";becomeSpecialist(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.put(`${this.baseUrl}/BecomeSpecialist`,e,{headers:n}).pipe(Rc(o=>{o.response?.token&&localStorage.setItem("access_token",o.response.token)}))}getSpecialistProfile(){let e=this.authService.getToken(),t=new ee({Authorization:`Bearer ${e}`});return this.http.get(`${this.baseUrl}/Get`,{headers:t})}updateSpecialistProfile(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update`,e,{headers:n})}static \u0275fac=function(t){return new(t||i)(Z(ke),Z(te))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};function $p(i,e){i&1&&(a(0,"div",32),u(1," Num\u0103rul de telefon este obligatoriu "),s())}function Gp(i,e){i&1&&(a(0,"div",32),u(1," Adresa este obligatorie "),s())}function Wp(i,e){i&1&&(a(0,"div",32),u(1," Experien\u021Ba este obligatorie "),s())}function Hp(i,e){i&1&&(a(0,"div",32),u(1," Descrierea este obligatorie "),s())}function Kp(i,e){if(i&1){let t=F();a(0,"div",35),B(1,"img",36),a(2,"button",37),E("click",function(){let o=P(t).index,c=y(3);return T(c.removeImage(o))}),u(3,"\xD7"),s()()}if(i&2){let t=e.$implicit;h(),f("src",t.url,Ye)}}function Qp(i,e){if(i&1&&(a(0,"div",33),A(1,Kp,4,1,"div",34),s()),i&2){let t=y(2);h(),f("ngForOf",t.portfolioImages)}}function Jp(i,e){i&1&&(a(0,"div",38)(1,"p"),u(2,"Nu ai \xEEnc\u0103 imagini \xEEn portofoliu"),s()())}function Yp(i,e){i&1&&(a(0,"span"),u(1,"Se salveaz\u0103..."),s())}function Xp(i,e){i&1&&(a(0,"span"),u(1,"Salveaz\u0103 modific\u0103rile"),s())}function Zp(i,e){if(i&1){let t=F();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"h2"),u(4,"Editeaz\u0103 informa\u021Biile de specialist"),s(),a(5,"button",9),E("click",function(){P(t);let o=y();return T(o.onClose())}),u(6,"\xD7"),s()(),a(7,"form",10,0),E("ngSubmit",function(){P(t);let o=y();return T(o.onSubmit())}),a(9,"div",11)(10,"h3"),u(11,"Informa\u021Bii de contact"),s(),a(12,"div",12)(13,"label",13),u(14,"Num\u0103r de telefon"),s(),a(15,"input",14,1),z("ngModelChange",function(o){P(t);let c=y();return j(c.specialistInfo.phoneNumber,o)||(c.specialistInfo.phoneNumber=o),T(o)}),s(),A(17,$p,2,0,"div",15),s(),a(18,"div",12)(19,"label",16),u(20,"Adresa"),s(),a(21,"input",17,2),z("ngModelChange",function(o){P(t);let c=y();return j(c.specialistInfo.address,o)||(c.specialistInfo.address=o),T(o)}),s(),A(23,Gp,2,0,"div",15),s()(),a(24,"div",11)(25,"h3"),u(26,"Categorii de servicii"),s(),a(27,"app-category-selector",18),E("categoryChange",function(o){P(t);let c=y();return T(c.updateCategories(o))}),s()(),a(28,"div",12)(29,"label",19),u(30,"Ani de experien\u021B\u0103"),s(),a(31,"input",20,3),z("ngModelChange",function(o){P(t);let c=y();return j(c.specialistInfo.yearsExperience,o)||(c.specialistInfo.yearsExperience=o),T(o)}),s(),A(33,Wp,2,0,"div",15),s(),a(34,"div",12)(35,"label",21),u(36,"Descrierea serviciilor"),s(),a(37,"textarea",22,4),z("ngModelChange",function(o){P(t);let c=y();return j(c.specialistInfo.description,o)||(c.specialistInfo.description=o),T(o)}),s(),A(39,Hp,2,0,"div",15),s(),a(40,"div",11)(41,"h3"),u(42,"Portofoliu imagini"),s(),a(43,"div",23),A(44,Qp,2,1,"div",24)(45,Jp,3,0,"div",25),a(46,"label",26),u(47," \u{1F4F8} Adaug\u0103 imagini "),a(48,"input",27),E("change",function(o){P(t);let c=y();return T(c.onPortfolioImagesSelected(o))}),s()()()(),a(49,"div",28)(50,"button",29),E("click",function(){P(t);let o=y();return T(o.onClose())}),u(51,"Anuleaz\u0103"),s(),a(52,"button",30),A(53,Yp,2,0,"span",31)(54,Xp,2,0,"span",31),s()()()()()}if(i&2){let t=J(8),n=J(16),o=J(22),c=J(32),p=J(38),_=y();h(15),q("ngModel",_.specialistInfo.phoneNumber),h(2),f("ngIf",n.invalid&&n.touched),h(4),q("ngModel",_.specialistInfo.address),h(2),f("ngIf",o.invalid&&o.touched),h(4),f("selectedCategoryIds",_.specialistInfo.categories),h(4),q("ngModel",_.specialistInfo.yearsExperience),h(2),f("ngIf",c.invalid&&c.touched),h(4),q("ngModel",_.specialistInfo.description),h(2),f("ngIf",p.invalid&&p.touched),h(5),f("ngIf",_.portfolioImages.length>0),h(),f("ngIf",_.portfolioImages.length===0),h(7),f("disabled",t.invalid||_.isLoading),h(),f("ngIf",_.isLoading),h(),f("ngIf",!_.isLoading)}}var Xr=class i{constructor(e){this.specialistService=e}isVisible=!1;user=null;close=new K;specialistUpdated=new K;specialistInfo={phoneNumber:"",address:"",categories:[],yearsExperience:0,description:""};portfolioImages=[];newPortfolioFiles=[];isLoading=!1;ngOnInit(){this.user?.specialist&&this.loadSpecialistData()}ngOnChanges(){this.user?.specialist&&this.isVisible&&this.loadSpecialistData()}loadSpecialistData(){}updateCategories(e){this.specialistInfo.categories=e}onPortfolioImagesSelected(e){let t=e.target;if(t.files){for(let n of t.files){let o=n,c={fileStream:o,contentType:o.type,fileName:o.name};this.newPortfolioFiles.push(c);let p=new FileReader;p.onload=()=>{this.portfolioImages.push({url:p.result,file:o,isNew:!0})},p.readAsDataURL(o)}t.value=""}}removeImage(e){let t=this.portfolioImages[e];if(t.isNew){let n=this.newPortfolioFiles.findIndex(o=>o.fileName===t.file?.name);n>-1&&this.newPortfolioFiles.splice(n,1)}this.portfolioImages.splice(e,1)}onClose(){this.close.emit(),this.resetForm()}resetForm(){this.loadSpecialistData(),this.newPortfolioFiles=[]}onSubmit(){return V(this,null,function*(){if(!this.isLoading){this.isLoading=!0;try{let e={userId:this.user.id,phoneNumber:this.specialistInfo.phoneNumber,address:this.specialistInfo.address,categories:this.specialistInfo.categories,yearsExperience:this.specialistInfo.yearsExperience,description:this.specialistInfo.description};this.newPortfolioFiles.length>0&&(e.portfolio=this.newPortfolioFiles)}catch(e){console.error("Error during update:",e),this.isLoading=!1}}})}handleSuccess(e){this.isLoading=!1,e&&this.specialistUpdated.emit(e),this.onClose()}static \u0275fac=function(t){return new(t||i)(R(ei))};static \u0275cmp=U({type:i,selectors:[["app-edit-specialist-info"]],inputs:{isVisible:"isVisible",user:"user"},outputs:{close:"close",specialistUpdated:"specialistUpdated"},features:[_t],decls:1,vars:1,consts:[["editForm","ngForm"],["phoneControl","ngModel"],["addressControl","ngModel"],["experienceControl","ngModel"],["descriptionControl","ngModel"],["class","edit-overlay",4,"ngIf"],[1,"edit-overlay"],[1,"edit-modal"],[1,"edit-header"],[1,"close-button",3,"click"],[1,"edit-form",3,"ngSubmit"],[1,"form-section"],[1,"form-group"],["for","phoneNumber"],["id","phoneNumber","type","tel","name","phoneNumber","placeholder","Ex: 0712345678","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","address"],["id","address","type","text","name","address","placeholder","Ex: Strada Florilor 12, Bucure\u0219ti","required","",3,"ngModelChange","ngModel"],[3,"categoryChange","selectedCategoryIds"],["for","yearsExperience"],["id","yearsExperience","type","number","name","yearsExperience","min","0","max","50","required","",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","rows","4","placeholder","Descrie serviciile pe care le oferi...","required","",3,"ngModelChange","ngModel"],[1,"portfolio-section"],["class","portfolio-images",4,"ngIf"],["class","portfolio-empty",4,"ngIf"],[1,"upload-portfolio-btn"],["type","file","multiple","","accept","image/*","hidden","",3,"change"],[1,"form-actions"],["type","button",1,"cancel-button",3,"click"],["type","submit",1,"save-button",3,"disabled"],[4,"ngIf"],[1,"error-message"],[1,"portfolio-images"],["class","image-item",4,"ngFor","ngForOf"],[1,"image-item"],["alt","Portfolio image",3,"src"],["type","button",1,"delete-image-btn",3,"click"],[1,"portfolio-empty"]],template:function(t,n){t&1&&A(0,Zp,55,14,"div",5),t&2&&f("ngIf",n.isVisible)},dependencies:[he,ye,Q,re,tt,Ee,zt,Ie,et,at,Cn,bn,Me,st,Zn],styles:[".edit-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.edit-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0003;max-width:800px;width:90%;max-height:90vh;overflow-y:auto;font-family:Roboto Mono,monospace;border:2px solid #c9b7ff}.edit-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 32px 16px;border-bottom:2px solid #e0caff;background-color:#f8f5ff}.edit-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333;font-weight:700}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;cursor:pointer;color:#666;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.close-button[_ngcontent-%COMP%]:hover{color:#333;background-color:#f0f0f0}.edit-form[_ngcontent-%COMP%]{padding:24px 32px 32px}.form-section[_ngcontent-%COMP%]{margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #eee}.form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none;margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:18px;color:#333;font-weight:700;border-left:4px solid #d9c8ff;padding-left:12px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:700;color:#333;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #c9b7ff;border-radius:6px;font-family:Roboto Mono,monospace;font-size:14px;transition:border-color .3s ease;box-sizing:border-box;resize:vertical}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#a087ff;box-shadow:0 0 0 3px #a087ff1a}.form-group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}.form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{appearance:textfield}.form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, .form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px;font-weight:500}.portfolio-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.portfolio-images[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;min-height:60px;padding:16px;border:2px dashed #c9b7ff;border-radius:8px;background-color:#fafafa}.portfolio-empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:120px;padding:16px;border:2px dashed #c9b7ff;border-radius:8px;background-color:#fafafa;color:#666;font-style:italic}.image-item[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a;border:2px solid #e0e0e0}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.delete-image-btn[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background-color:#000000b3;color:#fff;border:none;border-radius:50%;font-size:16px;cursor:pointer;width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease;font-weight:700}.delete-image-btn[_ngcontent-%COMP%]:hover{background-color:#dc3545cc}.upload-portfolio-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;background-color:#d9c8ff;color:#000;border:2px solid black;border-radius:5px;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;cursor:pointer;transition:background-color .3s ease;align-self:flex-start;margin-bottom:40px}.upload-portfolio-btn[_ngcontent-%COMP%]:hover{background-color:#cbb6ff;transform:translateY(-1px)}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:32px;padding-top:24px;border-top:2px solid #e0caff}.cancel-button[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;border:2px solid black;border-radius:6px;padding:12px 24px;cursor:pointer;transition:all .3s ease}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#e8e8e8;transform:translateY(-1px)}.save-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;border:2px solid black;border-radius:6px;padding:12px 24px;cursor:pointer;transition:all .3s ease;min-width:180px}.save-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#cbb6ff;transform:translateY(-1px)}.save-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}@media (max-width: 768px){.edit-modal[_ngcontent-%COMP%]{width:95%;margin:10px}.edit-form[_ngcontent-%COMP%]{padding:16px 20px 24px}.edit-header[_ngcontent-%COMP%]{padding:16px 20px 12px}.portfolio-images[_ngcontent-%COMP%]{justify-content:center}.image-item[_ngcontent-%COMP%]{width:100px;height:100px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.save-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{width:100%}}"]})};function eh(i,e){i&1&&(a(0,"div",32),u(1," Prenumele este obligatoriu "),s())}function th(i,e){i&1&&(a(0,"div",32),u(1," Numele este obligatoriu "),s())}function nh(i,e){i&1&&(a(0,"div",32),u(1," Parola trebuie s\u0103 aib\u0103 cel pu\u021Bin 6 caractere "),s())}function ih(i,e){i&1&&(a(0,"div",32),u(1," Parolele nu coincid "),s())}function rh(i,e){i&1&&(a(0,"span"),u(1,"Se salveaz\u0103..."),s())}function oh(i,e){i&1&&(a(0,"span"),u(1,"Salveaz\u0103 modific\u0103rile"),s())}function sh(i,e){if(i&1){let t=F();a(0,"div",6)(1,"div",7)(2,"div",8)(3,"h2"),u(4,"Editeaz\u0103 informa\u021Biile personale"),s(),a(5,"button",9),E("click",function(){P(t);let o=y();return T(o.onClose())}),u(6,"\xD7"),s()(),a(7,"form",10,0),E("ngSubmit",function(){P(t);let o=y();return T(o.onSubmit())}),a(9,"div",11)(10,"div",12)(11,"label",13),u(12,"Prenume"),s(),a(13,"input",14,1),z("ngModelChange",function(o){P(t);let c=y();return j(c.userInfo.firstName,o)||(c.userInfo.firstName=o),T(o)}),s(),A(15,eh,2,0,"div",15),s(),a(16,"div",12)(17,"label",16),u(18,"Nume"),s(),a(19,"input",17,2),z("ngModelChange",function(o){P(t);let c=y();return j(c.userInfo.lastName,o)||(c.userInfo.lastName=o),T(o)}),s(),A(21,th,2,0,"div",15),s()(),a(22,"div",12)(23,"label",18),u(24,"Adresa de email"),s(),a(25,"input",19,3),z("ngModelChange",function(o){P(t);let c=y();return j(c.userInfo.email,o)||(c.userInfo.email=o),T(o)}),s(),a(27,"small",20),u(28,"Email-ul nu poate fi modificat din aceast\u0103 sec\u021Biune"),s()(),a(29,"div",21)(30,"h3"),u(31,"Schimb\u0103 parola"),s(),a(32,"div",12)(33,"label",22),u(34,"Parola actual\u0103"),s(),a(35,"input",23),z("ngModelChange",function(o){P(t);let c=y();return j(c.passwordData.currentPassword,o)||(c.passwordData.currentPassword=o),T(o)}),s()(),a(36,"div",12)(37,"label",24),u(38,"Parola nou\u0103"),s(),a(39,"input",25,4),z("ngModelChange",function(o){P(t);let c=y();return j(c.passwordData.newPassword,o)||(c.passwordData.newPassword=o),T(o)}),s(),A(41,nh,2,0,"div",15),s(),a(42,"div",12)(43,"label",26),u(44,"Confirm\u0103 parola nou\u0103"),s(),a(45,"input",27),z("ngModelChange",function(o){P(t);let c=y();return j(c.passwordData.confirmPassword,o)||(c.passwordData.confirmPassword=o),T(o)}),s(),A(46,ih,2,0,"div",15),s()(),a(47,"div",28)(48,"button",29),E("click",function(){P(t);let o=y();return T(o.onClose())}),u(49,"Anuleaz\u0103"),s(),a(50,"button",30),A(51,rh,2,0,"span",31)(52,oh,2,0,"span",31),s()()()()()}if(i&2){let t=J(8),n=J(14),o=J(20),c=J(40),p=y();h(13),q("ngModel",p.userInfo.firstName),h(2),f("ngIf",n.invalid&&n.touched),h(4),q("ngModel",p.userInfo.lastName),h(2),f("ngIf",o.invalid&&o.touched),h(4),q("ngModel",p.userInfo.email),h(10),q("ngModel",p.passwordData.currentPassword),h(4),q("ngModel",p.passwordData.newPassword),h(2),f("ngIf",c.invalid&&c.touched),h(4),q("ngModel",p.passwordData.confirmPassword),h(),f("ngIf",p.passwordData.newPassword&&p.passwordData.confirmPassword&&p.passwordData.newPassword!==p.passwordData.confirmPassword),h(4),f("disabled",t.invalid||p.isLoading),h(),f("ngIf",p.isLoading),h(),f("ngIf",!p.isLoading)}}var Zr=class i{constructor(e){this.userService=e}isVisible=!1;user=null;close=new K;userUpdated=new K;userInfo={firstName:"",lastName:"",email:""};passwordData={currentPassword:"",newPassword:"",confirmPassword:""};isLoading=!1;ngOnInit(){this.user&&this.loadUserData()}ngOnChanges(){this.user&&this.isVisible&&this.loadUserData()}loadUserData(){if(this.user){let[e="",t=""]=(this.user.fullName||"").split(" ");this.userInfo={firstName:e,lastName:t,email:this.user.email||""}}}onClose(){this.close.emit(),this.resetForm()}resetForm(){this.loadUserData(),this.passwordData={currentPassword:"",newPassword:"",confirmPassword:""}}onSubmit(){return V(this,null,function*(){if(!this.isLoading){this.isLoading=!0;try{let e={id:this.user.id,firstName:this.userInfo.firstName,lastName:this.userInfo.lastName};if(this.passwordData.currentPassword&&this.passwordData.newPassword){if(this.passwordData.newPassword!==this.passwordData.confirmPassword){console.error("Passwords do not match"),this.isLoading=!1;return}e.password=this.passwordData.newPassword}}catch(e){console.error("Error during update:",e),this.isLoading=!1}}})}handleSuccess(e){this.isLoading=!1,e&&this.userUpdated.emit(e),this.onClose()}static \u0275fac=function(t){return new(t||i)(R(It))};static \u0275cmp=U({type:i,selectors:[["app-edit-user-info"]],inputs:{isVisible:"isVisible",user:"user"},outputs:{close:"close",userUpdated:"userUpdated"},features:[_t],decls:1,vars:1,consts:[["editForm","ngForm"],["firstNameControl","ngModel"],["lastNameControl","ngModel"],["emailControl","ngModel"],["newPasswordControl","ngModel"],["class","edit-overlay",4,"ngIf"],[1,"edit-overlay"],[1,"edit-modal"],[1,"edit-header"],[1,"close-button",3,"click"],[1,"edit-form",3,"ngSubmit"],[1,"form-group-row"],[1,"form-group"],["for","firstName"],["id","firstName","type","text","name","firstName","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","lastName"],["id","lastName","type","text","name","lastName","required","",3,"ngModelChange","ngModel"],["for","email"],["id","email","type","email","name","email","required","","email","","readonly","",3,"ngModelChange","ngModel"],[1,"info-text"],[1,"password-section"],["for","currentPassword"],["id","currentPassword","type","password","name","currentPassword",3,"ngModelChange","ngModel"],["for","newPassword"],["id","newPassword","type","password","name","newPassword","minlength","6",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"cancel-button",3,"click"],["type","submit",1,"save-button",3,"disabled"],[4,"ngIf"],[1,"error-message"]],template:function(t,n){t&1&&A(0,sh,53,13,"div",5),t&2&&f("ngIf",n.isVisible)},dependencies:[he,Q,re,tt,Ee,Ie,et,at,Gs,$s,Me,st],styles:[".edit-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.edit-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0003;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;font-family:Roboto Mono,monospace}.edit-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 32px 16px;border-bottom:2px solid #e0caff}.edit-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:28px;cursor:pointer;color:#666;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.close-button[_ngcontent-%COMP%]:hover{color:#333}.edit-form[_ngcontent-%COMP%]{padding:24px 32px 32px}.form-group-row[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:700;color:#333;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #c9b7ff;border-radius:6px;font-family:Roboto Mono,monospace;font-size:14px;transition:border-color .3s ease;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#a087ff}.form-group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc3545}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px}.password-section[_ngcontent-%COMP%]{margin-top:32px;padding-top:24px;border-top:2px solid #e0caff}.password-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:18px;color:#333}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:16px;margin-top:32px;padding-top:24px;border-top:1px solid #eee}.cancel-button[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;border:2px solid black;border-radius:6px;padding:12px 24px;cursor:pointer;transition:background-color .3s ease}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.save-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;border:2px solid black;border-radius:6px;padding:12px 24px;cursor:pointer;transition:background-color .3s ease}.save-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#cbb6ff}.info-text[_ngcontent-%COMP%]{color:#666;font-size:12px;margin-top:4px;font-style:italic}.form-group[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{background-color:#f8f8f8;color:#666;cursor:not-allowed}"]})};var cn=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Photo";addProfilePicture(e){let t=new FormData;t.append("file",e);let n=this.authService.getToken(),o=new ee({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/AddProfilePicture`,t,{headers:o})}updateProfilePicture(e){let t=new FormData;t.append("file",e);let n=this.authService.getToken(),o=new ee({Authorization:`Bearer ${n}`});return this.http.patch(`${this.baseUrl}/UpdateProfilePicture`,t,{headers:o})}addPortfolioPicture(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.post(`${this.baseUrl}/AddPortfolioPicture`,e,{headers:n})}deletePortfolioPicture(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.delete(`${this.baseUrl}/DeletePortfolioPicture/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(Z(ke),Z(te))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};function ah(i,e){if(i&1){let t=F();a(0,"app-edit-specialist-info",23),E("close",function(){P(t);let o=y();return T(o.onCloseEditSpecialistModal())})("specialistUpdated",function(o){P(t);let c=y();return T(c.onSpecialistUpdated(o))}),s()}if(i&2){let t=y();f("isVisible",t.showEditSpecialistModal)("user",t.user)}}function ch(i,e){if(i&1&&(a(0,"span",24),u(1),s()),i&2){let t=e.$implicit;h(),Y(t.name)}}var eo=class i{constructor(e,t,n,o){this.profileService=e;this.authService=t;this.photoService=n;this.route=o}user=null;showEditUserModal=!1;showEditSpecialistModal=!1;dummyUser={id:"user-001",fullName:"Elena Georgescu",email:"elena.georgescu@example.com",role:"Specialist",createdAt:new Date("2023-02-10T10:15:00Z"),updatedAt:new Date,rating:4.8,contactInfo:{phoneNumber:"0745123456",address:"Strada Florilor 12, Timi\u0219oara"},specialist:{yearsExperience:6,description:"Specialist \xEEn traduceri juridice \u0219i consultan\u021B\u0103 contractual\u0103.",categories:[{id:"cat-007",name:"Traduceri juridice"},{id:"cat-008",name:"Consultan\u021B\u0103 legal\u0103"}]}};ngOnInit(){this.loadUserProfile()}loadUserProfile(){this.user=this.dummyUser,this.profileService.getUserProfile().subscribe({next:e=>{let t=e.response;this.user=t??this.dummyUser,console.log(this.user)},error:e=>{console.error(e)}})}onFileSelected(e){let t=e.target.files[0];t&&this.photoService.addProfilePicture(t).subscribe({next:n=>{console.log("Upload success:",n),this.loadUserProfile()},error:n=>{console.error("Upload error:",n)}})}openEditUserModal(){this.showEditUserModal=!0}onCloseEditUserModal(){this.showEditUserModal=!1}onUserUpdated(e){this.user=e,console.log("User profile updated:",e)}openEditSpecialistModal(){this.showEditSpecialistModal=!0}onCloseEditSpecialistModal(){this.showEditSpecialistModal=!1}onSpecialistUpdated(e){this.user=e,console.log("Specialist profile updated:",e),this.loadUserProfile()}goToReviews(){this.route.navigate(["profile/user-reviews"])}goToHistory(){}goToSettings(){this.route.navigate(["profile/user-settings"])}logout(){window.confirm("Sigur vrei s\u0103 te deloghezi?")&&(this.authService.logout(),this.route.navigate(["/home"]))}static \u0275fac=function(t){return new(t||i)(R(It),R(te),R(cn),R(xe))};static \u0275cmp=U({type:i,selectors:[["app-profile"]],decls:53,vars:25,consts:[[3,"close","userUpdated","isVisible","user"],[3,"isVisible","user","close","specialistUpdated",4,"ngIf"],[1,"account-card"],[1,"account-header"],[1,"avatar-wrapper"],[1,"avatar"],["alt","User avatar",3,"src"],[1,"upload-btn"],["type","file","accept","image/*","hidden","",3,"change"],["src","assets/icons/photo_media.svg","alt","Upload icon"],[1,"account-info"],[3,"onClick","label","icon"],[1,"card"],[1,"info"],[1,"full-name"],[1,"details-block"],[1,"row"],[1,"categories"],[1,"label"],["class","tag",4,"ngFor","ngForOf"],[1,"experience"],[1,"description"],[1,"account-actions"],[3,"close","specialistUpdated","isVisible","user"],[1,"tag"]],template:function(t,n){if(t&1&&(a(0,"app-edit-user-info",0),E("close",function(){return n.onCloseEditUserModal()})("userUpdated",function(c){return n.onUserUpdated(c)}),s(),A(1,ah,1,2,"app-edit-specialist-info",1),a(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),B(6,"img",6),a(7,"label",7)(8,"input",8),E("change",function(c){return n.onFileSelected(c)}),s(),B(9,"img",9),s()()(),a(10,"div",10)(11,"p")(12,"strong"),u(13,"Nume:"),s(),u(14),s(),a(15,"p")(16,"strong"),u(17,"Adresa mail:"),s(),u(18),s(),a(19,"p")(20,"strong"),u(21,"Parol\u0103:"),s(),u(22," ********"),s(),a(23,"p")(24,"strong"),u(25,"Creat la data de:"),s(),u(26),$(27,"date"),s()(),a(28,"app-icon-button",11),E("onClick",function(){return n.openEditUserModal()}),s()(),a(29,"div",12)(30,"div",13)(31,"h2",14),u(32,"Anun\u021Bul t\u0103u"),s(),a(33,"div",15)(34,"div",16)(35,"div",17)(36,"span",18),u(37,"Categorii:"),s(),A(38,ch,2,1,"span",19),s(),a(39,"div",20)(40,"span",18),u(41,"Ani experien\u021B\u0103:"),s(),u(42),s()(),a(43,"div",21)(44,"span",18),u(45,"Descriere:"),s(),u(46),s()()(),a(47,"app-icon-button",11),E("onClick",function(){return n.openEditSpecialistModal()}),s()(),a(48,"div",22)(49,"app-icon-button",11),E("onClick",function(){return n.goToReviews()}),s(),a(50,"app-icon-button",11),E("onClick",function(){return n.goToHistory()}),s(),a(51,"app-icon-button",11),E("onClick",function(){return n.goToSettings()}),s(),a(52,"app-icon-button",11),E("onClick",function(){return n.logout()}),s()()()),t&2){let o;f("isVisible",n.showEditUserModal)("user",(o=n.user)!==null&&o!==void 0?o:null),h(),f("ngIf",n.user==null?null:n.user.specialist),h(5),f("src",(n.user==null?null:n.user.profilePictureUrl)||"assets/avatar.svg",Ye),h(8),G(" ",n.user==null?null:n.user.fullName," "),h(4),G(" ",n.user==null?null:n.user.email,""),h(8),G(" ",Se(27,22,n.user==null?null:n.user.createdAt,"dd.MM.yyyy"),""),h(2),f("label","Editeaz\u0103 profilul")("icon","assets/icons/edit.svg"),h(10),f("ngForOf",n.user==null||n.user.specialist==null?null:n.user.specialist.categories),h(4),G(" ",n.user==null||n.user.specialist==null?null:n.user.specialist.yearsExperience," "),h(4),G(" ",n.user==null||n.user.specialist==null?null:n.user.specialist.description," "),h(),f("label","Editeaz\u0103 anun\u021Bul")("icon","assets/icons/edit.svg"),h(2),f("label","Recenziile tale")("icon","assets/icons/reviews.svg"),h(),f("label","Istoric servicii")("icon","assets/icons/history.svg"),h(),f("label","Set\u0103rile contului")("icon","assets/icons/settings.svg"),h(),f("label","Deconecteaz\u0103-te")("icon","assets/icons/logout.svg")}},dependencies:[Ze,Yr,ye,Q,Xr,Zr],styles:[".account-card[_ngcontent-%COMP%]{background:#e0caff;max-width:1000px;margin:32px auto;box-shadow:0 4px 16px #0000001a;font-family:Roboto Mono,monospace;border:3px solid black}.account-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:32px;gap:32px}.account-info[_ngcontent-%COMP%]{flex:1;margin-left:32px;font-size:16px}.account-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px 78px;padding:32px}.card[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#a08ad2;padding:20px 32px;width:100%;gap:20px;justify-content:space-between;box-sizing:border-box;border-top:3px solid black;border-bottom:3px solid black;font-family:Roboto Mono,monospace}.info[_ngcontent-%COMP%]{flex:1}.full-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;margin-top:.25rem;margin-bottom:.5rem}.full-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.details-block[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:12px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap;gap:20px}.categories[_ngcontent-%COMP%], .experience[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-size:.95rem}.label[_ngcontent-%COMP%]{font-weight:700;margin-right:6px}.tag[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-radius:6px;padding:4px 8px;margin-right:4px;font-size:.85rem}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;width:160px;aspect-ratio:1/1}.avatar[_ngcontent-%COMP%]{position:relative;width:160px;height:160px;overflow:hidden}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;display:block}.rating-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;display:inline-flex;align-items:center;gap:.3em;background:#fff;padding:.2em .5em;border-radius:.6em;font-size:1.2em;box-shadow:0 1px 4px #0000001a}.rating-badge[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1em;height:1em}.upload-btn[_ngcontent-%COMP%]{position:absolute;bottom:4px;right:4px;background:#fff;border-radius:50%;padding:6px;cursor:pointer;font-size:18px}.upload-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.upload-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}"]})};var lh=(i,e)=>({"bubble-left":i,"bubble-right":e}),uh=(i,e)=>({left:i,right:e}),to=class i{message;currentUserId;get isOwnMessage(){return this.message.senderId===this.currentUserId}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-message-bubble"]],inputs:{message:"message",currentUserId:"currentUserId"},decls:6,vars:13,consts:[[1,"bubble",3,"ngClass"],[1,"bubble-content",3,"ngClass"],[1,"timestamp"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1),u(2),a(3,"div",2),u(4),$(5,"date"),s()()()),t&2&&(f("ngClass",vt(7,lh,!n.isOwnMessage,n.isOwnMessage)),h(),f("ngClass",vt(10,uh,!n.isOwnMessage,n.isOwnMessage)),h(),G(" ",n.message.content," "),h(2),Y(Se(5,4,n.message.createdAt,"shortTime")))},dependencies:[Ze,ze],styles:[".bubble[_ngcontent-%COMP%]{display:flex;width:100%;margin:8px 0}.bubble-left[_ngcontent-%COMP%]{justify-content:flex-start}.bubble-right[_ngcontent-%COMP%]{justify-content:flex-end}.bubble-content[_ngcontent-%COMP%]{display:inline-block;padding:10px 14px;border-radius:12px;font-size:12px;word-wrap:break-word;min-width:80px;max-width:70%;text-align:left}.bubble-content.left[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #514c70;color:#000;border-top-left-radius:4px}.bubble-content.right[_ngcontent-%COMP%]{background-color:#a79ed7;border:1px solid #514c70;color:#000;border-top-right-radius:4px}.bubble-content[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{font-size:10px;opacity:.6;margin-top:4px;text-align:right}"]})};var ph=(i,e)=>({"request-left":i,"request-right":e}),hh=(i,e)=>({"rejected-bg":i,"accepted-bg":e});function mh(i,e){if(i&1&&(a(0,"p")(1,"strong"),u(2,"Adres\u0103:"),s(),u(3),s()),i&2){let t=y();h(3),G(" ",t.request.senderContactInfo==null?null:t.request.senderContactInfo.address," ")}}function fh(i,e){if(i&1&&(a(0,"p")(1,"strong"),u(2,"Telefon:"),s(),u(3),s()),i&2){let t=y();h(3),G(" ",t.request.senderContactInfo==null?null:t.request.senderContactInfo.phoneNumber," ")}}function gh(i,e){i&1&&(a(0,"p",5),u(1,"\xCEn a\u0219teptare..."),s())}function _h(i,e){if(i&1){let t=F();a(0,"div",6)(1,"button",7),E("click",function(){P(t);let o=y(2);return T(o.acceptRequest())}),u(2," Accept\u0103 "),s(),a(3,"button",8),E("click",function(){P(t);let o=y(2);return T(o.rejectRequest())}),u(4," Respinge "),s()()}}function yh(i,e){if(i&1&&(a(0,"div"),A(1,gh,2,0,"p",4)(2,_h,5,0,"div",3),s()),i&2){let t=y();h(),f("ngIf",t.userRole==="Client"),h(),f("ngIf",t.userRole==="Specialist")}}function vh(i,e){if(i&1){let t=F();a(0,"div",6)(1,"button",9),E("click",function(){P(t);let o=y();return T(o.triggerOffer())}),u(2,"F\u0103 o ofert\u0103"),s()()}}var no=class i{constructor(e){this.authService=e}request={id:"",senderId:"",requestedStartDate:new Date,description:"",status:"Pending",senderContactInfo:{phoneNumber:"",address:""}};currentUserId;userRole="";requestAccepted=new K;requestRejected=new K;makeOffer=new K;ngOnInit(){this.userRole=this.authService.getUserRole(),console.log(this.request)}acceptRequest(){this.requestAccepted.emit(this.request.id)}rejectRequest(){this.requestRejected.emit(this.request.id)}showOfferButton(){return this.request.status==="Accepted"&&this.userRole==="Specialist"}triggerOffer(){console.log("Fac o oferta pentru cererea:",this.request.id),this.makeOffer.emit(this.request.id)}get isOwnMessage(){return this.request.senderId===this.currentUserId}static \u0275fac=function(t){return new(t||i)(R(te))};static \u0275cmp=U({type:i,selectors:[["app-request-message"]],inputs:{request:"request",currentUserId:"currentUserId"},outputs:{requestAccepted:"requestAccepted",requestRejected:"requestRejected",makeOffer:"makeOffer"},decls:17,vars:17,consts:[[1,"request",3,"ngClass"],[1,"request-summary",3,"ngClass"],[4,"ngIf"],["class","action-buttons",4,"ngIf"],["class","status-button",4,"ngIf"],[1,"status-button"],[1,"action-buttons"],[1,"accept-btn",3,"click"],[1,"reject-btn",3,"click"],[1,"offer-btn",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h3"),u(3,"Solicitare"),s(),a(4,"p")(5,"strong"),u(6,"Data \u0219i ora:"),s(),u(7),$(8,"date"),s(),a(9,"p")(10,"strong"),u(11,"Descriere:"),s(),u(12),s(),A(13,mh,4,1,"p",2)(14,fh,4,1,"p",2)(15,yh,3,2,"div",2)(16,vh,3,0,"div",3),s()()),t&2&&(f("ngClass",vt(11,ph,!n.isOwnMessage,n.isOwnMessage)),h(),f("ngClass",vt(14,hh,n.request.status==="Rejected",n.request.status==="Accepted"||n.request.status==="Completed")),h(6),G(" ",Se(8,8,n.request.requestedStartDate,"short"),""),h(5),G(" ",n.request.description,""),h(),f("ngIf",n.request.senderContactInfo==null?null:n.request.senderContactInfo.address),h(),f("ngIf",n.request.senderContactInfo==null?null:n.request.senderContactInfo.phoneNumber),h(),f("ngIf",n.request.status==="Pending"),h(),f("ngIf",n.showOfferButton()))},dependencies:[Ze,Q,ze],styles:['@charset "UTF-8";.request[_ngcontent-%COMP%]{display:flex;width:100%}.request-left[_ngcontent-%COMP%]{justify-content:flex-start}.request-right[_ngcontent-%COMP%]{justify-content:flex-end}.request-center[_ngcontent-%COMP%]{justify-content:center}.request-summary[_ngcontent-%COMP%]{max-width:300px;margin:8px;padding:12px;border:2px solid black;background-color:#f8faff;font-size:.8rem;line-height:1.4;border-radius:6px;font-family:Roboto Mono,monospace}.request-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.request-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1rem;text-align:center}.request-status[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;padding:.25rem .5rem;font-weight:700;border-radius:4px}.status-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.status-pending[_ngcontent-%COMP%]{background-color:#fff5c4;color:#856404}.status-accepted[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-rejected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.accepted-bg[_ngcontent-%COMP%]{background-color:#d4edda;border:4px solid #155724}.rejected-bg[_ngcontent-%COMP%]{background-color:#f8d7da;border:4px solid #721c24}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .offer-btn[_ngcontent-%COMP%]{background-color:#d4e2ed;color:#001b3f}.action-buttons[_ngcontent-%COMP%]   .offer-btn[_ngcontent-%COMP%]:hover{background-color:#78a2c4;box-shadow:0 2px 6px #0003}']})};var bh=(i,e)=>({"reply-left":i,"reply-right":e}),Ch=(i,e)=>({"rejected-bg":i,"accepted-bg":e});function xh(i,e){i&1&&(a(0,"p"),u(1,"\xCEn a\u0219teptare..."),s())}function wh(i,e){if(i&1){let t=F();a(0,"div",5)(1,"button",6),E("click",function(){P(t);let o=y(2);return T(o.acceptReply())}),u(2," Accept\u0103 "),s(),a(3,"button",7),E("click",function(){P(t);let o=y(2);return T(o.rejectReply())}),u(4," Respinge "),s()()}}function Sh(i,e){if(i&1&&(a(0,"div"),A(1,xh,2,0,"p",3)(2,wh,5,0,"div",4),s()),i&2){let t=y();h(),f("ngIf",t.userRole==="Specialist"),h(),f("ngIf",t.userRole==="Client")}}var io=class i{constructor(e){this.authService=e}reply={id:"",senderId:"",startDate:new Date,endDate:new Date,price:0,status:"Pending",requestId:""};userRole="";requestId="";currentUserId;replyAccepted=new K;replyRejected=new K;ngOnInit(){this.userRole=this.authService.getUserRole(),console.log("Reply info:",this.reply)}acceptReply(){this.replyAccepted.emit({requestId:this.requestId,replyId:this.reply.id})}rejectReply(){this.replyRejected.emit({requestId:this.requestId,replyId:this.reply.id})}get isOwnMessage(){return this.reply.senderId===this.currentUserId}static \u0275fac=function(t){return new(t||i)(R(te))};static \u0275cmp=U({type:i,selectors:[["app-reply-message"]],inputs:{reply:"reply",requestId:"requestId",currentUserId:"currentUserId"},outputs:{replyAccepted:"replyAccepted",replyRejected:"replyRejected"},decls:22,vars:27,consts:[[1,"reply",3,"ngClass"],[1,"request-summary",3,"ngClass"],[1,"big-price"],[4,"ngIf"],["class","action-buttons",4,"ngIf"],[1,"action-buttons"],[1,"accept-btn",3,"click"],[1,"reject-btn",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h3"),u(3,"Ofert\u0103"),s(),a(4,"p")(5,"strong"),u(6,"Data:"),s(),u(7),$(8,"date"),s(),a(9,"p")(10,"strong"),u(11,"De la ora:"),s(),u(12),$(13,"date"),a(14,"strong"),u(15,"P\xE2n\u0103 la ora:"),s(),u(16),$(17,"date"),s(),a(18,"div",2),u(19),$(20,"currency"),s(),A(21,Sh,3,2,"div",3),s()()),t&2&&(f("ngClass",vt(21,bh,!n.isOwnMessage,n.isOwnMessage)),h(),f("ngClass",vt(24,Ch,n.reply.status==="Rejected",n.reply.status==="Accepted")),h(6),G(" ",Se(8,7,n.reply.startDate,"dd MMMM yyyy"),""),h(5),G(" ",Se(13,10,n.reply.startDate,"HH:mm")," \xA0\u2014\xA0 "),h(4),G(" ",Se(17,13,n.reply.endDate,"HH:mm")," "),h(3),G(" ",Zt(20,16,n.reply.price,"RON","symbol","1.2-2")," "),h(2),f("ngIf",n.reply.status==="Pending"))},dependencies:[Ze,Q,qn,ze],styles:['@charset "UTF-8";.reply[_ngcontent-%COMP%]{display:flex;width:100%}.reply-left[_ngcontent-%COMP%]{justify-content:flex-start}.reply-right[_ngcontent-%COMP%]{justify-content:flex-end}.reply-center[_ngcontent-%COMP%]{justify-content:center}.request-summary[_ngcontent-%COMP%]{max-width:300px;margin:8px;padding:12px;border:2px solid black;background-color:#f8faff;font-size:.8rem;line-height:1.4;border-radius:6px;font-family:Roboto Mono,monospace}.request-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.request-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1rem;text-align:center}.request-status[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;padding:.25rem .5rem;font-weight:700;border-radius:4px}.status-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.status-pending[_ngcontent-%COMP%]{background-color:#fff5c4;color:#856404}.status-accepted[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-rejected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.accepted-bg[_ngcontent-%COMP%]{background-color:#d4edda;border:4px solid #155724}.rejected-bg[_ngcontent-%COMP%]{background-color:#f8d7da;border:4px solid #721c24}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.big-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1a202c;margin-top:.5rem;margin-bottom:.5rem}']})};var Eh=(i,e)=>({"rejected-bg":i,"accepted-bg":e});function Ih(i,e){i&1&&(a(0,"p",6),u(1,"\xCEn a\u0219teptare..."),s())}function Ph(i,e){if(i&1){let t=F();a(0,"div",7)(1,"button",8),E("click",function(){P(t);let o=y(2);return T(o.completeTask())}),u(2," Confirm\u0103 "),s(),a(3,"button",9),E("click",function(){P(t);let o=y(2);return T(o.cancelTask())}),u(4," Anuleaz\u0103 "),s()()}}function Th(i,e){if(i&1&&(a(0,"div"),A(1,Ih,2,0,"p",4)(2,Ph,5,0,"div",5),s()),i&2){let t=y();h(),f("ngIf",t.userRole==="Client"),h(),f("ngIf",t.userRole==="Specialist")}}var ro=class i{serviceTask={id:"",replyId:"",userId:"",specialistId:"",specialistFullName:"",startDate:new Date,endDate:new Date,description:"",address:"",price:0,status:"Confirmed",completedAt:new Date,cancelledAt:new Date};userRole="";replyId="";taskCompleted=new K;taskCancelled=new K;completeTask(){this.taskCompleted.emit({replyId:this.replyId,taskId:this.serviceTask.id})}cancelTask(){this.taskCancelled.emit({replyId:this.replyId,taskId:this.serviceTask.id})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-service-message"]],inputs:{serviceTask:"serviceTask",replyId:"replyId"},outputs:{taskCompleted:"taskCompleted",taskCancelled:"taskCancelled"},decls:30,vars:25,consts:[[1,"request-wrapper"],[1,"request-summary",3,"ngClass"],[1,"big-price"],[4,"ngIf"],["class","status-button status-pending",4,"ngIf"],["class","action-buttons",4,"ngIf"],[1,"status-button","status-pending"],[1,"action-buttons"],[1,"accept-btn",3,"click"],[1,"reject-btn",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h3"),u(3,"Serviciu"),s(),a(4,"p")(5,"strong"),u(6,"Descriere:"),s(),u(7),s(),a(8,"p")(9,"strong"),u(10,"Data:"),s(),u(11),$(12,"date"),s(),a(13,"p")(14,"strong"),u(15,"De la ora:"),s(),u(16),$(17,"date"),a(18,"strong"),u(19,"P\xE2n\u0103 la ora:"),s(),u(20),$(21,"date"),s(),a(22,"p")(23,"strong"),u(24,"Adres\u0103:"),s(),u(25),s(),a(26,"div",2),u(27),$(28,"currency"),s(),A(29,Th,3,2,"div",3),s()()),t&2&&(h(),f("ngClass",vt(22,Eh,n.serviceTask.status==="Cancelled",n.serviceTask.status==="Completed")),h(6),G(" ",n.serviceTask.description,""),h(4),G(" ",Se(12,8,n.serviceTask.startDate,"dd MMMM yyyy"),""),h(5),G(" ",Se(17,11,n.serviceTask.startDate,"HH:mm")," \xA0\u2014\xA0 "),h(4),G(" ",Se(21,14,n.serviceTask.endDate,"HH:mm")," "),h(5),G(" ",n.serviceTask.address,""),h(2),G(" ",Zt(28,17,n.serviceTask.price,"RON","symbol","1.2-2")," "),h(2),f("ngIf",n.serviceTask.status==="Confirmed"))},dependencies:[qn,Ze,ze,Q],styles:['@charset "UTF-8";.request-summary[_ngcontent-%COMP%]{max-width:300px;margin:8px auto;padding:12px;border:2px solid black;background-color:#f8faff;font-size:.8rem;line-height:1.4;border-radius:6px;font-family:Roboto Mono,monospace}.request-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}.request-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1rem;text-align:center}.request-status[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;padding:.25rem .5rem;font-weight:700;border-radius:4px}.status-button[_ngcontent-%COMP%]{display:flex;justify-content:center}.status-pending[_ngcontent-%COMP%]{background-color:#fff5c4;color:#856404}.status-accepted[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-rejected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.accepted-bg[_ngcontent-%COMP%]{background-color:#d4edda;border:4px solid #155724}.rejected-bg[_ngcontent-%COMP%]{background-color:#f8d7da;border:4px solid #721c24}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.big-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1a202c;margin-top:.5rem;margin-bottom:.5rem}']})};function Mh(i,e){i&1&&(a(0,"div",34),u(1," Data este obligatorie. "),s())}function Dh(i,e){i&1&&(a(0,"div",34),u(1," Ora de \xEEnceput este obligatorie. "),s())}function Ah(i,e){i&1&&(a(0,"div",34),u(1," Ora de sf\xE2r\u0219it este obligatorie. "),s())}function Oh(i,e){i&1&&(a(0,"div",34),u(1," Pre\u021Bul este obligatoriu. "),s())}var oo=class i{constructor(e){this.router=e}replyForm={day:null,month:null,year:null,startHour:null,startMinute:null,endHour:null,endMinute:null,price:null};formSubmit=new K;close=new K;formSubmitted=!1;submitReply(e){if(this.formSubmitted=!0,e.invalid){Object.keys(e.controls).forEach(c=>{e.controls[c].markAsTouched()});return}let t=this.combineDateTime("start"),n=this.combineDateTime("end"),o={startDate:t,endDate:n,price:this.replyForm.price};this.formSubmit.emit(o)}combineDateTime(e){let t=this.replyForm.day||1,n=(this.replyForm.month||1)-1,o=this.replyForm.year||new Date().getFullYear(),c=e==="start"?this.replyForm.startHour||0:this.replyForm.endHour||0,p=e==="start"?this.replyForm.startMinute||0:this.replyForm.endMinute||0;return new Date(o,n,t,c,p,0,0)}closeForm(){this.close.emit()}static \u0275fac=function(t){return new(t||i)(R(xe))};static \u0275cmp=U({type:i,selectors:[["app-reply-form"]],inputs:{replyForm:"replyForm"},outputs:{formSubmit:"formSubmit",close:"close"},decls:68,vars:13,consts:[["formRef","ngForm"],["dayCtrl","ngModel"],["monthCtrl","ngModel"],["yearCtrl","ngModel"],["startHourCtrl","ngModel"],["startMinuteCtrl","ngModel"],["endHourCtrl","ngModel"],["endMinuteCtrl","ngModel"],["priceCtrl","ngModel"],[1,"request-form-wrapper"],[1,"close-button",3,"click"],[1,"request-form",3,"ngSubmit"],[1,"datetime-row"],[1,"date-fields"],[1,"date-field"],[1,"input-box"],["type","number","name","day","placeholder","ZZ","min","1","max","31","required","",3,"ngModelChange","ngModel"],[1,"date-separator"],["type","number","name","month","placeholder","LL","min","1","max","12","required","",3,"ngModelChange","ngModel"],["type","number","name","year","placeholder","AAAA","min","2024","max","2030","required","",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],[1,"time-row"],[1,"time-fields"],[1,"time-field"],["type","number","name","startHour","placeholder","HH","min","0","max","23","required","",3,"ngModelChange","ngModel"],[1,"time-separator"],["type","number","name","startMinute","placeholder","MM","min","0","max","59","required","",3,"ngModelChange","ngModel"],["type","number","name","endHour","placeholder","HH","min","0","max","23","required","",3,"ngModelChange","ngModel"],["type","number","name","endMinute","placeholder","MM","min","0","max","59","required","",3,"ngModelChange","ngModel"],[1,"input-box","price-input"],["type","number","name","price","placeholder","ex: 150.00","step","0.01","min","0","required","",3,"ngModelChange","ngModel"],[1,"currency"],[1,"center-button"],["type","submit",3,"disabled"],[1,"error"]],template:function(t,n){if(t&1){let o=F();a(0,"div",9)(1,"button",10),E("click",function(){return P(o),T(n.closeForm())}),u(2,"\xD7"),s(),a(3,"h2"),u(4,"Trimite o ofert\u0103"),s(),a(5,"form",11,0),E("ngSubmit",function(){P(o);let p=J(6);return T(n.submitReply(p))}),a(7,"label"),u(8," Data: "),a(9,"div",12)(10,"div",13)(11,"div",14)(12,"div",15)(13,"input",16,1),z("ngModelChange",function(p){return P(o),j(n.replyForm.day,p)||(n.replyForm.day=p),T(p)}),s()()(),a(15,"span",17),u(16,"/"),s(),a(17,"div",14)(18,"div",15)(19,"input",18,2),z("ngModelChange",function(p){return P(o),j(n.replyForm.month,p)||(n.replyForm.month=p),T(p)}),s()()(),a(21,"span",17),u(22,"/"),s(),a(23,"div",14)(24,"div",15)(25,"input",19,3),z("ngModelChange",function(p){return P(o),j(n.replyForm.year,p)||(n.replyForm.year=p),T(p)}),s()()()()(),A(27,Mh,2,0,"div",20),s(),a(28,"div",21)(29,"label"),u(30," De la: "),a(31,"div",22)(32,"div",23)(33,"div",15)(34,"input",24,4),z("ngModelChange",function(p){return P(o),j(n.replyForm.startHour,p)||(n.replyForm.startHour=p),T(p)}),s()()(),a(36,"span",25),u(37,":"),s(),a(38,"div",23)(39,"div",15)(40,"input",26,5),z("ngModelChange",function(p){return P(o),j(n.replyForm.startMinute,p)||(n.replyForm.startMinute=p),T(p)}),s()()()(),A(42,Dh,2,0,"div",20),s(),a(43,"label"),u(44," P\xE2n\u0103 la: "),a(45,"div",22)(46,"div",23)(47,"div",15)(48,"input",27,6),z("ngModelChange",function(p){return P(o),j(n.replyForm.endHour,p)||(n.replyForm.endHour=p),T(p)}),s()()(),a(50,"span",25),u(51,":"),s(),a(52,"div",23)(53,"div",15)(54,"input",28,7),z("ngModelChange",function(p){return P(o),j(n.replyForm.endMinute,p)||(n.replyForm.endMinute=p),T(p)}),s()()()(),A(56,Ah,2,0,"div",20),s()(),a(57,"label"),u(58," Pre\u021B: "),a(59,"div",29)(60,"input",30,8),z("ngModelChange",function(p){return P(o),j(n.replyForm.price,p)||(n.replyForm.price=p),T(p)}),s(),a(62,"span",31),u(63,"RON"),s()(),A(64,Oh,2,0,"div",20),s(),a(65,"div",32)(66,"button",33),u(67," Trimite oferta "),s()()()()}if(t&2){let o=J(6),c=J(14),p=J(20),_=J(26),O=J(35),k=J(41),H=J(49),ae=J(55),se=J(61);h(13),q("ngModel",n.replyForm.day),h(6),q("ngModel",n.replyForm.month),h(6),q("ngModel",n.replyForm.year),h(2),f("ngIf",(c.invalid||p.invalid||_.invalid)&&(c.dirty||c.touched||p.dirty||p.touched||_.dirty||_.touched||n.formSubmitted)),h(7),q("ngModel",n.replyForm.startHour),h(6),q("ngModel",n.replyForm.startMinute),h(2),f("ngIf",(O.invalid||k.invalid)&&(O.dirty||O.touched||k.dirty||k.touched||n.formSubmitted)),h(6),q("ngModel",n.replyForm.endHour),h(6),q("ngModel",n.replyForm.endMinute),h(2),f("ngIf",(H.invalid||ae.invalid)&&(H.dirty||H.touched||ae.dirty||ae.touched||n.formSubmitted)),h(4),q("ngModel",n.replyForm.price),h(4),f("ngIf",se.invalid&&(se.dirty||se.touched||n.formSubmitted)),h(2),f("disabled",o.invalid&&n.formSubmitted)}},dependencies:[re,tt,Ee,zt,Ie,et,at,Cn,bn,Me,st,Q],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000;padding:1rem;box-sizing:border-box}.request-form-wrapper[_ngcontent-%COMP%]{position:relative;max-width:800px;max-height:90vh;background-color:#e8d9ff;border:2px solid #000;padding:2rem;font-family:Roboto Mono,monospace;border-radius:8px;box-shadow:0 4px 12px #00000026;overflow-y:auto;margin:0}.close-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;background:none;border:none;font-size:24px;font-weight:700;cursor:pointer;color:#333;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;z-index:2}.close-button[_ngcontent-%COMP%]:hover{color:#000;background-color:#0000001a;border-radius:50%}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:1.25rem;margin-bottom:1.5rem;margin-top:0;padding-left:40px;padding-right:40px;position:relative;width:100%;box-sizing:border-box}.request-form[_ngcontent-%COMP%]{max-height:calc(90vh - 4rem);overflow-y:auto}.request-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;font-size:.95rem;font-weight:500}.datetime-row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;margin-top:4px}.date-fields[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.time-row[_ngcontent-%COMP%]{display:flex;gap:2rem}.time-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;margin-bottom:1rem}.time-fields[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;margin-top:4px}.date-field[_ngcontent-%COMP%]{flex:1}.date-field[_ngcontent-%COMP%]:nth-child(5){flex:1.5}.time-field[_ngcontent-%COMP%]{flex:1}.date-separator[_ngcontent-%COMP%], .time-separator[_ngcontent-%COMP%]{font-weight:700;font-size:18px;color:#666;margin:0 2px}.input-box[_ngcontent-%COMP%]{background-color:#f8f5ff;border:2px solid #c9b7ff;border-radius:6px;padding:8px;box-shadow:0 2px 6px #00000014;transition:border-color .3s ease;margin-top:4px;position:relative}.input-box[_ngcontent-%COMP%]:focus-within{border-color:#9a79ff;box-shadow:0 2px 8px #9a79ff33}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;padding:0;width:100%;font-family:Roboto Mono,monospace;font-size:14px;outline:none;color:#333}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#888;font-style:italic}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.date-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .time-field[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{text-align:center;font-weight:500}.price-input[_ngcontent-%COMP%]{display:flex;align-items:center}.price-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;text-align:right;padding-right:8px}.price-input[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{color:#666;font-weight:500;font-size:14px;margin-left:4px}.center-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1.5rem}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;border:2px solid #000;border-radius:6px;background-color:#c9b7ff;font-weight:700;cursor:pointer;font-family:Roboto Mono,monospace;font-size:14px;transition:all .3s ease}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#b8a3ff;box-shadow:0 2px 6px #0003;transform:translateY(-1px)}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 1px 3px #0003}.request-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#dcdcdc;color:#888;cursor:not-allowed;border-color:#bbb;transform:none;box-shadow:none}.error[_ngcontent-%COMP%]{color:#d8000c;font-size:.85rem;margin-top:4px;padding-left:2px;font-weight:400}@media (max-width: 768px){.overlay[_ngcontent-%COMP%]{padding:.5rem}.request-form-wrapper[_ngcontent-%COMP%]{max-width:100%;padding:1.5rem;max-height:95vh}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;padding-right:35px}.time-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.time-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem}.datetime-row[_ngcontent-%COMP%]{flex-direction:column;gap:8px;align-items:stretch}}@media (max-height: 600px){.request-form-wrapper[_ngcontent-%COMP%]{max-height:98vh;padding:1rem}.request-form-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem}.center-button[_ngcontent-%COMP%]{margin-top:1rem}}"]})};var so=class i{constructor(e,t){this.authService=e;this.http=t}baseUrl="http://localhost:5241/api/Conversation";getExchanges(e){let t=new bt;e&&(t=t.set("page",e.page.toString()),t=t.set("pageSize",e.pageSize.toString()));let n=this.authService.getToken(),o=new ee({Authorization:`Bearer ${n}`});return this.http.get(`${this.baseUrl}/GetPage`,{params:t,headers:o})}getExchange(e,t){let n=new bt;t&&(n=n.set("page",t.page.toString()),n=n.set("pageSize",t.pageSize.toString()));let o=this.authService.getToken(),c=new ee({Authorization:`Bearer ${o}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{params:n,headers:c})}static \u0275fac=function(t){return new(t||i)(Z(te),Z(ke))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var ao=class i{mockConversations=[{userId:"user_specialist_456",userFullName:"Ana Popescu",userProfilePictureUrl:"assets/avatar.svg",lastMessage:"Oferta este valabil\u0103 p\xE2n\u0103 m\xE2ine!",lastMessageAt:new Date("2024-01-01T10:45:00Z"),unreadCount:1},{userId:"user_specialist_789",userFullName:"Ion Vasile",userProfilePictureUrl:"assets/avatar.svg",lastMessage:"Bun\u0103 ziua! Cum merge treaba?",lastMessageAt:new Date("2024-01-01T10:00:00Z"),unreadCount:0}];mockConversationItems=[{id:"msg_001",conversationId:"conv_12345",senderId:"user_client_123",type:"message",createdAt:new Date("2024-01-01T10:00:00Z"),data:{Content:"Bun\u0103 ziua! Cum merge treaba?",SenderId:"user_client_123",CreatedAt:new Date("2024-01-01T10:00:00Z"),IsRead:!0}},{id:"req_001",conversationId:"conv_12345",senderId:"user_client_123",type:"request",createdAt:new Date("2024-01-01T10:15:00Z"),data:{RequestId:"req_001",RequestedStartDate:new Date("2024-01-02T09:00:00Z"),PhoneNumber:"0722123456",Address:"Strada Libert\u0103\u021Bii nr. 25, Bucure\u0219ti",Description:"Instalare aer condi\u021Bionat \xEEn living",Status:"Accepted",SenderId:"user_client_123"}},{id:"reply_001",conversationId:"conv_12345",senderId:"user_specialist_456",type:"reply",createdAt:new Date("2024-01-01T10:30:00Z"),data:{RequestId:"req_001",StartDate:new Date("2024-01-02T09:00:00Z"),EndDate:new Date("2024-01-02T12:00:00Z"),Price:450,Status:"Pending",SenderId:"user_specialist_456"}},{id:"msg_002",conversationId:"conv_12345",senderId:"user_specialist_456",type:"message",createdAt:new Date("2024-01-01T10:45:00Z"),data:{Content:"Oferta este valabil\u0103 p\xE2n\u0103 m\xE2ine!",CreatedAt:new Date("2024-01-01T10:45:00Z"),IsRead:!1}}];getExchanges(e){let t={response:{page:e?.page||1,pageSize:e?.pageSize||20,totalCount:this.mockConversations.length,data:this.mockConversations},errorMessage:void 0};return Ps(t).pipe(Ts(300))}getExchange(e,t){let n={response:{page:t?.page||1,pageSize:t?.pageSize||50,totalCount:this.mockConversationItems.length,data:this.mockConversationItems},errorMessage:void 0};return Ps(n).pipe(Ts(500))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var ti=class i{paymentFlowState=new ft({isActive:!1,serviceDetails:null,userDetails:null,specialistDetails:null,replyId:null,conversationId:null});paymentFlow$=this.paymentFlowState.asObservable();paymentCompleted=new ft(null);paymentCompleted$=this.paymentCompleted.asObservable();initiatePaymentFlow(e,t,n,o,c){this.paymentFlowState.next({isActive:!0,serviceDetails:t,userDetails:n,specialistDetails:o,replyId:e,conversationId:c})}completePayment(e){this.paymentCompleted.next(e),this.cancelPaymentFlow()}cancelPaymentFlow(){this.paymentFlowState.next({isActive:!1,serviceDetails:null,userDetails:null,specialistDetails:null,replyId:null,conversationId:null})}getCurrentState(){return this.paymentFlowState.value}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var ct=class extends Error{constructor(e,t){let n=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=n}},ln=class extends Error{constructor(e="A timeout occurred."){let t=new.target.prototype;super(e),this.__proto__=t}},Ve=class extends Error{constructor(e="An abort occurred."){let t=new.target.prototype;super(e),this.__proto__=t}},co=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=n}},lo=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=n}},uo=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=n}},Gi=class extends Error{constructor(e){let t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}},po=class extends Error{constructor(e,t){let n=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=n}};var ni=class{constructor(e,t,n){this.statusCode=e,this.statusText=t,this.content=n}},At=class{get(e,t){return this.send(ue(L({},t),{method:"GET",url:e}))}post(e,t){return this.send(ue(L({},t),{method:"POST",url:e}))}delete(e,t){return this.send(ue(L({},t),{method:"DELETE",url:e}))}getCookieString(e){return""}};var D=function(i){return i[i.Trace=0]="Trace",i[i.Debug=1]="Debug",i[i.Information=2]="Information",i[i.Warning=3]="Warning",i[i.Error=4]="Error",i[i.Critical=5]="Critical",i[i.None=6]="None",i}(D||{});var Ot=class{constructor(){}log(e,t){}};Ot.instance=new Ot;var Vh="8.0.7",me=class{static isRequired(e,t){if(e==null)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,n){if(!(e in t))throw new Error(`Unknown ${n} value: ${e}.`)}},ge=class i{static get isBrowser(){return!i.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!i.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!i.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}};function un(i,e){let t="";return Ct(i)?(t=`Binary data of length ${i.byteLength}`,e&&(t+=`. Content: '${Nh(i)}'`)):typeof i=="string"&&(t=`String data of length ${i.length}`,e&&(t+=`. Content: '${i}'`)),t}function Nh(i){let e=new Uint8Array(i),t="";return e.forEach(n=>{let o=n<16?"0":"";t+=`0x${o}${n.toString(16)} `}),t.substr(0,t.length-1)}function Ct(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function mo(i,e,t,n,o,c){return V(this,null,function*(){let p={},[_,O]=Rt();p[_]=O,i.log(D.Trace,`(${e} transport) sending data. ${un(o,c.logMessageContent)}.`);let k=Ct(o)?"arraybuffer":"text",H=yield t.post(n,{content:o,headers:L(L({},p),c.headers),responseType:k,timeout:c.timeout,withCredentials:c.withCredentials});i.log(D.Trace,`(${e} transport) request complete. Response status: ${H.statusCode}.`)})}function Nl(i){return i===void 0?new En(D.Information):i===null?Ot.instance:i.log!==void 0?i:new En(i)}var ho=class{constructor(e,t){this._subject=e,this._observer=t}dispose(){let e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}},En=class{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){let n=`[${new Date().toISOString()}] ${D[e]}: ${t}`;switch(e){case D.Critical:case D.Error:this.out.error(n);break;case D.Warning:this.out.warn(n);break;case D.Information:this.out.info(n);break;default:this.out.log(n);break}}}};function Rt(){let i="X-SignalR-User-Agent";return ge.isNode&&(i="User-Agent"),[i,Fh(Vh,Uh(),Lh(),Bh())]}function Fh(i,e,t,n){let o="Microsoft SignalR/",c=i.split(".");return o+=`${c[0]}.${c[1]}`,o+=` (${i}; `,e&&e!==""?o+=`${e}; `:o+="Unknown OS; ",o+=`${t}`,n?o+=`; ${n}`:o+="; Unknown Runtime Version",o+=")",o}function Uh(){if(ge.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function Bh(){if(ge.isNode)return process.versions.node}function Lh(){return ge.isNode?"NodeJS":"Browser"}function fo(i){return i.stack?i.stack:i.message?i.message:`${i}`}function Fl(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var go=class extends At{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||ge.isNode){let t=typeof __webpack_require__=="function"?__non_webpack_require__:Vn;this._jar=new(t("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=t("node-fetch"):this._fetchType=fetch,this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Fl());if(typeof AbortController>"u"){let t=typeof __webpack_require__=="function"?__non_webpack_require__:Vn;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}send(e){return V(this,null,function*(){if(e.abortSignal&&e.abortSignal.aborted)throw new Ve;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");let t=new this._abortControllerType,n;e.abortSignal&&(e.abortSignal.onabort=()=>{t.abort(),n=new Ve});let o=null;if(e.timeout){let O=e.timeout;o=setTimeout(()=>{t.abort(),this._logger.log(D.Warning,"Timeout from HTTP request."),n=new ln},O)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},Ct(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let c;try{c=yield this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:L({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:t.signal})}catch(O){throw n||(this._logger.log(D.Warning,`Error from HTTP request. ${O}.`),O)}finally{o&&clearTimeout(o),e.abortSignal&&(e.abortSignal.onabort=null)}if(!c.ok){let O=yield Ul(c,"text");throw new ct(O||c.statusText,c.status)}let _=yield Ul(c,e.responseType);return new ni(c.status,c.statusText,_)})}getCookieString(e){let t="";return ge.isNode&&this._jar&&this._jar.getCookies(e,(n,o)=>t=o.join("; ")),t}};function Ul(i,e){let t;switch(e){case"arraybuffer":t=i.arrayBuffer();break;case"text":t=i.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:t=i.text();break}return t}var _o=class extends At{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Ve):e.method?e.url?new Promise((t,n)=>{let o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(Ct(e.content)?o.setRequestHeader("Content-Type","application/octet-stream"):o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let c=e.headers;c&&Object.keys(c).forEach(p=>{o.setRequestHeader(p,c[p])}),e.responseType&&(o.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{o.abort(),n(new Ve)}),e.timeout&&(o.timeout=e.timeout),o.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),o.status>=200&&o.status<300?t(new ni(o.status,o.statusText,o.response||o.responseText)):n(new ct(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(D.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),n(new ct(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(D.Warning,"Timeout from HTTP request."),n(new ln)},o.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var yo=class extends At{constructor(e){if(super(),typeof fetch<"u"||ge.isNode)this._httpClient=new go(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new _o(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Ve):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}};var lt=class i{static write(e){return`${e}${i.RecordSeparator}`}static parse(e){if(e[e.length-1]!==i.RecordSeparator)throw new Error("Message is incomplete.");let t=e.split(i.RecordSeparator);return t.pop(),t}};lt.RecordSeparatorCode=30;lt.RecordSeparator=String.fromCharCode(lt.RecordSeparatorCode);var vo=class{writeHandshakeRequest(e){return lt.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,n;if(Ct(e)){let _=new Uint8Array(e),O=_.indexOf(lt.RecordSeparatorCode);if(O===-1)throw new Error("Message is incomplete.");let k=O+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(_.slice(0,k))),n=_.byteLength>k?_.slice(k).buffer:null}else{let _=e,O=_.indexOf(lt.RecordSeparator);if(O===-1)throw new Error("Message is incomplete.");let k=O+1;t=_.substring(0,k),n=_.length>k?_.substring(k):null}let o=lt.parse(t),c=JSON.parse(o[0]);if(c.type)throw new Error("Expected a handshake response from the server.");return[n,c]}};var X=function(i){return i[i.Invocation=1]="Invocation",i[i.StreamItem=2]="StreamItem",i[i.Completion=3]="Completion",i[i.StreamInvocation=4]="StreamInvocation",i[i.CancelInvocation=5]="CancelInvocation",i[i.Ping=6]="Ping",i[i.Close=7]="Close",i[i.Ack=8]="Ack",i[i.Sequence=9]="Sequence",i}(X||{});var bo=class{constructor(){this.observers=[]}next(e){for(let t of this.observers)t.next(e)}error(e){for(let t of this.observers)t.error&&t.error(e)}complete(){for(let e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new ho(this,e)}};var Co=class{constructor(e,t,n){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=t,this._bufferSize=n}_send(e){return V(this,null,function*(){let t=this._protocol.writeMessage(e),n=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let o=()=>{},c=()=>{};Ct(t)?this._bufferedByteCount+=t.byteLength:this._bufferedByteCount+=t.length,this._bufferedByteCount>=this._bufferSize&&(n=new Promise((p,_)=>{o=p,c=_})),this._messages.push(new Ks(t,this._totalMessageCount,o,c))}try{this._reconnectInProgress||(yield this._connection.send(t))}catch{this._disconnected()}yield n})}_ack(e){let t=-1;for(let n=0;n<this._messages.length;n++){let o=this._messages[n];if(o._id<=e.sequenceId)t=n,Ct(o._message)?this._bufferedByteCount-=o._message.byteLength:this._bufferedByteCount-=o._message.length,o._resolver();else if(this._bufferedByteCount<this._bufferSize)o._resolver();else break}t!==-1&&(this._messages=this._messages.slice(t+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==X.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;let t=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,t<=this._latestReceivedSequenceId?(t===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=t,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){return V(this,null,function*(){let e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;yield this._connection.send(this._protocol.writeMessage({type:X.Sequence,sequenceId:e}));let t=this._messages;for(let n of t)yield this._connection.send(n._message);this._reconnectInProgress=!1})}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(let t of this._messages)t._rejector(e)}_isInvocationMessage(e){switch(e.type){case X.Invocation:case X.StreamItem:case X.Completion:case X.StreamInvocation:case X.CancelInvocation:return!0;case X.Close:case X.Sequence:case X.Ping:case X.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(()=>V(this,null,function*(){try{this._reconnectInProgress||(yield this._connection.send(this._protocol.writeMessage({type:X.Ack,sequenceId:this._latestReceivedSequenceId})))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}},Ks=class{constructor(e,t,n,o){this._message=e,this._id=t,this._resolver=n,this._rejector=o}};var qh=30*1e3,jh=15*1e3,zh=1e5,de=function(i){return i.Disconnected="Disconnected",i.Connecting="Connecting",i.Connected="Connected",i.Disconnecting="Disconnecting",i.Reconnecting="Reconnecting",i}(de||{}),Wi=class i{static create(e,t,n,o,c,p,_){return new i(e,t,n,o,c,p,_)}constructor(e,t,n,o,c,p,_){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(D.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},me.isRequired(e,"connection"),me.isRequired(t,"logger"),me.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=c??qh,this.keepAliveIntervalInMilliseconds=p??jh,this._statefulReconnectBufferSize=_??zh,this._logger=t,this._protocol=n,this.connection=e,this._reconnectPolicy=o,this._handshakeProtocol=new vo,this.connection.onreceive=O=>this._processIncomingData(O),this.connection.onclose=O=>this._connectionClosed(O),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=de.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:X.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==de.Disconnected&&this._connectionState!==de.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return V(this,null,function*(){if(this._connectionState!==de.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=de.Connecting,this._logger.log(D.Debug,"Starting HubConnection.");try{yield this._startInternal(),ge.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=de.Connected,this._connectionStarted=!0,this._logger.log(D.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=de.Disconnected,this._logger.log(D.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})}_startInternal(){return V(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let e=new Promise((t,n)=>{this._handshakeResolver=t,this._handshakeRejecter=n});yield this.connection.start(this._protocol.transferFormat);try{let t=this._protocol.version;this.connection.features.reconnect||(t=1);let n={protocol:this._protocol.name,version:t};if(this._logger.log(D.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(n)),this._logger.log(D.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Co(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(t){throw this._logger.log(D.Debug,`Hub handshake failed with error '${t}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(t),t}})}stop(){return V(this,null,function*(){let e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield e}catch{}})}_stopInternal(e){if(this._connectionState===de.Disconnected)return this._logger.log(D.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===de.Disconnecting)return this._logger.log(D.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;let t=this._connectionState;return this._connectionState=de.Disconnecting,this._logger.log(D.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(D.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(t===de.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Ve("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}_sendCloseMessage(){return V(this,null,function*(){try{yield this._sendWithProtocol(this._createCloseMessage())}catch{}})}stream(e,...t){let[n,o]=this._replaceStreamingParams(t),c=this._createStreamInvocation(e,t,o),p,_=new bo;return _.cancelCallback=()=>{let O=this._createCancelInvocation(c.invocationId);return delete this._callbacks[c.invocationId],p.then(()=>this._sendWithProtocol(O))},this._callbacks[c.invocationId]=(O,k)=>{if(k){_.error(k);return}else O&&(O.type===X.Completion?O.error?_.error(new Error(O.error)):_.complete():_.next(O.item))},p=this._sendWithProtocol(c).catch(O=>{_.error(O),delete this._callbacks[c.invocationId]}),this._launchStreams(n,p),_}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){let[n,o]=this._replaceStreamingParams(t),c=this._sendWithProtocol(this._createInvocation(e,t,!0,o));return this._launchStreams(n,c),c}invoke(e,...t){let[n,o]=this._replaceStreamingParams(t),c=this._createInvocation(e,t,!1,o);return new Promise((_,O)=>{this._callbacks[c.invocationId]=(H,ae)=>{if(ae){O(ae);return}else H&&(H.type===X.Completion?H.error?O(new Error(H.error)):_(H.result):O(new Error(`Unexpected message type: ${H.type}`)))};let k=this._sendWithProtocol(c).catch(H=>{O(H),delete this._callbacks[c.invocationId]});this._launchStreams(n,k)})}on(e,t){!e||!t||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(t)===-1&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();let n=this._methods[e];if(n)if(t){let o=n.indexOf(t);o!==-1&&(n.splice(o,1),n.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){let t=this._protocol.parseMessages(e,this._logger);for(let n of t)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(n)))switch(n.type){case X.Invocation:this._invokeClientMethod(n).catch(o=>{this._logger.log(D.Error,`Invoke client method threw error: ${fo(o)}`)});break;case X.StreamItem:case X.Completion:{let o=this._callbacks[n.invocationId];if(o){n.type===X.Completion&&delete this._callbacks[n.invocationId];try{o(n)}catch(c){this._logger.log(D.Error,`Stream callback threw error: ${fo(c)}`)}}break}case X.Ping:break;case X.Close:{this._logger.log(D.Information,"Close message received from server.");let o=n.error?new Error("Server returned an error on close: "+n.error):void 0;n.allowReconnect===!0?this.connection.stop(o):this._stopPromise=this._stopInternal(o);break}case X.Ack:this._messageBuffer&&this._messageBuffer._ack(n);break;case X.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(n);break;default:this._logger.log(D.Warning,`Invalid message type: ${n.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,n;try{[n,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(o){let c="Error parsing handshake response: "+o;this._logger.log(D.Error,c);let p=new Error(c);throw this._handshakeRejecter(p),p}if(t.error){let o="Server returned handshake error: "+t.error;this._logger.log(D.Error,o);let c=new Error(o);throw this._handshakeRejecter(c),c}else this._logger.log(D.Debug,"Server handshake complete.");return this._handshakeResolver(),n}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(()=>V(this,null,function*(){if(this._connectionState===de.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(e){return V(this,null,function*(){let t=e.target.toLowerCase(),n=this._methods[t];if(!n){this._logger.log(D.Warning,`No client method with the name '${t}' found.`),e.invocationId&&(this._logger.log(D.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}let o=n.slice(),c=!!e.invocationId,p,_,O;for(let k of o)try{let H=p;p=yield k.apply(this,e.arguments),c&&p&&H&&(this._logger.log(D.Error,`Multiple results provided for '${t}'. Sending error to server.`),O=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),_=void 0}catch(H){_=H,this._logger.log(D.Error,`A callback for the method '${t}' threw error '${H}'.`)}O?yield this._sendWithProtocol(O):c?(_?O=this._createCompletionMessage(e.invocationId,`${_}`,null):p!==void 0?O=this._createCompletionMessage(e.invocationId,null,p):(this._logger.log(D.Warning,`No result given for '${t}' method and invocation ID '${e.invocationId}'.`),O=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(O)):p&&this._logger.log(D.Error,`Result given for '${t}' method but server is not expecting a result.`)})}_connectionClosed(e){this._logger.log(D.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Ve("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===de.Disconnecting?this._completeClose(e):this._connectionState===de.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===de.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=de.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),ge.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(D.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}_reconnect(e){return V(this,null,function*(){let t=Date.now(),n=0,o=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),c=this._getNextRetryDelay(n++,0,o);if(c===null){this._logger.log(D.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=de.Reconnecting,e?this._logger.log(D.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(D.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(p=>p.apply(this,[e]))}catch(p){this._logger.log(D.Error,`An onreconnecting callback called with error '${e}' threw error '${p}'.`)}if(this._connectionState!==de.Reconnecting){this._logger.log(D.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;c!==null;){if(this._logger.log(D.Information,`Reconnect attempt number ${n} will start in ${c} ms.`),yield new Promise(p=>{this._reconnectDelayHandle=setTimeout(p,c)}),this._reconnectDelayHandle=void 0,this._connectionState!==de.Reconnecting){this._logger.log(D.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=de.Connected,this._logger.log(D.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(p=>p.apply(this,[this.connection.connectionId]))}catch(p){this._logger.log(D.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${p}'.`)}return}catch(p){if(this._logger.log(D.Information,`Reconnect attempt failed because of error '${p}'.`),this._connectionState!==de.Reconnecting){this._logger.log(D.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===de.Disconnecting&&this._completeClose();return}o=p instanceof Error?p:new Error(p.toString()),c=this._getNextRetryDelay(n++,Date.now()-t,o)}}this._logger.log(D.Information,`Reconnect retries have been exhausted after ${Date.now()-t} ms and ${n} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(e,t,n){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:n})}catch(o){return this._logger.log(D.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${o}'.`),null}}_cancelCallbacksWithError(e){let t=this._callbacks;this._callbacks={},Object.keys(t).forEach(n=>{let o=t[n];try{o(null,e)}catch(c){this._logger.log(D.Error,`Stream 'error' callback called with '${e}' threw error: ${fo(c)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,n,o){if(n)return o.length!==0?{arguments:t,streamIds:o,target:e,type:X.Invocation}:{arguments:t,target:e,type:X.Invocation};{let c=this._invocationId;return this._invocationId++,o.length!==0?{arguments:t,invocationId:c.toString(),streamIds:o,target:e,type:X.Invocation}:{arguments:t,invocationId:c.toString(),target:e,type:X.Invocation}}}_launchStreams(e,t){if(e.length!==0){t||(t=Promise.resolve());for(let n in e)e[n].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n)))},error:o=>{let c;o instanceof Error?c=o.message:o&&o.toString?c=o.toString():c="Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(n,c)))},next:o=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(n,o)))}})}}_replaceStreamingParams(e){let t=[],n=[];for(let o=0;o<e.length;o++){let c=e[o];if(this._isObservable(c)){let p=this._invocationId;this._invocationId++,t[p]=c,n.push(p.toString()),e.splice(o,1)}}return[t,n]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,t,n){let o=this._invocationId;return this._invocationId++,n.length!==0?{arguments:t,invocationId:o.toString(),streamIds:n,target:e,type:X.StreamInvocation}:{arguments:t,invocationId:o.toString(),target:e,type:X.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:X.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:X.StreamItem}}_createCompletionMessage(e,t,n){return t?{error:t,invocationId:e,type:X.Completion}:{invocationId:e,result:n,type:X.Completion}}_createCloseMessage(){return{type:X.Close}}};var $h=[0,2e3,1e4,3e4,null],Hi=class{constructor(e){this._retryDelays=e!==void 0?[...e,null]:$h}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}};var In=(()=>{class i{}return i.Authorization="Authorization",i.Cookie="Cookie",i})();var xo=class extends At{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}send(e){return V(this,null,function*(){let t=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(t=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(e);let n=yield this._innerClient.send(e);return t&&n.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(e),yield this._innerClient.send(e)):n})}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[In.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[In.Authorization]&&delete e.headers[In.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}};var De=function(i){return i[i.None=0]="None",i[i.WebSockets=1]="WebSockets",i[i.ServerSentEvents=2]="ServerSentEvents",i[i.LongPolling=4]="LongPolling",i}(De||{}),Te=function(i){return i[i.Text=1]="Text",i[i.Binary=2]="Binary",i}(Te||{});var wo=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var Ki=class{get pollAborted(){return this._pollAbort.aborted}constructor(e,t,n){this._httpClient=e,this._logger=t,this._pollAbort=new wo,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}connect(e,t){return V(this,null,function*(){if(me.isRequired(e,"url"),me.isRequired(t,"transferFormat"),me.isIn(t,Te,"transferFormat"),this._url=e,this._logger.log(D.Trace,"(LongPolling transport) Connecting."),t===Te.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[n,o]=Rt(),c=L({[n]:o},this._options.headers),p={abortSignal:this._pollAbort.signal,headers:c,timeout:1e5,withCredentials:this._options.withCredentials};t===Te.Binary&&(p.responseType="arraybuffer");let _=`${e}&_=${Date.now()}`;this._logger.log(D.Trace,`(LongPolling transport) polling: ${_}.`);let O=yield this._httpClient.get(_,p);O.statusCode!==200?(this._logger.log(D.Error,`(LongPolling transport) Unexpected response code: ${O.statusCode}.`),this._closeError=new ct(O.statusText||"",O.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,p)})}_poll(e,t){return V(this,null,function*(){try{for(;this._running;)try{let n=`${e}&_=${Date.now()}`;this._logger.log(D.Trace,`(LongPolling transport) polling: ${n}.`);let o=yield this._httpClient.get(n,t);o.statusCode===204?(this._logger.log(D.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):o.statusCode!==200?(this._logger.log(D.Error,`(LongPolling transport) Unexpected response code: ${o.statusCode}.`),this._closeError=new ct(o.statusText||"",o.statusCode),this._running=!1):o.content?(this._logger.log(D.Trace,`(LongPolling transport) data received. ${un(o.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(o.content)):this._logger.log(D.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(n){this._running?n instanceof ln?this._logger.log(D.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=n,this._running=!1):this._logger.log(D.Trace,`(LongPolling transport) Poll errored after shutdown: ${n.message}`)}}finally{this._logger.log(D.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(e){return V(this,null,function*(){return this._running?mo(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return V(this,null,function*(){this._logger.log(D.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(D.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let e={},[t,n]=Rt();e[t]=n;let o={headers:L(L({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},c;try{yield this._httpClient.delete(this._url,o)}catch(p){c=p}c?c instanceof ct&&(c.statusCode===404?this._logger.log(D.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(D.Trace,`(LongPolling transport) Error sending a DELETE request: ${c}`)):this._logger.log(D.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(D.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(D.Trace,e),this.onclose(this._closeError)}}};var So=class{constructor(e,t,n,o){this._httpClient=e,this._accessToken=t,this._logger=n,this._options=o,this.onreceive=null,this.onclose=null}connect(e,t){return V(this,null,function*(){return me.isRequired(e,"url"),me.isRequired(t,"transferFormat"),me.isIn(t,Te,"transferFormat"),this._logger.log(D.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((n,o)=>{let c=!1;if(t!==Te.Text){o(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let p;if(ge.isBrowser||ge.isWebWorker)p=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{let _=this._httpClient.getCookieString(e),O={};O.Cookie=_;let[k,H]=Rt();O[k]=H,p=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:L(L({},O),this._options.headers)})}try{p.onmessage=_=>{if(this.onreceive)try{this._logger.log(D.Trace,`(SSE transport) data received. ${un(_.data,this._options.logMessageContent)}.`),this.onreceive(_.data)}catch(O){this._close(O);return}},p.onerror=_=>{c?this._close():o(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},p.onopen=()=>{this._logger.log(D.Information,`SSE connected to ${this._url}`),this._eventSource=p,c=!0,n()}}catch(_){o(_);return}})})}send(e){return V(this,null,function*(){return this._eventSource?mo(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}};var Eo=class{constructor(e,t,n,o,c,p){this._logger=n,this._accessTokenFactory=t,this._logMessageContent=o,this._webSocketConstructor=c,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=p}connect(e,t){return V(this,null,function*(){me.isRequired(e,"url"),me.isRequired(t,"transferFormat"),me.isIn(t,Te,"transferFormat"),this._logger.log(D.Trace,"(WebSockets transport) Connecting.");let n;return this._accessTokenFactory&&(n=yield this._accessTokenFactory()),new Promise((o,c)=>{e=e.replace(/^http/,"ws");let p,_=this._httpClient.getCookieString(e),O=!1;if(ge.isNode||ge.isReactNative){let k={},[H,ae]=Rt();k[H]=ae,n&&(k[In.Authorization]=`Bearer ${n}`),_&&(k[In.Cookie]=_),p=new this._webSocketConstructor(e,void 0,{headers:L(L({},k),this._headers)})}else n&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);p||(p=new this._webSocketConstructor(e)),t===Te.Binary&&(p.binaryType="arraybuffer"),p.onopen=k=>{this._logger.log(D.Information,`WebSocket connected to ${e}.`),this._webSocket=p,O=!0,o()},p.onerror=k=>{let H=null;typeof ErrorEvent<"u"&&k instanceof ErrorEvent?H=k.error:H="There was an error with the transport",this._logger.log(D.Information,`(WebSockets transport) ${H}.`)},p.onmessage=k=>{if(this._logger.log(D.Trace,`(WebSockets transport) data received. ${un(k.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(k.data)}catch(H){this._close(H);return}},p.onclose=k=>{if(O)this._close(k);else{let H=null;typeof ErrorEvent<"u"&&k instanceof ErrorEvent?H=k.error:H="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",c(new Error(H))}}})})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(D.Trace,`(WebSockets transport) sending data. ${un(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(D.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}};var Bl=100,Io=class{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,me.isRequired(e,"url"),this._logger=Nl(t.logger),this.baseUrl=this._resolveUrl(e),t=t||{},t.logMessageContent=t.logMessageContent===void 0?!1:t.logMessageContent,typeof t.withCredentials=="boolean"||t.withCredentials===void 0)t.withCredentials=t.withCredentials===void 0?!0:t.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.timeout=t.timeout===void 0?100*1e3:t.timeout;let n=null,o=null;if(ge.isNode&&typeof Vn<"u"){let c=typeof __webpack_require__=="function"?__non_webpack_require__:Vn;n=c("ws"),o=c("eventsource")}!ge.isNode&&typeof WebSocket<"u"&&!t.WebSocket?t.WebSocket=WebSocket:ge.isNode&&!t.WebSocket&&n&&(t.WebSocket=n),!ge.isNode&&typeof EventSource<"u"&&!t.EventSource?t.EventSource=EventSource:ge.isNode&&!t.EventSource&&typeof o<"u"&&(t.EventSource=o),this._httpClient=new xo(t.httpClient||new yo(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}start(e){return V(this,null,function*(){if(e=e||Te.Binary,me.isIn(e,Te,"transferFormat"),this._logger.log(D.Debug,`Starting connection with transfer format '${Te[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(D.Error,t),yield this._stopPromise,Promise.reject(new Ve(t))}else if(this._connectionState!=="Connected"){let t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(D.Error,t),Promise.reject(new Ve(t))}this._connectionStarted=!0})}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Qs(this.transport)),this._sendQueue.send(e))}stop(e){return V(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(D.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(D.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),yield this._stopInternal(e),yield this._stopPromise})}_stopInternal(e){return V(this,null,function*(){this._stopError=e;try{yield this._startInternalPromise}catch{}if(this.transport){try{yield this.transport.stop()}catch(t){this._logger.log(D.Error,`HttpConnection.transport.stop() threw error '${t}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(D.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(e){return V(this,null,function*(){let t=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===De.WebSockets)this.transport=this._constructTransport(De.WebSockets),yield this._startTransport(t,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let n=null,o=0;do{if(n=yield this._getNegotiationResponse(t),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Ve("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(t=n.url),n.accessToken){let c=n.accessToken;this._accessTokenFactory=()=>c,this._httpClient._accessToken=c,this._httpClient._accessTokenFactory=void 0}o++}while(n.url&&o<Bl);if(o===Bl&&n.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(t,this._options.transport,n,e)}this.transport instanceof Ki&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(D.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(n){return this._logger.log(D.Error,"Failed to start the connection: "+n),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(n)}})}_getNegotiationResponse(e){return V(this,null,function*(){let t={},[n,o]=Rt();t[n]=o;let c=this._resolveNegotiateUrl(e);this._logger.log(D.Debug,`Sending negotiation request: ${c}.`);try{let p=yield this._httpClient.post(c,{content:"",headers:L(L({},t),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(p.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${p.statusCode}'`));let _=JSON.parse(p.content);return(!_.negotiateVersion||_.negotiateVersion<1)&&(_.connectionToken=_.connectionId),_.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Gi("Client didn't negotiate Stateful Reconnect but the server did.")):_}catch(p){let _="Failed to complete negotiation with the server: "+p;return p instanceof ct&&p.statusCode===404&&(_=_+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(D.Error,_),Promise.reject(new Gi(_))}})}_createConnectUrl(e,t){return t?e+(e.indexOf("?")===-1?"?":"&")+`id=${t}`:e}_createTransport(e,t,n,o){return V(this,null,function*(){let c=this._createConnectUrl(e,n.connectionToken);if(this._isITransport(t)){this._logger.log(D.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,yield this._startTransport(c,o),this.connectionId=n.connectionId;return}let p=[],_=n.availableTransports||[],O=n;for(let k of _){let H=this._resolveTransportOrError(k,t,o,O?.useStatefulReconnect===!0);if(H instanceof Error)p.push(`${k.transport} failed:`),p.push(H);else if(this._isITransport(H)){if(this.transport=H,!O){try{O=yield this._getNegotiationResponse(e)}catch(ae){return Promise.reject(ae)}c=this._createConnectUrl(e,O.connectionToken)}try{yield this._startTransport(c,o),this.connectionId=O.connectionId;return}catch(ae){if(this._logger.log(D.Error,`Failed to start the transport '${k.transport}': ${ae}`),O=void 0,p.push(new uo(`${k.transport} failed: ${ae}`,De[k.transport])),this._connectionState!=="Connecting"){let se="Failed to select transport before stop() was called.";return this._logger.log(D.Debug,se),Promise.reject(new Ve(se))}}}}return p.length>0?Promise.reject(new po(`Unable to connect to the server with any of the available transports. ${p.join(" ")}`,p)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(e){switch(e){case De.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Eo(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case De.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new So(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case De.LongPolling:return new Ki(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=n=>V(this,null,function*(){let o=!1;if(this.features.reconnect)try{this.features.disconnected(),yield this.transport.connect(e,t),yield this.features.resend()}catch{o=!0}else{this._stopConnection(n);return}o&&this._stopConnection(n)}):this.transport.onclose=n=>this._stopConnection(n),this.transport.connect(e,t)}_resolveTransportOrError(e,t,n,o){let c=De[e.transport];if(c==null)return this._logger.log(D.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(Gh(t,c))if(e.transferFormats.map(_=>Te[_]).indexOf(n)>=0){if(c===De.WebSockets&&!this._options.WebSocket||c===De.ServerSentEvents&&!this._options.EventSource)return this._logger.log(D.Debug,`Skipping transport '${De[c]}' because it is not supported in your environment.'`),new co(`'${De[c]}' is not supported in your environment.`,c);this._logger.log(D.Debug,`Selecting transport '${De[c]}'.`);try{return this.features.reconnect=c===De.WebSockets?o:void 0,this._constructTransport(c)}catch(_){return _}}else return this._logger.log(D.Debug,`Skipping transport '${De[c]}' because it does not support the requested transfer format '${Te[n]}'.`),new Error(`'${De[c]}' does not support ${Te[n]}.`);else return this._logger.log(D.Debug,`Skipping transport '${De[c]}' because it was disabled by the client.`),new lo(`'${De[c]}' is disabled by the client.`,c)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(D.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(D.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(D.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(D.Error,`Connection disconnected with error '${e}'.`):this._logger.log(D.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(D.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(D.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!ge.isBrowser)throw new Error(`Cannot resolve '${e}'.`);let t=window.document.createElement("a");return t.href=e,this._logger.log(D.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){let t=new URL(e);t.pathname.endsWith("/")?t.pathname+="negotiate":t.pathname+="/negotiate";let n=new URLSearchParams(t.searchParams);return n.has("negotiateVersion")||n.append("negotiateVersion",this._negotiateVersion.toString()),n.has("useStatefulReconnect")?n.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&n.append("useStatefulReconnect","true"),t.search=n.toString(),t.toString()}};function Gh(i,e){return!i||(e&i)!==0}var Qs=class i{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new ii,this._transportResult=new ii,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new ii),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}_sendLoop(){return V(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new ii;let e=this._transportResult;this._transportResult=void 0;let t=typeof this._buffer[0]=="string"?this._buffer.join(""):i._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(t),e.resolve()}catch(n){e.reject(n)}}})}static _concatBuffers(e){let t=e.map(c=>c.byteLength).reduce((c,p)=>c+p),n=new Uint8Array(t),o=0;for(let c of e)n.set(new Uint8Array(c),o),o+=c.byteLength;return n.buffer}},ii=class{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}};var Wh="json",Po=class{constructor(){this.name=Wh,this.version=2,this.transferFormat=Te.Text}parseMessages(e,t){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];t===null&&(t=Ot.instance);let n=lt.parse(e),o=[];for(let c of n){let p=JSON.parse(c);if(typeof p.type!="number")throw new Error("Invalid payload.");switch(p.type){case X.Invocation:this._isInvocationMessage(p);break;case X.StreamItem:this._isStreamItemMessage(p);break;case X.Completion:this._isCompletionMessage(p);break;case X.Ping:break;case X.Close:break;case X.Ack:this._isAckMessage(p);break;case X.Sequence:this._isSequenceMessage(p);break;default:t.log(D.Information,"Unknown message type '"+p.type+"' ignored.");continue}o.push(p)}return o}writeMessage(e){return lt.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,t){if(typeof e!="string"||e==="")throw new Error(t)}};var Hh={trace:D.Trace,debug:D.Debug,info:D.Information,information:D.Information,warn:D.Warning,warning:D.Warning,error:D.Error,critical:D.Critical,none:D.None};function Kh(i){let e=Hh[i.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${i}`)}var Qi=class{configureLogging(e){if(me.isRequired(e,"logging"),Qh(e))this.logger=e;else if(typeof e=="string"){let t=Kh(e);this.logger=new En(t)}else this.logger=new En(e);return this}withUrl(e,t){return me.isRequired(e,"url"),me.isNotEmpty(e,"url"),this.url=e,typeof t=="object"?this.httpConnectionOptions=L(L({},this.httpConnectionOptions),t):this.httpConnectionOptions=ue(L({},this.httpConnectionOptions),{transport:t}),this}withHubProtocol(e){return me.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Hi(e):this.reconnectPolicy=e:this.reconnectPolicy=new Hi,this}withServerTimeout(e){return me.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return me.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){let e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let t=new Io(this.url,e);return Wi.create(t,this.logger||Ot.instance,this.protocol||new Po,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}};function Qh(i){return i.log!==void 0}var ri=class i{hubConnection=null;connectionStateSubject=new ft(!1);reconnectAttempts=0;maxReconnectAttempts=5;reconnectInterval=2e3;connectionState$=this.connectionStateSubject.asObservable();constructor(){}connect(e){return V(this,null,function*(){if(!e){console.warn("Cannot connect to SignalR without userId");return}try{this.hubConnection||this.createConnection(),this.hubConnection?.state===de.Disconnected&&(yield this.hubConnection.start(),console.log("SignalR connected successfully"),yield this.hubConnection.invoke("Join",e),console.log(`Joined SignalR group for user: ${e}`),this.connectionStateSubject.next(!0),this.reconnectAttempts=0)}catch(t){console.error("Failed to connect to SignalR:",t),this.connectionStateSubject.next(!1),this.scheduleReconnect(e)}})}createConnection(){this.hubConnection=new Qi().withUrl("http://localhost:5241/hubs/conversations",{withCredentials:!0,skipNegotiation:!1}).configureLogging(D.Information).withAutomaticReconnect([0,2e3,1e4,3e4]).build(),this.setupConnectionEventHandlers()}setupConnectionEventHandlers(){this.hubConnection&&(this.hubConnection.onreconnecting(e=>{console.log("SignalR reconnecting...",e),this.connectionStateSubject.next(!1)}),this.hubConnection.onreconnected(e=>{console.log("SignalR reconnected with connection ID:",e),this.connectionStateSubject.next(!0),this.reconnectAttempts=0}),this.hubConnection.onclose(e=>{console.log("SignalR connection closed:",e),this.connectionStateSubject.next(!1)}))}scheduleReconnect(e){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached. Giving up.");return}this.reconnectAttempts++;let t=this.reconnectInterval*Math.pow(2,this.reconnectAttempts-1);console.log(`Scheduling reconnection attempt ${this.reconnectAttempts} in ${t}ms`),setTimeout(()=>{this.connect(e)},t)}disconnect(){return V(this,null,function*(){if(this.hubConnection)try{yield this.hubConnection.stop(),console.log("SignalR disconnected"),this.connectionStateSubject.next(!1)}catch(e){console.error("Error disconnecting SignalR:",e)}})}on(e,t){this.hubConnection?this.hubConnection.on(e,t):console.warn(`Cannot register listener for ${e}: connection not established`)}off(e){this.hubConnection&&this.hubConnection.off(e)}invoke(e,...t){return V(this,null,function*(){if(this.hubConnection?.state===de.Connected)try{return yield this.hubConnection.invoke(e,...t)}catch(n){throw console.error(`Error invoking ${e}:`,n),n}else{let n=`Cannot invoke ${e}: SignalR not connected`;throw console.warn(n),new Error(n)}})}send(e,...t){return V(this,null,function*(){if(this.hubConnection?.state===de.Connected)try{yield this.hubConnection.send(e,...t)}catch(n){throw console.error(`Error sending ${e}:`,n),n}else{let n=`Cannot send ${e}: SignalR not connected`;throw console.warn(n),new Error(n)}})}isConnected(){return this.hubConnection?.state===de.Connected}getConnectionState(){return this.hubConnection?.state||de.Disconnected}getConnectionId(){return this.hubConnection?.connectionId||null}notifyNewMessage(e,t){return V(this,null,function*(){yield this.invoke("NotifyNewMessage",e,t)})}notifyNewRequest(e,t){return V(this,null,function*(){yield this.invoke("NotifyNewRequest",e,t)})}notifyNewReply(e,t){return V(this,null,function*(){yield this.invoke("NotifyNewReply",e,t)})}joinGroup(e){return V(this,null,function*(){yield this.invoke("JoinGroup",e)})}leaveGroup(e){return V(this,null,function*(){yield this.invoke("LeaveGroup",e)})}onNewMessage(e){this.on("ReceiveNewMessage",e)}onMessageRead(e){this.on("ReceiveMessageRead",e)}onNewRequest(e){this.on("ReceiveNewRequest",e)}onRequestStatusChanged(e){this.on("ReceiveNewRequestAccepted",e),this.on("ReceiveNewRequestRejected",e),this.on("ReceiveNewRequestCancelled",e)}onNewReply(e){this.on("ReceiveNewReply",e)}onReplyStatusChanged(e){this.on("ReceiveNewReplyAccepted",e),this.on("ReceiveNewReplyRejected",e),this.on("ReceiveNewReplyCancelled",e)}removeMessageListeners(){this.off("ReceiveNewMessage"),this.off("ReceiveMessageRead")}removeRequestListeners(){this.off("ReceiveNewRequest"),this.off("ReceiveNewRequestAccepted"),this.off("ReceiveNewRequestRejected"),this.off("ReceiveNewRequestCancelled")}removeReplyListeners(){this.off("ReceiveNewReply"),this.off("ReceiveNewReplyAccepted"),this.off("ReceiveNewReplyRejected"),this.off("ReceiveNewReplyCancelled")}removeAllListeners(){this.removeMessageListeners(),this.removeRequestListeners(),this.removeReplyListeners()}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var oi=class i{constructor(e){this.signalRService=e}notificationSubject=new rt;conversationUpdateSubject=new rt;notification$=this.notificationSubject.asObservable();conversationUpdate$=this.conversationUpdateSubject.asObservable();setupListeners(e){this.signalRService.removeAllListeners(),this.signalRService.onNewMessage(t=>{this.handleNewMessageReceived(t,e)}),this.signalRService.onMessageRead(t=>{this.handleMessageRead(t)}),this.signalRService.onNewRequest(t=>{this.handleNewRequestReceived(t)}),this.signalRService.on("ReceiveRequestAccepted",t=>{this.handleRequestAccepted(t)}),this.signalRService.on("ReceiveRequestRejected",t=>{this.handleRequestRejected(t)}),this.signalRService.on("ReceiveRequestCancelled",t=>{this.handleRequestCancelled(t)}),this.signalRService.onNewReply(t=>{this.handleNewReplyReceived(t)}),this.signalRService.on("ReceiveReplyAccepted",t=>{this.handleReplyAccepted(t)}),this.signalRService.on("ReceiveReplyRejected",t=>{this.handleReplyRejected(t)}),this.signalRService.on("ReceiveReplyCancelled",t=>{this.handleReplyCancelled(t)})}sendMessageNotification(e,t,n,o,c){return V(this,null,function*(){try{let p={MessageId:t,SenderId:c,RecipientId:e,Content:n,SenderName:o,SentAt:new Date,Message:"You have a new message"};yield this.signalRService.notifyNewMessage(e,p)}catch(p){console.error("Failed to send message notification:",p)}})}cleanup(){this.signalRService.removeAllListeners()}handleNewMessageReceived(e,t){let{SenderId:n,Content:o,SenderName:c}=e;if(n!==t){let p=o.length>50?o.substring(0,50)+"...":o;this.notificationSubject.next({type:"info",message:`New message from ${c}: ${p}`})}this.conversationUpdateSubject.next({type:"refresh-both"})}handleMessageRead(e){this.conversationUpdateSubject.next({type:"refresh-current"})}handleNewRequestReceived(e){let{SenderName:t}=e;this.notificationSubject.next({type:"info",message:`New service request from ${t}`}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleRequestAccepted(e){this.notificationSubject.next({type:"success",message:"Your service request has been accepted!"}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleRequestRejected(e){this.notificationSubject.next({type:"info",message:"Your service request has been declined."}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleRequestCancelled(e){this.notificationSubject.next({type:"warning",message:"A service request has been cancelled."}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleNewReplyReceived(e){let{SpecialistName:t,Price:n,StartDate:o}=e,c=new Date(o).toLocaleDateString();this.notificationSubject.next({type:"info",message:`New offer from ${t}: $${n} (${c})`}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleReplyAccepted(e){this.notificationSubject.next({type:"success",message:"Great! Your service offer has been accepted."}),this.notificationSubject.next({type:"info",message:"Payment processing has begun."}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleReplyRejected(e){this.notificationSubject.next({type:"info",message:"Your service offer has been declined."}),this.conversationUpdateSubject.next({type:"refresh-both"})}handleReplyCancelled(e){this.notificationSubject.next({type:"warning",message:"A service offer has been cancelled."}),this.conversationUpdateSubject.next({type:"refresh-both"})}static \u0275fac=function(t){return new(t||i)(Z(ri))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var jl=function(i){let e=[],t=0;for(let n=0;n<i.length;n++){let o=i.charCodeAt(n);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Jh=function(i){let e=[],t=0,n=0;for(;t<i.length;){let o=i[t++];if(o<128)e[n++]=String.fromCharCode(o);else if(o>191&&o<224){let c=i[t++];e[n++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){let c=i[t++],p=i[t++],_=i[t++],O=((o&7)<<18|(c&63)<<12|(p&63)<<6|_&63)-65536;e[n++]=String.fromCharCode(55296+(O>>10)),e[n++]=String.fromCharCode(56320+(O&1023))}else{let c=i[t++],p=i[t++];e[n++]=String.fromCharCode((o&15)<<12|(c&63)<<6|p&63)}}return e.join("")},Yh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<i.length;o+=3){let c=i[o],p=o+1<i.length,_=p?i[o+1]:0,O=o+2<i.length,k=O?i[o+2]:0,H=c>>2,ae=(c&3)<<4|_>>4,se=(_&15)<<2|k>>6,dt=k&63;O||(dt=64,p||(se=64)),n.push(t[H],t[ae],t[se],t[dt])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(jl(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Jh(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<i.length;){let c=t[i.charAt(o++)],_=o<i.length?t[i.charAt(o)]:0;++o;let k=o<i.length?t[i.charAt(o)]:64;++o;let ae=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||_==null||k==null||ae==null)throw new Js;let se=c<<2|_>>4;if(n.push(se),k!==64){let dt=_<<4&240|k>>2;if(n.push(dt),ae!==64){let pe=k<<6&192|ae;n.push(pe)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},Js=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Xh=function(i){let e=jl(i);return Yh.encodeByteArray(e,!0)},Ys=function(i){return Xh(i).replace(/\./g,"")};function Xs(){try{return typeof indexedDB=="object"}catch{return!1}}function zl(){return new Promise((i,e)=>{try{let t=!0,n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}var Zh="FirebaseError",$t=class i extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Zh,Object.setPrototypeOf(this,i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ji.prototype.create)}},Ji=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],p=c?em(c,n):"Error",_=`${this.serviceName}: ${p} (${o}).`;return new $t(o,_,n)}};function em(i,e){return i.replace(tm,(t,n)=>{let o=e[n];return o!=null?String(o):`<${n}?>`})}var tm=/\{\$([^}]+)}/g;var Z1=4*60*60*1e3;var dn=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var nm=[],_e=function(i){return i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT",i}(_e||{}),im={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},rm=_e.INFO,om={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},sm=(i,e,...t)=>{if(e<i.logLevel)return;let n=new Date().toISOString(),o=om[e];if(o)console[o](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},si=class{constructor(e){this.name=e,this._logLevel=rm,this._logHandler=sm,this._userLogHandler=null,nm.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?im[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}};var am=(i,e)=>e.some(t=>i instanceof t),$l,Gl;function cm(){return $l||($l=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lm(){return Gl||(Gl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Wl=new WeakMap,ea=new WeakMap,Hl=new WeakMap,Zs=new WeakMap,na=new WeakMap;function um(i){let e=new Promise((t,n)=>{let o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",p)},c=()=>{t(kt(i.result)),o()},p=()=>{n(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&Wl.set(t,i)}).catch(()=>{}),na.set(e,i),e}function dm(i){if(ea.has(i))return;let e=new Promise((t,n)=>{let o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",p),i.removeEventListener("abort",p)},c=()=>{t(),o()},p=()=>{n(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",p),i.addEventListener("abort",p)});ea.set(i,e)}var ta={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return ea.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Hl.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return kt(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Kl(i){ta=i(ta)}function pm(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let n=i.call(To(this),e,...t);return Hl.set(n,e.sort?e.sort():[e]),kt(n)}:lm().includes(i)?function(...e){return i.apply(To(this),e),kt(Wl.get(this))}:function(...e){return kt(i.apply(To(this),e))}}function hm(i){return typeof i=="function"?pm(i):(i instanceof IDBTransaction&&dm(i),am(i,cm())?new Proxy(i,ta):i)}function kt(i){if(i instanceof IDBRequest)return um(i);if(Zs.has(i))return Zs.get(i);let e=hm(i);return e!==i&&(Zs.set(i,e),na.set(e,i)),e}var To=i=>na.get(i);function Jl(i,e,{blocked:t,upgrade:n,blocking:o,terminated:c}={}){let p=indexedDB.open(i,e),_=kt(p);return n&&p.addEventListener("upgradeneeded",O=>{n(kt(p.result),O.oldVersion,O.newVersion,kt(p.transaction),O)}),t&&p.addEventListener("blocked",O=>t(O.oldVersion,O.newVersion,O)),_.then(O=>{c&&O.addEventListener("close",()=>c()),o&&O.addEventListener("versionchange",k=>o(k.oldVersion,k.newVersion,k))}).catch(()=>{}),_}var mm=["get","getKey","getAll","getAllKeys","count"],fm=["put","add","delete","clear"],ia=new Map;function Ql(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(ia.get(e))return ia.get(e);let t=e.replace(/FromIndex$/,""),n=e!==t,o=fm.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(o||mm.includes(t)))return;let c=function(p,..._){return V(this,null,function*(){let O=this.transaction(p,o?"readwrite":"readonly"),k=O.store;return n&&(k=k.index(_.shift())),(yield Promise.all([k[t](..._),o&&O.done]))[0]})};return ia.set(e,c),c}Kl(i=>ue(L({},i),{get:(e,t,n)=>Ql(e,t)||i.get(e,t,n),has:(e,t)=>!!Ql(e,t)||i.has(e,t)}));var oa=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_m(t)){let n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}};function _m(i){let e=i.getComponent();return e?.type==="VERSION"}var sa="@firebase/app",Yl="0.10.15";var Gt=new si("@firebase/app"),ym="@firebase/app-compat",vm="@firebase/analytics-compat",bm="@firebase/analytics",Cm="@firebase/app-check-compat",xm="@firebase/app-check",wm="@firebase/auth",Sm="@firebase/auth-compat",Em="@firebase/database",Im="@firebase/data-connect",Pm="@firebase/database-compat",Tm="@firebase/functions",Mm="@firebase/functions-compat",Dm="@firebase/installations",Am="@firebase/installations-compat",Om="@firebase/messaging",Rm="@firebase/messaging-compat",km="@firebase/performance",Vm="@firebase/performance-compat",Nm="@firebase/remote-config",Fm="@firebase/remote-config-compat",Um="@firebase/storage",Bm="@firebase/storage-compat",Lm="@firebase/firestore",qm="@firebase/vertexai",jm="@firebase/firestore-compat",zm="firebase",$m="11.0.1";var Gm={[sa]:"fire-core",[ym]:"fire-core-compat",[bm]:"fire-analytics",[vm]:"fire-analytics-compat",[xm]:"fire-app-check",[Cm]:"fire-app-check-compat",[wm]:"fire-auth",[Sm]:"fire-auth-compat",[Em]:"fire-rtdb",[Im]:"fire-data-connect",[Pm]:"fire-rtdb-compat",[Tm]:"fire-fn",[Mm]:"fire-fn-compat",[Dm]:"fire-iid",[Am]:"fire-iid-compat",[Om]:"fire-fcm",[Rm]:"fire-fcm-compat",[km]:"fire-perf",[Vm]:"fire-perf-compat",[Nm]:"fire-rc",[Fm]:"fire-rc-compat",[Um]:"fire-gcs",[Bm]:"fire-gcs-compat",[Lm]:"fire-fst",[jm]:"fire-fst-compat",[qm]:"fire-vertex","fire-js":"fire-js",[zm]:"fire-js-all"};var Wm=new Map,Hm=new Map,Xl=new Map;function Zl(i,e){try{i.container.addComponent(e)}catch(t){Gt.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Yi(i){let e=i.name;if(Xl.has(e))return Gt.debug(`There were multiple attempts to register component ${e}.`),!1;Xl.set(e,i);for(let t of Wm.values())Zl(t,i);for(let t of Hm.values())Zl(t,i);return!0}var Km={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new Ji("app","Firebase",Km);var iu=$m;function ai(i,e,t){var n;let o=(n=Gm[i])!==null&&n!==void 0?n:i;t&&(o+=`-${t}`);let c=o.match(/\s|\//),p=e.match(/\s|\//);if(c||p){let _=[`Unable to register library "${o}" with version "${e}":`];c&&_.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&p&&_.push("and"),p&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gt.warn(_.join(" "));return}Yi(new dn(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}var Qm="firebase-heartbeat-database",Jm=1,Xi="firebase-heartbeat-store",ra=null;function ru(){return ra||(ra=Jl(Qm,Jm,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Xi)}catch(t){console.warn(t)}}}}).catch(i=>{throw la.create("idb-open",{originalErrorMessage:i.message})})),ra}function Ym(i){return V(this,null,function*(){try{let t=(yield ru()).transaction(Xi),n=yield t.objectStore(Xi).get(ou(i));return yield t.done,n}catch(e){if(e instanceof $t)Gt.warn(e.message);else{let t=la.create("idb-get",{originalErrorMessage:e?.message});Gt.warn(t.message)}}})}function eu(i,e){return V(this,null,function*(){try{let n=(yield ru()).transaction(Xi,"readwrite");yield n.objectStore(Xi).put(e,ou(i)),yield n.done}catch(t){if(t instanceof $t)Gt.warn(t.message);else{let n=la.create("idb-set",{originalErrorMessage:t?.message});Gt.warn(n.message)}}})}function ou(i){return`${i.name}!${i.options.appId}`}var Xm=1024,Zm=30*24*60*60*1e3,aa=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ca(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}triggerHeartbeat(){return V(this,null,function*(){var e,t;try{let o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=tu();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(p=>p.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(p=>{let _=new Date(p.date).valueOf();return Date.now()-_<=Zm}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Gt.warn(n)}})}getHeartbeatsHeader(){return V(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=tu(),{heartbeatsToSend:n,unsentEntries:o}=ef(this._heartbeatsCache.heartbeats),c=Ys(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Gt.warn(t),""}})}};function tu(){return new Date().toISOString().substring(0,10)}function ef(i,e=Xm){let t=[],n=i.slice();for(let o of i){let c=t.find(p=>p.agent===o.agent);if(c){if(c.dates.push(o.date),nu(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),nu(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}var ca=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return V(this,null,function*(){return Xs()?zl().then(()=>!0).catch(()=>!1):!1})}read(){return V(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Ym(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return V(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let o=yield this.read();return eu(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return V(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let o=yield this.read();return eu(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return})}};function nu(i){return Ys(JSON.stringify({version:2,heartbeats:i})).length}function tf(i){Yi(new dn("platform-logger",e=>new oa(e),"PRIVATE")),Yi(new dn("heartbeat",e=>new aa(e),"PRIVATE")),ai(sa,Yl,i),ai(sa,Yl,"esm2017"),ai("fire-js","")}tf("");var su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},au={};var ua,cu;(function(){var i;function e(S,g){function b(){}b.prototype=g.prototype,S.D=g.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(C,x,I){for(var v=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)v[Ft-2]=arguments[Ft];return g.prototype[x].apply(C,v)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,g,b){b||(b=0);var C=Array(16);if(typeof g=="string")for(var x=0;16>x;++x)C[x]=g.charCodeAt(b++)|g.charCodeAt(b++)<<8|g.charCodeAt(b++)<<16|g.charCodeAt(b++)<<24;else for(x=0;16>x;++x)C[x]=g[b++]|g[b++]<<8|g[b++]<<16|g[b++]<<24;g=S.g[0],b=S.g[1],x=S.g[2];var I=S.g[3],v=g+(I^b&(x^I))+C[0]+3614090360&4294967295;g=b+(v<<7&4294967295|v>>>25),v=I+(x^g&(b^x))+C[1]+3905402710&4294967295,I=g+(v<<12&4294967295|v>>>20),v=x+(b^I&(g^b))+C[2]+606105819&4294967295,x=I+(v<<17&4294967295|v>>>15),v=b+(g^x&(I^g))+C[3]+3250441966&4294967295,b=x+(v<<22&4294967295|v>>>10),v=g+(I^b&(x^I))+C[4]+4118548399&4294967295,g=b+(v<<7&4294967295|v>>>25),v=I+(x^g&(b^x))+C[5]+1200080426&4294967295,I=g+(v<<12&4294967295|v>>>20),v=x+(b^I&(g^b))+C[6]+2821735955&4294967295,x=I+(v<<17&4294967295|v>>>15),v=b+(g^x&(I^g))+C[7]+4249261313&4294967295,b=x+(v<<22&4294967295|v>>>10),v=g+(I^b&(x^I))+C[8]+1770035416&4294967295,g=b+(v<<7&4294967295|v>>>25),v=I+(x^g&(b^x))+C[9]+2336552879&4294967295,I=g+(v<<12&4294967295|v>>>20),v=x+(b^I&(g^b))+C[10]+4294925233&4294967295,x=I+(v<<17&4294967295|v>>>15),v=b+(g^x&(I^g))+C[11]+2304563134&4294967295,b=x+(v<<22&4294967295|v>>>10),v=g+(I^b&(x^I))+C[12]+1804603682&4294967295,g=b+(v<<7&4294967295|v>>>25),v=I+(x^g&(b^x))+C[13]+4254626195&4294967295,I=g+(v<<12&4294967295|v>>>20),v=x+(b^I&(g^b))+C[14]+2792965006&4294967295,x=I+(v<<17&4294967295|v>>>15),v=b+(g^x&(I^g))+C[15]+1236535329&4294967295,b=x+(v<<22&4294967295|v>>>10),v=g+(x^I&(b^x))+C[1]+4129170786&4294967295,g=b+(v<<5&4294967295|v>>>27),v=I+(b^x&(g^b))+C[6]+3225465664&4294967295,I=g+(v<<9&4294967295|v>>>23),v=x+(g^b&(I^g))+C[11]+643717713&4294967295,x=I+(v<<14&4294967295|v>>>18),v=b+(I^g&(x^I))+C[0]+3921069994&4294967295,b=x+(v<<20&4294967295|v>>>12),v=g+(x^I&(b^x))+C[5]+3593408605&4294967295,g=b+(v<<5&4294967295|v>>>27),v=I+(b^x&(g^b))+C[10]+38016083&4294967295,I=g+(v<<9&4294967295|v>>>23),v=x+(g^b&(I^g))+C[15]+3634488961&4294967295,x=I+(v<<14&4294967295|v>>>18),v=b+(I^g&(x^I))+C[4]+3889429448&4294967295,b=x+(v<<20&4294967295|v>>>12),v=g+(x^I&(b^x))+C[9]+568446438&4294967295,g=b+(v<<5&4294967295|v>>>27),v=I+(b^x&(g^b))+C[14]+3275163606&4294967295,I=g+(v<<9&4294967295|v>>>23),v=x+(g^b&(I^g))+C[3]+4107603335&4294967295,x=I+(v<<14&4294967295|v>>>18),v=b+(I^g&(x^I))+C[8]+1163531501&4294967295,b=x+(v<<20&4294967295|v>>>12),v=g+(x^I&(b^x))+C[13]+2850285829&4294967295,g=b+(v<<5&4294967295|v>>>27),v=I+(b^x&(g^b))+C[2]+4243563512&4294967295,I=g+(v<<9&4294967295|v>>>23),v=x+(g^b&(I^g))+C[7]+1735328473&4294967295,x=I+(v<<14&4294967295|v>>>18),v=b+(I^g&(x^I))+C[12]+2368359562&4294967295,b=x+(v<<20&4294967295|v>>>12),v=g+(b^x^I)+C[5]+4294588738&4294967295,g=b+(v<<4&4294967295|v>>>28),v=I+(g^b^x)+C[8]+2272392833&4294967295,I=g+(v<<11&4294967295|v>>>21),v=x+(I^g^b)+C[11]+1839030562&4294967295,x=I+(v<<16&4294967295|v>>>16),v=b+(x^I^g)+C[14]+4259657740&4294967295,b=x+(v<<23&4294967295|v>>>9),v=g+(b^x^I)+C[1]+2763975236&4294967295,g=b+(v<<4&4294967295|v>>>28),v=I+(g^b^x)+C[4]+1272893353&4294967295,I=g+(v<<11&4294967295|v>>>21),v=x+(I^g^b)+C[7]+4139469664&4294967295,x=I+(v<<16&4294967295|v>>>16),v=b+(x^I^g)+C[10]+3200236656&4294967295,b=x+(v<<23&4294967295|v>>>9),v=g+(b^x^I)+C[13]+681279174&4294967295,g=b+(v<<4&4294967295|v>>>28),v=I+(g^b^x)+C[0]+3936430074&4294967295,I=g+(v<<11&4294967295|v>>>21),v=x+(I^g^b)+C[3]+3572445317&4294967295,x=I+(v<<16&4294967295|v>>>16),v=b+(x^I^g)+C[6]+76029189&4294967295,b=x+(v<<23&4294967295|v>>>9),v=g+(b^x^I)+C[9]+3654602809&4294967295,g=b+(v<<4&4294967295|v>>>28),v=I+(g^b^x)+C[12]+3873151461&4294967295,I=g+(v<<11&4294967295|v>>>21),v=x+(I^g^b)+C[15]+530742520&4294967295,x=I+(v<<16&4294967295|v>>>16),v=b+(x^I^g)+C[2]+3299628645&4294967295,b=x+(v<<23&4294967295|v>>>9),v=g+(x^(b|~I))+C[0]+4096336452&4294967295,g=b+(v<<6&4294967295|v>>>26),v=I+(b^(g|~x))+C[7]+1126891415&4294967295,I=g+(v<<10&4294967295|v>>>22),v=x+(g^(I|~b))+C[14]+2878612391&4294967295,x=I+(v<<15&4294967295|v>>>17),v=b+(I^(x|~g))+C[5]+4237533241&4294967295,b=x+(v<<21&4294967295|v>>>11),v=g+(x^(b|~I))+C[12]+1700485571&4294967295,g=b+(v<<6&4294967295|v>>>26),v=I+(b^(g|~x))+C[3]+2399980690&4294967295,I=g+(v<<10&4294967295|v>>>22),v=x+(g^(I|~b))+C[10]+4293915773&4294967295,x=I+(v<<15&4294967295|v>>>17),v=b+(I^(x|~g))+C[1]+2240044497&4294967295,b=x+(v<<21&4294967295|v>>>11),v=g+(x^(b|~I))+C[8]+1873313359&4294967295,g=b+(v<<6&4294967295|v>>>26),v=I+(b^(g|~x))+C[15]+4264355552&4294967295,I=g+(v<<10&4294967295|v>>>22),v=x+(g^(I|~b))+C[6]+2734768916&4294967295,x=I+(v<<15&4294967295|v>>>17),v=b+(I^(x|~g))+C[13]+1309151649&4294967295,b=x+(v<<21&4294967295|v>>>11),v=g+(x^(b|~I))+C[4]+4149444226&4294967295,g=b+(v<<6&4294967295|v>>>26),v=I+(b^(g|~x))+C[11]+3174756917&4294967295,I=g+(v<<10&4294967295|v>>>22),v=x+(g^(I|~b))+C[2]+718787259&4294967295,x=I+(v<<15&4294967295|v>>>17),v=b+(I^(x|~g))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+g&4294967295,S.g[1]=S.g[1]+(x+(v<<21&4294967295|v>>>11))&4294967295,S.g[2]=S.g[2]+x&4294967295,S.g[3]=S.g[3]+I&4294967295}n.prototype.u=function(S,g){g===void 0&&(g=S.length);for(var b=g-this.blockSize,C=this.B,x=this.h,I=0;I<g;){if(x==0)for(;I<=b;)o(this,S,I),I+=this.blockSize;if(typeof S=="string"){for(;I<g;)if(C[x++]=S.charCodeAt(I++),x==this.blockSize){o(this,C),x=0;break}}else for(;I<g;)if(C[x++]=S[I++],x==this.blockSize){o(this,C),x=0;break}}this.h=x,this.o+=g},n.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var g=1;g<S.length-8;++g)S[g]=0;var b=8*this.o;for(g=S.length-8;g<S.length;++g)S[g]=b&255,b/=256;for(this.u(S),S=Array(16),g=b=0;4>g;++g)for(var C=0;32>C;C+=8)S[b++]=this.g[g]>>>C&255;return S};function c(S,g){var b=_;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=g(S)}function p(S,g){this.h=g;for(var b=[],C=!0,x=S.length-1;0<=x;x--){var I=S[x]|0;C&&I==g||(b[x]=I,C=!1)}this.g=b}var _={};function O(S){return-128<=S&&128>S?c(S,function(g){return new p([g|0],0>g?-1:0)}):new p([S|0],0>S?-1:0)}function k(S){if(isNaN(S)||!isFinite(S))return ae;if(0>S)return we(k(-S));for(var g=[],b=1,C=0;S>=b;C++)g[C]=S/b|0,b*=4294967296;return new p(g,0)}function H(S,g){if(S.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(S.charAt(0)=="-")return we(H(S.substring(1),g));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=k(Math.pow(g,8)),C=ae,x=0;x<S.length;x+=8){var I=Math.min(8,S.length-x),v=parseInt(S.substring(x,x+I),g);8>I?(I=k(Math.pow(g,I)),C=C.j(I).add(k(v))):(C=C.j(b),C=C.add(k(v)))}return C}var ae=O(0),se=O(1),dt=O(16777216);i=p.prototype,i.m=function(){if(Ue(this))return-we(this).m();for(var S=0,g=1,b=0;b<this.g.length;b++){var C=this.i(b);S+=(0<=C?C:4294967296+C)*g,g*=4294967296}return S},i.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(pe(this))return"0";if(Ue(this))return"-"+we(this).toString(S);for(var g=k(Math.pow(S,6)),b=this,C="";;){var x=Ht(b,g).g;b=Dn(b,x.j(g));var I=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=x,pe(b))return I+C;for(;6>I.length;)I="0"+I;C=I+C}},i.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function pe(S){if(S.h!=0)return!1;for(var g=0;g<S.g.length;g++)if(S.g[g]!=0)return!1;return!0}function Ue(S){return S.h==-1}i.l=function(S){return S=Dn(this,S),Ue(S)?-1:pe(S)?0:1};function we(S){for(var g=S.g.length,b=[],C=0;C<g;C++)b[C]=~S.g[C];return new p(b,~S.h).add(se)}i.abs=function(){return Ue(this)?we(this):this},i.add=function(S){for(var g=Math.max(this.g.length,S.g.length),b=[],C=0,x=0;x<=g;x++){var I=C+(this.i(x)&65535)+(S.i(x)&65535),v=(I>>>16)+(this.i(x)>>>16)+(S.i(x)>>>16);C=v>>>16,I&=65535,v&=65535,b[x]=v<<16|I}return new p(b,b[b.length-1]&-2147483648?-1:0)};function Dn(S,g){return S.add(we(g))}i.j=function(S){if(pe(this)||pe(S))return ae;if(Ue(this))return Ue(S)?we(this).j(we(S)):we(we(this).j(S));if(Ue(S))return we(this.j(we(S)));if(0>this.l(dt)&&0>S.l(dt))return k(this.m()*S.m());for(var g=this.g.length+S.g.length,b=[],C=0;C<2*g;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(var x=0;x<S.g.length;x++){var I=this.i(C)>>>16,v=this.i(C)&65535,Ft=S.i(x)>>>16,pi=S.i(x)&65535;b[2*C+2*x]+=v*pi,wt(b,2*C+2*x),b[2*C+2*x+1]+=I*pi,wt(b,2*C+2*x+1),b[2*C+2*x+1]+=v*Ft,wt(b,2*C+2*x+1),b[2*C+2*x+2]+=I*Ft,wt(b,2*C+2*x+2)}for(C=0;C<g;C++)b[C]=b[2*C+1]<<16|b[2*C];for(C=g;C<2*g;C++)b[C]=0;return new p(b,0)};function wt(S,g){for(;(S[g]&65535)!=S[g];)S[g+1]+=S[g]>>>16,S[g]&=65535,g++}function pt(S,g){this.g=S,this.h=g}function Ht(S,g){if(pe(g))throw Error("division by zero");if(pe(S))return new pt(ae,ae);if(Ue(S))return g=Ht(we(S),g),new pt(we(g.g),we(g.h));if(Ue(g))return g=Ht(S,we(g)),new pt(we(g.g),g.h);if(30<S.g.length){if(Ue(S)||Ue(g))throw Error("slowDivide_ only works with positive integers.");for(var b=se,C=g;0>=C.l(S);)b=er(b),C=er(C);var x=St(b,1),I=St(C,1);for(C=St(C,2),b=St(b,2);!pe(C);){var v=I.add(C);0>=v.l(S)&&(x=x.add(b),I=v),C=St(C,1),b=St(b,1)}return g=Dn(S,x.j(g)),new pt(x,g)}for(x=ae;0<=S.l(g);){for(b=Math.max(1,Math.floor(S.m()/g.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),I=k(b),v=I.j(g);Ue(v)||0<v.l(S);)b-=C,I=k(b),v=I.j(g);pe(I)&&(I=se),x=x.add(I),S=Dn(S,v)}return new pt(x,S)}i.A=function(S){return Ht(this,S).h},i.and=function(S){for(var g=Math.max(this.g.length,S.g.length),b=[],C=0;C<g;C++)b[C]=this.i(C)&S.i(C);return new p(b,this.h&S.h)},i.or=function(S){for(var g=Math.max(this.g.length,S.g.length),b=[],C=0;C<g;C++)b[C]=this.i(C)|S.i(C);return new p(b,this.h|S.h)},i.xor=function(S){for(var g=Math.max(this.g.length,S.g.length),b=[],C=0;C<g;C++)b[C]=this.i(C)^S.i(C);return new p(b,this.h^S.h)};function er(S){for(var g=S.g.length+1,b=[],C=0;C<g;C++)b[C]=S.i(C)<<1|S.i(C-1)>>>31;return new p(b,S.h)}function St(S,g){var b=g>>5;g%=32;for(var C=S.g.length-b,x=[],I=0;I<C;I++)x[I]=0<g?S.i(I+b)>>>g|S.i(I+b+1)<<32-g:S.i(I+b);return new p(x,S.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,cu=au.Md5=n,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.A,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=k,p.fromString=H,ua=au.Integer=p}).apply(typeof su<"u"?su:typeof self<"u"?self:typeof window<"u"?window:{});var Mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wt={};var lu,nf,uu,du,pu,hu,mu,fu,gu;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,l,d){return r==Array.prototype||r==Object.prototype||(r[l]=d.value),r};function t(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mo=="object"&&Mo];for(var l=0;l<r.length;++l){var d=r[l];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var n=t(this);function o(r,l){if(l)e:{var d=n;r=r.split(".");for(var m=0;m<r.length-1;m++){var w=r[m];if(!(w in d))break e;d=d[w]}r=r[r.length-1],m=d[r],l=l(m),l!=m&&l!=null&&e(d,r,{configurable:!0,writable:!0,value:l})}}function c(r,l){r instanceof String&&(r+="");var d=0,m=!1,w={next:function(){if(!m&&d<r.length){var M=d++;return{value:l(M,r[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return w[Symbol.iterator]=function(){return w},w}o("Array.prototype.values",function(r){return r||function(){return c(this,function(l,d){return d})}});var p=p||{},_=this||self;function O(r){var l=typeof r;return l=l!="object"?l:r?Array.isArray(r)?"array":l:"null",l=="array"||l=="object"&&typeof r.length=="number"}function k(r){var l=typeof r;return l=="object"&&r!=null||l=="function"}function H(r,l,d){return r.call.apply(r.bind,arguments)}function ae(r,l,d){if(!r)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var w=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(w,m),r.apply(l,w)}}return function(){return r.apply(l,arguments)}}function se(r,l,d){return se=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?H:ae,se.apply(null,arguments)}function dt(r,l){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),r.apply(this,m)}}function pe(r,l){function d(){}d.prototype=l.prototype,r.aa=l.prototype,r.prototype=new d,r.prototype.constructor=r,r.Qb=function(m,w,M){for(var N=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)N[fe-2]=arguments[fe];return l.prototype[w].apply(m,N)}}function Ue(r){let l=r.length;if(0<l){let d=Array(l);for(let m=0;m<l;m++)d[m]=r[m];return d}return[]}function we(r,l){for(let d=1;d<arguments.length;d++){let m=arguments[d];if(O(m)){let w=r.length||0,M=m.length||0;r.length=w+M;for(let N=0;N<M;N++)r[w+N]=m[N]}else r.push(m)}}class Dn{constructor(l,d){this.i=l,this.j=d,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function wt(r){return/^[\s\xa0]*$/.test(r)}function pt(){var r=_.navigator;return r&&(r=r.userAgent)?r:""}function Ht(r){return Ht[" "](r),r}Ht[" "]=function(){};var er=pt().indexOf("Gecko")!=-1&&!(pt().toLowerCase().indexOf("webkit")!=-1&&pt().indexOf("Edge")==-1)&&!(pt().indexOf("Trident")!=-1||pt().indexOf("MSIE")!=-1)&&pt().indexOf("Edge")==-1;function St(r,l,d){for(let m in r)l.call(d,r[m],m,r)}function S(r,l){for(let d in r)l.call(void 0,r[d],d,r)}function g(r){let l={};for(let d in r)l[d]=r[d];return l}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(r,l){let d,m;for(let w=1;w<arguments.length;w++){m=arguments[w];for(d in m)r[d]=m[d];for(let M=0;M<b.length;M++)d=b[M],Object.prototype.hasOwnProperty.call(m,d)&&(r[d]=m[d])}}function x(r){var l=1;r=r.split(":");let d=[];for(;0<l&&r.length;)d.push(r.shift()),l--;return r.length&&d.push(r.join(":")),d}function I(r){_.setTimeout(()=>{throw r},0)}function v(){var r=ns;let l=null;return r.g&&(l=r.g,r.g=r.g.next,r.g||(r.h=null),l.next=null),l}class Ft{constructor(){this.h=this.g=null}add(l,d){let m=pi.get();m.set(l,d),this.h?this.h.next=m:this.g=m,this.h=m}}var pi=new Dn(()=>new Iu,r=>r.reset());class Iu{constructor(){this.next=this.g=this.h=null}set(l,d){this.h=l,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let hi,mi=!1,ns=new Ft,Ta=()=>{let r=_.Promise.resolve(void 0);hi=()=>{r.then(Pu)}};var Pu=()=>{for(var r;r=v();){try{r.h.call(r.g)}catch(d){I(d)}var l=pi;l.j(r),100>l.h&&(l.h++,r.next=l.g,l.g=r)}mi=!1};function Kt(){this.s=this.s,this.C=this.C}Kt.prototype.s=!1,Kt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Kt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(r,l){this.type=r,this.g=this.target=l,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var Tu=function(){if(!_.addEventListener||!Object.defineProperty)return!1;var r=!1,l=Object.defineProperty({},"passive",{get:function(){r=!0}});try{let d=()=>{};_.addEventListener("test",d,l),_.removeEventListener("test",d,l)}catch{}return r}();function fi(r,l){if(Be.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var d=this.type=r.type,m=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=l,l=r.relatedTarget){if(er){e:{try{Ht(l.nodeName);var w=!0;break e}catch{}w=!1}w||(l=null)}}else d=="mouseover"?l=r.fromElement:d=="mouseout"&&(l=r.toElement);this.relatedTarget=l,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType=typeof r.pointerType=="string"?r.pointerType:Mu[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&fi.aa.h.call(this)}}pe(fi,Be);var Mu={2:"touch",3:"pen",4:"mouse"};fi.prototype.h=function(){fi.aa.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var gi="closure_listenable_"+(1e6*Math.random()|0),Du=0;function Au(r,l,d,m,w){this.listener=r,this.proxy=null,this.src=l,this.type=d,this.capture=!!m,this.ha=w,this.key=++Du,this.da=this.fa=!1}function tr(r){r.da=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function nr(r){this.src=r,this.g={},this.h=0}nr.prototype.add=function(r,l,d,m,w){var M=r.toString();r=this.g[M],r||(r=this.g[M]=[],this.h++);var N=rs(r,l,m,w);return-1<N?(l=r[N],d||(l.fa=!1)):(l=new Au(l,this.src,M,!!m,w),l.fa=d,r.push(l)),l};function is(r,l){var d=l.type;if(d in r.g){var m=r.g[d],w=Array.prototype.indexOf.call(m,l,void 0),M;(M=0<=w)&&Array.prototype.splice.call(m,w,1),M&&(tr(l),r.g[d].length==0&&(delete r.g[d],r.h--))}}function rs(r,l,d,m){for(var w=0;w<r.length;++w){var M=r[w];if(!M.da&&M.listener==l&&M.capture==!!d&&M.ha==m)return w}return-1}var os="closure_lm_"+(1e6*Math.random()|0),ss={};function Ma(r,l,d,m,w){if(m&&m.once)return Aa(r,l,d,m,w);if(Array.isArray(l)){for(var M=0;M<l.length;M++)Ma(r,l[M],d,m,w);return null}return d=us(d),r&&r[gi]?r.K(l,d,k(m)?!!m.capture:!!m,w):Da(r,l,d,!1,m,w)}function Da(r,l,d,m,w,M){if(!l)throw Error("Invalid event type");var N=k(w)?!!w.capture:!!w,fe=cs(r);if(fe||(r[os]=fe=new nr(r)),d=fe.add(l,d,m,N,M),d.proxy)return d;if(m=Ou(),d.proxy=m,m.src=r,m.listener=d,r.addEventListener)Tu||(w=N),w===void 0&&(w=!1),r.addEventListener(l.toString(),m,w);else if(r.attachEvent)r.attachEvent(Ra(l.toString()),m);else if(r.addListener&&r.removeListener)r.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Ou(){function r(d){return l.call(r.src,r.listener,d)}let l=Ru;return r}function Aa(r,l,d,m,w){if(Array.isArray(l)){for(var M=0;M<l.length;M++)Aa(r,l[M],d,m,w);return null}return d=us(d),r&&r[gi]?r.L(l,d,k(m)?!!m.capture:!!m,w):Da(r,l,d,!0,m,w)}function Oa(r,l,d,m,w){if(Array.isArray(l))for(var M=0;M<l.length;M++)Oa(r,l[M],d,m,w);else m=k(m)?!!m.capture:!!m,d=us(d),r&&r[gi]?(r=r.i,l=String(l).toString(),l in r.g&&(M=r.g[l],d=rs(M,d,m,w),-1<d&&(tr(M[d]),Array.prototype.splice.call(M,d,1),M.length==0&&(delete r.g[l],r.h--)))):r&&(r=cs(r))&&(l=r.g[l.toString()],r=-1,l&&(r=rs(l,d,m,w)),(d=-1<r?l[r]:null)&&as(d))}function as(r){if(typeof r!="number"&&r&&!r.da){var l=r.src;if(l&&l[gi])is(l.i,r);else{var d=r.type,m=r.proxy;l.removeEventListener?l.removeEventListener(d,m,r.capture):l.detachEvent?l.detachEvent(Ra(d),m):l.addListener&&l.removeListener&&l.removeListener(m),(d=cs(l))?(is(d,r),d.h==0&&(d.src=null,l[os]=null)):tr(r)}}}function Ra(r){return r in ss?ss[r]:ss[r]="on"+r}function Ru(r,l){if(r.da)r=!0;else{l=new fi(l,this);var d=r.listener,m=r.ha||r.src;r.fa&&as(r),r=d.call(m,l)}return r}function cs(r){return r=r[os],r instanceof nr?r:null}var ls="__closure_events_fn_"+(1e9*Math.random()>>>0);function us(r){return typeof r=="function"?r:(r[ls]||(r[ls]=function(l){return r.handleEvent(l)}),r[ls])}function Le(){Kt.call(this),this.i=new nr(this),this.M=this,this.F=null}pe(Le,Kt),Le.prototype[gi]=!0,Le.prototype.removeEventListener=function(r,l,d,m){Oa(this,r,l,d,m)};function Ge(r,l){var d,m=r.F;if(m)for(d=[];m;m=m.F)d.push(m);if(r=r.M,m=l.type||l,typeof l=="string")l=new Be(l,r);else if(l instanceof Be)l.target=l.target||r;else{var w=l;l=new Be(m,r),C(l,w)}if(w=!0,d)for(var M=d.length-1;0<=M;M--){var N=l.g=d[M];w=ir(N,m,!0,l)&&w}if(N=l.g=r,w=ir(N,m,!0,l)&&w,w=ir(N,m,!1,l)&&w,d)for(M=0;M<d.length;M++)N=l.g=d[M],w=ir(N,m,!1,l)&&w}Le.prototype.N=function(){if(Le.aa.N.call(this),this.i){var r=this.i,l;for(l in r.g){for(var d=r.g[l],m=0;m<d.length;m++)tr(d[m]);delete r.g[l],r.h--}}this.F=null},Le.prototype.K=function(r,l,d,m){return this.i.add(String(r),l,!1,d,m)},Le.prototype.L=function(r,l,d,m){return this.i.add(String(r),l,!0,d,m)};function ir(r,l,d,m){if(l=r.i.g[String(l)],!l)return!0;l=l.concat();for(var w=!0,M=0;M<l.length;++M){var N=l[M];if(N&&!N.da&&N.capture==d){var fe=N.listener,Fe=N.ha||N.src;N.fa&&is(r.i,N),w=fe.call(Fe,m)!==!1&&w}}return w&&!m.defaultPrevented}function ka(r,l,d){if(typeof r=="function")d&&(r=se(r,d));else if(r&&typeof r.handleEvent=="function")r=se(r.handleEvent,r);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:_.setTimeout(r,l||0)}function Va(r){r.g=ka(()=>{r.g=null,r.i&&(r.i=!1,Va(r))},r.l);let l=r.h;r.h=null,r.m.apply(null,l)}class ku extends Kt{constructor(l,d){super(),this.m=l,this.l=d,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:Va(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _i(r){Kt.call(this),this.h=r,this.g={}}pe(_i,Kt);var Na=[];function Fa(r){St(r.g,function(l,d){this.g.hasOwnProperty(d)&&as(l)},r),r.g={}}_i.prototype.N=function(){_i.aa.N.call(this),Fa(this)},_i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ds=_.JSON.stringify,Vu=_.JSON.parse,Nu=class{stringify(r){return _.JSON.stringify(r,void 0)}parse(r){return _.JSON.parse(r,void 0)}};function ps(){}ps.prototype.h=null;function Ua(r){return r.h||(r.h=r.i())}function Ba(){}var yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hs(){Be.call(this,"d")}pe(hs,Be);function ms(){Be.call(this,"c")}pe(ms,Be);var hn={},La=null;function rr(){return La=La||new Le}hn.La="serverreachability";function qa(r){Be.call(this,hn.La,r)}pe(qa,Be);function vi(r){let l=rr();Ge(l,new qa(l))}hn.STAT_EVENT="statevent";function ja(r,l){Be.call(this,hn.STAT_EVENT,r),this.stat=l}pe(ja,Be);function We(r){let l=rr();Ge(l,new ja(l,r))}hn.Ma="timingevent";function za(r,l){Be.call(this,hn.Ma,r),this.size=l}pe(za,Be);function bi(r,l){if(typeof r!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){r()},l)}function Ci(){this.g=!0}Ci.prototype.xa=function(){this.g=!1};function Fu(r,l,d,m,w,M){r.info(function(){if(r.g)if(M)for(var N="",fe=M.split("&"),Fe=0;Fe<fe.length;Fe++){var ce=fe[Fe].split("=");if(1<ce.length){var qe=ce[0];ce=ce[1];var je=qe.split("_");N=2<=je.length&&je[1]=="type"?N+(qe+"="+ce+"&"):N+(qe+"=redacted&")}}else N=null;else N=M;return"XMLHTTP REQ ("+m+") [attempt "+w+"]: "+l+`
`+d+`
`+N})}function Uu(r,l,d,m,w,M,N){r.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+w+"]: "+l+`
`+d+`
`+M+" "+N})}function An(r,l,d,m){r.info(function(){return"XMLHTTP TEXT ("+l+"): "+Lu(r,d)+(m?" "+m:"")})}function Bu(r,l){r.info(function(){return"TIMEOUT: "+l})}Ci.prototype.info=function(){};function Lu(r,l){if(!r.g)return l;if(!l)return null;try{var d=JSON.parse(l);if(d){for(r=0;r<d.length;r++)if(Array.isArray(d[r])){var m=d[r];if(!(2>m.length)){var w=m[1];if(Array.isArray(w)&&!(1>w.length)){var M=w[0];if(M!="noop"&&M!="stop"&&M!="close")for(var N=1;N<w.length;N++)w[N]=""}}}}return ds(d)}catch{return l}}var or={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$a={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fs;function sr(){}pe(sr,ps),sr.prototype.g=function(){return new XMLHttpRequest},sr.prototype.i=function(){return{}},fs=new sr;function Qt(r,l,d,m){this.j=r,this.i=l,this.l=d,this.R=m||1,this.U=new _i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ga}function Ga(){this.i=null,this.g="",this.h=!1}var Wa={},gs={};function _s(r,l,d){r.L=1,r.v=ur(Ut(l)),r.m=d,r.P=!0,Ha(r,null)}function Ha(r,l){r.F=Date.now(),ar(r),r.A=Ut(r.v);var d=r.A,m=r.R;Array.isArray(m)||(m=[String(m)]),ac(d.i,"t",m),r.C=0,d=r.j.J,r.h=new Ga,r.g=Ec(r.j,d?l:null,!r.m),0<r.O&&(r.M=new ku(se(r.Y,r,r.g),r.O)),l=r.U,d=r.g,m=r.ca;var w="readystatechange";Array.isArray(w)||(w&&(Na[0]=w.toString()),w=Na);for(var M=0;M<w.length;M++){var N=Ma(d,w[M],m||l.handleEvent,!1,l.h||l);if(!N)break;l.g[N.key]=N}l=r.H?g(r.H):{},r.m?(r.u||(r.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",r.g.ea(r.A,r.u,r.m,l)):(r.u="GET",r.g.ea(r.A,r.u,null,l)),vi(),Fu(r.i,r.u,r.A,r.l,r.R,r.m)}Qt.prototype.ca=function(r){r=r.target;let l=this.M;l&&Bt(r)==3?l.j():this.Y(r)},Qt.prototype.Y=function(r){try{if(r==this.g)e:{let je=Bt(this.g);var l=this.g.Ba();let kn=this.g.Z();if(!(3>je)&&(je!=3||this.g&&(this.h.h||this.g.oa()||mc(this.g)))){this.J||je!=4||l==7||(l==8||0>=kn?vi(3):vi(2)),ys(this);var d=this.g.Z();this.X=d;t:if(Ka(this)){var m=mc(this.g);r="";var w=m.length,M=Bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),xi(this);var N="";break t}this.h.i=new _.TextDecoder}for(l=0;l<w;l++)this.h.h=!0,r+=this.h.i.decode(m[l],{stream:!(M&&l==w-1)});m.length=0,this.h.g+=r,this.C=0,N=this.h.g}else N=this.g.oa();if(this.o=d==200,Uu(this.i,this.u,this.A,this.l,this.R,je,d),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,Fe=this.g;if((fe=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wt(fe)){var ce=fe;break t}}ce=null}if(d=ce)An(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vs(this,d);else{this.o=!1,this.s=3,We(12),mn(this),xi(this);break e}}if(this.P){d=!0;let mt;for(;!this.J&&this.C<N.length;)if(mt=qu(this,N),mt==gs){je==4&&(this.s=4,We(14),d=!1),An(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==Wa){this.s=4,We(15),An(this.i,this.l,N,"[Invalid Chunk]"),d=!1;break}else An(this.i,this.l,mt,null),vs(this,mt);if(Ka(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||N.length!=0||this.h.h||(this.s=1,We(16),d=!1),this.o=this.o&&d,!d)An(this.i,this.l,N,"[Invalid Chunked Response]"),mn(this),xi(this);else if(0<N.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Es(qe),qe.M=!0,We(11))}}else An(this.i,this.l,N,null),vs(this,N);je==4&&mn(this),this.o&&!this.J&&(je==4?Cc(this.j,this):(this.o=!1,ar(this)))}else rd(this.g),d==400&&0<N.indexOf("Unknown SID")?(this.s=3,We(12)):(this.s=0,We(13)),mn(this),xi(this)}}}catch{}finally{}};function Ka(r){return r.g?r.u=="GET"&&r.L!=2&&r.j.Ca:!1}function qu(r,l){var d=r.C,m=l.indexOf(`
`,d);return m==-1?gs:(d=Number(l.substring(d,m)),isNaN(d)?Wa:(m+=1,m+d>l.length?gs:(l=l.slice(m,m+d),r.C=m+d,l)))}Qt.prototype.cancel=function(){this.J=!0,mn(this)};function ar(r){r.S=Date.now()+r.I,Qa(r,r.I)}function Qa(r,l){if(r.B!=null)throw Error("WatchDog timer not null");r.B=bi(se(r.ba,r),l)}function ys(r){r.B&&(_.clearTimeout(r.B),r.B=null)}Qt.prototype.ba=function(){this.B=null;let r=Date.now();0<=r-this.S?(Bu(this.i,this.A),this.L!=2&&(vi(),We(17)),mn(this),this.s=2,xi(this)):Qa(this,this.S-r)};function xi(r){r.j.G==0||r.J||Cc(r.j,r)}function mn(r){ys(r);var l=r.M;l&&typeof l.ma=="function"&&l.ma(),r.M=null,Fa(r.U),r.g&&(l=r.g,r.g=null,l.abort(),l.ma())}function vs(r,l){try{var d=r.j;if(d.G!=0&&(d.g==r||bs(d.h,r))){if(!r.K&&bs(d.h,r)&&d.G==3){try{var m=d.Da.g.parse(l)}catch{m=null}if(Array.isArray(m)&&m.length==3){var w=m;if(w[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<r.F)fr(d),hr(d);else break e;Ss(d),We(18)}}else d.za=w[1],0<d.za-d.T&&37500>w[2]&&d.F&&d.v==0&&!d.C&&(d.C=bi(se(d.Za,d),6e3));if(1>=Xa(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else gn(d,11)}else if((r.K||d.g==r)&&fr(d),!wt(l))for(w=d.Da.g.parse(l),l=0;l<w.length;l++){let ce=w[l];if(d.T=ce[0],ce=ce[1],d.G==2)if(ce[0]=="c"){d.K=ce[1],d.ia=ce[2];let qe=ce[3];qe!=null&&(d.la=qe,d.j.info("VER="+d.la));let je=ce[4];je!=null&&(d.Aa=je,d.j.info("SVER="+d.Aa));let kn=ce[5];kn!=null&&typeof kn=="number"&&0<kn&&(m=1.5*kn,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;let mt=r.g;if(mt){let _r=mt.g?mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_r){var M=m.h;M.g||_r.indexOf("spdy")==-1&&_r.indexOf("quic")==-1&&_r.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Cs(M,M.h),M.h=null))}if(m.D){let Is=mt.g?mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Is&&(m.ya=Is,ve(m.I,m.D,Is))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-r.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var N=r;if(m.qa=Sc(m,m.J?m.ia:null,m.W),N.K){Za(m.h,N);var fe=N,Fe=m.L;Fe&&(fe.I=Fe),fe.B&&(ys(fe),ar(fe)),m.g=N}else vc(m);0<d.i.length&&mr(d)}else ce[0]!="stop"&&ce[0]!="close"||gn(d,7);else d.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?gn(d,7):ws(d):ce[0]!="noop"&&d.l&&d.l.ta(ce),d.v=0)}}vi(4)}catch{}}var ju=class{constructor(r,l){this.g=r,this.map=l}};function Ja(r){this.l=r||10,_.PerformanceNavigationTiming?(r=_.performance.getEntriesByType("navigation"),r=0<r.length&&(r[0].nextHopProtocol=="hq"||r[0].nextHopProtocol=="h2")):r=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ya(r){return r.h?!0:r.g?r.g.size>=r.j:!1}function Xa(r){return r.h?1:r.g?r.g.size:0}function bs(r,l){return r.h?r.h==l:r.g?r.g.has(l):!1}function Cs(r,l){r.g?r.g.add(l):r.h=l}function Za(r,l){r.h&&r.h==l?r.h=null:r.g&&r.g.has(l)&&r.g.delete(l)}Ja.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let r of this.g.values())r.cancel();this.g.clear()}};function ec(r){if(r.h!=null)return r.i.concat(r.h.D);if(r.g!=null&&r.g.size!==0){let l=r.i;for(let d of r.g.values())l=l.concat(d.D);return l}return Ue(r.i)}function zu(r){if(r.V&&typeof r.V=="function")return r.V();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if(typeof r=="string")return r.split("");if(O(r)){for(var l=[],d=r.length,m=0;m<d;m++)l.push(r[m]);return l}l=[],d=0;for(m in r)l[d++]=r[m];return l}function $u(r){if(r.na&&typeof r.na=="function")return r.na();if(!r.V||typeof r.V!="function"){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(O(r)||typeof r=="string"){var l=[];r=r.length;for(var d=0;d<r;d++)l.push(d);return l}l=[],d=0;for(let m in r)l[d++]=m;return l}}}function tc(r,l){if(r.forEach&&typeof r.forEach=="function")r.forEach(l,void 0);else if(O(r)||typeof r=="string")Array.prototype.forEach.call(r,l,void 0);else for(var d=$u(r),m=zu(r),w=m.length,M=0;M<w;M++)l.call(void 0,m[M],d&&d[M],r)}var nc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gu(r,l){if(r){r=r.split("&");for(var d=0;d<r.length;d++){var m=r[d].indexOf("="),w=null;if(0<=m){var M=r[d].substring(0,m);w=r[d].substring(m+1)}else M=r[d];l(M,w?decodeURIComponent(w.replace(/\+/g," ")):"")}}}function fn(r){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,r instanceof fn){this.h=r.h,cr(this,r.j),this.o=r.o,this.g=r.g,lr(this,r.s),this.l=r.l;var l=r.i,d=new Ei;d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),ic(this,d),this.m=r.m}else r&&(l=String(r).match(nc))?(this.h=!1,cr(this,l[1]||"",!0),this.o=wi(l[2]||""),this.g=wi(l[3]||"",!0),lr(this,l[4]),this.l=wi(l[5]||"",!0),ic(this,l[6]||"",!0),this.m=wi(l[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}fn.prototype.toString=function(){var r=[],l=this.j;l&&r.push(Si(l,rc,!0),":");var d=this.g;return(d||l=="file")&&(r.push("//"),(l=this.o)&&r.push(Si(l,rc,!0),"@"),r.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&r.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&r.push("/"),r.push(Si(d,d.charAt(0)=="/"?Ku:Hu,!0))),(d=this.i.toString())&&r.push("?",d),(d=this.m)&&r.push("#",Si(d,Ju)),r.join("")};function Ut(r){return new fn(r)}function cr(r,l,d){r.j=d?wi(l,!0):l,r.j&&(r.j=r.j.replace(/:$/,""))}function lr(r,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);r.s=l}else r.s=null}function ic(r,l,d){l instanceof Ei?(r.i=l,Yu(r.i,r.h)):(d||(l=Si(l,Qu)),r.i=new Ei(l,r.h))}function ve(r,l,d){r.i.set(l,d)}function ur(r){return ve(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function wi(r,l){return r?l?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Si(r,l,d){return typeof r=="string"?(r=encodeURI(r).replace(l,Wu),d&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Wu(r){return r=r.charCodeAt(0),"%"+(r>>4&15).toString(16)+(r&15).toString(16)}var rc=/[#\/\?@]/g,Hu=/[#\?:]/g,Ku=/[#\?]/g,Qu=/[#\?@]/g,Ju=/#/g;function Ei(r,l){this.h=this.g=null,this.i=r||null,this.j=!!l}function Jt(r){r.g||(r.g=new Map,r.h=0,r.i&&Gu(r.i,function(l,d){r.add(decodeURIComponent(l.replace(/\+/g," ")),d)}))}i=Ei.prototype,i.add=function(r,l){Jt(this),this.i=null,r=On(this,r);var d=this.g.get(r);return d||this.g.set(r,d=[]),d.push(l),this.h+=1,this};function oc(r,l){Jt(r),l=On(r,l),r.g.has(l)&&(r.i=null,r.h-=r.g.get(l).length,r.g.delete(l))}function sc(r,l){return Jt(r),l=On(r,l),r.g.has(l)}i.forEach=function(r,l){Jt(this),this.g.forEach(function(d,m){d.forEach(function(w){r.call(l,w,m,this)},this)},this)},i.na=function(){Jt(this);let r=Array.from(this.g.values()),l=Array.from(this.g.keys()),d=[];for(let m=0;m<l.length;m++){let w=r[m];for(let M=0;M<w.length;M++)d.push(l[m])}return d},i.V=function(r){Jt(this);let l=[];if(typeof r=="string")sc(this,r)&&(l=l.concat(this.g.get(On(this,r))));else{r=Array.from(this.g.values());for(let d=0;d<r.length;d++)l=l.concat(r[d])}return l},i.set=function(r,l){return Jt(this),this.i=null,r=On(this,r),sc(this,r)&&(this.h-=this.g.get(r).length),this.g.set(r,[l]),this.h+=1,this},i.get=function(r,l){return r?(r=this.V(r),0<r.length?String(r[0]):l):l};function ac(r,l,d){oc(r,l),0<d.length&&(r.i=null,r.g.set(On(r,l),Ue(d)),r.h+=d.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";let r=[],l=Array.from(this.g.keys());for(var d=0;d<l.length;d++){var m=l[d];let M=encodeURIComponent(String(m)),N=this.V(m);for(m=0;m<N.length;m++){var w=M;N[m]!==""&&(w+="="+encodeURIComponent(String(N[m]))),r.push(w)}}return this.i=r.join("&")};function On(r,l){return l=String(l),r.j&&(l=l.toLowerCase()),l}function Yu(r,l){l&&!r.j&&(Jt(r),r.i=null,r.g.forEach(function(d,m){var w=m.toLowerCase();m!=w&&(oc(this,m),ac(this,w,d))},r)),r.j=l}function Xu(r,l){let d=new Ci;if(_.Image){let m=new Image;m.onload=dt(Yt,d,"TestLoadImage: loaded",!0,l,m),m.onerror=dt(Yt,d,"TestLoadImage: error",!1,l,m),m.onabort=dt(Yt,d,"TestLoadImage: abort",!1,l,m),m.ontimeout=dt(Yt,d,"TestLoadImage: timeout",!1,l,m),_.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=r}else l(!1)}function Zu(r,l){let d=new Ci,m=new AbortController,w=setTimeout(()=>{m.abort(),Yt(d,"TestPingServer: timeout",!1,l)},1e4);fetch(r,{signal:m.signal}).then(M=>{clearTimeout(w),M.ok?Yt(d,"TestPingServer: ok",!0,l):Yt(d,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(w),Yt(d,"TestPingServer: error",!1,l)})}function Yt(r,l,d,m,w){try{w&&(w.onload=null,w.onerror=null,w.onabort=null,w.ontimeout=null),m(d)}catch{}}function ed(){this.g=new Nu}function td(r,l,d){let m=d||"";try{tc(r,function(w,M){let N=w;k(w)&&(N=ds(w)),l.push(m+M+"="+encodeURIComponent(N))})}catch(w){throw l.push(m+"type="+encodeURIComponent("_badmap")),w}}function Ii(r){this.l=r.Ub||null,this.j=r.eb||!1}pe(Ii,ps),Ii.prototype.g=function(){return new dr(this.l,this.j)},Ii.prototype.i=function(r){return function(){return r}}({});function dr(r,l){Le.call(this),this.D=r,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}pe(dr,Le),i=dr.prototype,i.open=function(r,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=r,this.A=l,this.readyState=1,Ti(this)},i.send=function(r){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};r&&(l.body=r),(this.D||_).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pi(this)),this.readyState=0},i.Sa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")r.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cc(this)}else r.text().then(this.Ra.bind(this),this.ga.bind(this))};function cc(r){r.j.read().then(r.Pa.bind(r)).catch(r.ga.bind(r))}i.Pa=function(r){if(this.g){if(this.o&&r.value)this.response.push(r.value);else if(!this.o){var l=r.value?r.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!r.done}))&&(this.response=this.responseText+=l)}r.done?Pi(this):Ti(this),this.readyState==3&&cc(this)}},i.Ra=function(r){this.g&&(this.response=this.responseText=r,Pi(this))},i.Qa=function(r){this.g&&(this.response=r,Pi(this))},i.ga=function(){this.g&&Pi(this)};function Pi(r){r.readyState=4,r.l=null,r.j=null,r.v=null,Ti(r)}i.setRequestHeader=function(r,l){this.u.append(r,l)},i.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";let r=[],l=this.h.entries();for(var d=l.next();!d.done;)d=d.value,r.push(d[0]+": "+d[1]),d=l.next();return r.join(`\r
`)};function Ti(r){r.onreadystatechange&&r.onreadystatechange.call(r)}Object.defineProperty(dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(r){this.m=r?"include":"same-origin"}});function lc(r){let l="";return St(r,function(d,m){l+=m,l+=":",l+=d,l+=`\r
`}),l}function xs(r,l,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=lc(d),typeof r=="string"?d!=null&&encodeURIComponent(String(d)):ve(r,l,d))}function Ce(r){Le.call(this),this.headers=new Map,this.o=r||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}pe(Ce,Le);var nd=/^https?$/i,id=["POST","PUT"];i=Ce.prototype,i.Ha=function(r){this.J=r},i.ea=function(r,l,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+r);l=l?l.toUpperCase():"GET",this.D=r,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fs.g(),this.v=this.o?Ua(this.o):Ua(fs),this.g.onreadystatechange=se(this.Ea,this);try{this.B=!0,this.g.open(l,String(r),!0),this.B=!1}catch(M){uc(this,M);return}if(r=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var w in m)d.set(w,m[w]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let M of m.keys())d.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(M=>M.toLowerCase()=="content-type"),w=_.FormData&&r instanceof _.FormData,!(0<=Array.prototype.indexOf.call(id,l,void 0))||m||w||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,N]of d)this.g.setRequestHeader(M,N);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hc(this),this.u=!0,this.g.send(r),this.u=!1}catch(M){uc(this,M)}};function uc(r,l){r.h=!1,r.g&&(r.j=!0,r.g.abort(),r.j=!1),r.l=l,r.m=5,dc(r),pr(r)}function dc(r){r.A||(r.A=!0,Ge(r,"complete"),Ge(r,"error"))}i.abort=function(r){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=r||7,Ge(this,"complete"),Ge(this,"abort"),pr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pr(this,!0)),Ce.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?pc(this):this.bb())},i.bb=function(){pc(this)};function pc(r){if(r.h&&typeof p<"u"&&(!r.v[1]||Bt(r)!=4||r.Z()!=2)){if(r.u&&Bt(r)==4)ka(r.Ea,0,r);else if(Ge(r,"readystatechange"),Bt(r)==4){r.h=!1;try{let N=r.Z();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var d;if(!(d=l)){var m;if(m=N===0){var w=String(r.D).match(nc)[1]||null;!w&&_.self&&_.self.location&&(w=_.self.location.protocol.slice(0,-1)),m=!nd.test(w?w.toLowerCase():"")}d=m}if(d)Ge(r,"complete"),Ge(r,"success");else{r.m=6;try{var M=2<Bt(r)?r.g.statusText:""}catch{M=""}r.l=M+" ["+r.Z()+"]",dc(r)}}finally{pr(r)}}}}function pr(r,l){if(r.g){hc(r);let d=r.g,m=r.v[0]?()=>{}:null;r.g=null,r.v=null,l||Ge(r,"ready");try{d.onreadystatechange=m}catch{}}}function hc(r){r.I&&(_.clearTimeout(r.I),r.I=null)}i.isActive=function(){return!!this.g};function Bt(r){return r.g?r.g.readyState:0}i.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(r){if(this.g){var l=this.g.responseText;return r&&l.indexOf(r)==0&&(l=l.substring(r.length)),Vu(l)}};function mc(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.H){case"":case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function rd(r){let l={};r=(r.g&&2<=Bt(r)&&r.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<r.length;m++){if(wt(r[m]))continue;var d=x(r[m]);let w=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let M=l[w]||[];l[w]=M,M.push(d)}S(l,function(m){return m.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi(r,l,d){return d&&d.internalChannelParams&&d.internalChannelParams[r]||l}function fc(r){this.Aa=0,this.i=[],this.j=new Ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mi("failFast",!1,r),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mi("baseRetryDelayMs",5e3,r),this.cb=Mi("retryDelaySeedMs",1e4,r),this.Wa=Mi("forwardChannelMaxRetries",2,r),this.wa=Mi("forwardChannelRequestTimeoutMs",2e4,r),this.pa=r&&r.xmlHttpFactory||void 0,this.Xa=r&&r.Tb||void 0,this.Ca=r&&r.useFetchStreams||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.h=new Ja(r&&r.concurrentRequestLimit),this.Da=new ed,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=r&&r.Rb||!1,r&&r.xa&&this.j.xa(),r&&r.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&r&&r.detectBufferingProxy||!1,this.ja=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.ja=r.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=fc.prototype,i.la=8,i.G=1,i.connect=function(r,l,d,m){We(0),this.W=r,this.H=l||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=Sc(this,null,this.W),mr(this)};function ws(r){if(gc(r),r.G==3){var l=r.U++,d=Ut(r.I);if(ve(d,"SID",r.K),ve(d,"RID",l),ve(d,"TYPE","terminate"),Di(r,d),l=new Qt(r,r.j,l),l.L=2,l.v=ur(Ut(d)),d=!1,_.navigator&&_.navigator.sendBeacon)try{d=_.navigator.sendBeacon(l.v.toString(),"")}catch{}!d&&_.Image&&(new Image().src=l.v,d=!0),d||(l.g=Ec(l.j,null),l.g.ea(l.v)),l.F=Date.now(),ar(l)}wc(r)}function hr(r){r.g&&(Es(r),r.g.cancel(),r.g=null)}function gc(r){hr(r),r.u&&(_.clearTimeout(r.u),r.u=null),fr(r),r.h.cancel(),r.s&&(typeof r.s=="number"&&_.clearTimeout(r.s),r.s=null)}function mr(r){if(!Ya(r.h)&&!r.s){r.s=!0;var l=r.Ga;hi||Ta(),mi||(hi(),mi=!0),ns.add(l,r),r.B=0}}function od(r,l){return Xa(r.h)>=r.h.j-(r.s?1:0)?!1:r.s?(r.i=l.D.concat(r.i),!0):r.G==1||r.G==2||r.B>=(r.Va?0:r.Wa)?!1:(r.s=bi(se(r.Ga,r,l),xc(r,r.B)),r.B++,!0)}i.Ga=function(r){if(this.s)if(this.s=null,this.G==1){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;let w=new Qt(this,this.j,r),M=this.o;if(this.S&&(M?(M=g(M),C(M,this.S)):M=this.S),this.m!==null||this.O||(w.H=M,M=null),this.P)e:{for(var l=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(l+=m,4096<l){l=d;break e}if(l===4096||d===this.i.length-1){l=d+1;break e}}l=1e3}else l=1e3;l=yc(this,w,l),d=Ut(this.I),ve(d,"RID",r),ve(d,"CVER",22),this.D&&ve(d,"X-HTTP-Session-Id",this.D),Di(this,d),M&&(this.O?l="headers="+encodeURIComponent(String(lc(M)))+"&"+l:this.m&&xs(d,this.m,M)),Cs(this.h,w),this.Ua&&ve(d,"TYPE","init"),this.P?(ve(d,"$req",l),ve(d,"SID","null"),w.T=!0,_s(w,d,null)):_s(w,d,l),this.G=2}}else this.G==3&&(r?_c(this,r):this.i.length==0||Ya(this.h)||_c(this))};function _c(r,l){var d;l?d=l.l:d=r.U++;let m=Ut(r.I);ve(m,"SID",r.K),ve(m,"RID",d),ve(m,"AID",r.T),Di(r,m),r.m&&r.o&&xs(m,r.m,r.o),d=new Qt(r,r.j,d,r.B+1),r.m===null&&(d.H=r.o),l&&(r.i=l.D.concat(r.i)),l=yc(r,d,1e3),d.I=Math.round(.5*r.wa)+Math.round(.5*r.wa*Math.random()),Cs(r.h,d),_s(d,m,l)}function Di(r,l){r.H&&St(r.H,function(d,m){ve(l,m,d)}),r.l&&tc({},function(d,m){ve(l,m,d)})}function yc(r,l,d){d=Math.min(r.i.length,d);var m=r.l?se(r.l.Na,r.l,r):null;e:{var w=r.i;let M=-1;for(;;){let N=["count="+d];M==-1?0<d?(M=w[0].g,N.push("ofs="+M)):M=0:N.push("ofs="+M);let fe=!0;for(let Fe=0;Fe<d;Fe++){let ce=w[Fe].g,qe=w[Fe].map;if(ce-=M,0>ce)M=Math.max(0,w[Fe].g-100),fe=!1;else try{td(qe,N,"req"+ce+"_")}catch{m&&m(qe)}}if(fe){m=N.join("&");break e}}}return r=r.i.splice(0,d),l.D=r,m}function vc(r){if(!r.g&&!r.u){r.Y=1;var l=r.Fa;hi||Ta(),mi||(hi(),mi=!0),ns.add(l,r),r.v=0}}function Ss(r){return r.g||r.u||3<=r.v?!1:(r.Y++,r.u=bi(se(r.Fa,r),xc(r,r.v)),r.v++,!0)}i.Fa=function(){if(this.u=null,bc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var r=2*this.R;this.j.info("BP detection timer enabled: "+r),this.A=bi(se(this.ab,this),r)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,We(10),hr(this),bc(this))};function Es(r){r.A!=null&&(_.clearTimeout(r.A),r.A=null)}function bc(r){r.g=new Qt(r,r.j,"rpc",r.Y),r.m===null&&(r.g.H=r.o),r.g.O=0;var l=Ut(r.qa);ve(l,"RID","rpc"),ve(l,"SID",r.K),ve(l,"AID",r.T),ve(l,"CI",r.F?"0":"1"),!r.F&&r.ja&&ve(l,"TO",r.ja),ve(l,"TYPE","xmlhttp"),Di(r,l),r.m&&r.o&&xs(l,r.m,r.o),r.L&&(r.g.I=r.L);var d=r.g;r=r.ia,d.L=1,d.v=ur(Ut(l)),d.m=null,d.P=!0,Ha(d,r)}i.Za=function(){this.C!=null&&(this.C=null,hr(this),Ss(this),We(19))};function fr(r){r.C!=null&&(_.clearTimeout(r.C),r.C=null)}function Cc(r,l){var d=null;if(r.g==l){fr(r),Es(r),r.g=null;var m=2}else if(bs(r.h,l))d=l.D,Za(r.h,l),m=1;else return;if(r.G!=0){if(l.o)if(m==1){d=l.m?l.m.length:0,l=Date.now()-l.F;var w=r.B;m=rr(),Ge(m,new za(m,d)),mr(r)}else vc(r);else if(w=l.s,w==3||w==0&&0<l.X||!(m==1&&od(r,l)||m==2&&Ss(r)))switch(d&&0<d.length&&(l=r.h,l.i=l.i.concat(d)),w){case 1:gn(r,5);break;case 4:gn(r,10);break;case 3:gn(r,6);break;default:gn(r,2)}}}function xc(r,l){let d=r.Ta+Math.floor(Math.random()*r.cb);return r.isActive()||(d*=2),d*l}function gn(r,l){if(r.j.info("Error code "+l),l==2){var d=se(r.fb,r),m=r.Xa;let w=!m;m=new fn(m||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||cr(m,"https"),ur(m),w?Xu(m.toString(),d):Zu(m.toString(),d)}else We(2);r.G=0,r.l&&r.l.sa(l),wc(r),gc(r)}i.fb=function(r){r?(this.j.info("Successfully pinged google.com"),We(2)):(this.j.info("Failed to ping google.com"),We(1))};function wc(r){if(r.G=0,r.ka=[],r.l){let l=ec(r.h);(l.length!=0||r.i.length!=0)&&(we(r.ka,l),we(r.ka,r.i),r.h.i.length=0,Ue(r.i),r.i.length=0),r.l.ra()}}function Sc(r,l,d){var m=d instanceof fn?Ut(d):new fn(d);if(m.g!="")l&&(m.g=l+"."+m.g),lr(m,m.s);else{var w=_.location;m=w.protocol,l=l?l+"."+w.hostname:w.hostname,w=+w.port;var M=new fn(null);m&&cr(M,m),l&&(M.g=l),w&&lr(M,w),d&&(M.l=d),m=M}return d=r.D,l=r.ya,d&&l&&ve(m,d,l),ve(m,"VER",r.la),Di(r,m),m}function Ec(r,l,d){if(l&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=r.Ca&&!r.pa?new Ce(new Ii({eb:d})):new Ce(r.pa),l.Ha(r.J),l}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ic(){}i=Ic.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function gr(){}gr.prototype.g=function(r,l){return new it(r,l)};function it(r,l){Le.call(this),this.g=new fc(l),this.l=r,this.h=l&&l.messageUrlParams||null,r=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.o=r,r=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(r?r["X-WebChannel-Content-Type"]=l.messageContentType:r={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(r?r["X-WebChannel-Client-Profile"]=l.va:r={"X-WebChannel-Client-Profile":l.va}),this.g.S=r,(r=l&&l.Sb)&&!wt(r)&&(this.g.m=r),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!wt(l)&&(this.g.D=l,r=this.h,r!==null&&l in r&&(r=this.h,l in r&&delete r[l])),this.j=new Rn(this)}pe(it,Le),it.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},it.prototype.close=function(){ws(this.g)},it.prototype.o=function(r){var l=this.g;if(typeof r=="string"){var d={};d.__data__=r,r=d}else this.u&&(d={},d.__data__=ds(r),r=d);l.i.push(new ju(l.Ya++,r)),l.G==3&&mr(l)},it.prototype.N=function(){this.g.l=null,delete this.j,ws(this.g),delete this.g,it.aa.N.call(this)};function Pc(r){hs.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var l=r.__sm__;if(l){e:{for(let d in l){r=d;break e}r=void 0}(this.i=r)&&(r=this.i,l=l!==null&&r in l?l[r]:void 0),this.data=l}else this.data=r}pe(Pc,hs);function Tc(){ms.call(this),this.status=1}pe(Tc,ms);function Rn(r){this.g=r}pe(Rn,Ic),Rn.prototype.ua=function(){Ge(this.g,"a")},Rn.prototype.ta=function(r){Ge(this.g,new Pc(r))},Rn.prototype.sa=function(r){Ge(this.g,new Tc)},Rn.prototype.ra=function(){Ge(this.g,"b")},gr.prototype.createWebChannel=gr.prototype.g,it.prototype.send=it.prototype.o,it.prototype.open=it.prototype.m,it.prototype.close=it.prototype.close,gu=Wt.createWebChannelTransport=function(){return new gr},fu=Wt.getStatEventTarget=function(){return rr()},mu=Wt.Event=hn,hu=Wt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},or.NO_ERROR=0,or.TIMEOUT=8,or.HTTP_ERROR=6,pu=Wt.ErrorCode=or,$a.COMPLETE="complete",du=Wt.EventType=$a,Ba.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",Le.prototype.listen=Le.prototype.K,uu=Wt.WebChannel=Ba,nf=Wt.FetchXmlHttpFactory=Ii,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,lu=Wt.XhrIo=Ce}).apply(typeof Mo<"u"?Mo:typeof self<"u"?self:typeof window<"u"?window:{});var _u="@firebase/firestore";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var Uo="11.0.0";var Do=new si("@firebase/firestore");function xt(i,...e){if(Do.logLevel<=_e.DEBUG){let t=e.map(wu);Do.debug(`Firestore (${Uo}): ${i}`,...t)}}function xu(i,...e){if(Do.logLevel<=_e.ERROR){let t=e.map(wu);Do.error(`Firestore (${Uo}): ${i}`,...t)}}function wu(i){if(typeof i=="string")return i;try{return function(t){return JSON.stringify(t)}(i)}catch{return i}}function ut(i="Unexpected state"){let e=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: `+i;throw xu(e),new Error(e)}function Pn(i,e){i||ut()}var $e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ne=class extends $t{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Tn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var pa=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ha=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Je.UNAUTHENTICATED))}shutdown(){}};var ma=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pn(this.o===void 0);let n=this.i,o=O=>this.i!==n?(n=this.i,t(O)):Promise.resolve(),c=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Tn,e.enqueueRetryable(()=>o(this.currentUser))};let p=()=>{let O=c;e.enqueueRetryable(()=>V(this,null,function*(){yield O.promise,yield o(this.currentUser)}))},_=O=>{xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=O,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit(O=>_(O)),setTimeout(()=>{if(!this.auth){let O=this.t.getImmediate({optional:!0});O?_(O):(xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Tn)}},0),p()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Pn(typeof n.accessToken=="string"),new pa(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Pn(e===null||typeof e=="string"),new Je(e)}},fa=class{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ga=class{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new fa(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},_a=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ya=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Pn(this.o===void 0);let n=c=>{c.error!=null&&xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);let p=c.token!==this.R;return this.R=c.token,xt("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>n(c))};let o=c=>{xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){let c=this.A.getImmediate({optional:!0});c?o(c):xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pn(typeof t.token=="string"),this.R=t.token,new _a(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Ao(i,e){return i<e?-1:i>e?1:0}var Oo=class i{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne($e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne($e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return i.fromMillis(Date.now())}static fromDate(e){return i.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new i(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ao(this.nanoseconds,e.nanoseconds):Ao(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var va=class i{constructor(e,t,n){t===void 0?t=0:t>e.length&&ut(),n===void 0?n=e.length-t:n>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return i.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof i?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let n=Math.min(e.length,t.length);for(let o=0;o<n;o++){let c=e.get(o),p=t.get(o);if(c<p)return-1;if(c>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},pn=class i extends va{construct(e,t,n){return new i(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let n of e){if(n.indexOf("//")>=0)throw new Ne($e.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(o=>o.length>0))}return new i(t)}static emptyPath(){return new i([])}};var Mn=class i{constructor(e){this.path=e}static fromPath(e){return new i(pn.fromString(e))}static fromName(e){return new i(pn.fromString(e).popFirst(5))}static empty(){return new i(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new i(new pn(e.slice()))}};var ba=class{constructor(e,t,n,o){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=o}};ba.UNKNOWN_ID=-1;function rf(i){return i.name==="IndexedDbTransactionError"}function of(i){return i===0&&1/i==-1/0}var sf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zC=[...sf,"documentOverlays"],af=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cf=af,lf=[...cf,"indexConfiguration","indexState","indexEntries"];var $C=[...lf,"globals"];var li=class i{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let o=this.comparator(e,n.key);if(o===0)return t+n.left.size;o<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){let e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ci(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ci(this.root,e,this.comparator,!1)}getReverseIterator(){return new ci(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ci(this.root,e,this.comparator,!0)}},ci=class{constructor(e,t,n,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?n(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nt=class i{constructor(e,t,n,o,c){this.key=e,this.value=t,this.color=n??i.RED,this.left=o??i.EMPTY,this.right=c??i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,o,c){return new i(e??this.key,t??this.value,n??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let o=this,c=n(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,n),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp()}removeMin(){if(this.left.isEmpty())return i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return i.EMPTY;n=o.right.min(),o=o.copy(n.key,n.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();let e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}};Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(e,t,n,o,c){return this}insert(e,t,n){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ro=class i{constructor(e){this.comparator=e,this.data=new li(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let o=n.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ko(this.data.getIterator())}getIteratorFrom(e){return new ko(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof i)||this.size!==e.size)return!1;let t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){let o=t.getNext().key,c=n.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new i(this.comparator);return t.data=e,t}},ko=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ca=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ui=class i{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ca("Invalid base64 string: "+c):c}}(e);return new i(t)}static fromUint8Array(e){let t=function(o){let c="";for(let p=0;p<o.length;++p)c+=String.fromCharCode(o[p]);return c}(e);return new i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let n=new Uint8Array(t.length);for(let o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ao(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ui.EMPTY_BYTE_STRING=new ui("");var uf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function df(i){if(Pn(!!i),typeof i=="string"){let e=0,t=uf.exec(i);if(Pn(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}let n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Zi(i.seconds),nanos:Zi(i.nanos)}}function Zi(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function pf(i){return typeof i=="string"?ui.fromBase64String(i):ui.fromUint8Array(i)}var xa=class i{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof i&&e.projectId===this.projectId&&e.database===this.database}};function hf(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function mf(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var WC=new li(Mn.comparator);var HC=new li(Mn.comparator);var KC=new li(Mn.comparator),QC=new Ro(Mn.comparator);var JC=new Ro(Ao);var yu,oe;(oe=yu||(yu={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";var YC=new ua([4294967295,4294967295],0);var Vo=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Zi(e.integerValue));else if("doubleValue"in e){let n=Zi(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),of(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),typeof n=="string"&&(n=df(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(pf(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?mf(e)?this.dt(t,Number.MAX_SAFE_INTEGER):hf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ut()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let n=e.fields||{};this.dt(t,55);for(let o of Object.keys(n))this.Vt(o,t),this.Tt(n[o],t)}wt(e,t){var n,o;let c=e.fields||{};this.dt(t,53);let p="value",_=((o=(n=c[p].arrayValue)===null||n===void 0?void 0:n.values)===null||o===void 0?void 0:o.length)||0;this.dt(t,15),t.At(Zi(_)),this.Vt(p,t),this.Tt(c[p],t)}bt(e,t){let n=e.values||[];this.dt(t,50);for(let o of n)this.Tt(o,t)}yt(e,t){this.dt(t,37),Mn.fromName(e).path.forEach(n=>{this.dt(t,60),this.Dt(n,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Vo.vt=new Vo;var XC=new Uint8Array(0);var Vt=class i{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new i(e,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(41943040,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);function da(){return typeof document<"u"?document:null}var wa=class{constructor(e,t,n=1e3,o=1.5,c=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=o,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-n);o>0&&xt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Sa=class i{constructor(e,t,n,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=o,this.removalCallback=c,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,o,c){let p=Date.now()+n,_=new i(e,t,p,o,c);return _.start(n),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne($e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var vu,bu;(bu=vu||(vu={})).ea="default",bu.Cache="cache";function ff(i){let e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}var Cu=new Map;function gf(i,e,t,n){if(e===!0&&n===!0)throw new Ne($e.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}var No=class{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ne($e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ne($e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ff((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new Ne($e.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Ne($e.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Ne($e.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,o){return n.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ea=class{constructor(e,t,n,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new No({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne($e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne($e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new No(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new ha;switch(n.type){case"firstParty":return new ga(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ne($e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return V(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let n=Cu.get(t);n&&(xt("ComponentProvider","Removing Datastore"),Cu.delete(t),n.terminate())}(this),Promise.resolve()}};var Fo=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wa(this,"async_queue_retry"),this.Vu=()=>{let n=da();n&&xt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;let t=da();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=da();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Tn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return V(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!rf(e))throw e;xt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;let o=function(p){let _=p.message||"";return p.stack&&(_=p.stack.includes(p.message)?p.stack:p.message+`
`+p.stack),_}(n);throw xu("INTERNAL UNHANDLED ERROR: ",o),n}).then(n=>(this.du=!1,n))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let o=Sa.createAndSchedule(this,e,t,n,c=>this.yu(c));return this.Tu.push(o),o}fu(){this.Eu&&ut()}verifyOperationInProgress(){}wu(){return V(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Ia=class extends Ea{constructor(e,t,n,o){super(e,t,n,o),this.type="firestore",this._queue=new Fo,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return V(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Fo(e),this._firestoreClient=void 0,yield e}})}};var ZC=new RegExp("[~\\*/\\[\\]]");(function(e,t=!0){(function(o){Uo=o})(iu),Yi(new dn("firestore",(n,{instanceIdentifier:o,options:c})=>{let p=n.getProvider("app").getImmediate(),_=new Ia(new ma(n.getProvider("auth-internal")),new ya(n.getProvider("app-check-internal")),function(k,H){if(!Object.prototype.hasOwnProperty.apply(k.options,["projectId"]))throw new Ne($e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xa(k.options.projectId,H)}(p,o),p);return c=Object.assign({useFetchStreams:t},c),_._setSettings(c),_},"PUBLIC").setMultipleInstances(!0)),ai(_u,"4.7.4",e),ai(_u,"4.7.4","esm2017")})();var di=class i{exchangesSubject=new ft([]);conversationItemsSubject=new ft([]);selectedUserSubject=new ft(null);selectedUserInfoSubject=new ft(null);loadingSubject=new ft(!1);exchanges$=this.exchangesSubject.asObservable();conversationItems$=this.conversationItemsSubject.asObservable();selectedUser$=this.selectedUserSubject.asObservable();selectedUserInfo$=this.selectedUserInfoSubject.asObservable();loading$=this.loadingSubject.asObservable();conversationListMeta={totalCount:0,hasMore:!1};messagesMeta={totalCount:0,hasMore:!1};get exchanges(){return this.exchangesSubject.value}get conversationItems(){return this.conversationItemsSubject.value}get selectedUser(){return this.selectedUserSubject.value}get selectedUserInfo(){return this.selectedUserInfoSubject.value}get isLoading(){return this.loadingSubject.value}setExchanges(e,t=!1){let n=t?[...this.exchanges,...e]:e;this.exchangesSubject.next(n)}setConversationItems(e,t=!1){let n=t?[...e,...this.conversationItems]:[...this.conversationItems,...e];this.conversationItemsSubject.next(n)}addOptimisticMessage(e,t){let n={id:`temp_${Date.now()}`,conversationId:"temp",senderId:t,type:"message",createdAt:Oo.fromDate(new Date),data:{Content:e.trim(),SenderId:t,CreatedAt:new Date,IsRead:!1}},o=this.conversationItems;return this.conversationItemsSubject.next([...o,n]),n}removeOptimisticMessage(e){let t=this.conversationItems.filter(n=>n.id!==e);this.conversationItemsSubject.next(t)}updateMessageReadStatus(e,t){let n=this.conversationItems.map(o=>o.id===e&&o.type==="message"?ue(L({},o),{data:ue(L({},o.data),{IsRead:!0,ReadAt:t})}):o);this.conversationItemsSubject.next(n)}setSelectedUser(e){this.selectedUserSubject.next(e)}setSelectedUserInfo(e){this.selectedUserInfoSubject.next(e)}setLoading(e){this.loadingSubject.next(e)}clearConversationItems(){this.conversationItemsSubject.next([])}clearAll(){this.exchangesSubject.next([]),this.conversationItemsSubject.next([]),this.selectedUserSubject.next(null),this.selectedUserInfoSubject.next(null),this.loadingSubject.next(!1),this.conversationListMeta={totalCount:0,hasMore:!1},this.messagesMeta={totalCount:0,hasMore:!1}}getTypedConversationItems(){let e=this.conversationItems;return e?e.map(t=>{let n=this.deserializeItem(t),o=n?t.type:"unknown";return{item:t,typed:n,type:o}}):[]}deserializeItem(e){if(!e||!e.data||!e.type)return null;console.log("Deserializing conversation item:",e);let t=e.data,n={id:e.id,senderId:e.senderId||t.SenderId||t.senderId};try{switch(e.type.toLowerCase()){case"message":return ue(L({},n),{content:t.Content||t.content||"",createdAt:this.convertTimestamp(t.CreatedAt||t.createdAt||e.createdAt),isRead:!!(t.IsRead??t.isRead??!1)});case"request":return ue(L({},n),{requestedStartDate:this.convertTimestamp(t.RequestedStartDate||t.requestedStartDate),description:t.Description||t.description||"",status:t.Status||t.status||"Pending",senderContactInfo:t.SenderContactInfo||t.senderContactInfo,address:t.Address||t.address,phoneNumber:t.PhoneNumber||t.phoneNumber});case"reply":return ue(L({},n),{requestId:t.RequestId||t.requestId||"",startDate:this.convertTimestamp(t.StartDate||t.startDate),endDate:this.convertTimestamp(t.EndDate||t.endDate),price:Number(t.Price||t.price||0),status:t.Status||t.status||"Pending",serviceTask:t.ServiceTask||t.serviceTask,specialistId:t.SpecialistId||t.specialistId,acceptedAt:t.AcceptedAt?this.convertTimestamp(t.AcceptedAt):void 0,rejectedAt:t.RejectedAt?this.convertTimestamp(t.RejectedAt):void 0});default:return null}}catch(o){return console.error("Error deserializing conversation item:",o,e),null}}convertTimestamp(e){return e instanceof Date?e:e&&typeof e.toDate=="function"?e.toDate():e&&typeof e.seconds=="number"?new Date(e.seconds*1e3):typeof e=="string"?new Date(e):new Date}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var Bo=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Message";sendMessage(e,t){let n=this.authService.getToken(),o=new ee({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/Add/${e}`,t,{headers:o})}static \u0275fac=function(t){return new(t||i)(Z(ke),Z(te))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var Lo=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Reply";addReply(e,t){let n=this.authService.getToken(),o=new ee({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}/Add/${e}`,t,{headers:o})}updateReply(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Update/${e.id}`,e,{headers:n})}acceptReply(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return console.log(t),this.http.patch(`${this.baseUrl}/Accept/${e}`,{},{headers:n})}rejectReply(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Reject/${e}`,{},{headers:n})}cancelReply(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.patch(`${this.baseUrl}/Cancel/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(Z(ke),Z(te))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var qo=class i{constructor(e,t,n,o,c){this.messageService=e;this.requestService=t;this.replyService=n;this.signalRHandler=o;this.messagesState=c}refreshTrigger=new rt;refresh$=this.refreshTrigger.asObservable();sendMessage(e,t,n){return V(this,null,function*(){if(!e.trim())return{success:!1,error:"Message content cannot be empty"};let o=this.messagesState.addOptimisticMessage(e.trim(),n.id);try{let c=yield this.messageService.sendMessage(t,{content:e.trim()}).toPromise();return c?.response?.id?(yield this.signalRHandler.sendMessageNotification(t,c.response.id,e.trim(),n.fullName||"Someone",n.id),this.triggerRefresh(),{success:!0}):(this.messagesState.removeOptimisticMessage(o.id),{success:!1,error:"Failed to send message"})}catch(c){return console.error("Error sending message:",c),this.messagesState.removeOptimisticMessage(o.id),{success:!1,error:"Failed to send message"}}})}acceptRequest(e){return V(this,null,function*(){try{return yield this.requestService.acceptRequest(e).toPromise(),this.triggerRefresh(),{success:!0}}catch(t){return console.error("Error accepting request:",t),{success:!1,error:"Failed to accept request"}}})}rejectRequest(e){return V(this,null,function*(){try{return yield this.requestService.rejectRequest(e).toPromise(),this.triggerRefresh(),{success:!0}}catch(t){return console.error("Error rejecting request:",t),{success:!1,error:"Failed to reject request"}}})}acceptReply(e){return V(this,null,function*(){try{return yield this.replyService.acceptReply(e).toPromise(),this.triggerRefresh(),{success:!0}}catch(t){return console.error("Error accepting reply:",t),{success:!1,error:"Failed to accept reply"}}})}rejectReply(e){return V(this,null,function*(){try{return yield this.replyService.rejectReply(e).toPromise(),this.triggerRefresh(),{success:!0}}catch(t){return console.error("Error rejecting reply:",t),{success:!1,error:"Failed to reject reply"}}})}submitReply(e,t){return V(this,null,function*(){try{return yield this.replyService.addReply(e,t).toPromise(),this.triggerRefresh(),{success:!0}}catch(n){return console.error("Error submitting reply:",n),{success:!1,error:"Failed to submit reply"}}})}triggerRefresh(){this.refreshTrigger.next()}static \u0275fac=function(t){return new(t||i)(Z(Bo),Z(Jn),Z(Lo),Z(oi),Z(di))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var bf=i=>["/specialist",i];function Cf(i,e){i&1&&(a(0,"div",11),B(1,"div",12),a(2,"p"),u(3,"Se \xEEncarc\u0103 conversa\u021Biile..."),s()())}function xf(i,e){if(i&1&&(a(0,"div",19),u(1),$(2,"slice"),s()),i&2){let t=y().$implicit;h(),G(" ",Vc(2,1,t.lastMessage,0,30),"... ")}}function wf(i,e){if(i&1&&(a(0,"div",20),u(1),s()),i&2){let t=y().$implicit;h(),G(" ",t.unreadCount," ")}}function Sf(i,e){if(i&1){let t=F();a(0,"div",13),$(1,"async"),E("click",function(){let o=P(t).$implicit,c=y();return T(c.selectConversation(o))}),B(2,"img",14),a(3,"div",15)(4,"span",16),u(5),s(),A(6,xf,3,5,"div",17),s(),A(7,wf,2,1,"div",18),s()}if(i&2){let t=e.$implicit,n=y();Xe("active",t.userId===le(1,7,n.selectedUser$)),h(2),f("src",t.userProfilePictureUrl||"assets/avatar.svg",Ye)("alt",t.userFullName),h(3),Y(t.userFullName),h(),f("ngIf",t.lastMessage),h(),f("ngIf",t.unreadCount&&t.unreadCount>0)}}function Ef(i,e){i&1&&(a(0,"span"),u(1,"\xCEncarc\u0103 mai multe conversa\u021Bii"),s())}function If(i,e){i&1&&(a(0,"span",24),B(1,"div",25),u(2," Se \xEEncarc\u0103... "),s())}function Pf(i,e){if(i&1){let t=F();a(0,"button",21),$(1,"async"),E("click",function(){P(t);let o=y();return T(o.loadMoreExchanges())}),A(2,Ef,2,0,"span",22),$(3,"async"),A(4,If,3,0,"span",23),$(5,"async"),s()}if(i&2){let t=y();f("disabled",le(1,3,t.loading$)===!0),h(2),f("ngIf",le(3,5,t.loading$)===!1),h(2),f("ngIf",le(5,7,t.loading$)===!0)}}function Tf(i,e){i&1&&(a(0,"div",45),B(1,"div",46),a(2,"p"),u(3,"Se \xEEncarc\u0103 mesajele..."),s()())}function Mf(i,e){i&1&&(a(0,"span"),u(1,"\xCEncarc\u0103 mesaje mai vechi"),s())}function Df(i,e){i&1&&(a(0,"span",24),B(1,"div",25),u(2," Se \xEEncarc\u0103... "),s())}function Af(i,e){if(i&1){let t=F();a(0,"button",47),$(1,"async"),E("click",function(){P(t);let o=y(2);return T(o.loadMoreMessages())}),A(2,Mf,2,0,"span",22),$(3,"async"),A(4,Df,3,0,"span",23),$(5,"async"),s()}if(i&2){let t=y(2);f("disabled",le(1,3,t.loading$)===!0),h(2),f("ngIf",le(3,5,t.loading$)===!1),h(2),f("ngIf",le(5,7,t.loading$)===!0)}}function Of(i,e){i&1&&(a(0,"div",48),B(1,"div",12),a(2,"p"),u(3,"Se \xEEncarc\u0103 mesaje mai vechi..."),s()())}function Rf(i,e){if(i&1&&B(0,"app-message-bubble",54),i&2){let t=y().$implicit,n=y(2);f("message",n.asTypedMessage(t))("currentUserId",n.userId)}}function kf(i,e){if(i&1){let t=F();a(0,"app-request-message",55),E("requestAccepted",function(){P(t);let o=y().$implicit,c=y(2);return T(c.acceptRequest(o.item.id))})("requestRejected",function(){P(t);let o=y().$implicit,c=y(2);return T(c.rejectRequest(o.item.id))})("makeOffer",function(){P(t);let o=y().$implicit,c=y(2);return T(c.showReplyForm(o.item.id))}),s()}if(i&2){let t=y().$implicit,n=y(2);f("request",n.asTypedRequest(t))("currentUserId",n.userId)}}function Vf(i,e){if(i&1){let t=F();a(0,"app-reply-message",56),E("replyAccepted",function(){P(t);let o=y().$implicit,c=y(2);return T(c.acceptReply(o.item.id))})("replyRejected",function(){P(t);let o=y().$implicit,c=y(2);return T(c.rejectReply(o.item.id))}),s()}if(i&2){let t=y().$implicit,n=y(2);f("reply",n.asTypedReply(t))("currentUserId",n.userId)}}function Nf(i,e){if(i&1&&(a(0,"div",57)(1,"p"),u(2),s()()),i&2){let t=y().$implicit;h(2),G("\u26A0\uFE0F Invalid message type (ID: ",t.item.id,")")}}function Ff(i,e){if(i&1&&(Oe(0)(1,49),A(2,Rf,1,2,"app-message-bubble",50)(3,kf,1,2,"app-request-message",51)(4,Vf,1,2,"app-reply-message",52)(5,Nf,3,1,"div",53),Re()()),i&2){let t=e.$implicit;h(),f("ngSwitch",t.type),h(),f("ngSwitchCase","message"),h(),f("ngSwitchCase","request"),h(),f("ngSwitchCase","reply"),h(),f("ngSwitchCase","unknown")}}function Uf(i,e){i&1&&(a(0,"div",58)(1,"div",59),u(2,"\u{1F4AC}"),s(),a(3,"p"),u(4,"Nu exist\u0103 mesaje \xEEnc\u0103. \xCEncepe conversa\u021Bia!"),s()())}function Bf(i,e){i&1&&(a(0,"div",60)(1,"div",61),B(2,"div",62),a(3,"span"),u(4,"Se trimite mesajul..."),s()()())}function Lf(i,e){i&1&&(a(0,"div",63)(1,"div",64),B(2,"span",65),a(3,"span"),u(4,"Reconectare \xEEn curs..."),s()()())}function qf(i,e){i&1&&(a(0,"span"),u(1,"\u2192"),s())}function jf(i,e){i&1&&B(0,"div",66)}function zf(i,e){if(i&1){let t=F();a(0,"div",67)(1,"div",68),E("click",function(){P(t);let o=y(2);return T(o.hideReplyForm())}),s(),a(2,"div",69)(3,"app-reply-form",70),E("formSubmit",function(o){P(t);let c=y(2);return T(c.onReplySubmit(o))})("close",function(){P(t);let o=y(2);return T(o.hideReplyForm())}),s()()()}if(i&2){let t=y(2);h(3),f("replyForm",t.replyFormData)}}function $f(i,e){if(i&1){let t=F();a(0,"div",71)(1,"div",68),E("click",function(){P(t);let o=y(2);return T(o.hideServiceConfirmation())}),s(),a(2,"div",72)(3,"div",73)(4,"h2"),u(5,"\u2705 Serviciu confirmat \u0219i pl\u0103tit!"),s(),a(6,"button",74),E("click",function(){P(t);let o=y(2);return T(o.hideServiceConfirmation())}),u(7,"\xD7"),s()(),a(8,"app-service-message",75),E("taskCompleted",function(o){P(t);let c=y(2);return T(c.onServiceTaskCompleted(o))})("taskCancelled",function(o){P(t);let c=y(2);return T(c.onServiceTaskCancelled(o))}),s(),a(9,"div",76)(10,"p"),u(11,"Ambele p\u0103r\u021Bi au fost notificate prin email cu detaliile serviciului."),s(),a(12,"button",77),E("click",function(){P(t);let o=y(2);return T(o.hideServiceConfirmation())}),u(13," \xCEnchide "),s()()()()}if(i&2){let t=y(2);h(8),f("serviceTask",t.currentServiceTask)("replyId",t.currentServiceTask.replyId)}}function Gf(i,e){if(i&1){let t=F();a(0,"div",26)(1,"div",27)(2,"div"),u(3),s(),a(4,"div")(5,"button"),B(6,"img",28),s()()(),a(7,"div",29),A(8,Tf,4,0,"div",30),$(9,"async"),$(10,"async"),A(11,Af,6,9,"button",31),$(12,"async"),A(13,Of,4,0,"div",32),$(14,"async"),$(15,"async"),A(16,Ff,6,5,"ng-container",33)(17,Uf,5,0,"div",34),$(18,"async"),$(19,"async"),A(20,Bf,5,0,"div",35)(21,Lf,5,0,"div",36),$(22,"async"),s(),a(23,"div",37)(24,"button",38),$(25,"async"),a(26,"img",39),E("click",function(){P(t);let o=y();return T(o.openMediaPicker())}),s()(),a(27,"input",40),$(28,"async"),$(29,"async"),z("ngModelChange",function(o){P(t);let c=y();return j(c.messageContent,o)||(c.messageContent=o),T(o)}),E("keydown.enter",function(){P(t);let o=y();return T(o.sendMessage(o.messageContent))}),s(),a(30,"button",41),$(31,"async"),$(32,"async"),E("click",function(){P(t);let o=y();return T(o.sendMessage(o.messageContent))}),A(33,qf,2,0,"span",22)(34,jf,1,0,"div",42),s()(),A(35,zf,4,1,"div",43)(36,$f,14,2,"div",44),s()}if(i&2){let t,n,o,c,p=e.ngIf,_=y();Xe("overlay-active",_.chatOverlayVisible||_.isReplyFormVisible),h(3),Y(p.fullName),h(3),f("routerLink",Xt(48,bf,p.userId)),h(),Xe("scroll-frozen",_.chatOverlayVisible||_.isReplyFormVisible),h(),f("ngIf",le(9,22,_.loading$)===!0&&!((t=le(10,24,_.conversationItems$))!=null&&t.length)),h(3),f("ngIf",_.messagesState.messagesMeta.hasMore&&((n=le(12,26,_.conversationItems$))==null?null:n.length)),h(2),f("ngIf",le(14,28,_.loading$)===!0&&((o=le(15,30,_.conversationItems$))==null?null:o.length)&&_.messagesState.messagesMeta.hasMore),h(3),f("ngForOf",_.getTypedConversationItems())("ngForTrackBy",_.trackByConversationItem),h(),f("ngIf",!((c=le(18,32,_.conversationItems$))!=null&&c.length)&&le(19,34,_.loading$)===!1),h(3),f("ngIf",_.isSendingMessage),h(),f("ngIf",le(22,36,_.signalRService.connectionState$)===!1),h(3),f("disabled",le(25,38,_.loading$)===!0),h(3),q("ngModel",_.messageContent),f("disabled",le(28,40,_.loading$)===!0||_.isSendingMessage||_.isReplyFormVisible||le(29,42,_.signalRService.connectionState$)===!1),h(3),f("disabled",!_.messageContent.trim()||le(31,44,_.loading$)===!0||_.isSendingMessage||le(32,46,_.signalRService.connectionState$)===!1),h(3),f("ngIf",!_.isSendingMessage),h(),f("ngIf",_.isSendingMessage),h(),f("ngIf",_.isReplyFormVisible),h(),f("ngIf",_.isServiceConfirmationVisible&&_.currentServiceTask)}}function Wf(i,e){i&1&&(a(0,"div",78)(1,"div",59),u(2,"\u{1F4AC}"),s(),a(3,"p"),u(4,"Selecteaz\u0103 o conversa\u021Bie pentru a \xEEncepe."),s()())}function Hf(i,e){i&1&&B(0,"div",79)}var jo=class i{constructor(e,t,n,o,c,p,_,O,k,H){this.exchangeService=e;this.authService=t;this.cdr=n;this.mockExchangeService=o;this.userService=c;this.paymentFlowService=p;this.signalRService=_;this.signalRHandler=O;this.messagesState=k;this.conversationActions=H}destroy$=new rt;USE_MOCK_DATA=!1;conversationListPagination={page:1,pageSize:20};messagesPagination={page:1,pageSize:50};messageContent="";userId=null;currentUserDetails=null;isSendingMessage=!1;isReplyFormVisible=!1;currentRequestId=null;chatOverlayVisible=!1;replyFormData={day:null,month:null,year:null,startHour:null,startMinute:null,endHour:null,endMinute:null,price:null};isServiceConfirmationVisible=!1;currentPaymentDetails;currentServiceTask;showPaymentFlow=!1;exchanges$;conversationItems$;selectedUser$;selectedUserInfo$;loading$;trackByConversation=(e,t)=>t.userId;trackByConversationItem=(e,t)=>t.item.id;ngOnInit(){return V(this,null,function*(){this.exchanges$=this.messagesState.exchanges$,this.conversationItems$=this.messagesState.conversationItems$,this.selectedUser$=this.messagesState.selectedUser$,this.selectedUserInfo$=this.messagesState.selectedUserInfo$,this.loading$=this.messagesState.loading$,this.userId=this.authService.getUserId(),yield this.initializeServices(),this.loadExchanges(),this.loadCurrentUserDetails()})}initializeServices(){return V(this,null,function*(){try{yield this.signalRService.connect(this.userId||void 0),this.signalRHandler.setupListeners(this.userId||""),this.signalRHandler.notification$.pipe(gt(this.destroy$)).subscribe(e=>this.showNotification(e)),this.signalRHandler.conversationUpdate$.pipe(gt(this.destroy$)).subscribe(e=>this.handleConversationUpdate(e)),this.conversationActions.refresh$.pipe(gt(this.destroy$)).subscribe(()=>{this.refreshCurrentConversation(),this.loadExchanges(!1)}),this.subscribeToPaymentCompletion()}catch(e){console.error("Failed to initialize services:",e)}})}handleConversationUpdate(e){switch(e.type){case"refresh-current":this.refreshCurrentConversation();break;case"refresh-list":this.loadExchanges(!1);break;case"refresh-both":this.refreshCurrentConversation(),this.loadExchanges(!1);break}}showNotification(e){console.log(`${e.type.toUpperCase()}: ${e.message}`)}loadExchanges(e=!1){e||(this.conversationListPagination.page=1,this.messagesState.setExchanges([],!1)),this.messagesState.setLoading(!0),(this.USE_MOCK_DATA?this.mockExchangeService:this.exchangeService).getExchanges(this.conversationListPagination).pipe(gt(this.destroy$)).subscribe({next:n=>{if(n.response){let o=n.response;this.messagesState.setExchanges(o.data||[],e),this.messagesState.conversationListMeta={totalCount:o.totalCount,hasMore:this.messagesState.exchanges.length<o.totalCount},!e&&Array.isArray(o.data)&&o.data.length>0&&this.selectConversation(o.data[0])}this.messagesState.setLoading(!1),this.cdr.detectChanges()},error:n=>{console.error("Error loading conversations:",n),this.messagesState.setLoading(!1),this.cdr.detectChanges()}})}selectConversation(e){this.messagesState.setSelectedUserInfo({userId:e.userId,fullName:e.userFullName,profilePictureUrl:e.userProfilePictureUrl}),this.loadConversationMessages(e.userId)}loadConversationMessages(e,t=!1){t||(this.messagesPagination.page=1,this.messagesState.clearConversationItems());let n=this.USE_MOCK_DATA?this.mockExchangeService:this.exchangeService;this.messagesState.setSelectedUser(e),this.messagesState.setLoading(!0),n.getExchange(e,this.messagesPagination).pipe(gt(this.destroy$)).subscribe({next:o=>{if(o.response){let c=o.response;this.messagesState.setConversationItems(c.data||[],t),this.messagesState.messagesMeta={totalCount:c.totalCount,hasMore:this.messagesState.conversationItems.length<c.totalCount}}this.messagesState.setLoading(!1),this.cdr.detectChanges()},error:o=>{console.error("Error loading conversation messages:",o),this.messagesState.setLoading(!1),this.cdr.detectChanges()}})}loadMoreExchanges(){this.messagesState.conversationListMeta.hasMore&&!this.messagesState.isLoading&&(this.conversationListPagination.page++,this.loadExchanges(!0))}loadMoreMessages(){let e=this.messagesState.selectedUser;e&&this.messagesState.messagesMeta.hasMore&&!this.messagesState.isLoading&&(this.messagesPagination.page++,this.loadConversationMessages(e,!0))}refreshCurrentConversation(){let e=this.messagesState.selectedUser;e&&this.loadConversationMessages(e,!1)}sendMessage(e){return V(this,null,function*(){let t=this.messagesState.selectedUser;if(!e.trim()||!t||this.isSendingMessage||!this.currentUserDetails)return;this.isSendingMessage=!0,this.cdr.detectChanges();let n=yield this.conversationActions.sendMessage(e.trim(),t,this.currentUserDetails);this.isSendingMessage=!1,n.success?(this.messageContent="",this.refreshCurrentConversation(),this.loadExchanges(!1)):(this.messageContent=e.trim(),this.showNotification({type:"error",message:n.error||"Failed to send message"})),this.cdr.detectChanges()})}acceptRequest(e){return V(this,null,function*(){let t=yield this.conversationActions.acceptRequest(e);t.success||this.showNotification({type:"error",message:t.error||"Failed to accept request"})})}rejectRequest(e){return V(this,null,function*(){let t=yield this.conversationActions.rejectRequest(e);t.success||this.showNotification({type:"error",message:t.error||"Failed to reject request"})})}acceptReply(e){return V(this,null,function*(){let t=yield this.conversationActions.acceptReply(e);t.success||this.showNotification({type:"error",message:t.error||"Failed to accept reply"})})}rejectReply(e){return V(this,null,function*(){let t=yield this.conversationActions.rejectReply(e);t.success||this.showNotification({type:"error",message:t.error||"Failed to reject reply"})})}showReplyForm(e){this.currentRequestId=e,this.isReplyFormVisible=!0,this.chatOverlayVisible=!0,this.replyFormData={day:null,month:null,year:null,startHour:null,startMinute:null,endHour:null,endMinute:null,price:null},this.cdr.detectChanges()}hideReplyForm(){this.isReplyFormVisible=!1,this.chatOverlayVisible=!1,this.currentRequestId=null,this.cdr.detectChanges()}onReplySubmit(e){return V(this,null,function*(){if(!this.currentRequestId){console.error("No current request ID for reply");return}let t=yield this.conversationActions.submitReply(this.currentRequestId,e);t.success?this.hideReplyForm():this.showNotification({type:"error",message:t.error||"Failed to submit reply"})})}getTypedConversationItems(){return this.messagesState.getTypedConversationItems()}asTypedMessage(e){return e.typed}asTypedRequest(e){return e.typed}asTypedReply(e){return e.typed}loadCurrentUserDetails(){this.userService.getUserProfile().subscribe({next:e=>{this.currentUserDetails=e.response||null},error:e=>{console.error("Error loading user details:",e)}})}subscribeToPaymentCompletion(){this.paymentFlowService.paymentCompleted$.pipe(gt(this.destroy$)).subscribe(e=>{e&&this.handlePaymentCompletion(e)})}handlePaymentCompletion(e){console.log("Payment completed in messages:",e),this.currentPaymentDetails=e,this.createServiceTaskFromPayment(e),this.showServiceConfirmation(),this.loadExchanges(!1)}createServiceTaskFromPayment(e){let t=this.paymentFlowService.getCurrentState();if(!t.serviceDetails||!t.specialistDetails||!t.userDetails){console.error("Missing service details for task creation");return}this.currentServiceTask={id:e.serviceTaskId,replyId:t.replyId||"",userId:t.userDetails.userId,specialistId:t.specialistDetails.userId,specialistFullName:t.specialistDetails.userFullName,startDate:t.serviceDetails.startDate,endDate:t.serviceDetails.endDate,description:t.serviceDetails.description,address:t.serviceDetails.address,price:t.serviceDetails.price,status:"Confirmed",completedAt:new Date,cancelledAt:new Date},this.cdr.detectChanges()}showServiceConfirmation(){this.isServiceConfirmationVisible=!0,this.chatOverlayVisible=!0,setTimeout(()=>{this.hideServiceConfirmation()},1e4)}hideServiceConfirmation(){this.isServiceConfirmationVisible=!1,this.chatOverlayVisible=!1}onServiceTaskCompleted(e){console.log("Service task completed:",e),this.currentServiceTask&&(this.currentServiceTask.status="Completed",this.currentServiceTask.completedAt=new Date),this.cdr.detectChanges()}onServiceTaskCancelled(e){console.log("Service task cancelled:",e),this.currentServiceTask&&(this.currentServiceTask.status="Cancelled",this.currentServiceTask.cancelledAt=new Date),this.cdr.detectChanges()}openMediaPicker(){console.log("Open media picker")}ngOnDestroy(){this.signalRHandler.cleanup(),this.signalRService.disconnect(),this.messagesState.clearAll(),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(R(so),R(te),R(xr),R(ao),R(It),R(ti),R(ri),R(oi),R(di),R(qo))};static \u0275cmp=U({type:i,selectors:[["app-messages"]],decls:16,vars:13,consts:[["noSelection",""],[1,"chat-wrapper"],[1,"chat-container"],[1,"sidebar"],[1,"sidebar-header"],["class","loading-indicator",4,"ngIf"],[1,"conversation-list"],["class","conversation",3,"active","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","load-more-btn",3,"disabled","click",4,"ngIf"],["class","chat-area",3,"overlay-active",4,"ngIf","ngIfElse"],["class","notification-container",4,"ngIf"],[1,"loading-indicator"],[1,"loading-spinner"],[1,"conversation",3,"click"],[3,"src","alt"],[1,"conversation-info"],[1,"conversation-name"],["class","conversation-preview",4,"ngIf"],["class","unread-badge",4,"ngIf"],[1,"conversation-preview"],[1,"unread-badge"],[1,"load-more-btn",3,"click","disabled"],[4,"ngIf"],["class","loading-text",4,"ngIf"],[1,"loading-text"],[1,"inline-spinner"],[1,"chat-area"],[1,"chat-header"],["src","assets/icons/info.svg","alt","specialist_info",3,"routerLink"],[1,"chat-messages"],["class","initial-messages-loading",4,"ngIf"],["class","load-more-btn top",3,"disabled","click",4,"ngIf"],["class","loading-more-messages",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","empty-messages",4,"ngIf"],["class","sending-message-indicator",4,"ngIf"],["class","connection-status offline",4,"ngIf"],[1,"chat-input"],[3,"disabled"],["src","assets/icons/photo_media.svg","alt","photo_media","title","Adaug\u0103 o poz\u0103",3,"click"],["type","text","placeholder","Scrie un mesaj aici",3,"ngModelChange","keydown.enter","ngModel","disabled"],["title","Trimite mesaj",1,"send-btn",3,"click","disabled"],["class","inline-spinner small",4,"ngIf"],["class","reply-form-overlay",4,"ngIf"],["class","service-message-overlay",4,"ngIf"],[1,"initial-messages-loading"],[1,"loading-spinner","large"],[1,"load-more-btn","top",3,"click","disabled"],[1,"loading-more-messages"],[3,"ngSwitch"],[3,"message","currentUserId",4,"ngSwitchCase"],[3,"request","currentUserId","requestAccepted","requestRejected","makeOffer",4,"ngSwitchCase"],[3,"reply","currentUserId","replyAccepted","replyRejected",4,"ngSwitchCase"],["class","error-message",4,"ngSwitchCase"],[3,"message","currentUserId"],[3,"requestAccepted","requestRejected","makeOffer","request","currentUserId"],[3,"replyAccepted","replyRejected","reply","currentUserId"],[1,"error-message"],[1,"empty-messages"],[1,"empty-state-icon"],[1,"sending-message-indicator"],[1,"message-sending"],[1,"loading-dots"],[1,"connection-status","offline"],[1,"status-indicator"],[1,"status-dot","offline"],[1,"inline-spinner","small"],[1,"reply-form-overlay"],[1,"overlay-background",3,"click"],[1,"reply-form-container"],[3,"formSubmit","close","replyForm"],[1,"service-message-overlay"],[1,"service-message-container"],[1,"overlay-header"],[1,"close-overlay-btn",3,"click"],[3,"taskCompleted","taskCancelled","serviceTask","replyId"],[1,"overlay-footer"],[1,"close-overlay-btn","secondary",3,"click"],[1,"chat-area","empty"],[1,"notification-container"]],template:function(t,n){if(t&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),u(4,"Convorbiri"),s(),A(5,Cf,4,0,"div",5),$(6,"async"),a(7,"div",6),A(8,Sf,8,9,"div",7),$(9,"async"),A(10,Pf,6,9,"button",8),s()(),A(11,Gf,37,50,"div",9),$(12,"async"),A(13,Wf,5,0,"ng-template",null,0,ki),s()(),A(15,Hf,1,0,"div",10)),t&2){let o=J(14);h(5),f("ngIf",le(6,7,n.loading$)===!0),h(3),f("ngForOf",le(9,9,n.exchanges$))("ngForTrackBy",n.trackByConversation),h(2),f("ngIf",n.messagesState.conversationListMeta.hasMore),h(),f("ngIf",le(12,11,n.selectedUserInfo$))("ngIfElse",o),h(4),f("ngIf",!1)}},dependencies:[re,Ee,Ie,Me,Uc,Q,to,Ln,no,io,Bn,ro,oo,ye,Et,Lc],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Roboto Mono,monospace}[_nghost-%COMP%]{display:block;background-color:#f4f4f4;padding:2rem;position:relative}.chat-wrapper[_ngcontent-%COMP%]{width:100%;max-width:1000px;margin:auto;border:3px solid black;background-color:#e8d9ff}.chat-container[_ngcontent-%COMP%]{display:flex;height:600px}.sidebar[_ngcontent-%COMP%]{width:25%;border-right:3px solid black;display:flex;flex-direction:column}.sidebar-header[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:12px}.conversation[_ngcontent-%COMP%]{padding:1rem;border-bottom:2px solid black;background-color:#c9b7ff;display:flex;align-items:center;gap:1rem;cursor:pointer}.conversation[_ngcontent-%COMP%]:hover{background-color:#b8a6ff}.conversation.active[_ngcontent-%COMP%]{background-color:#a695ff}.conversation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%}.chat-area[_ngcontent-%COMP%]{position:relative;width:75%;display:flex;flex-direction:column}.chat-header[_ngcontent-%COMP%]{border-bottom:3px solid black;padding:16px;background-color:#c9b7ff;display:flex;justify-content:space-between;align-items:center}.chat-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer}.chat-messages[_ngcontent-%COMP%]{flex-grow:1;padding:1rem;overflow-y:auto;position:relative}.chat-messages[_ngcontent-%COMP%]   app-message-bubble[_ngcontent-%COMP%], .chat-messages[_ngcontent-%COMP%]   app-request-message[_ngcontent-%COMP%], .chat-messages[_ngcontent-%COMP%]   app-reply-message[_ngcontent-%COMP%]{display:block;width:100%}.chat-messages[_ngcontent-%COMP%]   ng-container[_ngcontent-%COMP%]{display:contents}.chat-input[_ngcontent-%COMP%]{border-top:2px solid black;display:flex;align-items:center;padding:.5rem;gap:.5rem}.chat-input[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{flex:1;padding:.5rem;border-radius:6px;border:none;font-family:Roboto Mono,monospace}.chat-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer}.chat-input[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{background-color:#7e6cbe;padding:.5rem 1rem;border-radius:6px}.contact-link[_ngcontent-%COMP%]{position:absolute;top:10px;right:20px;font-size:.9rem}.message-left[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin:10px}.message-right[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin:10px}.action-buttons[_ngcontent-%COMP%]{margin-top:12px;display:flex;gap:10px;justify-content:center}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .2s ease-in-out,box-shadow .2s ease-in-out;font-family:Roboto Mono,monospace}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.action-buttons[_ngcontent-%COMP%]   .accept-btn[_ngcontent-%COMP%]:hover{background-color:#9bc2a3;box-shadow:0 2px 6px #0003}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.action-buttons[_ngcontent-%COMP%]   .reject-btn[_ngcontent-%COMP%]:hover{background-color:#be8a90;box-shadow:0 2px 6px #0003}.conversation-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;z-index:10;display:flex;align-items:center;justify-content:center;padding:1rem;box-shadow:0 0 12px #0003}.no-conversations[_ngcontent-%COMP%]{padding:1rem;color:#888;font-style:italic}.chat-area.empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#888;font-style:italic}.chat-area.overlay-active[_ngcontent-%COMP%]{position:relative}.chat-messages.scroll-frozen[_ngcontent-%COMP%]{overflow:hidden!important;pointer-events:none}.service-message-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:100;display:flex;align-items:center;justify-content:center;padding:1rem;box-sizing:border-box}.service-message-container[_ngcontent-%COMP%]{position:relative;background:#fff;border:3px solid #28a745;border-radius:16px;max-width:500px;width:100%;max-height:80vh;overflow-y:auto;box-shadow:0 8px 32px #0000004d;font-family:Roboto Mono,monospace;animation:_ngcontent-%COMP%_overlayFadeIn .3s ease-out}.overlay-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem 1rem;border-bottom:2px solid #e0caff;background:linear-gradient(135deg,#d4edda,#c3e6cb);border-radius:13px 13px 0 0}.overlay-footer[_ngcontent-%COMP%]{padding:1.5rem 2rem;text-align:center;border-top:1px solid #e0e0e0;background-color:#f9f9f9;border-radius:0 0 13px 13px}@keyframes _ngcontent-%COMP%_successPulse{0%{transform:scale(.3);opacity:0}50%{transform:scale(1.1)}to{transform:scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_loading-dots{0%,80%,to{opacity:.3;transform:scale(.8)}40%{opacity:1;transform:scale(1)}}@media (max-width: 768px){.service-message-overlay[_ngcontent-%COMP%]{padding:.5rem}.service-message-container[_ngcontent-%COMP%]{max-height:90vh}.overlay-header[_ngcontent-%COMP%]{padding:1rem 1.5rem .5rem;flex-direction:column;gap:.5rem;text-align:center}.overlay-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem}.overlay-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem}.close-overlay-btn.secondary[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-size:.9rem}.loading-indicator[_ngcontent-%COMP%], .initial-messages-loading[_ngcontent-%COMP%]{padding:1rem}.loading-indicator[_ngcontent-%COMP%]   .loading-spinner.large[_ngcontent-%COMP%], .initial-messages-loading[_ngcontent-%COMP%]   .loading-spinner.large[_ngcontent-%COMP%]{width:30px;height:30px}.loading-more-messages[_ngcontent-%COMP%]{padding:.75rem;font-size:.85rem}}.loading-spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #e0caff;border-top:2px solid #6c5ce7;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-spinner.large[_ngcontent-%COMP%]{width:40px;height:40px;border-width:3px}.loading-spinner.small[_ngcontent-%COMP%]{width:16px;height:16px;border-width:2px}.inline-spinner[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border:1.5px solid transparent;border-top:1.5px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-right:5px}.inline-spinner.small[_ngcontent-%COMP%]{width:10px;height:10px;border-width:1px}.loading-dots[_ngcontent-%COMP%]{display:inline-block;position:relative;width:20px;height:4px}.loading-dots[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;width:4px;height:4px;border-radius:50%;background:#6c5ce7;animation:_ngcontent-%COMP%_loading-dots 1.4s ease-in-out infinite both}.loading-dots[_ngcontent-%COMP%]:after{content:"";position:absolute;left:8px;top:0;width:4px;height:4px;border-radius:50%;background:#6c5ce7;animation:_ngcontent-%COMP%_loading-dots 1.4s ease-in-out .2s infinite both}.loading-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;color:#666;font-style:italic}.loading-indicator[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:0}.initial-messages-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:#666;font-style:italic}.initial-messages-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:0}.loading-more-messages[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:1rem;color:#666;font-style:italic;border-bottom:1px solid #e0caff;margin-bottom:1rem}.loading-more-messages[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{margin-right:.5rem}.loading-more-messages[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.sending-message-indicator[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:.5rem 1rem}.sending-message-indicator[_ngcontent-%COMP%]   .message-sending[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;background-color:#f0f0f0;border-radius:18px;font-size:.85rem;color:#666;font-style:italic}.sending-message-indicator[_ngcontent-%COMP%]   .message-sending[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]{margin-right:.5rem}.loading-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.load-more-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.75rem 1rem;margin:.5rem;background-color:#e0caff;border:2px solid #6c5ce7;border-radius:6px;cursor:pointer;font-family:Roboto Mono,monospace;font-size:.9rem;transition:all .2s ease}.load-more-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#d4bfff;transform:translateY(-1px)}.load-more-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.load-more-btn.top[_ngcontent-%COMP%]{margin-bottom:1rem}.empty-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:#888;font-style:italic}.empty-messages[_ngcontent-%COMP%]   .empty-state-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;opacity:.5}.chat-area.empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;color:#888;font-style:italic}.chat-area.empty[_ngcontent-%COMP%]   .empty-state-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;opacity:.3}.chat-input[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{background-color:#f5f5f5;color:#999;cursor:not-allowed}.chat-input[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.chat-input[_ngcontent-%COMP%]   .send-btn[disabled][_ngcontent-%COMP%]{background-color:#d4bfff}.reply-form-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:100;display:flex;align-items:center;justify-content:center;box-sizing:border-box}.reply-form-container[_ngcontent-%COMP%]{position:relative}.overlay-background[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;cursor:pointer}.connection-status[_ngcontent-%COMP%]{position:sticky;top:0;z-index:15;padding:8px 16px;background:#fff3cd;border-bottom:2px solid #ffeaa7;text-align:center;font-size:14px;color:#856404}.connection-status.online[_ngcontent-%COMP%]{background:#d4edda;border-color:#c3e6cb;color:#155724}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;font-family:Roboto Mono,monospace}.status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#28a745}.status-dot.offline[_ngcontent-%COMP%]{background:#ffc107;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.1)}to{opacity:1;transform:scale(1)}}.notification-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1050;max-width:400px;pointer-events:none}.notification[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;margin-bottom:8px;border-radius:8px;background:#fff;box-shadow:0 4px 12px #0000001a;border:2px solid #6c757d;animation:_ngcontent-%COMP%_slideInRight .3s ease-out;font-family:Roboto Mono,monospace;pointer-events:auto}.notification.success[_ngcontent-%COMP%]{border-color:#28a745;background:#d4edda;color:#155724}.notification.info[_ngcontent-%COMP%]{border-color:#17a2b8;background:#d1ecf1;color:#0c5460}.notification.warning[_ngcontent-%COMP%]{border-color:#ffc107;background:#fff3cd;color:#856404}.notification.error[_ngcontent-%COMP%]{border-color:#dc3545;background:#f8d7da;color:#721c24}.notification[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;padding:0;margin-left:12px;opacity:.7;font-family:Roboto Mono,monospace}.notification[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_overlayFadeIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.reply-form-overlay[_ngcontent-%COMP%], .service-message-overlay[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInBackdrop .2s ease-out}.reply-form-overlay[_ngcontent-%COMP%]   .reply-form-container[_ngcontent-%COMP%], .reply-form-overlay[_ngcontent-%COMP%]   .service-message-container[_ngcontent-%COMP%], .service-message-overlay[_ngcontent-%COMP%]   .reply-form-container[_ngcontent-%COMP%], .service-message-overlay[_ngcontent-%COMP%]   .service-message-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_overlayFadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInBackdrop{0%{background:#0000}to{background:#000000b3}}.sending-message-indicator[_ngcontent-%COMP%]   .message-sending[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]{background:linear-gradient(90deg,#6c5ce7 0%,transparent 50%,#6c5ce7 100%);background-size:200% 100%;animation:_ngcontent-%COMP%_loadingDots 1.5s infinite;width:20px;height:4px;border-radius:2px}.sending-message-indicator[_ngcontent-%COMP%]   .message-sending[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]:before, .sending-message-indicator[_ngcontent-%COMP%]   .message-sending[_ngcontent-%COMP%]   .loading-dots[_ngcontent-%COMP%]:after{display:none}@keyframes _ngcontent-%COMP%_loadingDots{0%{background-position:200% 0}to{background-position:-200% 0}}.conversation-list[_ngcontent-%COMP%]{overflow-y:auto;flex:1}.conversation-info[_ngcontent-%COMP%]{flex:1;min-width:0}.conversation-info[_ngcontent-%COMP%]   .conversation-name[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:4px}.conversation-info[_ngcontent-%COMP%]   .conversation-preview[_ngcontent-%COMP%]{font-size:.85rem;color:#666;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.unread-badge[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border-radius:50%;padding:2px 6px;font-size:.75rem;font-weight:700;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;flex-shrink:0}@media (max-width: 768px){.chat-container[_ngcontent-%COMP%]{height:500px}.sidebar[_ngcontent-%COMP%]{width:35%}.chat-area[_ngcontent-%COMP%]{width:65%}.conversation[_ngcontent-%COMP%]{padding:.75rem}.conversation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px}.conversation-info[_ngcontent-%COMP%]   .conversation-name[_ngcontent-%COMP%]{font-size:.9rem}.conversation-info[_ngcontent-%COMP%]   .conversation-preview[_ngcontent-%COMP%]{font-size:.8rem}.notification-container[_ngcontent-%COMP%]{top:10px;right:10px;left:10px;max-width:none}.notification[_ngcontent-%COMP%]{padding:10px 12px;font-size:.9rem}}@media (max-width: 480px){[_nghost-%COMP%]{padding:1rem}.chat-container[_ngcontent-%COMP%]{height:450px}.sidebar[_ngcontent-%COMP%]{width:40%}.chat-area[_ngcontent-%COMP%]{width:60%}.sidebar-header[_ngcontent-%COMP%]{padding:8px;font-size:.9rem}.chat-header[_ngcontent-%COMP%]{padding:12px;font-size:.9rem}}']})};function Kf(i,e){if(i&1){let t=F();a(0,"div",7),B(1,"img",8),a(2,"button",9),E("click",function(){let o=P(t).index,c=y(2);return T(c.remove(o))}),u(3,"\xD7"),s()()}if(i&2){let t=e.$implicit;h(),f("src",t,Ye)}}function Qf(i,e){if(i&1&&(a(0,"div",5),A(1,Kf,4,1,"div",6),s()),i&2){let t=y();h(),f("ngForOf",t.imagePreviews)}}function Jf(i,e){i&1&&(a(0,"div",10)(1,"p"),u(2,"Nu ai ad\u0103ugat nicio imagine \xEEn portofoliu"),s()())}var zo=class i{constructor(e,t){this.photoService=e;this.sanitizer=t}uploadedPictures=[];portfolioChange=new K;imagePreviews=[];onFileSelected(e){let t=e.target;if(t.files)for(let n of t.files){let o=n,c={fileStream:o,contentType:o.type,fileName:o.name};this.uploadedPictures.push(c),this.portfolioChange.emit(this.uploadedPictures);let p=new FileReader;p.onload=()=>{this.imagePreviews.push(p.result)},p.readAsDataURL(o)}}remove(e){this.uploadedPictures.splice(e,1),this.imagePreviews.splice(e,1),this.portfolioChange.emit(this.uploadedPictures)}static \u0275fac=function(t){return new(t||i)(R(cn),R(zc))};static \u0275cmp=U({type:i,selectors:[["app-portfolio-upload"]],inputs:{uploadedPictures:"uploadedPictures"},outputs:{portfolioChange:"portfolioChange"},decls:6,vars:2,consts:[[1,"portfolio-section"],["class","portfolio-images",4,"ngIf"],["class","portfolio-empty",4,"ngIf"],[1,"upload-portfolio-btn"],["type","file","multiple","","accept","image/*","hidden","",3,"change"],[1,"portfolio-images"],["class","image-item",4,"ngFor","ngForOf"],[1,"image-item"],["alt","Portfolio image",3,"src"],["type","button",1,"delete-image-btn",3,"click"],[1,"portfolio-empty"]],template:function(t,n){t&1&&(a(0,"div",0),A(1,Qf,2,1,"div",1)(2,Jf,3,0,"div",2),a(3,"label",3),u(4," \u{1F4F8} Adaug\u0103 imagini "),a(5,"input",4),E("change",function(c){return n.onFileSelected(c)}),s()()()),t&2&&(h(),f("ngIf",n.imagePreviews.length>0),h(),f("ngIf",n.uploadedPictures.length===0))},dependencies:[ye,Q],styles:[".portfolio-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;max-width:100%}.portfolio-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;align-items:flex-start;width:100%;margin-bottom:24px;padding:0}.portfolio-preview[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.image-container[_ngcontent-%COMP%]{position:relative;width:150px;height:150px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.delete-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background-color:#000000b3;color:#fff;border:none;border-radius:50%;font-size:14px;cursor:pointer;width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#000000e6}.custom-upload-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;background-color:#d9c8ff;color:#000;border:2px solid black;border-radius:5px;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;cursor:pointer;transition:background-color .3s ease;margin:0 auto;min-width:200px}.custom-upload-btn[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.section-title[_ngcontent-%COMP%]{margin-bottom:16px;font-family:Roboto Mono,monospace;text-align:center;font-size:18px}.error-text[_ngcontent-%COMP%]{color:red;font-size:14px;text-align:center;margin-top:8px}.portfolio-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.portfolio-images[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;min-height:60px;padding:16px;border:2px dashed #c9b7ff;border-radius:8px;background-color:#fafafa}.portfolio-empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:120px;padding:16px;border:2px dashed #c9b7ff;border-radius:8px;background-color:#fafafa;color:#666;font-style:italic}.image-item[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a;border:2px solid #e0e0e0}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.delete-image-btn[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;background-color:#000000b3;color:#fff;border:none;border-radius:50%;font-size:16px;cursor:pointer;width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease;font-weight:700}.delete-image-btn[_ngcontent-%COMP%]:hover{background-color:#dc3545cc}.upload-portfolio-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:8px 16px;background-color:#d9c8ff;color:#000;border:2px solid black;border-radius:5px;font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;cursor:pointer;transition:background-color .3s ease;align-self:flex-start;margin-bottom:40px}.upload-portfolio-btn[_ngcontent-%COMP%]:hover{background-color:#cbb6ff;transform:translateY(-1px)}"]})};function Yf(i,e){if(i&1&&(a(0,"strong"),u(1),s()),i&2){let t=y();h(),Y(t.title)}}function Xf(i,e){if(i&1){let t=F();a(0,"div",4)(1,"button",5),E("click",function(){P(t);let o=y();return T(o.onConfirm())}),u(2),s(),a(3,"button",6),E("click",function(){P(t);let o=y();return T(o.onCancel())}),u(4),s()()}if(i&2){let t=y();h(2),Y(t.confirmText),h(2),Y(t.cancelText)}}function Zf(i,e){if(i&1){let t=F();a(0,"button",7),E("click",function(){P(t);let o=y();return T(o.onClose())}),u(1,"\xD7"),s()}}var $o=class i{type="info";title="";message="";showActions=!1;confirmText="Da";cancelText="Nu";close=new K;confirm=new K;cancel=new K;onClose(){this.close.emit()}onConfirm(){this.confirm.emit()}onCancel(){this.cancel.emit()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-alert"]],inputs:{type:"type",title:"title",message:"message",showActions:"showActions",confirmText:"confirmText",cancelText:"cancelText"},outputs:{close:"close",confirm:"confirm",cancel:"cancel"},decls:6,vars:5,consts:[[1,"alert",3,"ngClass"],[4,"ngIf"],["class","alert-actions",4,"ngIf"],["class","close-btn",3,"click",4,"ngIf"],[1,"alert-actions"],[1,"alert-btn","confirm-btn",3,"click"],[1,"alert-btn","cancel-btn",3,"click"],[1,"close-btn",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0),A(1,Yf,2,1,"strong",1),a(2,"p"),u(3),s(),A(4,Xf,5,2,"div",2)(5,Zf,2,0,"button",3),s()),t&2&&(f("ngClass",n.type),h(),f("ngIf",n.title),h(2),Y(n.message),h(),f("ngIf",n.showActions),h(),f("ngIf",!n.showActions))},dependencies:[ze,Q],styles:[".alert[_ngcontent-%COMP%]{position:relative;padding:1rem;border-radius:8px;margin:1rem 0;font-size:.95rem}.alert.info[_ngcontent-%COMP%]{background-color:#e0f0ff;color:#00599f}.alert.success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.alert.warning[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.alert.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.alert[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:1rem;background:none;border:none;font-size:1.2rem;cursor:pointer}.alert[_ngcontent-%COMP%]   .alert-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-top:16px}.alert[_ngcontent-%COMP%]   .alert-btn[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:14px;font-weight:700;border:2px solid;border-radius:5px;padding:8px 16px;cursor:pointer;transition:background-color .3s ease}.alert[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-color:#721c24}.alert[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]:hover{background-color:#f1aeb5}.alert[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;border-color:#000}.alert[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}"]})};var Eu=()=>[];function eg(i,e){if(i&1){let t=F();a(0,"div",7)(1,"app-alert",8),E("confirm",function(){P(t);let o=y();return T(o.handleAlertConfirm())})("cancel",function(){P(t);let o=y();return T(o.handleAlertCancel())}),s()()}if(i&2){let t=y();h(),f("message",t.getAlertMessage())("showActions",!0)}}function tg(i,e){if(i&1){let t=F();a(0,"button",9),E("click",function(){P(t);let o=y();return T(o.showBackConfirmation())}),u(1," \u2190 "),s()}}function ng(i,e){if(i&1){let t=F();a(0,"app-dynamic-form",10),E("formSubmit",function(o){P(t);let c=y();return T(c.handleStep1(o))}),s()}if(i&2){let t=y();f("fields",t.step1FormFields)("submitText","Treci la pasul urm\u0103tor")}}function ig(i,e){if(i&1){let t=F();a(0,"div",11)(1,"app-category-selector",12),E("categoryChange",function(o){P(t);let c=y();return T(c.updateCategories(o))}),s(),a(2,"div",13)(3,"div",14)(4,"button",15),E("click",function(){P(t);let o=y();return T(o.handleStep2())}),u(5,"Treci la pasul urm\u0103tor"),s()()()()}if(i&2){let t=y();h(),f("selectedCategoryIds",t.specialistData.categories||ot(1,Eu))}}function rg(i,e){if(i&1){let t=F();a(0,"div",11)(1,"div",13)(2,"app-portfolio-upload",16),E("portfolioChange",function(o){P(t);let c=y();return T(c.updatePortfolio(o))}),s()(),a(3,"div",13)(4,"div",14)(5,"button",15),E("click",function(){P(t);let o=y();return T(o.addEntity())}),u(6,"Finalizeaz\u0103"),s()()()()}if(i&2){let t=y();h(2),f("uploadedPictures",t.specialistData.portfolio||ot(1,Eu))}}var Go=class i{constructor(e,t,n){this.authService=e;this.specialistProfileService=t;this.router=n}step=1;portfolioImages=[];imagePreviews=[];showStep2BackAlert=!1;showStep3BackAlert=!1;specialistData={yearsExperience:0,phoneNumber:"",address:"",description:"",categories:[],portfolio:[]};formData={};step1FormFields=Qe({yearsExperience:0,phoneNumber:"",address:"",description:""},{address:{type:"text",class:"full-width"},yearsExperience:{type:"number",placeholder:"Ex: 5"},description:{type:"textarea",placeholder:"Descrie serviciile oferite",class:"full-width"}});isAddUserFormVisible=!1;ngOnInit(){let e={phoneNumber:"",address:"",yearsExperience:0,description:""};this.formData=L({},e)}handleStep1(e){this.specialistData=L(L({},this.specialistData),e),this.step=2}updateCategories(e){this.specialistData.categories=e}handleStep2(){if(!this.specialistData.categories||this.specialistData.categories.length===0){console.warn("No categories selected");return}this.step=3}updatePortfolio(e){this.portfolioImages=e.map(t=>t.fileStream),this.imagePreviews=e.map(t=>URL.createObjectURL(t.fileStream)),this.specialistData.portfolio=e}showBackConfirmation(){this.step===2?this.showStep2BackAlert=!0:this.step===3&&(this.showStep3BackAlert=!0)}getAlertMessage(){return this.showStep2BackAlert?"Sigur vrei s\u0103 te \xEEntorci la pasul anterior? Categoriile selectate vor fi pierdute.":this.showStep3BackAlert?"Sigur vrei s\u0103 te \xEEntorci la pasul anterior? Toate imaginile ad\u0103ugate vor fi pierdute.":""}handleAlertConfirm(){this.showStep2BackAlert?this.goBackToStep1():this.showStep3BackAlert&&this.goBackToStep2()}handleAlertCancel(){this.showStep2BackAlert=!1,this.showStep3BackAlert=!1}goBackToStep1(){this.specialistData.categories=[],this.showStep2BackAlert=!1,this.step=1}goBackToStep2(){this.specialistData.portfolio=[],this.portfolioImages=[],this.imagePreviews=[],this.showStep3BackAlert=!1,this.step=2}addEntity(){let e=this.authService.getUserId();if(!e){console.error("User ID not found");return}let t={userId:e,phoneNumber:this.specialistData.phoneNumber,address:this.specialistData.address,yearsExperience:this.specialistData.yearsExperience,description:this.specialistData.description,categories:this.specialistData.categories};this.specialistProfileService.becomeSpecialist(t).subscribe({next:()=>{this.closeAddUserForm(),this.router.navigate(["/home"])},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}closeAddUserForm(){this.isAddUserFormVisible=!1}static \u0275fac=function(t){return new(t||i)(R(te),R(ei),R(xe))};static \u0275cmp=U({type:i,selectors:[["app-become-specialist"]],decls:10,vars:6,consts:[["class","modal-overlay",4,"ngIf"],[1,"form-wrapper"],[1,"form-box"],["class","close-button","title","\xCEnapoi",3,"click",4,"ngIf"],[3,"ngSwitch"],[3,"fields","submitText","formSubmit",4,"ngSwitchCase"],["class","form-layout",4,"ngSwitchCase"],[1,"modal-overlay"],["type","warning","title","Confirmare","confirmText","Da, m\u0103 \xEEntorc","cancelText","Anuleaz\u0103",3,"confirm","cancel","message","showActions"],["title","\xCEnapoi",1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[1,"form-layout"],[3,"categoryChange","selectedCategoryIds"],[1,"form-group","full-width"],[1,"button-wrapper"],[1,"send-button",3,"click"],[3,"portfolioChange","uploadedPictures"]],template:function(t,n){t&1&&(a(0,"h2"),u(1,"Devino specialist!"),s(),A(2,eg,2,2,"div",0),a(3,"div",1)(4,"div",2),A(5,tg,2,0,"button",3),Oe(6,4),A(7,ng,1,2,"app-dynamic-form",5)(8,ig,6,2,"div",6)(9,rg,7,2,"div",6),Re(),s()()),t&2&&(h(2),f("ngIf",n.showStep2BackAlert||n.showStep3BackAlert),h(3),f("ngIf",n.step>1),h(),f("ngSwitch",n.step),h(),f("ngSwitchCase",1),h(),f("ngSwitchCase",2),h(),f("ngSwitchCase",3))},dependencies:[nt,Bn,Ln,Zn,zo,$o,Q],styles:["h2[_ngcontent-%COMP%]{text-align:center;font-family:Roboto Mono,monospace;font-size:30px}.button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:row;align-items:center;gap:16px}.send-button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.send-button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}.form-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px 20px;padding:24px 32px;max-width:650px;margin:0 auto}.form-group[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;flex:1;display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{flex:1 1 100%}.back-button[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:120px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}.back-button[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}"]})};var og=["class","categories"],sg=()=>[5,10,20];function ag(i,e){if(i&1){let t=F();a(0,"div",9)(1,"div",10)(2,"div",11)(3,"button",12),E("click",function(){P(t);let o=y();return T(o.closeAddEntityForm())}),u(4,"\xD7"),s()(),a(5,"app-dynamic-form",13),E("formSubmit",function(o){P(t);let c=y();return T(c.addEntity(o))}),s()()()}if(i&2){let t=y();h(5),f("fields",t.addEntityFormFields)("submitText","Trimite")}}function cg(i,e){if(i&1){let t=F();a(0,"div",9)(1,"div",10)(2,"button",12),E("click",function(){P(t);let o=y();return T(o.closeUpdateEntityForm())}),u(3,"\xD7"),s(),a(4,"app-dynamic-form",14),E("formSubmit",function(o){P(t);let c=y();return T(c.updateEntity(o))}),s()()()}if(i&2){let t=y();h(4),f("fields",t.updateEntityFormFields)("initialData",t.formData)("submitText","Actualizeaz\u0103")}}function lg(i,e){if(i&1){let t=F();a(0,"app-admin-details",18),E("close",function(){P(t);let o=y(2);return T(o.closeEntityDetails())}),s()}if(i&2){let t=y(2);f("entity",t.entityDetails)("title","Detalii categorie")}}function ug(i,e){if(i&1){let t=F();a(0,"div",15)(1,"div",16)(2,"button",12),E("click",function(){P(t);let o=y();return T(o.closeEntityDetails())}),u(3,"\xD7"),s(),A(4,lg,1,2,"app-admin-details",17),s()()}if(i&2){let t=y();h(4),f("ngIf",t.isEntityDetailsVisible)}}var Wo=class i{constructor(e){this.adminService=e}dummy_categories=[{id:"c1",name:"Psihologie",description:"Categoria pentru speciali\u0219ti \xEEn psihologie",specialistsCount:5,specialistIds:["s1","s2","s3","s4","s5"]},{id:"c2",name:"Nutri\u021Bie",description:"Categoria pentru speciali\u0219ti \xEEn nutri\u021Bie",specialistsCount:3,specialistIds:["s6","s7","s8"]}];searchTerm="";entities=[];selectedEntity=null;entityDetails={};entityDetailsId;pageSize=10;currentPage=1;totalItems=0;isAddEntityFormVisible=!1;isUpdateEntityFormVisible=!1;isEntityDetailsVisible=!1;selectedEntityId=null;columns=[{key:"id",header:"ID"},{key:"name",header:"Denumire"},{key:"description",header:"Descriere"},{key:"specialistsCount",header:"Num\u0103r speciali\u0219ti"},{key:"specialistIds",header:"Speciali\u0219tii cu aceast\u0103 categorie"},{key:"actions",header:"Ac\u021Biuni",type:"action",actions:[{label:"Detalii",class:"view",callback:e=>this.getEntity(e.id)},{label:"Modific\u0103",class:"edit",callback:e=>this.editEntity(e)},{label:"\u0218terge",class:"delete",callback:e=>this.deleteEntity(e)}]}];defaultEntity={name:"",description:""};formData={};error=null;addEntityFormFields=Qe(this.defaultEntity,{description:{type:"input",placeholder:"Descrie categoria",required:!1}});updateEntityFormFields=Qe({name:this.selectedEntity?.name||"",description:this.selectedEntity?.description||""});placeholder="Caut\u0103 o categorie...";ngOnInit(){let e={name:"",description:""};this.formData=L({},e),this.getPage()}onSearch(e){this.searchTerm=e,this.currentPage=1,this.getPage()}getEntity(e){console.log(e),this.adminService.getCategoryById(e).subscribe({next:t=>{this.entityDetailsId=t.response?.id,this.entityDetails=Yn(t.response??{}),this.isEntityDetailsVisible=!0},error:t=>{console.error("Eroare la preluarea utilizatorului:",t.errorMessage?.status),alert("Nu s-au putut \xEEnc\u0103rca detaliile utilizatorului.")}})}getPage(){this.adminService.getCategoriesAdminPage(this.searchTerm,this.currentPage,this.pageSize).subscribe({next:e=>{console.log(e.response),this.entities=e.response?.data??[],this.totalItems=e.response?.totalCount??0},error:e=>{this.error=e.error?.errorMessage?.message||"A ap\u0103rut o eroare."}})}addEntity(e){let t=e;this.adminService.addCategory(t).subscribe({next:()=>{this.closeAddEntityForm(),this.getPage()},error:n=>{console.error("Eroare la ad\u0103ugarea utilizatorului:",n)}})}editEntity(e){this.selectedEntityId=e.id,this.formData={name:e.name,description:e.description},this.isUpdateEntityFormVisible=!0}updateEntity(e){if(!this.selectedEntityId){console.error("Niciun utilizator nu a fost selectat pentru actualizare."),alert("Eroare: Nu a fost selectat niciun utilizator pentru actualizare.");return}let t={id:this.selectedEntityId,name:e.name||this.formData.name,description:e.description||this.formData.description};this.adminService.updateCategory(t).subscribe({next:()=>{this.closeUpdateEntityForm(),this.getPage()},error:n=>{console.error("Eroare la actualizare:",n)}})}showEntityDetails(e){this.isEntityDetailsVisible=!0}closeEntityDetails(){this.isEntityDetailsVisible=!1,this.selectedEntity=null}closeUpdateEntityForm(){this.selectedEntityId=null,this.resetForm(),this.isUpdateEntityFormVisible=!1}openAddEntityForm(){this.selectedEntityId=null,this.resetForm(),this.isAddEntityFormVisible=!0}viewEntity(e){this.isEntityDetailsVisible=!0}deleteEntity(e){confirm(`Sigur dori\u021Bi s\u0103 \u0219terge\u021Bi categoria ${e.name}?`)&&this.adminService.deleteCategory(e.id).subscribe({next:()=>{this.getPage()},error:t=>{console.error("Eroare la \u0219tergerea utilizatorului:",t)}})}closeAddEntityForm(){this.isAddEntityFormVisible=!1,this.resetForm()}resetForm(){this.formData={name:"",description:""}}onPageChange(e){this.currentPage=e,this.getPage()}onPageSizeChange(e){this.pageSize=e,this.currentPage=1,this.getPage()}static \u0275fac=function(t){return new(t||i)(R(Xn))};static \u0275cmp=U({type:i,selectors:[["app-admin",8,"categories"]],attrs:og,decls:13,vars:11,consts:[[3,"pageChange","pageSizeChange","currentPage","pageSize","pageSizeOptions","totalItems"],[1,"admin-wrapper"],[1,"admin-table-container"],[1,"search-box-wrapper"],[3,"searchChanged","placeholder"],[1,"add-btn",3,"click"],[3,"columns","data"],["class","modal-overlay",4,"ngIf"],["class","admin-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal"],[1,"close-button-wrapper"],[1,"close-button",3,"click"],[3,"formSubmit","fields","submitText"],[3,"formSubmit","fields","initialData","submitText"],[1,"admin-overlay"],[1,"admin-modal"],[3,"entity","title","close",4,"ngIf"],[3,"close","entity","title"]],template:function(t,n){t&1&&(a(0,"app-pagination",0),E("pageChange",function(c){return n.onPageChange(c)})("pageSizeChange",function(c){return n.onPageSizeChange(c)}),s(),a(1,"div",1)(2,"div",2)(3,"h2"),u(4,"Administreaz\u0103 toate categoriile"),s(),a(5,"div",3)(6,"app-search-input",4),E("searchChanged",function(c){return n.onSearch(c)}),s()(),a(7,"button",5),E("click",function(){return n.openAddEntityForm()}),u(8,"Adaug\u0103 categorie"),s(),B(9,"app-dynamic-table",6),s()(),A(10,ag,6,2,"div",7)(11,cg,5,3,"div",7)(12,ug,5,1,"div",8)),t&2&&(f("currentPage",n.currentPage)("pageSize",n.pageSize)("pageSizeOptions",ot(10,sg))("totalItems",n.totalItems),h(6),f("placeholder",n.placeholder),h(3),f("columns",n.columns)("data",n.entities),h(),f("ngIf",n.isAddEntityFormVisible),h(),f("ngIf",n.isUpdateEntityFormVisible),h(),f("ngIf",n.isEntityDetailsVisible))},dependencies:[an,nt,ht,sn,Tt,Q],styles:[".admin-wrapper[_ngcontent-%COMP%]{text-align:center}.admin-table-container[_ngcontent-%COMP%]{display:inline-block;padding:24px;background-color:#d9c8ff;border:2px solid #4b358e;border-radius:8px;font-family:Roboto Mono,monospace;box-shadow:0 4px 8px #0000001a;margin:40px auto}.admin-table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.admin-table[_ngcontent-%COMP%]{width:max-content;max-width:100%;margin-left:auto;margin-right:auto;border-collapse:collapse;background-color:#f8f4ff;border-radius:6px}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .admin-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #ddd;text-align:left;font-size:14px;white-space:nowrap}.admin-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#cfbdfe;color:#333;font-weight:700}.action-link[_ngcontent-%COMP%]{margin-right:12px;cursor:pointer;text-decoration:none;font-weight:700}.action-link.view[_ngcontent-%COMP%]{color:#00f}.action-link.edit[_ngcontent-%COMP%]{color:green}.action-link.delete[_ngcontent-%COMP%]{color:red}.add-btn[_ngcontent-%COMP%]{background-color:#916fc7;color:#fff;border:3px solid #4b358e;margin-top:14px;margin-bottom:20px;padding:8px 16px;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s;font-family:Roboto Mono,monospace}.add-btn[_ngcontent-%COMP%]:hover{background-color:#3a2973}",".admin-wrapper[_ngcontent-%COMP%]{padding:24px 32px;font-family:Roboto Mono,monospace;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:24px}.divider[_ngcontent-%COMP%]{border:none;height:3px;background-color:#bfa3ff;margin:16px 0}.card[_ngcontent-%COMP%]{background-color:#e3d1ff;padding:32px;border-radius:12px;max-width:600px;width:90%;box-shadow:0 10px 30px #0003;font-family:Roboto Mono,monospace;border:2px solid #bfa3ff;position:relative}.admin-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0000004d;display:flex;align-items:center;justify-content:center;z-index:1000}.admin-modal[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:12px;box-shadow:0 0 20px #0000004d;max-width:700px;width:90%}strong[_ngcontent-%COMP%]{white-space:nowrap}"]})};function dg(i,e){i&1&&(a(0,"div",43),B(1,"div",44),a(2,"p"),u(3,"Se \xEEncarc\u0103..."),s()())}function pg(i,e){if(i&1&&(a(0,"div",45),u(1),s()),i&2){let t=y();Xe("error",t.saveMessage.includes("Eroare")),h(),G(" ",t.saveMessage," ")}}function hg(i,e){if(i&1&&(a(0,"option",46),u(1),s()),i&2){let t=e.$implicit;f("value",t.value),h(),G(" ",t.label," ")}}function mg(i,e){if(i&1&&(a(0,"option",46),u(1),s()),i&2){let t=e.$implicit;f("value",t.value),h(),G(" ",t.label," ")}}function fg(i,e){if(i&1){let t=F();a(0,"label",24)(1,"input",47),z("ngModelChange",function(o){P(t);let c=y();return j(c.settings.autoAcceptRequests,o)||(c.settings.autoAcceptRequests=o),T(o)}),s(),a(2,"span"),u(3,"Accept\u0103 automat cererile \xEEn programul de lucru"),s()()}if(i&2){let t=y();h(),q("ngModel",t.settings.autoAcceptRequests)}}function gg(i,e){if(i&1){let t=F();a(0,"label",59)(1,"input",60),E("change",function(){let o=P(t).$implicit,c=y(3);return T(c.toggleWorkingDay(o.value))}),s(),a(2,"span"),u(3),s()()}if(i&2){let t=e.$implicit,n=y(3);Xe("selected",n.isWorkingDaySelected(t.value)),h(),f("checked",n.isWorkingDaySelected(t.value)),h(2),Y(t.label)}}function _g(i,e){if(i&1){let t=F();a(0,"div",50)(1,"div",51)(2,"div",52)(3,"label",53),u(4,"Ora de \xEEnceput"),s(),a(5,"input",54),z("ngModelChange",function(o){P(t);let c=y(2);return j(c.settings.workingHours.start,o)||(c.settings.workingHours.start=o),T(o)}),s()(),a(6,"div",52)(7,"label",55),u(8,"Ora de sf\xE2r\u0219it"),s(),a(9,"input",56),z("ngModelChange",function(o){P(t);let c=y(2);return j(c.settings.workingHours.end,o)||(c.settings.workingHours.end=o),T(o)}),s()()(),a(10,"div",8)(11,"label"),u(12,"Zilele de lucru"),s(),a(13,"div",57),A(14,gg,4,4,"label",58),s()()()}if(i&2){let t=y(2);h(5),q("ngModel",t.settings.workingHours.start),h(4),q("ngModel",t.settings.workingHours.end),h(5),f("ngForOf",t.availableDays)}}function yg(i,e){if(i&1){let t=F();a(0,"section",6)(1,"h2"),u(2,"Program de lucru"),s(),a(3,"form",7),E("ngSubmit",function(){P(t);let o=y();return T(o.saveWorkingHours())}),a(4,"div",23)(5,"label",24)(6,"input",48),z("ngModelChange",function(o){P(t);let c=y();return j(c.settings.workingHours.enabled,o)||(c.settings.workingHours.enabled=o),T(o)}),s(),a(7,"span"),u(8,"Activeaz\u0103 programul de lucru"),s()()(),A(9,_g,15,3,"div",49),a(10,"button",19),u(11," Salveaz\u0103 programul de lucru "),s()()()}if(i&2){let t=y();h(6),q("ngModel",t.settings.workingHours.enabled),h(3),f("ngIf",t.settings.workingHours.enabled),h(),f("disabled",t.loading)}}var Ho=class i{constructor(e,t,n,o){this.userService=e;this.authService=t;this.photoService=n;this.router=o}destroy$=new rt;user=null;loading=!1;saveMessage="";settings={fullName:"",email:"",phoneNumber:"",address:"",language:"ro",darkMode:!1,emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,marketingEmails:!1,serviceReminders:!0,locationSharing:!1,profileVisibility:"public",autoAcceptRequests:!1,workingHours:{enabled:!1,start:"09:00",end:"17:00",days:[]}};availableDays=[{value:"monday",label:"Luni"},{value:"tuesday",label:"Mar\u021Bi"},{value:"wednesday",label:"Miercuri"},{value:"thursday",label:"Joi"},{value:"friday",label:"Vineri"},{value:"saturday",label:"S\xE2mb\u0103t\u0103"},{value:"sunday",label:"Duminic\u0103"}];languages=[{value:"ro",label:"Rom\xE2n\u0103"},{value:"en",label:"English"},{value:"fr",label:"Fran\xE7ais"},{value:"de",label:"Deutsch"}];profileVisibilityOptions=[{value:"public",label:"Public - vizibil pentru to\u021Bi"},{value:"specialists-only",label:"Doar pentru speciali\u0219ti"},{value:"private",label:"Privat - ascuns din c\u0103ut\u0103ri"}];ngOnInit(){this.loadUserProfile()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadUserProfile(){this.loading=!0}populateSettingsFromUser(){this.user&&(this.settings=ue(L({},this.settings),{fullName:this.user.fullName||"",email:this.user.email||"",phoneNumber:this.user.contactInfo?.phoneNumber||"",address:this.user.contactInfo?.address||""}))}onImageUpload(e){let t=e.target.files?.[0];t&&(this.loading=!0,this.photoService.addProfilePicture(t).pipe(gt(this.destroy$)).subscribe({next:n=>{this.showSaveMessage("Poza de profil a fost actualizat\u0103 cu succes!"),this.loadUserProfile()},error:n=>{console.error("Error uploading image:",n),this.showSaveMessage("Eroare la \xEEnc\u0103rcarea pozei de profil.",!0)},complete:()=>{this.loading=!1}}))}saveBasicInfo(){if(!this.user)return;this.loading=!0;let e={fullName:this.settings.fullName,email:this.settings.email,contactInfo:{phoneNumber:this.settings.phoneNumber,address:this.settings.address}}}saveNotificationSettings(){this.loading=!0,setTimeout(()=>{this.showSaveMessage("Set\u0103rile de notificare au fost salvate!"),this.loading=!1},1e3)}savePrivacySettings(){this.loading=!0,setTimeout(()=>{this.showSaveMessage("Set\u0103rile de confiden\u021Bialitate au fost salvate!"),this.loading=!1},1e3)}saveWorkingHours(){this.isSpecialist()&&(this.loading=!0,setTimeout(()=>{this.showSaveMessage("Programul de lucru a fost salvat!"),this.loading=!1},1e3))}toggleWorkingDay(e){let t=this.settings.workingHours.days.indexOf(e);t>-1?this.settings.workingHours.days.splice(t,1):this.settings.workingHours.days.push(e)}isWorkingDaySelected(e){return this.settings.workingHours.days.includes(e)}isSpecialist(){return this.user?.role==="Specialist"}changePassword(){this.router.navigate(["/profile/change-password"])}exportData(){this.showSaveMessage("Datele tale vor fi trimise pe email \xEEn cur\xE2nd.")}deactivateAccount(){confirm("E\u0219ti sigur c\u0103 vrei s\u0103 dezactivezi contul? Contul t\u0103u va fi ascuns temporar, dar po\u021Bi s\u0103 \xEEl reactivezi oric\xE2nd.")&&(this.loading=!0,setTimeout(()=>{this.showSaveMessage("Contul a fost dezactivat."),this.authService.logout(),this.router.navigate(["/home"])},1500))}deleteAccount(){confirm("E\u0219ti sigur c\u0103 vrei s\u0103 \u0219tergi contul? Aceast\u0103 ac\u021Biune este ireversibil\u0103 \u0219i toate datele tale vor fi \u0219terse permanent.")&&confirm("Confirm\u0103 din nou: Toate datele tale vor fi \u0219terse permanent. Aceast\u0103 ac\u021Biune NU poate fi anulat\u0103.")&&(this.loading=!0,setTimeout(()=>{this.showSaveMessage("Contul a fost \u0219ters."),this.authService.logout(),this.router.navigate(["/home"])},2e3))}goBack(){this.router.navigate(["/profile"])}showSaveMessage(e,t=!1){this.saveMessage=e,setTimeout(()=>{this.saveMessage=""},3e3)}static \u0275fac=function(t){return new(t||i)(R(It),R(te),R(cn),R(xe))};static \u0275cmp=U({type:i,selectors:[["app-settings"]],decls:115,vars:25,consts:[[1,"settings-container"],[1,"settings-header"],[1,"back-button",3,"click"],[1,"settings-title"],["class","loading-spinner",4,"ngIf"],["class","save-message",3,"error",4,"ngIf"],[1,"settings-section"],[3,"ngSubmit"],[1,"form-group"],["for","fullName"],["id","fullName","type","text","name","fullName","required","",3,"ngModelChange","ngModel"],["for","email"],["id","email","type","email","name","email","required","",3,"ngModelChange","ngModel"],["for","phone"],["id","phone","type","tel","name","phone",3,"ngModelChange","ngModel"],["for","address"],["id","address","name","address","rows","3","placeholder","Strada, num\u0103rul, ora\u0219ul, jude\u021Bul",3,"ngModelChange","ngModel"],["for","profileImage"],["id","profileImage","type","file","accept","image/*",3,"change"],["type","submit",3,"disabled"],["for","language"],["id","language","name","language",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"checkbox-group"],[1,"checkbox-label"],["type","checkbox","name","darkMode",3,"ngModelChange","ngModel"],["type","checkbox","name","emailNotifications",3,"ngModelChange","ngModel"],["type","checkbox","name","smsNotifications",3,"ngModelChange","ngModel"],["type","checkbox","name","pushNotifications",3,"ngModelChange","ngModel"],["type","checkbox","name","serviceReminders",3,"ngModelChange","ngModel"],["type","checkbox","name","marketingEmails",3,"ngModelChange","ngModel"],["for","profileVisibility"],["id","profileVisibility","name","profileVisibility",3,"ngModelChange","ngModel"],["type","checkbox","name","locationSharing",3,"ngModelChange","ngModel"],["class","checkbox-label",4,"ngIf"],["class","settings-section",4,"ngIf"],[1,"security-actions"],["type","button",1,"security-btn",3,"click"],[1,"settings-section","danger-section"],[1,"danger-actions"],[1,"danger",3,"click","disabled"],[1,"danger","delete",3,"click","disabled"],[1,"danger-warning"],[1,"loading-spinner"],[1,"spinner"],[1,"save-message"],[3,"value"],["type","checkbox","name","autoAcceptRequests",3,"ngModelChange","ngModel"],["type","checkbox","name","workingHoursEnabled",3,"ngModelChange","ngModel"],["class","working-hours-config",4,"ngIf"],[1,"working-hours-config"],[1,"form-row"],[1,"form-group","half"],["for","startTime"],["id","startTime","type","time","name","startTime",3,"ngModelChange","ngModel"],["for","endTime"],["id","endTime","type","time","name","endTime",3,"ngModelChange","ngModel"],[1,"days-selection"],["class","day-checkbox",3,"selected",4,"ngFor","ngForOf"],[1,"day-checkbox"],["type","checkbox",3,"change","checked"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),E("click",function(){return n.goBack()}),u(3,"\u2190 \xCEnapoi la profil"),s(),a(4,"h1",3),u(5,"Set\u0103rile contului"),s()(),A(6,dg,4,0,"div",4)(7,pg,2,3,"div",5),a(8,"section",6)(9,"h2"),u(10,"Informa\u021Bii de baz\u0103"),s(),a(11,"form",7),E("ngSubmit",function(){return n.saveBasicInfo()}),a(12,"div",8)(13,"label",9),u(14,"Nume complet"),s(),a(15,"input",10),z("ngModelChange",function(c){return j(n.settings.fullName,c)||(n.settings.fullName=c),c}),s()(),a(16,"div",8)(17,"label",11),u(18,"Adresa e-mail"),s(),a(19,"input",12),z("ngModelChange",function(c){return j(n.settings.email,c)||(n.settings.email=c),c}),s()(),a(20,"div",8)(21,"label",13),u(22,"Num\u0103r de telefon"),s(),a(23,"input",14),z("ngModelChange",function(c){return j(n.settings.phoneNumber,c)||(n.settings.phoneNumber=c),c}),s()(),a(24,"div",8)(25,"label",15),u(26,"Adresa"),s(),a(27,"textarea",16),z("ngModelChange",function(c){return j(n.settings.address,c)||(n.settings.address=c),c}),s()(),a(28,"div",8)(29,"label",17),u(30,"Poza de profil"),s(),a(31,"input",18),E("change",function(c){return n.onImageUpload(c)}),s(),a(32,"small"),u(33,"Formate acceptate: JPG, PNG, GIF (max 5MB)"),s()(),a(34,"button",19),u(35," Salveaz\u0103 informa\u021Biile de baz\u0103 "),s()()(),a(36,"section",6)(37,"h2"),u(38,"Preferin\u021Be aplica\u021Bie"),s(),a(39,"form",7),E("ngSubmit",function(){return n.saveNotificationSettings()}),a(40,"div",8)(41,"label",20),u(42,"Limba aplica\u021Biei"),s(),a(43,"select",21),z("ngModelChange",function(c){return j(n.settings.language,c)||(n.settings.language=c),c}),A(44,hg,2,2,"option",22),s()(),a(45,"div",23)(46,"label",24)(47,"input",25),z("ngModelChange",function(c){return j(n.settings.darkMode,c)||(n.settings.darkMode=c),c}),s(),a(48,"span"),u(49,"Activeaz\u0103 modul \xEEntunecat"),s()()(),a(50,"button",19),u(51," Salveaz\u0103 preferin\u021Bele "),s()()(),a(52,"section",6)(53,"h2"),u(54,"Notific\u0103ri"),s(),a(55,"form",7),E("ngSubmit",function(){return n.saveNotificationSettings()}),a(56,"div",23)(57,"label",24)(58,"input",26),z("ngModelChange",function(c){return j(n.settings.emailNotifications,c)||(n.settings.emailNotifications=c),c}),s(),a(59,"span"),u(60,"Notific\u0103ri prin e-mail"),s()(),a(61,"label",24)(62,"input",27),z("ngModelChange",function(c){return j(n.settings.smsNotifications,c)||(n.settings.smsNotifications=c),c}),s(),a(63,"span"),u(64,"Notific\u0103ri prin SMS"),s()(),a(65,"label",24)(66,"input",28),z("ngModelChange",function(c){return j(n.settings.pushNotifications,c)||(n.settings.pushNotifications=c),c}),s(),a(67,"span"),u(68,"Notific\u0103ri push \xEEn browser"),s()(),a(69,"label",24)(70,"input",29),z("ngModelChange",function(c){return j(n.settings.serviceReminders,c)||(n.settings.serviceReminders=c),c}),s(),a(71,"span"),u(72,"Amintiri pentru serviciile programate"),s()(),a(73,"label",24)(74,"input",30),z("ngModelChange",function(c){return j(n.settings.marketingEmails,c)||(n.settings.marketingEmails=c),c}),s(),a(75,"span"),u(76,"E-mailuri de marketing \u0219i promo\u021Bii"),s()()(),a(77,"button",19),u(78," Salveaz\u0103 set\u0103rile de notificare "),s()()(),a(79,"section",6)(80,"h2"),u(81,"Confiden\u021Bialitate"),s(),a(82,"form",7),E("ngSubmit",function(){return n.savePrivacySettings()}),a(83,"div",8)(84,"label",31),u(85,"Vizibilitatea profilului"),s(),a(86,"select",32),z("ngModelChange",function(c){return j(n.settings.profileVisibility,c)||(n.settings.profileVisibility=c),c}),A(87,mg,2,2,"option",22),s()(),a(88,"div",23)(89,"label",24)(90,"input",33),z("ngModelChange",function(c){return j(n.settings.locationSharing,c)||(n.settings.locationSharing=c),c}),s(),a(91,"span"),u(92,"Permite partajarea loca\u021Biei pentru servicii"),s()(),A(93,fg,4,1,"label",34),s(),a(94,"button",19),u(95," Salveaz\u0103 set\u0103rile de confiden\u021Bialitate "),s()()(),A(96,yg,12,3,"section",35),a(97,"section",6)(98,"h2"),u(99,"Securitate"),s(),a(100,"div",36)(101,"button",37),E("click",function(){return n.changePassword()}),u(102," Schimb\u0103 parola "),s(),a(103,"button",37),E("click",function(){return n.exportData()}),u(104," Export\u0103 datele mele "),s()()(),a(105,"section",38)(106,"h2"),u(107,"Ac\u021Biuni cont"),s(),a(108,"div",39)(109,"button",40),E("click",function(){return n.deactivateAccount()}),u(110," Dezactiveaz\u0103 contul temporar "),s(),a(111,"button",41),E("click",function(){return n.deleteAccount()}),u(112," \u0218terge contul permanent "),s()(),a(113,"small",42),u(114," \u26A0\uFE0F Ac\u021Biunile de mai sus sunt ireversibile. Te rug\u0103m s\u0103 fii foarte atent. "),s()()()),t&2&&(h(6),f("ngIf",n.loading),h(),f("ngIf",n.saveMessage),h(8),q("ngModel",n.settings.fullName),h(4),q("ngModel",n.settings.email),h(4),q("ngModel",n.settings.phoneNumber),h(4),q("ngModel",n.settings.address),h(7),f("disabled",n.loading),h(9),q("ngModel",n.settings.language),h(),f("ngForOf",n.languages),h(3),q("ngModel",n.settings.darkMode),h(3),f("disabled",n.loading),h(8),q("ngModel",n.settings.emailNotifications),h(4),q("ngModel",n.settings.smsNotifications),h(4),q("ngModel",n.settings.pushNotifications),h(4),q("ngModel",n.settings.serviceReminders),h(4),q("ngModel",n.settings.marketingEmails),h(3),f("disabled",n.loading),h(9),q("ngModel",n.settings.profileVisibility),h(),f("ngForOf",n.profileVisibilityOptions),h(3),q("ngModel",n.settings.locationSharing),h(3),f("ngIf",n.isSpecialist()),h(),f("disabled",n.loading),h(2),f("ngIf",n.isSpecialist()),h(13),f("disabled",n.loading),h(2),f("disabled",n.loading))},dependencies:[re,tt,Wn,Hn,Ee,ks,nn,Ie,et,at,Me,st,Q,ye],styles:[".settings-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;background-color:#f9f6ff;border-radius:12px;box-shadow:0 0 8px #0000001a}.settings-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:2rem;gap:1rem}.settings-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{background:#6541f0;color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.9rem;transition:background-color .3s}.settings-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{background:#5134c9}.settings-title[_ngcontent-%COMP%]{font-size:1.8rem;margin:0;font-weight:700;flex:1}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem}.loading-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #6541f0;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;color:#666}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.save-message[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem;border-radius:6px;background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.save-message.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-color:#f5c6cb}.settings-section[_ngcontent-%COMP%]{margin-bottom:3rem;border-top:1px solid #e1e1e1;padding-top:2rem}.settings-section[_ngcontent-%COMP%]:first-of-type{border-top:none}.settings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:1.5rem;color:#333;font-weight:600}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.5rem;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border-radius:6px;border:1px solid #ddd;font-size:1rem;transition:border-color .3s,box-shadow .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#6541f0;box-shadow:0 0 0 3px #6541f01a}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.25rem;color:#666;font-size:.85rem}.form-group.half[_ngcontent-%COMP%]{width:calc(50% - .5rem)}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.checkbox-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:1rem;cursor:pointer;padding:.5rem;border-radius:4px;transition:background-color .3s}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-right:.75rem;transform:scale(1.2)}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;color:#333}.working-hours-config[_ngcontent-%COMP%]{background:#f8f9fa;padding:1.5rem;border-radius:8px;margin-top:1rem}.days-selection[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.days-selection[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]{background:#fff;border:2px solid #ddd;border-radius:6px;padding:.5rem 1rem;cursor:pointer;transition:all .3s;min-width:80px;text-align:center}.days-selection[_ngcontent-%COMP%]   .day-checkbox.selected[_ngcontent-%COMP%]{background:#6541f0;border-color:#6541f0;color:#fff}.days-selection[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]:hover{border-color:#6541f0}.days-selection[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.days-selection[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500}.security-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.security-actions[_ngcontent-%COMP%]   .security-btn[_ngcontent-%COMP%]{background:#17a2b8;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:6px;cursor:pointer;font-weight:500;transition:background-color .3s}.security-actions[_ngcontent-%COMP%]   .security-btn[_ngcontent-%COMP%]:hover{background:#138496}.danger-section[_ngcontent-%COMP%]{border-top:2px solid #dc3545;background:#fff5f5;padding:2rem;border-radius:8px}.danger-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#dc3545}.danger-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;flex-wrap:wrap}.danger-warning[_ngcontent-%COMP%]{color:#dc3545;font-style:italic;display:block;margin-top:1rem}button[_ngcontent-%COMP%]{display:inline-block;padding:.75rem 1.5rem;border:none;border-radius:6px;background-color:#6541f0;color:#fff;font-weight:500;cursor:pointer;transition:all .3s;font-size:1rem}button[_ngcontent-%COMP%]:hover{background-color:#5134c9;transform:translateY(-1px)}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed;transform:none}button.danger[_ngcontent-%COMP%]{background-color:#dc3545;margin-right:1rem}button.danger[_ngcontent-%COMP%]:hover{background-color:#c82333}button.danger.delete[_ngcontent-%COMP%]{background-color:#a71d2a}button.danger.delete[_ngcontent-%COMP%]:hover{background-color:#8b1a26}@media (max-width: 768px){.settings-container[_ngcontent-%COMP%]{padding:1rem;margin:1rem}.settings-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.settings-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{align-self:flex-start}.form-row[_ngcontent-%COMP%]{flex-direction:column}.form-row[_ngcontent-%COMP%]   .form-group.half[_ngcontent-%COMP%]{width:100%}.days-selection[_ngcontent-%COMP%]{justify-content:center}.days-selection[_ngcontent-%COMP%]   .day-checkbox[_ngcontent-%COMP%]{flex:1;min-width:60px}.security-actions[_ngcontent-%COMP%], .danger-actions[_ngcontent-%COMP%]{flex-direction:column}.security-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .danger-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};var Ko=class i{constructor(e,t){this.http=e;this.authService=t}baseUrl="http://localhost:5241/api/Review";addReview(e,t){let n=this.authService.getToken(),o=new ee({Authorization:`Bearer ${n}`});return this.http.post(`${this.baseUrl}task/${e}/confirm/reviews`,t,{headers:o})}getReviews(e,t){let n=this.authService.getToken(),o=new ee({Authorization:`Bearer ${n}`}),c=new bt().set("page",e).set("pageSize",t);return this.http.get(`${this.baseUrl}/GetPage`,{params:c,headers:o})}getReview(e){let t=this.authService.getToken(),n=new ee({Authorization:`Bearer ${t}`});return this.http.get(`${this.baseUrl}/GetById/${e}`,{headers:n})}static \u0275fac=function(t){return new(t||i)(Z(ke),Z(te))};static \u0275prov=ne({token:i,factory:i.\u0275fac,providedIn:"root"})};var bg=()=>[];function Cg(i,e){if(i&1&&B(0,"img",9),i&2){let t=y().$implicit;f("src",t.senderUserProfilePictureUrl,Ye)}}function xg(i,e){i&1&&(Oe(0),B(1,"img",10),Re())}function wg(i,e){if(i&1&&(a(0,"div",3)(1,"div",4),A(2,Cg,1,1,"img",5),a(3,"div",6)(4,"strong"),u(5),s(),a(6,"span",7),A(7,xg,2,0,"ng-container",8),s()()(),a(8,"p"),u(9),s(),a(10,"small"),u(11),$(12,"date"),s()()),i&2){let t=e.$implicit;h(2),f("ngIf",t.senderUserProfilePictureUrl),h(3),Y(t.senderUserFullName),h(2),f("ngForOf",ot(8,bg).constructor(t.rating)),h(2),Y(t.content),h(2),Y(Se(12,5,t.createdAt,"shortDate"))}}var Qo=class i{constructor(e){this.reviewService=e}reviews=[];page=1;pageSize=5;dummyReviews=[{id:"1",senderUserFullName:"Ana Popescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/21.jpg",rating:5,content:"Excelent! A fost foarte profesionist\u0103 \u0219i m-a ajutat rapid.",createdAt:new Date("2024-12-05T14:35:00"),updatedAt:new Date("2024-12-05T14:35:00")},{id:"2",senderUserFullName:"Andrei Ionescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/32.jpg",rating:4,content:"Serviciu bun, dar am avut o mic\u0103 \xEEnt\xE2rziere la \xEEnceput.",createdAt:new Date("2025-01-10T09:20:00"),updatedAt:new Date("2025-01-10T09:20:00")},{id:"3",senderUserFullName:"Mihai Georgescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/45.jpg",rating:3,content:"Experien\u021B\u0103 ok, dar se poate \xEEmbun\u0103t\u0103\u021Bi comunicarea.",createdAt:new Date("2025-03-18T17:45:00"),updatedAt:new Date("2025-03-18T17:45:00")},{id:"4",senderUserFullName:"Elena Tudor",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/55.jpg",rating:5,content:"Foarte mul\u021Bumit\u0103! Recomand cu \xEEncredere!",createdAt:new Date("2025-04-02T11:10:00"),updatedAt:new Date("2025-04-02T11:10:00")},{id:"5",senderUserFullName:"Radu Vasile",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/men/61.jpg",rating:2,content:"Din p\u0103cate, nu a fost ce am a\u0219teptat. Probleme de punctualitate.",createdAt:new Date("2025-02-14T08:30:00"),updatedAt:new Date("2025-02-14T08:30:00")},{id:"6",senderUserFullName:"Ioana Marinescu",senderUserProfilePictureUrl:"https://randomuser.me/api/portraits/women/88.jpg",rating:4,content:"Totul a decurs bine, dar a\u0219 fi vrut mai multe explica\u021Bii.",createdAt:new Date("2025-05-22T15:50:00"),updatedAt:new Date("2025-05-22T15:50:00")}];ngOnInit(){this.reviews=this.dummyReviews,this.loadReviews()}loadReviews(){this.reviewService.getReviews(this.page,this.pageSize).subscribe({next:e=>{this.reviews=e.response?.data||[]},error:e=>{console.error("Error loading reviews",e)}})}static \u0275fac=function(t){return new(t||i)(R(Ko))};static \u0275cmp=U({type:i,selectors:[["app-reviews"]],decls:5,vars:1,consts:[[1,"account-card"],[1,"reviews-container"],["class","review-card",4,"ngFor","ngForOf"],[1,"review-card"],[1,"header"],["alt","Profil",3,"src",4,"ngIf"],[1,"review-info"],[1,"rating"],[4,"ngFor","ngForOf"],["alt","Profil",3,"src"],["src","assets/icons/star-filled.svg","alt","star",2,"width","24px","height","24px","margin-right","0"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h2"),u(3,"Recenziile tale"),s(),A(4,wg,13,9,"div",2),s()()),t&2&&(h(4),f("ngForOf",n.reviews))},dependencies:[ye,Q,Ze],styles:[".account-card[_ngcontent-%COMP%]{background:#e0caff;max-width:1000px;margin:32px auto;box-shadow:0 4px 16px #0000001a;font-family:Roboto Mono,monospace;border:3px solid black}.reviews-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:32px}.reviews-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px;text-align:center;margin-bottom:32px;font-weight:700;color:#000}.review-card[_ngcontent-%COMP%]{background-color:#f5f2ff;border-radius:10px;padding:1.25rem;margin-bottom:1.5rem;box-shadow:0 2px 8px #0000000d;transition:transform .2s}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;object-fit:cover;margin-right:16px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;padding-top:4px}.review-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .review-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:18px;line-height:1;margin-left:3px;margin-bottom:2px}.review-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:1rem;color:#333}.review-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;text-align:right;color:#777;font-size:.85rem}.rating[_ngcontent-%COMP%]{display:flex;align-items:center}.rating[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:1px}"]})};function Sg(i,e){i&1&&(a(0,"span",32),u(1,"\u2713"),s())}function Eg(i,e){i&1&&(a(0,"p",33),u(1," Selecteaz\u0103 metoda de plat\u0103 pe care dore\u0219ti s-o utilizezi "),s())}function Ig(i,e){i&1&&(a(0,"span"),u(1,"Confirm\u0103 \u0219i pl\u0103te\u0219te"),s())}function Pg(i,e){i&1&&(a(0,"span"),u(1,"Se proceseaz\u0103..."),s())}var Jo=class i{constructor(e){this.paymentFlowService=e}destroy$=new rt;serviceDetails=null;userDetails=null;specialistDetails=null;paymentMethodSelected=!1;isProcessing=!1;showError=!1;protectionFee=5;get totalAmount(){return this.serviceDetails?this.serviceDetails.price+this.protectionFee:0}ngOnInit(){this.paymentFlowService.paymentFlow$.pipe(gt(this.destroy$)).subscribe(e=>{e.isActive&&(this.serviceDetails=e.serviceDetails,this.userDetails=e.userDetails,this.specialistDetails=e.specialistDetails)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}selectCardPayment(){this.paymentMethodSelected=!0,this.showError=!1}processPayment(){if(!this.paymentMethodSelected){this.showError=!0;return}if(!this.serviceDetails||!this.userDetails||!this.specialistDetails){console.error("Missing payment details");return}this.isProcessing=!0,setTimeout(()=>{this.handlePaymentSuccess()},2e3)}handlePaymentSuccess(){let e={id:`payment_${Date.now()}`,amount:this.totalAmount,currency:"RON",status:"Completed",serviceTaskId:this.serviceDetails.serviceTaskId,paidAt:new Date().toISOString(),createdAt:new Date().toISOString(),stripePaymentIntentId:`pi_${Date.now()}`,serviceDescription:this.serviceDetails.description,serviceAddress:this.serviceDetails.address,serviceStartDate:this.serviceDetails.startDate,serviceEndDate:this.serviceDetails.endDate,specialistName:this.specialistDetails.userFullName,clientName:this.userDetails.userFullName};this.paymentFlowService.completePayment(e),this.isProcessing=!1}cancelPayment(){this.paymentFlowService.cancelPaymentFlow()}static \u0275fac=function(t){return new(t||i)(R(ti))};static \u0275cmp=U({type:i,selectors:[["app-service-payment"]],decls:116,vars:46,consts:[[1,"payment-overlay"],[1,"payment-container"],[1,"payment-header"],[1,"close-btn",3,"click","disabled"],[1,"payment-content"],[1,"payment-section"],[1,"details-grid"],[1,"detail-item"],[1,"label"],[1,"value"],[1,"payment-method"],[1,"card-payment-option",3,"click"],["src","assets/icons/card.svg","alt","Card bancar",1,"payment-icon"],[1,"payment-text"],[1,"card-brands"],["src","assets/icons/visa.png","alt","Visa",1,"brand-icon"],["src","assets/icons/mastercard.png","alt","Mastercard",1,"brand-icon"],["class","selection-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"payment-section","price-section"],[1,"price-breakdown"],[1,"price-item"],[1,"price-label"],[1,"price-value"],[1,"price-item","protection-info"],[1,"price-divider"],[1,"price-item","total"],[1,"price-value","total-amount"],[1,"payment-actions"],[1,"cancel-btn",3,"click","disabled"],[1,"pay-btn",3,"click","disabled"],[4,"ngIf"],[1,"selection-indicator"],[1,"error-message"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),u(4,"Confirm\u0103 \u0219i pl\u0103te\u0219te serviciul"),s(),a(5,"button",3),E("click",function(){return n.cancelPayment()}),u(6,"\xD7"),s()(),a(7,"div",4)(8,"section",5)(9,"h3"),u(10,"Descriere"),s(),a(11,"p"),u(12),s()(),a(13,"section",5)(14,"h3"),u(15,"Detalii specialist"),s(),a(16,"div",6)(17,"div",7)(18,"span",8),u(19,"Nume:"),s(),a(20,"span",9),u(21),s()(),a(22,"div",7)(23,"span",8),u(24,"Adres\u0103 email:"),s(),a(25,"span",9),u(26),s()(),a(27,"div",7)(28,"span",8),u(29,"Num\u0103r de telefon:"),s(),a(30,"span",9),u(31),s()()()(),a(32,"section",5)(33,"h3"),u(34,"Detalii serviciu"),s(),a(35,"div",6)(36,"div",7)(37,"span",8),u(38,"Adresa serviciului:"),s(),a(39,"span",9),u(40),s()(),a(41,"div",7)(42,"span",8),u(43,"Data:"),s(),a(44,"span",9),u(45),$(46,"date"),s()(),a(47,"div",7)(48,"span",8),u(49,"Ora:"),s(),a(50,"span",9),u(51),$(52,"date"),$(53,"date"),s()()()(),a(54,"section",5)(55,"h3"),u(56,"Date de contact ale clientului"),s(),a(57,"div",6)(58,"div",7)(59,"span",8),u(60,"Num\u0103r de telefon:"),s(),a(61,"span",9),u(62),s()(),a(63,"div",7)(64,"span",8),u(65,"Adres\u0103 email:"),s(),a(66,"span",9),u(67),s()()()(),a(68,"section",5)(69,"h3"),u(70,"Plata"),s(),a(71,"div",10)(72,"div",11),E("click",function(){return n.selectCardPayment()}),B(73,"img",12),a(74,"div",13)(75,"strong"),u(76,"Card bancar"),s(),a(77,"p"),u(78,"Utilizeaz\u0103 un card de credit sau de debit"),s(),a(79,"div",14),B(80,"img",15)(81,"img",16),s()(),A(82,Sg,2,0,"span",17),s(),A(83,Eg,2,0,"p",18),s()(),a(84,"section",19)(85,"h3"),u(86,"Detalii pre\u021B"),s(),a(87,"div",20)(88,"div",21)(89,"span",22),u(90,"Pre\u021Bul serviciului:"),s(),a(91,"span",23),u(92),$(93,"currency"),s()(),a(94,"div",21)(95,"span",22),u(96,"Tax\u0103 de protec\u021Bie pentru client:"),s(),a(97,"span",23),u(98),$(99,"currency"),s()(),a(100,"div",24)(101,"small"),u(102,"Pentru cazuri de servicii nesatisf\u0103c\u0103toare"),s()(),B(103,"hr",25),a(104,"div",26)(105,"span",22),u(106,"Total:"),s(),a(107,"span",27),u(108),$(109,"currency"),s()()()()(),a(110,"div",28)(111,"button",29),E("click",function(){return n.cancelPayment()}),u(112," Anuleaz\u0103 "),s(),a(113,"button",30),E("click",function(){return n.processPayment()}),A(114,Ig,2,0,"span",31)(115,Pg,2,0,"span",31),s()()()()),t&2&&(h(5),f("disabled",n.isProcessing),h(7),Y(n.serviceDetails==null?null:n.serviceDetails.description),h(9),Y(n.specialistDetails==null?null:n.specialistDetails.userFullName),h(5),Y(n.specialistDetails==null?null:n.specialistDetails.email),h(5),Y(n.specialistDetails==null?null:n.specialistDetails.phoneNumber),h(9),Y(n.serviceDetails==null?null:n.serviceDetails.address),h(5),Y(Se(46,22,n.serviceDetails==null?null:n.serviceDetails.startDate,"dd MMMM yyyy")),h(6),Cr(" ",Se(52,25,n.serviceDetails==null?null:n.serviceDetails.startDate,"HH:mm")," - ",Se(53,28,n.serviceDetails==null?null:n.serviceDetails.endDate,"HH:mm")," "),h(11),Y(n.userDetails==null?null:n.userDetails.phoneNumber),h(5),Y(n.userDetails==null?null:n.userDetails.email),h(5),Xe("selected",n.paymentMethodSelected),h(10),f("ngIf",n.paymentMethodSelected),h(),f("ngIf",n.showError),h(9),Y(Zt(93,31,n.serviceDetails==null?null:n.serviceDetails.price,"RON","symbol","1.2-2")),h(6),Y(Zt(99,36,n.protectionFee,"RON","symbol","1.2-2")),h(10),Y(Zt(109,41,n.totalAmount,"RON","symbol","1.2-2")),h(3),f("disabled",n.isProcessing),h(2),f("disabled",!n.paymentMethodSelected||n.isProcessing),h(),f("ngIf",!n.isProcessing),h(),f("ngIf",n.isProcessing))},dependencies:[re,Ze,qn,Q],styles:[".payment-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;box-sizing:border-box}.payment-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 8px 32px #0003;max-width:700px;width:100%;max-height:90vh;overflow-y:auto;font-family:Roboto Mono,monospace}.payment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px 32px 16px;border-bottom:2px solid #e0caff}.payment-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#3c1a7d;font-size:1.5rem}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;padding:4px;border-radius:4px;transition:all .2s ease}.close-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f0f0f0;color:#333}.close-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.payment-content[_ngcontent-%COMP%]{padding:0 32px 24px}.payment-section[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #e0e0e0}.payment-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.payment-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:16px 0 12px;color:#3c1a7d;font-size:1.1rem;font-weight:700}.details-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:16px}.label[_ngcontent-%COMP%]{font-weight:700;color:#555;min-width:140px;flex-shrink:0}.value[_ngcontent-%COMP%]{color:#333;text-align:right;word-break:break-word}.payment-method[_ngcontent-%COMP%]{margin-top:8px}.card-payment-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .2s ease;background-color:#fff;position:relative}.card-payment-option[_ngcontent-%COMP%]:hover{border-color:#c9b7ff;background-color:#f9f6ff}.card-payment-option.selected[_ngcontent-%COMP%]{border-color:#3c1a7d;background-color:#f3e6ff}.payment-icon[_ngcontent-%COMP%]{width:32px;height:32px;flex-shrink:0}.payment-text[_ngcontent-%COMP%]{flex:1}.payment-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:4px;color:#333}.payment-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#666;font-size:.9rem}.card-brands[_ngcontent-%COMP%]{display:flex;gap:8px}.brand-icon[_ngcontent-%COMP%]{height:20px;width:auto}.selection-indicator[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;color:#3c1a7d;font-weight:700;font-size:18px}.error-message[_ngcontent-%COMP%]{color:#d32f2f;font-size:.9rem;margin-top:8px;margin-bottom:0}.price-section[_ngcontent-%COMP%]{background-color:#f9f6ff;padding:16px;border-radius:8px;border:1px solid #e0caff}.price-breakdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.price-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.price-item.protection-info[_ngcontent-%COMP%]{justify-content:flex-end;margin-top:-8px}.price-item.protection-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#666;font-style:italic}.price-label[_ngcontent-%COMP%]{color:#555}.price-value[_ngcontent-%COMP%]{font-weight:700;color:#333}.price-divider[_ngcontent-%COMP%]{border:none;height:1px;background-color:#d0d0d0;margin:8px 0}.price-item.total[_ngcontent-%COMP%]{padding-top:8px}.price-item.total[_ngcontent-%COMP%]   .price-label[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#333}.total-amount[_ngcontent-%COMP%]{font-size:1.3rem;color:#3c1a7d}.payment-actions[_ngcontent-%COMP%]{display:flex;gap:16px;padding:24px 32px;border-top:2px solid #e0caff;background-color:#fafafa;border-radius:0 0 12px 12px}.cancel-btn[_ngcontent-%COMP%], .pay-btn[_ngcontent-%COMP%]{flex:1;padding:12px 24px;border:2px solid;border-radius:8px;font-family:Roboto Mono,monospace;font-weight:700;font-size:1rem;cursor:pointer;transition:all .2s ease}.cancel-btn[_ngcontent-%COMP%]{background-color:#fff;border-color:#666;color:#666}.cancel-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f5f5f5;border-color:#333;color:#333}.pay-btn[_ngcontent-%COMP%]{background-color:#3c1a7d;border-color:#3c1a7d;color:#fff}.pay-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2d1460;border-color:#2d1460}.pay-btn[_ngcontent-%COMP%]:disabled, .cancel-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 768px){.payment-overlay[_ngcontent-%COMP%]{padding:10px}.payment-header[_ngcontent-%COMP%]{padding:16px 20px 12px}.payment-content[_ngcontent-%COMP%]{padding:0 20px 16px}.payment-actions[_ngcontent-%COMP%]{padding:16px 20px;flex-direction:column}.detail-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.label[_ngcontent-%COMP%]{min-width:auto}.value[_ngcontent-%COMP%]{text-align:left}}"]})};var Yo=class i{constructor(e){this.fb=e;this.contactForm=this.fb.group({name:["",en.required],email:["",[en.required,en.email]],subject:["",en.required],message:["",en.required]})}contactForm;onSubmit(){if(this.contactForm.valid){let e=this.contactForm.value;console.log("Contact form data:",e),alert("Mesajul a fost trimis cu succes!"),this.contactForm.reset()}}static \u0275fac=function(t){return new(t||i)(R(Ml))};static \u0275cmp=U({type:i,selectors:[["app-contact-us"]],decls:47,vars:1,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"contact-wrapper"],[3,"ngSubmit","formGroup"],["for","name"],["id","name","type","text","formControlName","name","placeholder","Ex: Ana Popescu"],["for","email"],["id","email","type","email","formControlName","email","placeholder","Ex: ana@email.com"],["for","subject"],["id","subject","type","text","formControlName","subject","placeholder","Subiectul mesajului"],["for","message"],["id","message","rows","5","formControlName","message","placeholder","Scrie-ne mesajul t\u0103u..."],[1,"form-actions"],["type","submit"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),u(3,"Ai o \u021Beav\u0103 spart\u0103?"),s(),a(4,"h1",2),u(5,"\u021Ai s-a stricat chiuveta?"),s(),a(6,"h1"),u(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),a(8,"strong",3),u(9,"ExpertEase"),s(),u(10,"!"),s()(),a(11,"p"),u(12,"Peste "),a(13,"strong"),u(14,"100 de speciali\u0219ti"),s(),u(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),s()(),a(16,"div",4)(17,"h2"),u(18,"Contacteaz\u0103-ne"),s(),a(19,"p")(20,"strong"),u(21,"Email:"),s(),u(22," contact@expertease.ro"),s(),a(23,"p")(24,"strong"),u(25,"Telefon:"),s(),u(26," +40 712 345 678"),s(),a(27,"p")(28,"strong"),u(29,"Adres\u0103:"),s(),u(30," Str. Exemplului 123, Bucure\u0219ti"),s(),a(31,"form",5),E("ngSubmit",function(){return n.onSubmit()}),a(32,"label",6),u(33,"Nume complet"),s(),B(34,"input",7),a(35,"label",8),u(36,"Email"),s(),B(37,"input",9),a(38,"label",10),u(39,"Subiect"),s(),B(40,"input",11),a(41,"label",12),u(42,"Mesaj"),s(),B(43,"textarea",13),a(44,"div",14)(45,"button",15),u(46,"Trimite"),s()()()()),t&2&&(h(31),f("formGroup",n.contactForm))},dependencies:[rn,tt,Ee,Ie,et,js,zs],styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.contact-wrapper[_ngcontent-%COMP%]{max-width:600px;margin:10px auto;padding:24px;font-family:Roboto Mono,monospace;border:2px solid #3c1a7d;border-radius:8px;background-color:#fff}h2[_ngcontent-%COMP%]{color:#3c1a7d;margin-bottom:24px;text-align:center}label[_ngcontent-%COMP%]{display:block;margin:12px 0 4px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;height:auto;padding:8px 10px;line-height:1.4;font-size:14px;box-sizing:border-box;border:1px solid #ccc;border-radius:4px;margin-bottom:12px;font-family:Roboto Mono,monospace}.form-actions[_ngcontent-%COMP%]{text-align:center;margin-top:20px}button[_ngcontent-%COMP%]{background-color:#d9c8ff;color:#000;font-family:Roboto Mono,monospace;font-size:16px;font-weight:700;border:2px solid black;border-radius:5px;padding:0;width:300px;height:44px;cursor:pointer;transition:background-color .3s ease;align-self:center}button[_ngcontent-%COMP%]:hover{background-color:#cbb6ff}"]})};var Xo=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-terms"]],decls:104,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"terms-container"],["href","/confidentialitate",1,"privacy-link"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),u(3,"Ai o \u021Beav\u0103 spart\u0103?"),s(),a(4,"h1",2),u(5,"\u021Ai s-a stricat chiuveta?"),s(),a(6,"h1"),u(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),a(8,"strong",3),u(9,"ExpertEase"),s(),u(10,"!"),s()(),a(11,"p"),u(12,"Peste "),a(13,"strong"),u(14,"100 de speciali\u0219ti"),s(),u(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),s()(),a(16,"div",4)(17,"section")(18,"h2"),u(19,"Introducere"),s(),a(20,"p"),u(21," Acest document stabile\u0219te termenii \u0219i condi\u021Biile de utilizare a platformei "),a(22,"strong"),u(23,"ExpertEase"),s(),u(24,". Prin accesarea sau utilizarea serviciilor noastre, sunte\u021Bi de acord cu ace\u0219ti termeni. "),s()(),a(25,"section")(26,"h2"),u(27,"Defini\u021Bii"),s(),a(28,"p")(29,"strong"),u(30,"Platform\u0103:"),s(),u(31," aplica\u021Bia ExpertEase care faciliteaz\u0103 conexiunea dintre clien\u021Bi \u0219i speciali\u0219ti."),s(),a(32,"p")(33,"strong"),u(34,"Client:"),s(),u(35," utilizator care solicit\u0103 servicii."),s(),a(36,"p")(37,"strong"),u(38,"Specialist:"),s(),u(39," utilizator care ofer\u0103 servicii."),s()(),a(40,"section")(41,"h2"),u(42,"Condi\u021Bii de utilizare"),s(),a(43,"ul")(44,"li"),u(45,"Accesul necesit\u0103 crearea unui cont valid."),s(),a(46,"li"),u(47,"Utilizatorii trebuie s\u0103 aib\u0103 minim 18 ani."),s(),a(48,"li"),u(49,"Este interzis\u0103 utilizarea platformei \xEEn scopuri ilegale, abuzive sau frauduloase."),s()()(),a(50,"section")(51,"h2"),u(52,"Obliga\u021Biile utilizatorilor"),s(),a(53,"p")(54,"strong"),u(55,"Clien\u021Bi:"),s()(),a(56,"ul")(57,"li"),u(58,"S\u0103 ofere informa\u021Bii clare \u0219i reale despre cerere."),s(),a(59,"li"),u(60,"S\u0103 respecte termenii agrea\u021Bi cu specialistul."),s()(),a(61,"p")(62,"strong"),u(63,"Speciali\u0219ti:"),s()(),a(64,"ul")(65,"li"),u(66,"S\u0103 ofere servicii conforme cu descrierea."),s(),a(67,"li"),u(68,"S\u0103 respecte confiden\u021Bialitatea \u0219i termenele stabilite."),s()()(),a(69,"section")(70,"h2"),u(71,"Pl\u0103\u021Bi \u0219i comisioane"),s(),a(72,"p"),u(73," Pl\u0103\u021Bile se realizeaz\u0103 prin Stripe. Comisioanele platformei, dac\u0103 exist\u0103, vor fi afi\u0219ate transparent \xEEnainte de confirmarea serviciului. "),s()(),a(74,"section")(75,"h2"),u(76,"Limitarea r\u0103spunderii"),s(),a(77,"p"),u(78," Platforma ExpertEase ac\u021Bioneaz\u0103 doar ca intermediar. Nu ne asum\u0103m responsabilitatea pentru calitatea serviciilor oferite de speciali\u0219ti. "),s()(),a(79,"section")(80,"h2"),u(81,"Suspendarea contului"),s(),a(82,"p"),u(83," Ne rezerv\u0103m dreptul de a suspenda sau \u0219terge conturi care \xEEncalc\u0103 ace\u0219ti termeni sau folosesc platforma \xEEn mod abuziv. "),s()(),a(84,"section")(85,"h2"),u(86,"Protec\u021Bia datelor"),s(),a(87,"p"),u(88," Datele personale sunt gestionate conform "),a(89,"a",5),u(90,"Politicii de confiden\u021Bialitate"),s(),u(91,". "),s()(),a(92,"section")(93,"h2"),u(94,"Modificarea termenilor"),s(),a(95,"p"),u(96," Putem actualiza ace\u0219ti termeni periodic. Modific\u0103rile vor fi anun\u021Bate \xEEn aplica\u021Bie \u0219i vor intra \xEEn vigoare la publicare. "),s()(),a(97,"section")(98,"h2"),u(99,"Contact"),s(),a(100,"p"),u(101," Pentru \xEEntreb\u0103ri legate de ace\u0219ti termeni, ne pute\u021Bi contacta la: "),a(102,"strong"),u(103,"contact@expertease.ro"),s()()()())},styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.home-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%}.terms-container[_ngcontent-%COMP%]{max-width:900px;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6}.terms-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff}.terms-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d}.terms-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-top:8px;margin-bottom:12px}.terms-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.privacy-link[_ngcontent-%COMP%]{color:#000;text-decoration:none;font-weight:700}.privacy-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var Zo=class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=U({type:i,selectors:[["app-privacy"]],decls:103,vars:0,consts:[[1,"home-wrapper"],[1,"home-header"],[2,"font-style","italic"],[1,"brand-highlight"],[1,"privacy-container"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),u(3,"Ai o \u021Beav\u0103 spart\u0103?"),s(),a(4,"h1",2),u(5,"\u021Ai s-a stricat chiuveta?"),s(),a(6,"h1"),u(7,"Nu-i problem\u0103, g\u0103se\u0219te specialistul potrivit pe "),a(8,"strong",3),u(9,"ExpertEase"),s(),u(10,"!"),s()(),a(11,"p"),u(12,"Peste "),a(13,"strong"),u(14,"100 de speciali\u0219ti"),s(),u(15," \xEEnregistra\u021Bi pe platforma noastr\u0103!"),s()(),a(16,"div",4)(17,"section")(18,"h2"),u(19,"Politica de Confiden\u021Bialitate"),s(),a(20,"p"),u(21," Aceast\u0103 politic\u0103 explic\u0103 modul \xEEn care ExpertEase colecteaz\u0103, utilizeaz\u0103 \u0219i protejeaz\u0103 datele personale ale utilizatorilor platformei. Ne angaj\u0103m s\u0103 respect\u0103m confiden\u021Bialitatea \u0219i s\u0103 protej\u0103m toate informa\u021Biile personale furnizate. "),s()(),a(22,"section")(23,"h2"),u(24,"Tipuri de date colectate"),s(),a(25,"ul")(26,"li"),u(27,"Nume \u0219i prenume"),s(),a(28,"li"),u(29,"Adres\u0103 de email"),s(),a(30,"li"),u(31,"Num\u0103r de telefon (dac\u0103 este furnizat)"),s(),a(32,"li"),u(33,"Mesaje transmise prin formularele de contact"),s(),a(34,"li"),u(35,"Date pentru autentificare \xEEn cont"),s(),a(36,"li"),u(37,"Date de plat\u0103 (prin Stripe)"),s(),a(38,"li"),u(39,"Informa\u021Bii despre dispozitiv \u0219i IP (pentru securitate)"),s()()(),a(40,"section")(41,"h2"),u(42,"Scopul prelucr\u0103rii datelor"),s(),a(43,"ul")(44,"li"),u(45,"Crearea \u0219i administrarea contului de utilizator"),s(),a(46,"li"),u(47,"Procesarea solicit\u0103rilor \u0219i a pl\u0103\u021Bilor"),s(),a(48,"li"),u(49,"Comunicare \xEEntre utilizatori (client\u2013specialist)"),s(),a(50,"li"),u(51,"\xCEmbun\u0103t\u0103\u021Birea platformei \u0219i a experien\u021Bei de utilizare"),s(),a(52,"li"),u(53,"Respectarea obliga\u021Biilor legale"),s()()(),a(54,"section")(55,"h2"),u(56,"Temeiuri legale (GDPR)"),s(),a(57,"p"),u(58," Datele sunt colectate \xEEn baza consim\u021B\u0103m\xE2ntului dumneavoastr\u0103, a interesului legitim al platformei sau \xEEn scopul execut\u0103rii unui contract. "),s()(),a(59,"section")(60,"h2"),u(61,"Durata de stocare a datelor"),s(),a(62,"p"),u(63," Datele sunt p\u0103strate pe durata existen\u021Bei contului sau conform obliga\u021Biilor legale. Utilizatorii pot solicita \u0219tergerea acestora \xEEn orice moment. "),s()(),a(64,"section")(65,"h2"),u(66,"Partajarea datelor"),s(),a(67,"p"),u(68," Datele nu sunt v\xE2ndute c\u0103tre ter\u021Bi. Ele pot fi partajate doar cu furnizori de servicii esen\u021Biali (ex: Stripe pentru procesarea pl\u0103\u021Bilor). "),s()(),a(69,"section")(70,"h2"),u(71,"Drepturile utilizatorilor"),s(),a(72,"ul")(73,"li"),u(74,"Dreptul de acces la date"),s(),a(75,"li"),u(76,"Dreptul de rectificare sau \u0219tergere"),s(),a(77,"li"),u(78,"Dreptul de restric\u021Bionare a prelucr\u0103rii"),s(),a(79,"li"),u(80,"Dreptul de opozi\u021Bie"),s(),a(81,"li"),u(82,"Dreptul la portabilitatea datelor"),s(),a(83,"li"),u(84,"Dreptul de a depune pl\xE2ngere la ANSPDCP"),s()()(),a(85,"section")(86,"h2"),u(87,"Securitatea datelor"),s(),a(88,"p"),u(89," Implement\u0103m m\u0103suri tehnice \u0219i organizatorice pentru a proteja datele (criptare, acces limitat, autentificare securizat\u0103). "),s()(),a(90,"section")(91,"h2"),u(92,"Modific\u0103ri ale politicii"),s(),a(93,"p"),u(94," Politica poate fi actualizat\u0103. Modific\u0103rile vor fi publicate pe aceast\u0103 pagin\u0103 \u0219i vor intra \xEEn vigoare imediat. "),s()(),a(95,"section")(96,"h2"),u(97,"Contact"),s(),a(98,"p"),u(99," Pentru \xEEntreb\u0103ri legate de datele tale, ne po\u021Bi scrie la "),a(100,"strong"),u(101,"contact@expertease.ro"),s(),u(102,". "),s()()())},styles:[".home-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;font-family:Roboto Mono,monospace}.home-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.home-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center}.brand-highlight[_ngcontent-%COMP%]{font-weight:700;letter-spacing:.5px;color:#3c1a7d}.privacy-container[_ngcontent-%COMP%]{max-width:900px;margin:10px auto;padding:0 24px;font-family:Roboto Mono,monospace;font-size:16px;line-height:1.6}.privacy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{border:2px solid #3c1a7d;border-radius:8px;padding:24px;margin-bottom:32px;background-color:#fff}.privacy-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:12px;color:#3c1a7d}.privacy-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:24px;margin-top:8px;margin-bottom:12px}.privacy-container[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}"]})};var es=[{path:"home",component:jr},{path:"about",component:zr},{path:"contact-us",component:Yo},{path:"terms",component:Xo},{path:"privacy",component:Zo},{path:"profile",component:eo},{path:"home/:id",loadComponent:()=>import("./chunk-NFC6HPVP.js").then(i=>i.SpecialistDetailsComponent)},{path:"specialist/:id",component:Ds},{path:"messages",component:jo},{path:"profile/user/become-specialist",component:Go},{path:"profile/user-settings",component:Ho},{path:"profile/user-reviews",component:Qo},{path:"request-form",component:Kn},{path:"register",component:$r},{path:"login",component:Gr},{path:"specialist-details",component:Ds},{path:"service-payment",component:Jo},{path:"admin",canActivate:[Sn,wn],component:Wr,data:{roles:["Admin"]}},{path:"admin/users",canActivate:[Sn,wn],component:Hr,data:{roles:["Admin"]}},{path:"admin/specialists",canActivate:[Sn,wn],component:Qr,data:{roles:["Admin"]}},{path:"admin/categories",canActivate:[Sn,wn],component:Wo,data:{roles:["Admin"]}},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",component:Jr}];var Pa={providers:[Nc({eventCoalescing:!0}),Er(es),jc()]};var Tg=i=>({show:i}),ts=class i{constructor(e,t){this.authService=e;this.router=t;this.router.events.pipe(Oc(n=>n instanceof $c)).subscribe(n=>{console.log("Navigated to:",n)})}title="ExpertEase.Frontend";navbarOpen=!1;toggleNavbar(){this.navbarOpen=!this.navbarOpen}static \u0275fac=function(t){return new(t||i)(R(te),R(xe))};static \u0275cmp=U({type:i,selectors:[["app-root"]],decls:37,vars:3,consts:[[1,"page-container"],[1,"navbar"],["routerLink","/home","title","Acas\u0103",1,"logo-button"],["src","logo.svg","alt","Logo"],[1,"navbar-toggle",3,"click"],[1,"navbar-links",3,"ngClass"],["routerLink","profile/user/become-specialist","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/messages","routerLinkActive","active"],["routerLink","/profile","routerLinkActive","active"],["routerLink","/admin","routerLinkActive","active"],[1,"main-content"],[1,"site-footer"],[1,"footer-content"],[1,"footer-links"],["routerLink","/contact-us","routerLinkActive","active"],["routerLink","/terms","routerLinkActive","active"],["routerLink","/privacy","routerLinkActive","active"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"nav",1)(2,"button",2),B(3,"img",3),s(),a(4,"button",4),E("click",function(){return n.toggleNavbar()}),u(5,"\u2630"),s(),a(6,"ul",5)(7,"li")(8,"a",6),u(9,"Devino specialist!"),s()(),a(10,"li")(11,"a",7),u(12,"Despre noi"),s()(),a(13,"li")(14,"a",8),u(15,"Mesajele tale"),s()(),a(16,"li")(17,"a",9),u(18,"Contul t\u0103u"),s()(),a(19,"li")(20,"a",10),u(21,"Admin Dashboard"),s()()()(),a(22,"div",11),B(23,"router-outlet"),s(),a(24,"footer",12)(25,"div",13)(26,"p"),u(27,"\xA9 2025 ExpertEase. Toate drepturile rezervate."),s(),a(28,"nav",14)(29,"a",7),u(30,"Despre noi"),s(),a(31,"a",15),u(32,"Contacteaz\u0103-ne!"),s(),a(33,"a",16),u(34,"Termeni \u0219i condi\u021Bii"),s(),a(35,"a",17),u(36,"Politic\u0103 de confiden\u021Bialitate"),s()()()()()),t&2&&(h(6),f("ngClass",Xt(1,Tg,n.navbarOpen)))},dependencies:[he,ze,Sr,Et],styles:[".navbar[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;padding:16px 32px;background-color:#1e1e2f;color:#fff;box-shadow:0 2px 2px #0000001a;position:relative}.navbar-toggle[_ngcontent-%COMP%]{display:none;font-size:32px;background:none;border:none;color:#fff;cursor:pointer}.navbar-links[_ngcontent-%COMP%]{list-style:none;display:grid;grid-auto-flow:column;gap:24px;margin:0;padding:0;font-family:Roboto Mono,monospace}.navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:2px 0;transition:border-bottom .2s ease}.navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{border-bottom:2px solid white}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{grid-template-columns:1fr auto;grid-template-rows:auto auto;row-gap:16px}.navbar-toggle[_ngcontent-%COMP%]{display:block}.navbar-links[_ngcontent-%COMP%]{display:none;grid-auto-flow:row;width:100%;grid-column:1/-1}.navbar-links.show[_ngcontent-%COMP%]{display:grid}}.site-footer[_ngcontent-%COMP%]{background-color:#3c1a7d;color:#fff;padding:24px;text-align:center;font-family:Roboto Mono,monospace;margin-top:64px}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.footer-links[_ngcontent-%COMP%]{margin-top:12px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;margin:0 12px;font-size:14px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};qc(ts,ue(L({},Pa),{providers:[...Pa.providers,Er(es)]})).catch(i=>console.error(i));
